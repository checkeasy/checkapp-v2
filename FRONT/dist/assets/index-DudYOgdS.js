var sj=Object.defineProperty;var sv=e=>{throw TypeError(e)};var aj=(e,t,n)=>t in e?sj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var gn=(e,t,n)=>aj(e,typeof t!="symbol"?t+"":t,n),Yd=(e,t,n)=>t.has(e)||sv("Cannot "+n);var J=(e,t,n)=>(Yd(e,t,"read from private field"),n?n.call(e):t.get(e)),rt=(e,t,n)=>t.has(e)?sv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Fe=(e,t,n,r)=>(Yd(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),vn=(e,t,n)=>(Yd(e,t,"access private method"),n);var lc=(e,t,n,r)=>({set _(o){Fe(e,t,o,n)},get _(){return J(e,t,r)}});function ij(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function s0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a0={exports:{}},qu={},i0={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl=Symbol.for("react.element"),lj=Symbol.for("react.portal"),cj=Symbol.for("react.fragment"),uj=Symbol.for("react.strict_mode"),dj=Symbol.for("react.profiler"),fj=Symbol.for("react.provider"),hj=Symbol.for("react.context"),mj=Symbol.for("react.forward_ref"),pj=Symbol.for("react.suspense"),gj=Symbol.for("react.memo"),vj=Symbol.for("react.lazy"),av=Symbol.iterator;function xj(e){return e===null||typeof e!="object"?null:(e=av&&e[av]||e["@@iterator"],typeof e=="function"?e:null)}var l0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c0=Object.assign,u0={};function fi(e,t,n){this.props=e,this.context=t,this.refs=u0,this.updater=n||l0}fi.prototype.isReactComponent={};fi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function d0(){}d0.prototype=fi.prototype;function Dm(e,t,n){this.props=e,this.context=t,this.refs=u0,this.updater=n||l0}var Am=Dm.prototype=new d0;Am.constructor=Dm;c0(Am,fi.prototype);Am.isPureReactComponent=!0;var iv=Array.isArray,f0=Object.prototype.hasOwnProperty,Mm={current:null},h0={key:!0,ref:!0,__self:!0,__source:!0};function m0(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)f0.call(t,r)&&!h0.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:Dl,type:e,key:s,ref:i,props:o,_owner:Mm.current}}function yj(e,t){return{$$typeof:Dl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dl}function wj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lv=/\/+/g;function Qd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wj(""+e.key):t.toString(36)}function Lc(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Dl:case lj:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Qd(i,0):r,iv(o)?(n="",e!=null&&(n=e.replace(lv,"$&/")+"/"),Lc(o,t,n,"",function(u){return u})):o!=null&&(Lm(o)&&(o=yj(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(lv,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",iv(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+Qd(s,l);i+=Lc(s,t,n,c,o)}else if(c=xj(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+Qd(s,l++),i+=Lc(s,t,n,c,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function cc(e,t,n){if(e==null)return e;var r=[],o=0;return Lc(e,r,"","",function(s){return t.call(n,s,o++)}),r}function bj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dn={current:null},$c={transition:null},kj={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:$c,ReactCurrentOwner:Mm};function p0(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:cc,forEach:function(e,t,n){cc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return cc(e,function(){t++}),t},toArray:function(e){return cc(e,function(t){return t})||[]},only:function(e){if(!Lm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};et.Component=fi;et.Fragment=cj;et.Profiler=dj;et.PureComponent=Dm;et.StrictMode=uj;et.Suspense=pj;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kj;et.act=p0;et.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=c0({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=Mm.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)f0.call(t,c)&&!h0.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Dl,type:e.type,key:o,ref:s,props:r,_owner:i}};et.createContext=function(e){return e={$$typeof:hj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fj,_context:e},e.Consumer=e};et.createElement=m0;et.createFactory=function(e){var t=m0.bind(null,e);return t.type=e,t};et.createRef=function(){return{current:null}};et.forwardRef=function(e){return{$$typeof:mj,render:e}};et.isValidElement=Lm;et.lazy=function(e){return{$$typeof:vj,_payload:{_status:-1,_result:e},_init:bj}};et.memo=function(e,t){return{$$typeof:gj,type:e,compare:t===void 0?null:t}};et.startTransition=function(e){var t=$c.transition;$c.transition={};try{e()}finally{$c.transition=t}};et.unstable_act=p0;et.useCallback=function(e,t){return Dn.current.useCallback(e,t)};et.useContext=function(e){return Dn.current.useContext(e)};et.useDebugValue=function(){};et.useDeferredValue=function(e){return Dn.current.useDeferredValue(e)};et.useEffect=function(e,t){return Dn.current.useEffect(e,t)};et.useId=function(){return Dn.current.useId()};et.useImperativeHandle=function(e,t,n){return Dn.current.useImperativeHandle(e,t,n)};et.useInsertionEffect=function(e,t){return Dn.current.useInsertionEffect(e,t)};et.useLayoutEffect=function(e,t){return Dn.current.useLayoutEffect(e,t)};et.useMemo=function(e,t){return Dn.current.useMemo(e,t)};et.useReducer=function(e,t,n){return Dn.current.useReducer(e,t,n)};et.useRef=function(e){return Dn.current.useRef(e)};et.useState=function(e){return Dn.current.useState(e)};et.useSyncExternalStore=function(e,t,n){return Dn.current.useSyncExternalStore(e,t,n)};et.useTransition=function(){return Dn.current.useTransition()};et.version="18.3.1";i0.exports=et;var f=i0.exports;const V=s0(f),$m=ij({__proto__:null,default:V},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cj=f,Sj=Symbol.for("react.element"),Nj=Symbol.for("react.fragment"),Ij=Object.prototype.hasOwnProperty,jj=Cj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ej={key:!0,ref:!0,__self:!0,__source:!0};function g0(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Ij.call(t,r)&&!Ej.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Sj,type:e,key:s,ref:i,props:o,_owner:jj.current}}qu.Fragment=Nj;qu.jsx=g0;qu.jsxs=g0;a0.exports=qu;var a=a0.exports,v0={exports:{}},ir={},x0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,O){var H=T.length;T.push(O);e:for(;0<H;){var q=H-1>>>1,Z=T[q];if(0<o(Z,O))T[q]=O,T[H]=Z,H=q;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var O=T[0],H=T.pop();if(H!==O){T[0]=H;e:for(var q=0,Z=T.length,G=Z>>>1;q<G;){var K=2*(q+1)-1,re=T[K],ie=K+1,Y=T[ie];if(0>o(re,H))ie<Z&&0>o(Y,re)?(T[q]=Y,T[ie]=H,q=ie):(T[q]=re,T[K]=H,q=K);else if(ie<Z&&0>o(Y,H))T[q]=Y,T[ie]=H,q=ie;else break e}}return O}function o(T,O){var H=T.sortIndex-O.sortIndex;return H!==0?H:T.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,b=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(T){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=T)r(u),O.sortIndex=O.expirationTime,t(c,O);else break;O=n(u)}}function k(T){if(x=!1,y(T),!b)if(n(c)!==null)b=!0,A(C);else{var O=n(u);O!==null&&R(k,O.startTime-T)}}function C(T,O){b=!1,x&&(x=!1,g(I),I=-1),p=!0;var H=m;try{for(y(O),h=n(c);h!==null&&(!(h.expirationTime>O)||T&&!_());){var q=h.callback;if(typeof q=="function"){h.callback=null,m=h.priorityLevel;var Z=q(h.expirationTime<=O);O=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(c)&&r(c),y(O)}else r(c);h=n(c)}if(h!==null)var G=!0;else{var K=n(u);K!==null&&R(k,K.startTime-O),G=!1}return G}finally{h=null,m=H,p=!1}}var N=!1,S=null,I=-1,P=5,E=-1;function _(){return!(e.unstable_now()-E<P)}function j(){if(S!==null){var T=e.unstable_now();E=T;var O=!0;try{O=S(!0,T)}finally{O?L():(N=!1,S=null)}}else N=!1}var L;if(typeof v=="function")L=function(){v(j)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,z=D.port2;D.port1.onmessage=j,L=function(){z.postMessage(null)}}else L=function(){w(j,0)};function A(T){S=T,N||(N=!0,L())}function R(T,O){I=w(function(){T(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,A(C))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(m){case 1:case 2:case 3:var O=3;break;default:O=m}var H=m;m=O;try{return T()}finally{m=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,O){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var H=m;m=T;try{return O()}finally{m=H}},e.unstable_scheduleCallback=function(T,O,H){var q=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,T){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=H+Z,T={id:d++,callback:O,priorityLevel:T,startTime:H,expirationTime:Z,sortIndex:-1},H>q?(T.sortIndex=H,t(u,T),n(c)===null&&T===n(u)&&(x?(g(I),I=-1):x=!0,R(k,H-q))):(T.sortIndex=Z,t(c,T),b||p||(b=!0,A(C))),T},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(T){var O=m;return function(){var H=m;m=O;try{return T.apply(this,arguments)}finally{m=H}}}})(y0);x0.exports=y0;var Pj=x0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tj=f,rr=Pj;function de(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w0=new Set,tl={};function ta(e,t){Xa(e,t),Xa(e+"Capture",t)}function Xa(e,t){for(tl[e]=t,e=0;e<t.length;e++)w0.add(t[e])}var Co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rh=Object.prototype.hasOwnProperty,Rj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cv={},uv={};function _j(e){return rh.call(uv,e)?!0:rh.call(cv,e)?!1:Rj.test(e)?uv[e]=!0:(cv[e]=!0,!1)}function Oj(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Dj(e,t,n,r){if(t===null||typeof t>"u"||Oj(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function An(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pn[e]=new An(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pn[t]=new An(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pn[e]=new An(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pn[e]=new An(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pn[e]=new An(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pn[e]=new An(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pn[e]=new An(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pn[e]=new An(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pn[e]=new An(e,5,!1,e.toLowerCase(),null,!1,!1)});var Um=/[\-:]([a-z])/g;function Fm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Um,Fm);pn[t]=new An(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Um,Fm);pn[t]=new An(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Um,Fm);pn[t]=new An(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pn[e]=new An(e,1,!1,e.toLowerCase(),null,!1,!1)});pn.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pn[e]=new An(e,1,!1,e.toLowerCase(),null,!0,!0)});function zm(e,t,n,r){var o=pn.hasOwnProperty(t)?pn[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Dj(t,n,o,r)&&(n=null),r||o===null?_j(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Po=Tj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uc=Symbol.for("react.element"),xa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),Bm=Symbol.for("react.strict_mode"),oh=Symbol.for("react.profiler"),b0=Symbol.for("react.provider"),k0=Symbol.for("react.context"),Wm=Symbol.for("react.forward_ref"),sh=Symbol.for("react.suspense"),ah=Symbol.for("react.suspense_list"),Hm=Symbol.for("react.memo"),Uo=Symbol.for("react.lazy"),C0=Symbol.for("react.offscreen"),dv=Symbol.iterator;function Ii(e){return e===null||typeof e!="object"?null:(e=dv&&e[dv]||e["@@iterator"],typeof e=="function"?e:null)}var Ft=Object.assign,Xd;function $i(e){if(Xd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xd=t&&t[1]||""}return`
`+Xd+e}var Jd=!1;function Zd(e,t){if(!e||Jd)return"";Jd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Jd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$i(e):""}function Aj(e){switch(e.tag){case 5:return $i(e.type);case 16:return $i("Lazy");case 13:return $i("Suspense");case 19:return $i("SuspenseList");case 0:case 2:case 15:return e=Zd(e.type,!1),e;case 11:return e=Zd(e.type.render,!1),e;case 1:return e=Zd(e.type,!0),e;default:return""}}function ih(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case xa:return"Portal";case oh:return"Profiler";case Bm:return"StrictMode";case sh:return"Suspense";case ah:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case k0:return(e.displayName||"Context")+".Consumer";case b0:return(e._context.displayName||"Context")+".Provider";case Wm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Hm:return t=e.displayName||null,t!==null?t:ih(e.type)||"Memo";case Uo:t=e._payload,e=e._init;try{return ih(e(t))}catch{}}return null}function Mj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ih(t);case 8:return t===Bm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function is(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function S0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lj(e){var t=S0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dc(e){e._valueTracker||(e._valueTracker=Lj(e))}function N0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=S0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function nu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lh(e,t){var n=t.checked;return Ft({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function fv(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=is(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function I0(e,t){t=t.checked,t!=null&&zm(e,"checked",t,!1)}function ch(e,t){I0(e,t);var n=is(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?uh(e,t.type,n):t.hasOwnProperty("defaultValue")&&uh(e,t.type,is(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function uh(e,t,n){(t!=="number"||nu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ui=Array.isArray;function Ra(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+is(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function dh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(de(91));return Ft({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(de(92));if(Ui(n)){if(1<n.length)throw Error(de(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:is(n)}}function j0(e,t){var n=is(t.value),r=is(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function E0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?E0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fc,P0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fc=fc||document.createElement("div"),fc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function nl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$j=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(e){$j.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hi[t]=Hi[e]})});function T0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Hi.hasOwnProperty(e)&&Hi[e]?(""+t).trim():t+"px"}function R0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=T0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Uj=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hh(e,t){if(t){if(Uj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(de(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(de(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(de(61))}if(t.style!=null&&typeof t.style!="object")throw Error(de(62))}}function mh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=null;function Vm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gh=null,_a=null,Oa=null;function gv(e){if(e=Ll(e)){if(typeof gh!="function")throw Error(de(280));var t=e.stateNode;t&&(t=Xu(t),gh(e.stateNode,e.type,t))}}function _0(e){_a?Oa?Oa.push(e):Oa=[e]:_a=e}function O0(){if(_a){var e=_a,t=Oa;if(Oa=_a=null,gv(e),t)for(e=0;e<t.length;e++)gv(t[e])}}function D0(e,t){return e(t)}function A0(){}var ef=!1;function M0(e,t,n){if(ef)return e(t,n);ef=!0;try{return D0(e,t,n)}finally{ef=!1,(_a!==null||Oa!==null)&&(A0(),O0())}}function rl(e,t){var n=e.stateNode;if(n===null)return null;var r=Xu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(de(231,t,typeof n));return n}var vh=!1;if(Co)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){vh=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{vh=!1}function Fj(e,t,n,r,o,s,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Vi=!1,ru=null,ou=!1,xh=null,zj={onError:function(e){Vi=!0,ru=e}};function Bj(e,t,n,r,o,s,i,l,c){Vi=!1,ru=null,Fj.apply(zj,arguments)}function Wj(e,t,n,r,o,s,i,l,c){if(Bj.apply(this,arguments),Vi){if(Vi){var u=ru;Vi=!1,ru=null}else throw Error(de(198));ou||(ou=!0,xh=u)}}function na(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function L0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vv(e){if(na(e)!==e)throw Error(de(188))}function Hj(e){var t=e.alternate;if(!t){if(t=na(e),t===null)throw Error(de(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return vv(o),e;if(s===r)return vv(o),t;s=s.sibling}throw Error(de(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(de(189))}}if(n.alternate!==r)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?e:t}function $0(e){return e=Hj(e),e!==null?U0(e):null}function U0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=U0(e);if(t!==null)return t;e=e.sibling}return null}var F0=rr.unstable_scheduleCallback,xv=rr.unstable_cancelCallback,Vj=rr.unstable_shouldYield,qj=rr.unstable_requestPaint,Vt=rr.unstable_now,Gj=rr.unstable_getCurrentPriorityLevel,qm=rr.unstable_ImmediatePriority,z0=rr.unstable_UserBlockingPriority,su=rr.unstable_NormalPriority,Kj=rr.unstable_LowPriority,B0=rr.unstable_IdlePriority,Gu=null,eo=null;function Yj(e){if(eo&&typeof eo.onCommitFiberRoot=="function")try{eo.onCommitFiberRoot(Gu,e,void 0,(e.current.flags&128)===128)}catch{}}var Rr=Math.clz32?Math.clz32:Jj,Qj=Math.log,Xj=Math.LN2;function Jj(e){return e>>>=0,e===0?32:31-(Qj(e)/Xj|0)|0}var hc=64,mc=4194304;function Fi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function au(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=Fi(l):(s&=i,s!==0&&(r=Fi(s)))}else i=n&~o,i!==0?r=Fi(i):s!==0&&(r=Fi(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Rr(t),o=1<<n,r|=e[n],t&=~o;return r}function Zj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eE(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-Rr(s),l=1<<i,c=o[i];c===-1?(!(l&n)||l&r)&&(o[i]=Zj(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function yh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function W0(){var e=hc;return hc<<=1,!(hc&4194240)&&(hc=64),e}function tf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Al(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rr(t),e[t]=n}function tE(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Rr(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Gm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Rr(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var vt=0;function H0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var V0,Km,q0,G0,K0,wh=!1,pc=[],Jo=null,Zo=null,es=null,ol=new Map,sl=new Map,zo=[],nE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yv(e,t){switch(e){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":ol.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(t.pointerId)}}function Ei(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Ll(t),t!==null&&Km(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function rE(e,t,n,r,o){switch(t){case"focusin":return Jo=Ei(Jo,e,t,n,r,o),!0;case"dragenter":return Zo=Ei(Zo,e,t,n,r,o),!0;case"mouseover":return es=Ei(es,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return ol.set(s,Ei(ol.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,sl.set(s,Ei(sl.get(s)||null,e,t,n,r,o)),!0}return!1}function Y0(e){var t=Rs(e.target);if(t!==null){var n=na(t);if(n!==null){if(t=n.tag,t===13){if(t=L0(n),t!==null){e.blockedOn=t,K0(e.priority,function(){q0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ph=r,n.target.dispatchEvent(r),ph=null}else return t=Ll(n),t!==null&&Km(t),e.blockedOn=n,!1;t.shift()}return!0}function wv(e,t,n){Uc(e)&&n.delete(t)}function oE(){wh=!1,Jo!==null&&Uc(Jo)&&(Jo=null),Zo!==null&&Uc(Zo)&&(Zo=null),es!==null&&Uc(es)&&(es=null),ol.forEach(wv),sl.forEach(wv)}function Pi(e,t){e.blockedOn===t&&(e.blockedOn=null,wh||(wh=!0,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,oE)))}function al(e){function t(o){return Pi(o,e)}if(0<pc.length){Pi(pc[0],e);for(var n=1;n<pc.length;n++){var r=pc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Jo!==null&&Pi(Jo,e),Zo!==null&&Pi(Zo,e),es!==null&&Pi(es,e),ol.forEach(t),sl.forEach(t),n=0;n<zo.length;n++)r=zo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<zo.length&&(n=zo[0],n.blockedOn===null);)Y0(n),n.blockedOn===null&&zo.shift()}var Da=Po.ReactCurrentBatchConfig,iu=!0;function sE(e,t,n,r){var o=vt,s=Da.transition;Da.transition=null;try{vt=1,Ym(e,t,n,r)}finally{vt=o,Da.transition=s}}function aE(e,t,n,r){var o=vt,s=Da.transition;Da.transition=null;try{vt=4,Ym(e,t,n,r)}finally{vt=o,Da.transition=s}}function Ym(e,t,n,r){if(iu){var o=bh(e,t,n,r);if(o===null)ff(e,t,r,lu,n),yv(e,r);else if(rE(o,e,t,n,r))r.stopPropagation();else if(yv(e,r),t&4&&-1<nE.indexOf(e)){for(;o!==null;){var s=Ll(o);if(s!==null&&V0(s),s=bh(e,t,n,r),s===null&&ff(e,t,r,lu,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else ff(e,t,r,null,n)}}var lu=null;function bh(e,t,n,r){if(lu=null,e=Vm(r),e=Rs(e),e!==null)if(t=na(e),t===null)e=null;else if(n=t.tag,n===13){if(e=L0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return lu=e,null}function Q0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gj()){case qm:return 1;case z0:return 4;case su:case Kj:return 16;case B0:return 536870912;default:return 16}default:return 16}}var Yo=null,Qm=null,Fc=null;function X0(){if(Fc)return Fc;var e,t=Qm,n=t.length,r,o="value"in Yo?Yo.value:Yo.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return Fc=o.slice(e,1<r?1-r:void 0)}function zc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gc(){return!0}function bv(){return!1}function lr(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?gc:bv,this.isPropagationStopped=bv,this}return Ft(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),t}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xm=lr(hi),Ml=Ft({},hi,{view:0,detail:0}),iE=lr(Ml),nf,rf,Ti,Ku=Ft({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ti&&(Ti&&e.type==="mousemove"?(nf=e.screenX-Ti.screenX,rf=e.screenY-Ti.screenY):rf=nf=0,Ti=e),nf)},movementY:function(e){return"movementY"in e?e.movementY:rf}}),kv=lr(Ku),lE=Ft({},Ku,{dataTransfer:0}),cE=lr(lE),uE=Ft({},Ml,{relatedTarget:0}),of=lr(uE),dE=Ft({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),fE=lr(dE),hE=Ft({},hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mE=lr(hE),pE=Ft({},hi,{data:0}),Cv=lr(pE),gE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xE[e])?!!t[e]:!1}function Jm(){return yE}var wE=Ft({},Ml,{key:function(e){if(e.key){var t=gE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jm,charCode:function(e){return e.type==="keypress"?zc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bE=lr(wE),kE=Ft({},Ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sv=lr(kE),CE=Ft({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jm}),SE=lr(CE),NE=Ft({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),IE=lr(NE),jE=Ft({},Ku,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),EE=lr(jE),PE=[9,13,27,32],Zm=Co&&"CompositionEvent"in window,qi=null;Co&&"documentMode"in document&&(qi=document.documentMode);var TE=Co&&"TextEvent"in window&&!qi,J0=Co&&(!Zm||qi&&8<qi&&11>=qi),Nv=" ",Iv=!1;function Z0(e,t){switch(e){case"keyup":return PE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ew(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wa=!1;function RE(e,t){switch(e){case"compositionend":return ew(t);case"keypress":return t.which!==32?null:(Iv=!0,Nv);case"textInput":return e=t.data,e===Nv&&Iv?null:e;default:return null}}function _E(e,t){if(wa)return e==="compositionend"||!Zm&&Z0(e,t)?(e=X0(),Fc=Qm=Yo=null,wa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return J0&&t.locale!=="ko"?null:t.data;default:return null}}var OE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OE[e.type]:t==="textarea"}function tw(e,t,n,r){_0(r),t=cu(t,"onChange"),0<t.length&&(n=new Xm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gi=null,il=null;function DE(e){fw(e,0)}function Yu(e){var t=Ca(e);if(N0(t))return e}function AE(e,t){if(e==="change")return t}var nw=!1;if(Co){var sf;if(Co){var af="oninput"in document;if(!af){var Ev=document.createElement("div");Ev.setAttribute("oninput","return;"),af=typeof Ev.oninput=="function"}sf=af}else sf=!1;nw=sf&&(!document.documentMode||9<document.documentMode)}function Pv(){Gi&&(Gi.detachEvent("onpropertychange",rw),il=Gi=null)}function rw(e){if(e.propertyName==="value"&&Yu(il)){var t=[];tw(t,il,e,Vm(e)),M0(DE,t)}}function ME(e,t,n){e==="focusin"?(Pv(),Gi=t,il=n,Gi.attachEvent("onpropertychange",rw)):e==="focusout"&&Pv()}function LE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yu(il)}function $E(e,t){if(e==="click")return Yu(t)}function UE(e,t){if(e==="input"||e==="change")return Yu(t)}function FE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Or=typeof Object.is=="function"?Object.is:FE;function ll(e,t){if(Or(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!rh.call(t,o)||!Or(e[o],t[o]))return!1}return!0}function Tv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rv(e,t){var n=Tv(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tv(n)}}function ow(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ow(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sw(){for(var e=window,t=nu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=nu(e.document)}return t}function ep(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zE(e){var t=sw(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ow(n.ownerDocument.documentElement,n)){if(r!==null&&ep(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Rv(n,s);var i=Rv(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BE=Co&&"documentMode"in document&&11>=document.documentMode,ba=null,kh=null,Ki=null,Ch=!1;function _v(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ch||ba==null||ba!==nu(r)||(r=ba,"selectionStart"in r&&ep(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ki&&ll(Ki,r)||(Ki=r,r=cu(kh,"onSelect"),0<r.length&&(t=new Xm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ba)))}function vc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ka={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},lf={},aw={};Co&&(aw=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Qu(e){if(lf[e])return lf[e];if(!ka[e])return e;var t=ka[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in aw)return lf[e]=t[n];return e}var iw=Qu("animationend"),lw=Qu("animationiteration"),cw=Qu("animationstart"),uw=Qu("transitionend"),dw=new Map,Ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(e,t){dw.set(e,t),ta(t,[e])}for(var cf=0;cf<Ov.length;cf++){var uf=Ov[cf],WE=uf.toLowerCase(),HE=uf[0].toUpperCase()+uf.slice(1);fs(WE,"on"+HE)}fs(iw,"onAnimationEnd");fs(lw,"onAnimationIteration");fs(cw,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(uw,"onTransitionEnd");Xa("onMouseEnter",["mouseout","mouseover"]);Xa("onMouseLeave",["mouseout","mouseover"]);Xa("onPointerEnter",["pointerout","pointerover"]);Xa("onPointerLeave",["pointerout","pointerover"]);ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VE=new Set("cancel close invalid load scroll toggle".split(" ").concat(zi));function Dv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Wj(r,t,void 0,e),e.currentTarget=null}function fw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&o.isPropagationStopped())break e;Dv(o,l,u),s=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&o.isPropagationStopped())break e;Dv(o,l,u),s=c}}}if(ou)throw e=xh,ou=!1,xh=null,e}function Et(e,t){var n=t[Eh];n===void 0&&(n=t[Eh]=new Set);var r=e+"__bubble";n.has(r)||(hw(t,e,2,!1),n.add(r))}function df(e,t,n){var r=0;t&&(r|=4),hw(n,e,r,t)}var xc="_reactListening"+Math.random().toString(36).slice(2);function cl(e){if(!e[xc]){e[xc]=!0,w0.forEach(function(n){n!=="selectionchange"&&(VE.has(n)||df(n,!1,e),df(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xc]||(t[xc]=!0,df("selectionchange",!1,t))}}function hw(e,t,n,r){switch(Q0(t)){case 1:var o=sE;break;case 4:o=aE;break;default:o=Ym}n=o.bind(null,t,n,e),o=void 0,!vh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ff(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;l!==null;){if(i=Rs(l),i===null)return;if(c=i.tag,c===5||c===6){r=s=i;continue e}l=l.parentNode}}r=r.return}M0(function(){var u=s,d=Vm(n),h=[];e:{var m=dw.get(e);if(m!==void 0){var p=Xm,b=e;switch(e){case"keypress":if(zc(n)===0)break e;case"keydown":case"keyup":p=bE;break;case"focusin":b="focus",p=of;break;case"focusout":b="blur",p=of;break;case"beforeblur":case"afterblur":p=of;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=kv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=cE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=SE;break;case iw:case lw:case cw:p=fE;break;case uw:p=IE;break;case"scroll":p=iE;break;case"wheel":p=EE;break;case"copy":case"cut":case"paste":p=mE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Sv}var x=(t&4)!==0,w=!x&&e==="scroll",g=x?m!==null?m+"Capture":null:m;x=[];for(var v=u,y;v!==null;){y=v;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,g!==null&&(k=rl(v,g),k!=null&&x.push(ul(v,k,y)))),w)break;v=v.return}0<x.length&&(m=new p(m,b,null,n,d),h.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==ph&&(b=n.relatedTarget||n.fromElement)&&(Rs(b)||b[So]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=u,b=b?Rs(b):null,b!==null&&(w=na(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(x=kv,k="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(x=Sv,k="onPointerLeave",g="onPointerEnter",v="pointer"),w=p==null?m:Ca(p),y=b==null?m:Ca(b),m=new x(k,v+"leave",p,n,d),m.target=w,m.relatedTarget=y,k=null,Rs(d)===u&&(x=new x(g,v+"enter",b,n,d),x.target=y,x.relatedTarget=w,k=x),w=k,p&&b)t:{for(x=p,g=b,v=0,y=x;y;y=da(y))v++;for(y=0,k=g;k;k=da(k))y++;for(;0<v-y;)x=da(x),v--;for(;0<y-v;)g=da(g),y--;for(;v--;){if(x===g||g!==null&&x===g.alternate)break t;x=da(x),g=da(g)}x=null}else x=null;p!==null&&Av(h,m,p,x,!1),b!==null&&w!==null&&Av(h,w,b,x,!0)}}e:{if(m=u?Ca(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var C=AE;else if(jv(m))if(nw)C=UE;else{C=LE;var N=ME}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=$E);if(C&&(C=C(e,u))){tw(h,C,n,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&uh(m,"number",m.value)}switch(N=u?Ca(u):window,e){case"focusin":(jv(N)||N.contentEditable==="true")&&(ba=N,kh=u,Ki=null);break;case"focusout":Ki=kh=ba=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,_v(h,n,d);break;case"selectionchange":if(BE)break;case"keydown":case"keyup":_v(h,n,d)}var S;if(Zm)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else wa?Z0(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(J0&&n.locale!=="ko"&&(wa||I!=="onCompositionStart"?I==="onCompositionEnd"&&wa&&(S=X0()):(Yo=d,Qm="value"in Yo?Yo.value:Yo.textContent,wa=!0)),N=cu(u,I),0<N.length&&(I=new Cv(I,e,null,n,d),h.push({event:I,listeners:N}),S?I.data=S:(S=ew(n),S!==null&&(I.data=S)))),(S=TE?RE(e,n):_E(e,n))&&(u=cu(u,"onBeforeInput"),0<u.length&&(d=new Cv("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=S))}fw(h,t)})}function ul(e,t,n){return{instance:e,listener:t,currentTarget:n}}function cu(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=rl(e,n),s!=null&&r.unshift(ul(e,s,o)),s=rl(e,t),s!=null&&r.push(ul(e,s,o))),e=e.return}return r}function da(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Av(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,o?(c=rl(n,s),c!=null&&i.unshift(ul(n,c,l))):o||(c=rl(n,s),c!=null&&i.push(ul(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var qE=/\r\n?/g,GE=/\u0000|\uFFFD/g;function Mv(e){return(typeof e=="string"?e:""+e).replace(qE,`
`).replace(GE,"")}function yc(e,t,n){if(t=Mv(t),Mv(e)!==t&&n)throw Error(de(425))}function uu(){}var Sh=null,Nh=null;function Ih(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jh=typeof setTimeout=="function"?setTimeout:void 0,KE=typeof clearTimeout=="function"?clearTimeout:void 0,Lv=typeof Promise=="function"?Promise:void 0,YE=typeof queueMicrotask=="function"?queueMicrotask:typeof Lv<"u"?function(e){return Lv.resolve(null).then(e).catch(QE)}:jh;function QE(e){setTimeout(function(){throw e})}function hf(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),al(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);al(t)}function ts(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $v(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mi=Math.random().toString(36).slice(2),Kr="__reactFiber$"+mi,dl="__reactProps$"+mi,So="__reactContainer$"+mi,Eh="__reactEvents$"+mi,XE="__reactListeners$"+mi,JE="__reactHandles$"+mi;function Rs(e){var t=e[Kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[So]||n[Kr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$v(e);e!==null;){if(n=e[Kr])return n;e=$v(e)}return t}e=n,n=e.parentNode}return null}function Ll(e){return e=e[Kr]||e[So],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ca(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(de(33))}function Xu(e){return e[dl]||null}var Ph=[],Sa=-1;function hs(e){return{current:e}}function Tt(e){0>Sa||(e.current=Ph[Sa],Ph[Sa]=null,Sa--)}function St(e,t){Sa++,Ph[Sa]=e.current,e.current=t}var ls={},bn=hs(ls),Wn=hs(!1),Hs=ls;function Ja(e,t){var n=e.type.contextTypes;if(!n)return ls;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Hn(e){return e=e.childContextTypes,e!=null}function du(){Tt(Wn),Tt(bn)}function Uv(e,t,n){if(bn.current!==ls)throw Error(de(168));St(bn,t),St(Wn,n)}function mw(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(de(108,Mj(e)||"Unknown",o));return Ft({},n,r)}function fu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ls,Hs=bn.current,St(bn,e),St(Wn,Wn.current),!0}function Fv(e,t,n){var r=e.stateNode;if(!r)throw Error(de(169));n?(e=mw(e,t,Hs),r.__reactInternalMemoizedMergedChildContext=e,Tt(Wn),Tt(bn),St(bn,e)):Tt(Wn),St(Wn,n)}var vo=null,Ju=!1,mf=!1;function pw(e){vo===null?vo=[e]:vo.push(e)}function ZE(e){Ju=!0,pw(e)}function ms(){if(!mf&&vo!==null){mf=!0;var e=0,t=vt;try{var n=vo;for(vt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}vo=null,Ju=!1}catch(o){throw vo!==null&&(vo=vo.slice(e+1)),F0(qm,ms),o}finally{vt=t,mf=!1}}return null}var Na=[],Ia=0,hu=null,mu=0,dr=[],fr=0,Vs=null,yo=1,wo="";function js(e,t){Na[Ia++]=mu,Na[Ia++]=hu,hu=e,mu=t}function gw(e,t,n){dr[fr++]=yo,dr[fr++]=wo,dr[fr++]=Vs,Vs=e;var r=yo;e=wo;var o=32-Rr(r)-1;r&=~(1<<o),n+=1;var s=32-Rr(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,yo=1<<32-Rr(t)+o|n<<o|r,wo=s+e}else yo=1<<s|n<<o|r,wo=e}function tp(e){e.return!==null&&(js(e,1),gw(e,1,0))}function np(e){for(;e===hu;)hu=Na[--Ia],Na[Ia]=null,mu=Na[--Ia],Na[Ia]=null;for(;e===Vs;)Vs=dr[--fr],dr[fr]=null,wo=dr[--fr],dr[fr]=null,yo=dr[--fr],dr[fr]=null}var er=null,Jn=null,_t=!1,Tr=null;function vw(e,t){var n=hr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function zv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,er=e,Jn=ts(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,er=e,Jn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vs!==null?{id:yo,overflow:wo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=hr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,er=e,Jn=null,!0):!1;default:return!1}}function Th(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rh(e){if(_t){var t=Jn;if(t){var n=t;if(!zv(e,t)){if(Th(e))throw Error(de(418));t=ts(n.nextSibling);var r=er;t&&zv(e,t)?vw(r,n):(e.flags=e.flags&-4097|2,_t=!1,er=e)}}else{if(Th(e))throw Error(de(418));e.flags=e.flags&-4097|2,_t=!1,er=e}}}function Bv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;er=e}function wc(e){if(e!==er)return!1;if(!_t)return Bv(e),_t=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ih(e.type,e.memoizedProps)),t&&(t=Jn)){if(Th(e))throw xw(),Error(de(418));for(;t;)vw(e,t),t=ts(t.nextSibling)}if(Bv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(de(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Jn=ts(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Jn=null}}else Jn=er?ts(e.stateNode.nextSibling):null;return!0}function xw(){for(var e=Jn;e;)e=ts(e.nextSibling)}function Za(){Jn=er=null,_t=!1}function rp(e){Tr===null?Tr=[e]:Tr.push(e)}var eP=Po.ReactCurrentBatchConfig;function Ri(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var r=n.stateNode}if(!r)throw Error(de(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,e))}return e}function bc(e,t){throw e=Object.prototype.toString.call(t),Error(de(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wv(e){var t=e._init;return t(e._payload)}function yw(e){function t(g,v){if(e){var y=g.deletions;y===null?(g.deletions=[v],g.flags|=16):y.push(v)}}function n(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function o(g,v){return g=ss(g,v),g.index=0,g.sibling=null,g}function s(g,v,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<v?(g.flags|=2,v):y):(g.flags|=2,v)):(g.flags|=1048576,v)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,v,y,k){return v===null||v.tag!==6?(v=bf(y,g.mode,k),v.return=g,v):(v=o(v,y),v.return=g,v)}function c(g,v,y,k){var C=y.type;return C===ya?d(g,v,y.props.children,k,y.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Uo&&Wv(C)===v.type)?(k=o(v,y.props),k.ref=Ri(g,v,y),k.return=g,k):(k=Kc(y.type,y.key,y.props,null,g.mode,k),k.ref=Ri(g,v,y),k.return=g,k)}function u(g,v,y,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=kf(y,g.mode,k),v.return=g,v):(v=o(v,y.children||[]),v.return=g,v)}function d(g,v,y,k,C){return v===null||v.tag!==7?(v=Bs(y,g.mode,k,C),v.return=g,v):(v=o(v,y),v.return=g,v)}function h(g,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=bf(""+v,g.mode,y),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case uc:return y=Kc(v.type,v.key,v.props,null,g.mode,y),y.ref=Ri(g,null,v),y.return=g,y;case xa:return v=kf(v,g.mode,y),v.return=g,v;case Uo:var k=v._init;return h(g,k(v._payload),y)}if(Ui(v)||Ii(v))return v=Bs(v,g.mode,y,null),v.return=g,v;bc(g,v)}return null}function m(g,v,y,k){var C=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:l(g,v,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case uc:return y.key===C?c(g,v,y,k):null;case xa:return y.key===C?u(g,v,y,k):null;case Uo:return C=y._init,m(g,v,C(y._payload),k)}if(Ui(y)||Ii(y))return C!==null?null:d(g,v,y,k,null);bc(g,y)}return null}function p(g,v,y,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(y)||null,l(v,g,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case uc:return g=g.get(k.key===null?y:k.key)||null,c(v,g,k,C);case xa:return g=g.get(k.key===null?y:k.key)||null,u(v,g,k,C);case Uo:var N=k._init;return p(g,v,y,N(k._payload),C)}if(Ui(k)||Ii(k))return g=g.get(y)||null,d(v,g,k,C,null);bc(v,k)}return null}function b(g,v,y,k){for(var C=null,N=null,S=v,I=v=0,P=null;S!==null&&I<y.length;I++){S.index>I?(P=S,S=null):P=S.sibling;var E=m(g,S,y[I],k);if(E===null){S===null&&(S=P);break}e&&S&&E.alternate===null&&t(g,S),v=s(E,v,I),N===null?C=E:N.sibling=E,N=E,S=P}if(I===y.length)return n(g,S),_t&&js(g,I),C;if(S===null){for(;I<y.length;I++)S=h(g,y[I],k),S!==null&&(v=s(S,v,I),N===null?C=S:N.sibling=S,N=S);return _t&&js(g,I),C}for(S=r(g,S);I<y.length;I++)P=p(S,g,I,y[I],k),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?I:P.key),v=s(P,v,I),N===null?C=P:N.sibling=P,N=P);return e&&S.forEach(function(_){return t(g,_)}),_t&&js(g,I),C}function x(g,v,y,k){var C=Ii(y);if(typeof C!="function")throw Error(de(150));if(y=C.call(y),y==null)throw Error(de(151));for(var N=C=null,S=v,I=v=0,P=null,E=y.next();S!==null&&!E.done;I++,E=y.next()){S.index>I?(P=S,S=null):P=S.sibling;var _=m(g,S,E.value,k);if(_===null){S===null&&(S=P);break}e&&S&&_.alternate===null&&t(g,S),v=s(_,v,I),N===null?C=_:N.sibling=_,N=_,S=P}if(E.done)return n(g,S),_t&&js(g,I),C;if(S===null){for(;!E.done;I++,E=y.next())E=h(g,E.value,k),E!==null&&(v=s(E,v,I),N===null?C=E:N.sibling=E,N=E);return _t&&js(g,I),C}for(S=r(g,S);!E.done;I++,E=y.next())E=p(S,g,I,E.value,k),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?I:E.key),v=s(E,v,I),N===null?C=E:N.sibling=E,N=E);return e&&S.forEach(function(j){return t(g,j)}),_t&&js(g,I),C}function w(g,v,y,k){if(typeof y=="object"&&y!==null&&y.type===ya&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case uc:e:{for(var C=y.key,N=v;N!==null;){if(N.key===C){if(C=y.type,C===ya){if(N.tag===7){n(g,N.sibling),v=o(N,y.props.children),v.return=g,g=v;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Uo&&Wv(C)===N.type){n(g,N.sibling),v=o(N,y.props),v.ref=Ri(g,N,y),v.return=g,g=v;break e}n(g,N);break}else t(g,N);N=N.sibling}y.type===ya?(v=Bs(y.props.children,g.mode,k,y.key),v.return=g,g=v):(k=Kc(y.type,y.key,y.props,null,g.mode,k),k.ref=Ri(g,v,y),k.return=g,g=k)}return i(g);case xa:e:{for(N=y.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(g,v.sibling),v=o(v,y.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else t(g,v);v=v.sibling}v=kf(y,g.mode,k),v.return=g,g=v}return i(g);case Uo:return N=y._init,w(g,v,N(y._payload),k)}if(Ui(y))return b(g,v,y,k);if(Ii(y))return x(g,v,y,k);bc(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(g,v.sibling),v=o(v,y),v.return=g,g=v):(n(g,v),v=bf(y,g.mode,k),v.return=g,g=v),i(g)):n(g,v)}return w}var ei=yw(!0),ww=yw(!1),pu=hs(null),gu=null,ja=null,op=null;function sp(){op=ja=gu=null}function ap(e){var t=pu.current;Tt(pu),e._currentValue=t}function _h(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Aa(e,t){gu=e,op=ja=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zn=!0),e.firstContext=null)}function gr(e){var t=e._currentValue;if(op!==e)if(e={context:e,memoizedValue:t,next:null},ja===null){if(gu===null)throw Error(de(308));ja=e,gu.dependencies={lanes:0,firstContext:e}}else ja=ja.next=e;return t}var _s=null;function ip(e){_s===null?_s=[e]:_s.push(e)}function bw(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,ip(t)):(n.next=o.next,o.next=n),t.interleaved=n,No(e,r)}function No(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Fo=!1;function lp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ko(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ns(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,dt&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,No(e,n)}return o=r.interleaved,o===null?(t.next=t,ip(r)):(t.next=o.next,o.next=t),r.interleaved=t,No(e,n)}function Bc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gm(e,n)}}function Hv(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vu(e,t,n,r){var o=e.updateQueue;Fo=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var h=o.baseState;i=0,d=u=c=null,l=s;do{var m=l.lane,p=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,x=l;switch(m=t,p=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){h=b.call(p,h,m);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,m=typeof b=="function"?b.call(p,h,m):b,m==null)break e;h=Ft({},h,m);break e;case 2:Fo=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=o.effects,m===null?o.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,i|=m;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;m=l,l=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(!0);if(d===null&&(c=h),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=d,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);Gs|=i,e.lanes=i,e.memoizedState=h}}function Vv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(de(191,o));o.call(r)}}}var $l={},to=hs($l),fl=hs($l),hl=hs($l);function Os(e){if(e===$l)throw Error(de(174));return e}function cp(e,t){switch(St(hl,t),St(fl,e),St(to,$l),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fh(t,e)}Tt(to),St(to,t)}function ti(){Tt(to),Tt(fl),Tt(hl)}function Cw(e){Os(hl.current);var t=Os(to.current),n=fh(t,e.type);t!==n&&(St(fl,e),St(to,n))}function up(e){fl.current===e&&(Tt(to),Tt(fl))}var Mt=hs(0);function xu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pf=[];function dp(){for(var e=0;e<pf.length;e++)pf[e]._workInProgressVersionPrimary=null;pf.length=0}var Wc=Po.ReactCurrentDispatcher,gf=Po.ReactCurrentBatchConfig,qs=0,Ut=null,Jt=null,cn=null,yu=!1,Yi=!1,ml=0,tP=0;function xn(){throw Error(de(321))}function fp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Or(e[n],t[n]))return!1;return!0}function hp(e,t,n,r,o,s){if(qs=s,Ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wc.current=e===null||e.memoizedState===null?sP:aP,e=n(r,o),Yi){s=0;do{if(Yi=!1,ml=0,25<=s)throw Error(de(301));s+=1,cn=Jt=null,t.updateQueue=null,Wc.current=iP,e=n(r,o)}while(Yi)}if(Wc.current=wu,t=Jt!==null&&Jt.next!==null,qs=0,cn=Jt=Ut=null,yu=!1,t)throw Error(de(300));return e}function mp(){var e=ml!==0;return ml=0,e}function Hr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Ut.memoizedState=cn=e:cn=cn.next=e,cn}function vr(){if(Jt===null){var e=Ut.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var t=cn===null?Ut.memoizedState:cn.next;if(t!==null)cn=t,Jt=e;else{if(e===null)throw Error(de(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},cn===null?Ut.memoizedState=cn=e:cn=cn.next=e}return cn}function pl(e,t){return typeof t=="function"?t(e):t}function vf(e){var t=vr(),n=t.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=e;var r=Jt,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,c=null,u=s;do{var d=u.lane;if((qs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,i=r):c=c.next=h,Ut.lanes|=d,Gs|=d}u=u.next}while(u!==null&&u!==s);c===null?i=r:c.next=l,Or(r,t.memoizedState)||(zn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Ut.lanes|=s,Gs|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xf(e){var t=vr(),n=t.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);Or(s,t.memoizedState)||(zn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Sw(){}function Nw(e,t){var n=Ut,r=vr(),o=t(),s=!Or(r.memoizedState,o);if(s&&(r.memoizedState=o,zn=!0),r=r.queue,pp(Ew.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||cn!==null&&cn.memoizedState.tag&1){if(n.flags|=2048,gl(9,jw.bind(null,n,r,o,t),void 0,null),un===null)throw Error(de(349));qs&30||Iw(n,t,o)}return o}function Iw(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jw(e,t,n,r){t.value=n,t.getSnapshot=r,Pw(t)&&Tw(e)}function Ew(e,t,n){return n(function(){Pw(t)&&Tw(e)})}function Pw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Or(e,n)}catch{return!0}}function Tw(e){var t=No(e,1);t!==null&&_r(t,e,1,-1)}function qv(e){var t=Hr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:e},t.queue=e,e=e.dispatch=oP.bind(null,Ut,e),[t.memoizedState,e]}function gl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Rw(){return vr().memoizedState}function Hc(e,t,n,r){var o=Hr();Ut.flags|=e,o.memoizedState=gl(1|t,n,void 0,r===void 0?null:r)}function Zu(e,t,n,r){var o=vr();r=r===void 0?null:r;var s=void 0;if(Jt!==null){var i=Jt.memoizedState;if(s=i.destroy,r!==null&&fp(r,i.deps)){o.memoizedState=gl(t,n,s,r);return}}Ut.flags|=e,o.memoizedState=gl(1|t,n,s,r)}function Gv(e,t){return Hc(8390656,8,e,t)}function pp(e,t){return Zu(2048,8,e,t)}function _w(e,t){return Zu(4,2,e,t)}function Ow(e,t){return Zu(4,4,e,t)}function Dw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Aw(e,t,n){return n=n!=null?n.concat([e]):null,Zu(4,4,Dw.bind(null,t,e),n)}function gp(){}function Mw(e,t){var n=vr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Lw(e,t){var n=vr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $w(e,t,n){return qs&21?(Or(n,t)||(n=W0(),Ut.lanes|=n,Gs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zn=!0),e.memoizedState=n)}function nP(e,t){var n=vt;vt=n!==0&&4>n?n:4,e(!0);var r=gf.transition;gf.transition={};try{e(!1),t()}finally{vt=n,gf.transition=r}}function Uw(){return vr().memoizedState}function rP(e,t,n){var r=os(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fw(e))zw(t,n);else if(n=bw(e,t,n,r),n!==null){var o=Rn();_r(n,e,r,o),Bw(n,t,r)}}function oP(e,t,n){var r=os(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fw(e))zw(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,Or(l,i)){var c=t.interleaved;c===null?(o.next=o,ip(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=bw(e,t,o,r),n!==null&&(o=Rn(),_r(n,e,r,o),Bw(n,t,r))}}function Fw(e){var t=e.alternate;return e===Ut||t!==null&&t===Ut}function zw(e,t){Yi=yu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Bw(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gm(e,n)}}var wu={readContext:gr,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},sP={readContext:gr,useCallback:function(e,t){return Hr().memoizedState=[e,t===void 0?null:t],e},useContext:gr,useEffect:Gv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hc(4194308,4,Dw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hc(4,2,e,t)},useMemo:function(e,t){var n=Hr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Hr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=rP.bind(null,Ut,e),[r.memoizedState,e]},useRef:function(e){var t=Hr();return e={current:e},t.memoizedState=e},useState:qv,useDebugValue:gp,useDeferredValue:function(e){return Hr().memoizedState=e},useTransition:function(){var e=qv(!1),t=e[0];return e=nP.bind(null,e[1]),Hr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ut,o=Hr();if(_t){if(n===void 0)throw Error(de(407));n=n()}else{if(n=t(),un===null)throw Error(de(349));qs&30||Iw(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Gv(Ew.bind(null,r,s,e),[e]),r.flags|=2048,gl(9,jw.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Hr(),t=un.identifierPrefix;if(_t){var n=wo,r=yo;n=(r&~(1<<32-Rr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ml++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=tP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aP={readContext:gr,useCallback:Mw,useContext:gr,useEffect:pp,useImperativeHandle:Aw,useInsertionEffect:_w,useLayoutEffect:Ow,useMemo:Lw,useReducer:vf,useRef:Rw,useState:function(){return vf(pl)},useDebugValue:gp,useDeferredValue:function(e){var t=vr();return $w(t,Jt.memoizedState,e)},useTransition:function(){var e=vf(pl)[0],t=vr().memoizedState;return[e,t]},useMutableSource:Sw,useSyncExternalStore:Nw,useId:Uw,unstable_isNewReconciler:!1},iP={readContext:gr,useCallback:Mw,useContext:gr,useEffect:pp,useImperativeHandle:Aw,useInsertionEffect:_w,useLayoutEffect:Ow,useMemo:Lw,useReducer:xf,useRef:Rw,useState:function(){return xf(pl)},useDebugValue:gp,useDeferredValue:function(e){var t=vr();return Jt===null?t.memoizedState=e:$w(t,Jt.memoizedState,e)},useTransition:function(){var e=xf(pl)[0],t=vr().memoizedState;return[e,t]},useMutableSource:Sw,useSyncExternalStore:Nw,useId:Uw,unstable_isNewReconciler:!1};function Sr(e,t){if(e&&e.defaultProps){t=Ft({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Oh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ft({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ed={isMounted:function(e){return(e=e._reactInternals)?na(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Rn(),o=os(e),s=ko(r,o);s.payload=t,n!=null&&(s.callback=n),t=ns(e,s,o),t!==null&&(_r(t,e,o,r),Bc(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Rn(),o=os(e),s=ko(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ns(e,s,o),t!==null&&(_r(t,e,o,r),Bc(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rn(),r=os(e),o=ko(n,r);o.tag=2,t!=null&&(o.callback=t),t=ns(e,o,r),t!==null&&(_r(t,e,r,n),Bc(t,e,r))}};function Kv(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!ll(n,r)||!ll(o,s):!0}function Ww(e,t,n){var r=!1,o=ls,s=t.contextType;return typeof s=="object"&&s!==null?s=gr(s):(o=Hn(t)?Hs:bn.current,r=t.contextTypes,s=(r=r!=null)?Ja(e,o):ls),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ed,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Yv(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ed.enqueueReplaceState(t,t.state,null)}function Dh(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},lp(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=gr(s):(s=Hn(t)?Hs:bn.current,o.context=Ja(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Oh(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ed.enqueueReplaceState(o,o.state,null),vu(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function ni(e,t){try{var n="",r=t;do n+=Aj(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function yf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ah(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var lP=typeof WeakMap=="function"?WeakMap:Map;function Hw(e,t,n){n=ko(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ku||(ku=!0,Vh=r),Ah(e,t)},n}function Vw(e,t,n){n=ko(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Ah(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ah(e,t),typeof r!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Qv(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new lP;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=kP.bind(null,e,t,n),t.then(e,e))}function Xv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Jv(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ko(-1,1),t.tag=2,ns(n,t,1))),n.lanes|=1),e)}var cP=Po.ReactCurrentOwner,zn=!1;function En(e,t,n,r){t.child=e===null?ww(t,null,n,r):ei(t,e.child,n,r)}function Zv(e,t,n,r,o){n=n.render;var s=t.ref;return Aa(t,o),r=hp(e,t,n,r,s,o),n=mp(),e!==null&&!zn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Io(e,t,o)):(_t&&n&&tp(t),t.flags|=1,En(e,t,r,o),t.child)}function ex(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!Sp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,qw(e,t,s,r,o)):(e=Kc(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:ll,n(i,r)&&e.ref===t.ref)return Io(e,t,o)}return t.flags|=1,e=ss(s,r),e.ref=t.ref,e.return=t,t.child=e}function qw(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(ll(s,r)&&e.ref===t.ref)if(zn=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(zn=!0);else return t.lanes=e.lanes,Io(e,t,o)}return Mh(e,t,n,r,o)}function Gw(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Pa,Qn),Qn|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,St(Pa,Qn),Qn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,St(Pa,Qn),Qn|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,St(Pa,Qn),Qn|=r;return En(e,t,o,n),t.child}function Kw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Mh(e,t,n,r,o){var s=Hn(n)?Hs:bn.current;return s=Ja(t,s),Aa(t,o),n=hp(e,t,n,r,s,o),r=mp(),e!==null&&!zn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Io(e,t,o)):(_t&&r&&tp(t),t.flags|=1,En(e,t,n,o),t.child)}function tx(e,t,n,r,o){if(Hn(n)){var s=!0;fu(t)}else s=!1;if(Aa(t,o),t.stateNode===null)Vc(e,t),Ww(t,n,r),Dh(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=gr(u):(u=Hn(n)?Hs:bn.current,u=Ja(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Yv(t,i,r,u),Fo=!1;var m=t.memoizedState;i.state=m,vu(t,r,i,o),c=t.memoizedState,l!==r||m!==c||Wn.current||Fo?(typeof d=="function"&&(Oh(t,n,d,r),c=t.memoizedState),(l=Fo||Kv(t,n,l,r,m,c,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,kw(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Sr(t.type,l),i.props=u,h=t.pendingProps,m=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=gr(c):(c=Hn(n)?Hs:bn.current,c=Ja(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||m!==c)&&Yv(t,i,r,c),Fo=!1,m=t.memoizedState,i.state=m,vu(t,r,i,o);var b=t.memoizedState;l!==h||m!==b||Wn.current||Fo?(typeof p=="function"&&(Oh(t,n,p,r),b=t.memoizedState),(u=Fo||Kv(t,n,u,r,m,b,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,b,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,b,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),i.props=r,i.state=b,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Lh(e,t,n,r,s,o)}function Lh(e,t,n,r,o,s){Kw(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Fv(t,n,!1),Io(e,t,s);r=t.stateNode,cP.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=ei(t,e.child,null,s),t.child=ei(t,null,l,s)):En(e,t,l,s),t.memoizedState=r.state,o&&Fv(t,n,!0),t.child}function Yw(e){var t=e.stateNode;t.pendingContext?Uv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Uv(e,t.context,!1),cp(e,t.containerInfo)}function nx(e,t,n,r,o){return Za(),rp(o),t.flags|=256,En(e,t,n,r),t.child}var $h={dehydrated:null,treeContext:null,retryLane:0};function Uh(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qw(e,t,n){var r=t.pendingProps,o=Mt.current,s=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),St(Mt,o&1),e===null)return Rh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=rd(i,r,0,null),e=Bs(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Uh(n),t.memoizedState=$h,e):vp(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return uP(e,t,i,r,l,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,l=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ss(o,c),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=ss(l,s):(s=Bs(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Uh(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=$h,r}return s=e.child,e=s.sibling,r=ss(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vp(e,t){return t=rd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kc(e,t,n,r){return r!==null&&rp(r),ei(t,e.child,null,n),e=vp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uP(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=yf(Error(de(422))),kc(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=rd({mode:"visible",children:r.children},o,0,null),s=Bs(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&ei(t,e.child,null,i),t.child.memoizedState=Uh(i),t.memoizedState=$h,s);if(!(t.mode&1))return kc(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(de(419)),r=yf(s,r,void 0),kc(e,t,i,r)}if(l=(i&e.childLanes)!==0,zn||l){if(r=un,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,No(e,o),_r(r,e,o,-1))}return Cp(),r=yf(Error(de(421))),kc(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=CP.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,Jn=ts(o.nextSibling),er=t,_t=!0,Tr=null,e!==null&&(dr[fr++]=yo,dr[fr++]=wo,dr[fr++]=Vs,yo=e.id,wo=e.overflow,Vs=t),t=vp(t,r.children),t.flags|=4096,t)}function rx(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_h(e.return,t,n)}function wf(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Xw(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(En(e,t,r.children,n),r=Mt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rx(e,n,t);else if(e.tag===19)rx(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(St(Mt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&xu(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),wf(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&xu(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}wf(t,!0,n,null,s);break;case"together":wf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Io(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(de(153));if(t.child!==null){for(e=t.child,n=ss(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ss(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dP(e,t,n){switch(t.tag){case 3:Yw(t),Za();break;case 5:Cw(t);break;case 1:Hn(t.type)&&fu(t);break;case 4:cp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;St(pu,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(St(Mt,Mt.current&1),t.flags|=128,null):n&t.child.childLanes?Qw(e,t,n):(St(Mt,Mt.current&1),e=Io(e,t,n),e!==null?e.sibling:null);St(Mt,Mt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Xw(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),St(Mt,Mt.current),r)break;return null;case 22:case 23:return t.lanes=0,Gw(e,t,n)}return Io(e,t,n)}var Jw,Fh,Zw,eb;Jw=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fh=function(){};Zw=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Os(to.current);var s=null;switch(n){case"input":o=lh(e,o),r=lh(e,r),s=[];break;case"select":o=Ft({},o,{value:void 0}),r=Ft({},r,{value:void 0}),s=[];break;case"textarea":o=dh(e,o),r=dh(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=uu)}hh(n,r);var i;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(tl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(tl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Et("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};eb=function(e,t,n,r){n!==r&&(t.flags|=4)};function _i(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fP(e,t,n){var r=t.pendingProps;switch(np(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(t),null;case 1:return Hn(t.type)&&du(),yn(t),null;case 3:return r=t.stateNode,ti(),Tt(Wn),Tt(bn),dp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(wc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tr!==null&&(Kh(Tr),Tr=null))),Fh(e,t),yn(t),null;case 5:up(t);var o=Os(hl.current);if(n=t.type,e!==null&&t.stateNode!=null)Zw(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(de(166));return yn(t),null}if(e=Os(to.current),wc(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Kr]=t,r[dl]=s,e=(t.mode&1)!==0,n){case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":case"embed":Et("load",r);break;case"video":case"audio":for(o=0;o<zi.length;o++)Et(zi[o],r);break;case"source":Et("error",r);break;case"img":case"image":case"link":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"input":fv(r,s),Et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Et("invalid",r);break;case"textarea":mv(r,s),Et("invalid",r)}hh(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&yc(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&yc(r.textContent,l,e),o=["children",""+l]):tl.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Et("scroll",r)}switch(n){case"input":dc(r),hv(r,s,!0);break;case"textarea":dc(r),pv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=uu)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=E0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Kr]=t,e[dl]=r,Jw(e,t,!1,!1),t.stateNode=e;e:{switch(i=mh(n,r),n){case"dialog":Et("cancel",e),Et("close",e),o=r;break;case"iframe":case"object":case"embed":Et("load",e),o=r;break;case"video":case"audio":for(o=0;o<zi.length;o++)Et(zi[o],e);o=r;break;case"source":Et("error",e),o=r;break;case"img":case"image":case"link":Et("error",e),Et("load",e),o=r;break;case"details":Et("toggle",e),o=r;break;case"input":fv(e,r),o=lh(e,r),Et("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ft({},r,{value:void 0}),Et("invalid",e);break;case"textarea":mv(e,r),o=dh(e,r),Et("invalid",e);break;default:o=r}hh(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?R0(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&P0(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&nl(e,c):typeof c=="number"&&nl(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tl.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Et("scroll",e):c!=null&&zm(e,s,c,i))}switch(n){case"input":dc(e),hv(e,r,!1);break;case"textarea":dc(e),pv(e);break;case"option":r.value!=null&&e.setAttribute("value",""+is(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ra(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ra(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=uu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yn(t),null;case 6:if(e&&t.stateNode!=null)eb(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(de(166));if(n=Os(hl.current),Os(to.current),wc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Kr]=t,(s=r.nodeValue!==n)&&(e=er,e!==null))switch(e.tag){case 3:yc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yc(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kr]=t,t.stateNode=r}return yn(t),null;case 13:if(Tt(Mt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_t&&Jn!==null&&t.mode&1&&!(t.flags&128))xw(),Za(),t.flags|=98560,s=!1;else if(s=wc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(de(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(de(317));s[Kr]=t}else Za(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yn(t),s=!1}else Tr!==null&&(Kh(Tr),Tr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Mt.current&1?Zt===0&&(Zt=3):Cp())),t.updateQueue!==null&&(t.flags|=4),yn(t),null);case 4:return ti(),Fh(e,t),e===null&&cl(t.stateNode.containerInfo),yn(t),null;case 10:return ap(t.type._context),yn(t),null;case 17:return Hn(t.type)&&du(),yn(t),null;case 19:if(Tt(Mt),s=t.memoizedState,s===null)return yn(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)_i(s,!1);else{if(Zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=xu(e),i!==null){for(t.flags|=128,_i(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return St(Mt,Mt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Vt()>ri&&(t.flags|=128,r=!0,_i(s,!1),t.lanes=4194304)}else{if(!r)if(e=xu(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),_i(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!_t)return yn(t),null}else 2*Vt()-s.renderingStartTime>ri&&n!==1073741824&&(t.flags|=128,r=!0,_i(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Vt(),t.sibling=null,n=Mt.current,St(Mt,r?n&1|2:n&1),t):(yn(t),null);case 22:case 23:return kp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Qn&1073741824&&(yn(t),t.subtreeFlags&6&&(t.flags|=8192)):yn(t),null;case 24:return null;case 25:return null}throw Error(de(156,t.tag))}function hP(e,t){switch(np(t),t.tag){case 1:return Hn(t.type)&&du(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ti(),Tt(Wn),Tt(bn),dp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return up(t),null;case 13:if(Tt(Mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(de(340));Za()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tt(Mt),null;case 4:return ti(),null;case 10:return ap(t.type._context),null;case 22:case 23:return kp(),null;case 24:return null;default:return null}}var Cc=!1,wn=!1,mP=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Ea(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ht(e,t,r)}else n.current=null}function zh(e,t,n){try{n()}catch(r){Ht(e,t,r)}}var ox=!1;function pP(e,t){if(Sh=iu,e=sw(),ep(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var p;h!==n||o!==0&&h.nodeType!==3||(l=i+o),h!==s||r!==0&&h.nodeType!==3||(c=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++u===o&&(l=i),m===s&&++d===r&&(c=i),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nh={focusedElem:e,selectionRange:n},iu=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,w=b.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?x:Sr(t.type,x),w);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(k){Ht(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return b=ox,ox=!1,b}function Qi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&zh(t,n,s)}o=o.next}while(o!==r)}}function td(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Bh(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function tb(e){var t=e.alternate;t!==null&&(e.alternate=null,tb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kr],delete t[dl],delete t[Eh],delete t[XE],delete t[JE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nb(e){return e.tag===5||e.tag===3||e.tag===4}function sx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=uu));else if(r!==4&&(e=e.child,e!==null))for(Wh(e,t,n),e=e.sibling;e!==null;)Wh(e,t,n),e=e.sibling}function Hh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Hh(e,t,n),e=e.sibling;e!==null;)Hh(e,t,n),e=e.sibling}var hn=null,Er=!1;function _o(e,t,n){for(n=n.child;n!==null;)rb(e,t,n),n=n.sibling}function rb(e,t,n){if(eo&&typeof eo.onCommitFiberUnmount=="function")try{eo.onCommitFiberUnmount(Gu,n)}catch{}switch(n.tag){case 5:wn||Ea(n,t);case 6:var r=hn,o=Er;hn=null,_o(e,t,n),hn=r,Er=o,hn!==null&&(Er?(e=hn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):hn.removeChild(n.stateNode));break;case 18:hn!==null&&(Er?(e=hn,n=n.stateNode,e.nodeType===8?hf(e.parentNode,n):e.nodeType===1&&hf(e,n),al(e)):hf(hn,n.stateNode));break;case 4:r=hn,o=Er,hn=n.stateNode.containerInfo,Er=!0,_o(e,t,n),hn=r,Er=o;break;case 0:case 11:case 14:case 15:if(!wn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&zh(n,t,i),o=o.next}while(o!==r)}_o(e,t,n);break;case 1:if(!wn&&(Ea(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ht(n,t,l)}_o(e,t,n);break;case 21:_o(e,t,n);break;case 22:n.mode&1?(wn=(r=wn)||n.memoizedState!==null,_o(e,t,n),wn=r):_o(e,t,n);break;default:_o(e,t,n)}}function ax(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mP),t.forEach(function(r){var o=SP.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function br(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:hn=l.stateNode,Er=!1;break e;case 3:hn=l.stateNode.containerInfo,Er=!0;break e;case 4:hn=l.stateNode.containerInfo,Er=!0;break e}l=l.return}if(hn===null)throw Error(de(160));rb(s,i,o),hn=null,Er=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){Ht(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ob(t,e),t=t.sibling}function ob(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(br(t,e),Wr(e),r&4){try{Qi(3,e,e.return),td(3,e)}catch(x){Ht(e,e.return,x)}try{Qi(5,e,e.return)}catch(x){Ht(e,e.return,x)}}break;case 1:br(t,e),Wr(e),r&512&&n!==null&&Ea(n,n.return);break;case 5:if(br(t,e),Wr(e),r&512&&n!==null&&Ea(n,n.return),e.flags&32){var o=e.stateNode;try{nl(o,"")}catch(x){Ht(e,e.return,x)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&I0(o,s),mh(l,i);var u=mh(l,s);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];d==="style"?R0(o,h):d==="dangerouslySetInnerHTML"?P0(o,h):d==="children"?nl(o,h):zm(o,d,h,u)}switch(l){case"input":ch(o,s);break;case"textarea":j0(o,s);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Ra(o,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?Ra(o,!!s.multiple,s.defaultValue,!0):Ra(o,!!s.multiple,s.multiple?[]:"",!1))}o[dl]=s}catch(x){Ht(e,e.return,x)}}break;case 6:if(br(t,e),Wr(e),r&4){if(e.stateNode===null)throw Error(de(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(x){Ht(e,e.return,x)}}break;case 3:if(br(t,e),Wr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{al(t.containerInfo)}catch(x){Ht(e,e.return,x)}break;case 4:br(t,e),Wr(e);break;case 13:br(t,e),Wr(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(wp=Vt())),r&4&&ax(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(wn=(u=wn)||d,br(t,e),wn=u):br(t,e),Wr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ce=e,d=e.child;d!==null;){for(h=Ce=d;Ce!==null;){switch(m=Ce,p=m.child,m.tag){case 0:case 11:case 14:case 15:Qi(4,m,m.return);break;case 1:Ea(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(x){Ht(r,n,x)}}break;case 5:Ea(m,m.return);break;case 22:if(m.memoizedState!==null){lx(h);continue}}p!==null?(p.return=m,Ce=p):lx(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{o=h.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=T0("display",i))}catch(x){Ht(e,e.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){Ht(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:br(t,e),Wr(e),r&4&&ax(e);break;case 21:break;default:br(t,e),Wr(e)}}function Wr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(nb(n)){var r=n;break e}n=n.return}throw Error(de(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(nl(o,""),r.flags&=-33);var s=sx(e);Hh(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=sx(e);Wh(e,l,i);break;default:throw Error(de(161))}}catch(c){Ht(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gP(e,t,n){Ce=e,sb(e)}function sb(e,t,n){for(var r=(e.mode&1)!==0;Ce!==null;){var o=Ce,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Cc;if(!i){var l=o.alternate,c=l!==null&&l.memoizedState!==null||wn;l=Cc;var u=wn;if(Cc=i,(wn=c)&&!u)for(Ce=o;Ce!==null;)i=Ce,c=i.child,i.tag===22&&i.memoizedState!==null?cx(o):c!==null?(c.return=i,Ce=c):cx(o);for(;s!==null;)Ce=s,sb(s),s=s.sibling;Ce=o,Cc=l,wn=u}ix(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,Ce=s):ix(e)}}function ix(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wn||td(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wn)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Sr(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Vv(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Vv(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&al(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}wn||t.flags&512&&Bh(t)}catch(m){Ht(t,t.return,m)}}if(t===e){Ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function lx(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function cx(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{td(4,t)}catch(c){Ht(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Ht(t,o,c)}}var s=t.return;try{Bh(t)}catch(c){Ht(t,s,c)}break;case 5:var i=t.return;try{Bh(t)}catch(c){Ht(t,i,c)}}}catch(c){Ht(t,t.return,c)}if(t===e){Ce=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ce=l;break}Ce=t.return}}var vP=Math.ceil,bu=Po.ReactCurrentDispatcher,xp=Po.ReactCurrentOwner,mr=Po.ReactCurrentBatchConfig,dt=0,un=null,Kt=null,mn=0,Qn=0,Pa=hs(0),Zt=0,vl=null,Gs=0,nd=0,yp=0,Xi=null,Un=null,wp=0,ri=1/0,go=null,ku=!1,Vh=null,rs=null,Sc=!1,Qo=null,Cu=0,Ji=0,qh=null,qc=-1,Gc=0;function Rn(){return dt&6?Vt():qc!==-1?qc:qc=Vt()}function os(e){return e.mode&1?dt&2&&mn!==0?mn&-mn:eP.transition!==null?(Gc===0&&(Gc=W0()),Gc):(e=vt,e!==0||(e=window.event,e=e===void 0?16:Q0(e.type)),e):1}function _r(e,t,n,r){if(50<Ji)throw Ji=0,qh=null,Error(de(185));Al(e,n,r),(!(dt&2)||e!==un)&&(e===un&&(!(dt&2)&&(nd|=n),Zt===4&&Bo(e,mn)),Vn(e,r),n===1&&dt===0&&!(t.mode&1)&&(ri=Vt()+500,Ju&&ms()))}function Vn(e,t){var n=e.callbackNode;eE(e,t);var r=au(e,e===un?mn:0);if(r===0)n!==null&&xv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xv(n),t===1)e.tag===0?ZE(ux.bind(null,e)):pw(ux.bind(null,e)),YE(function(){!(dt&6)&&ms()}),n=null;else{switch(H0(r)){case 1:n=qm;break;case 4:n=z0;break;case 16:n=su;break;case 536870912:n=B0;break;default:n=su}n=hb(n,ab.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ab(e,t){if(qc=-1,Gc=0,dt&6)throw Error(de(327));var n=e.callbackNode;if(Ma()&&e.callbackNode!==n)return null;var r=au(e,e===un?mn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Su(e,r);else{t=r;var o=dt;dt|=2;var s=lb();(un!==e||mn!==t)&&(go=null,ri=Vt()+500,zs(e,t));do try{wP();break}catch(l){ib(e,l)}while(!0);sp(),bu.current=s,dt=o,Kt!==null?t=0:(un=null,mn=0,t=Zt)}if(t!==0){if(t===2&&(o=yh(e),o!==0&&(r=o,t=Gh(e,o))),t===1)throw n=vl,zs(e,0),Bo(e,r),Vn(e,Vt()),n;if(t===6)Bo(e,r);else{if(o=e.current.alternate,!(r&30)&&!xP(o)&&(t=Su(e,r),t===2&&(s=yh(e),s!==0&&(r=s,t=Gh(e,s))),t===1))throw n=vl,zs(e,0),Bo(e,r),Vn(e,Vt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(de(345));case 2:Es(e,Un,go);break;case 3:if(Bo(e,r),(r&130023424)===r&&(t=wp+500-Vt(),10<t)){if(au(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Rn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=jh(Es.bind(null,e,Un,go),t);break}Es(e,Un,go);break;case 4:if(Bo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-Rr(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=Vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vP(r/1960))-r,10<r){e.timeoutHandle=jh(Es.bind(null,e,Un,go),r);break}Es(e,Un,go);break;case 5:Es(e,Un,go);break;default:throw Error(de(329))}}}return Vn(e,Vt()),e.callbackNode===n?ab.bind(null,e):null}function Gh(e,t){var n=Xi;return e.current.memoizedState.isDehydrated&&(zs(e,t).flags|=256),e=Su(e,t),e!==2&&(t=Un,Un=n,t!==null&&Kh(t)),e}function Kh(e){Un===null?Un=e:Un.push.apply(Un,e)}function xP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Or(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bo(e,t){for(t&=~yp,t&=~nd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Rr(t),r=1<<n;e[n]=-1,t&=~r}}function ux(e){if(dt&6)throw Error(de(327));Ma();var t=au(e,0);if(!(t&1))return Vn(e,Vt()),null;var n=Su(e,t);if(e.tag!==0&&n===2){var r=yh(e);r!==0&&(t=r,n=Gh(e,r))}if(n===1)throw n=vl,zs(e,0),Bo(e,t),Vn(e,Vt()),n;if(n===6)throw Error(de(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Es(e,Un,go),Vn(e,Vt()),null}function bp(e,t){var n=dt;dt|=1;try{return e(t)}finally{dt=n,dt===0&&(ri=Vt()+500,Ju&&ms())}}function Ks(e){Qo!==null&&Qo.tag===0&&!(dt&6)&&Ma();var t=dt;dt|=1;var n=mr.transition,r=vt;try{if(mr.transition=null,vt=1,e)return e()}finally{vt=r,mr.transition=n,dt=t,!(dt&6)&&ms()}}function kp(){Qn=Pa.current,Tt(Pa)}function zs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,KE(n)),Kt!==null)for(n=Kt.return;n!==null;){var r=n;switch(np(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&du();break;case 3:ti(),Tt(Wn),Tt(bn),dp();break;case 5:up(r);break;case 4:ti();break;case 13:Tt(Mt);break;case 19:Tt(Mt);break;case 10:ap(r.type._context);break;case 22:case 23:kp()}n=n.return}if(un=e,Kt=e=ss(e.current,null),mn=Qn=t,Zt=0,vl=null,yp=nd=Gs=0,Un=Xi=null,_s!==null){for(t=0;t<_s.length;t++)if(n=_s[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}_s=null}return e}function ib(e,t){do{var n=Kt;try{if(sp(),Wc.current=wu,yu){for(var r=Ut.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}yu=!1}if(qs=0,cn=Jt=Ut=null,Yi=!1,ml=0,xp.current=null,n===null||n.return===null){Zt=1,vl=t,Kt=null;break}e:{var s=e,i=n.return,l=n,c=t;if(t=mn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Xv(i);if(p!==null){p.flags&=-257,Jv(p,i,l,s,t),p.mode&1&&Qv(s,u,t),t=p,c=u;var b=t.updateQueue;if(b===null){var x=new Set;x.add(c),t.updateQueue=x}else b.add(c);break e}else{if(!(t&1)){Qv(s,u,t),Cp();break e}c=Error(de(426))}}else if(_t&&l.mode&1){var w=Xv(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Jv(w,i,l,s,t),rp(ni(c,l));break e}}s=c=ni(c,l),Zt!==4&&(Zt=2),Xi===null?Xi=[s]:Xi.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=Hw(s,c,t);Hv(s,g);break e;case 1:l=c;var v=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(rs===null||!rs.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var k=Vw(s,l,t);Hv(s,k);break e}}s=s.return}while(s!==null)}ub(n)}catch(C){t=C,Kt===n&&n!==null&&(Kt=n=n.return);continue}break}while(!0)}function lb(){var e=bu.current;return bu.current=wu,e===null?wu:e}function Cp(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),un===null||!(Gs&268435455)&&!(nd&268435455)||Bo(un,mn)}function Su(e,t){var n=dt;dt|=2;var r=lb();(un!==e||mn!==t)&&(go=null,zs(e,t));do try{yP();break}catch(o){ib(e,o)}while(!0);if(sp(),dt=n,bu.current=r,Kt!==null)throw Error(de(261));return un=null,mn=0,Zt}function yP(){for(;Kt!==null;)cb(Kt)}function wP(){for(;Kt!==null&&!Vj();)cb(Kt)}function cb(e){var t=fb(e.alternate,e,Qn);e.memoizedProps=e.pendingProps,t===null?ub(e):Kt=t,xp.current=null}function ub(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=hP(n,t),n!==null){n.flags&=32767,Kt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Zt=6,Kt=null;return}}else if(n=fP(n,t,Qn),n!==null){Kt=n;return}if(t=t.sibling,t!==null){Kt=t;return}Kt=t=e}while(t!==null);Zt===0&&(Zt=5)}function Es(e,t,n){var r=vt,o=mr.transition;try{mr.transition=null,vt=1,bP(e,t,n,r)}finally{mr.transition=o,vt=r}return null}function bP(e,t,n,r){do Ma();while(Qo!==null);if(dt&6)throw Error(de(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(de(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(tE(e,s),e===un&&(Kt=un=null,mn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sc||(Sc=!0,hb(su,function(){return Ma(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mr.transition,mr.transition=null;var i=vt;vt=1;var l=dt;dt|=4,xp.current=null,pP(e,n),ob(n,e),zE(Nh),iu=!!Sh,Nh=Sh=null,e.current=n,gP(n),qj(),dt=l,vt=i,mr.transition=s}else e.current=n;if(Sc&&(Sc=!1,Qo=e,Cu=o),s=e.pendingLanes,s===0&&(rs=null),Yj(n.stateNode),Vn(e,Vt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ku)throw ku=!1,e=Vh,Vh=null,e;return Cu&1&&e.tag!==0&&Ma(),s=e.pendingLanes,s&1?e===qh?Ji++:(Ji=0,qh=e):Ji=0,ms(),null}function Ma(){if(Qo!==null){var e=H0(Cu),t=mr.transition,n=vt;try{if(mr.transition=null,vt=16>e?16:e,Qo===null)var r=!1;else{if(e=Qo,Qo=null,Cu=0,dt&6)throw Error(de(331));var o=dt;for(dt|=4,Ce=e.current;Ce!==null;){var s=Ce,i=s.child;if(Ce.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ce=u;Ce!==null;){var d=Ce;switch(d.tag){case 0:case 11:case 15:Qi(8,d,s)}var h=d.child;if(h!==null)h.return=d,Ce=h;else for(;Ce!==null;){d=Ce;var m=d.sibling,p=d.return;if(tb(d),d===u){Ce=null;break}if(m!==null){m.return=p,Ce=m;break}Ce=p}}}var b=s.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}Ce=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Ce=i;else e:for(;Ce!==null;){if(s=Ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qi(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ce=g;break e}Ce=s.return}}var v=e.current;for(Ce=v;Ce!==null;){i=Ce;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,Ce=y;else e:for(i=v;Ce!==null;){if(l=Ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:td(9,l)}}catch(C){Ht(l,l.return,C)}if(l===i){Ce=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Ce=k;break e}Ce=l.return}}if(dt=o,ms(),eo&&typeof eo.onPostCommitFiberRoot=="function")try{eo.onPostCommitFiberRoot(Gu,e)}catch{}r=!0}return r}finally{vt=n,mr.transition=t}}return!1}function dx(e,t,n){t=ni(n,t),t=Hw(e,t,1),e=ns(e,t,1),t=Rn(),e!==null&&(Al(e,1,t),Vn(e,t))}function Ht(e,t,n){if(e.tag===3)dx(e,e,n);else for(;t!==null;){if(t.tag===3){dx(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rs===null||!rs.has(r))){e=ni(n,e),e=Vw(t,e,1),t=ns(t,e,1),e=Rn(),t!==null&&(Al(t,1,e),Vn(t,e));break}}t=t.return}}function kP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Rn(),e.pingedLanes|=e.suspendedLanes&n,un===e&&(mn&n)===n&&(Zt===4||Zt===3&&(mn&130023424)===mn&&500>Vt()-wp?zs(e,0):yp|=n),Vn(e,t)}function db(e,t){t===0&&(e.mode&1?(t=mc,mc<<=1,!(mc&130023424)&&(mc=4194304)):t=1);var n=Rn();e=No(e,t),e!==null&&(Al(e,t,n),Vn(e,n))}function CP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),db(e,n)}function SP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(de(314))}r!==null&&r.delete(t),db(e,n)}var fb;fb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wn.current)zn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return zn=!1,dP(e,t,n);zn=!!(e.flags&131072)}else zn=!1,_t&&t.flags&1048576&&gw(t,mu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vc(e,t),e=t.pendingProps;var o=Ja(t,bn.current);Aa(t,n),o=hp(null,t,r,e,o,n);var s=mp();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hn(r)?(s=!0,fu(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,lp(t),o.updater=ed,t.stateNode=o,o._reactInternals=t,Dh(t,r,e,n),t=Lh(null,t,r,!0,s,n)):(t.tag=0,_t&&s&&tp(t),En(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vc(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=IP(r),e=Sr(r,e),o){case 0:t=Mh(null,t,r,e,n);break e;case 1:t=tx(null,t,r,e,n);break e;case 11:t=Zv(null,t,r,e,n);break e;case 14:t=ex(null,t,r,Sr(r.type,e),n);break e}throw Error(de(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Sr(r,o),Mh(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Sr(r,o),tx(e,t,r,o,n);case 3:e:{if(Yw(t),e===null)throw Error(de(387));r=t.pendingProps,s=t.memoizedState,o=s.element,kw(e,t),vu(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=ni(Error(de(423)),t),t=nx(e,t,r,n,o);break e}else if(r!==o){o=ni(Error(de(424)),t),t=nx(e,t,r,n,o);break e}else for(Jn=ts(t.stateNode.containerInfo.firstChild),er=t,_t=!0,Tr=null,n=ww(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Za(),r===o){t=Io(e,t,n);break e}En(e,t,r,n)}t=t.child}return t;case 5:return Cw(t),e===null&&Rh(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,Ih(r,o)?i=null:s!==null&&Ih(r,s)&&(t.flags|=32),Kw(e,t),En(e,t,i,n),t.child;case 6:return e===null&&Rh(t),null;case 13:return Qw(e,t,n);case 4:return cp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ei(t,null,r,n):En(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Sr(r,o),Zv(e,t,r,o,n);case 7:return En(e,t,t.pendingProps,n),t.child;case 8:return En(e,t,t.pendingProps.children,n),t.child;case 12:return En(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,St(pu,r._currentValue),r._currentValue=i,s!==null)if(Or(s.value,i)){if(s.children===o.children&&!Wn.current){t=Io(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=ko(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),_h(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(de(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),_h(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}En(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Aa(t,n),o=gr(o),r=r(o),t.flags|=1,En(e,t,r,n),t.child;case 14:return r=t.type,o=Sr(r,t.pendingProps),o=Sr(r.type,o),ex(e,t,r,o,n);case 15:return qw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Sr(r,o),Vc(e,t),t.tag=1,Hn(r)?(e=!0,fu(t)):e=!1,Aa(t,n),Ww(t,r,o),Dh(t,r,o,n),Lh(null,t,r,!0,e,n);case 19:return Xw(e,t,n);case 22:return Gw(e,t,n)}throw Error(de(156,t.tag))};function hb(e,t){return F0(e,t)}function NP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(e,t,n,r){return new NP(e,t,n,r)}function Sp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function IP(e){if(typeof e=="function")return Sp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wm)return 11;if(e===Hm)return 14}return 2}function ss(e,t){var n=e.alternate;return n===null?(n=hr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kc(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")Sp(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ya:return Bs(n.children,o,s,t);case Bm:i=8,o|=8;break;case oh:return e=hr(12,n,t,o|2),e.elementType=oh,e.lanes=s,e;case sh:return e=hr(13,n,t,o),e.elementType=sh,e.lanes=s,e;case ah:return e=hr(19,n,t,o),e.elementType=ah,e.lanes=s,e;case C0:return rd(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case b0:i=10;break e;case k0:i=9;break e;case Wm:i=11;break e;case Hm:i=14;break e;case Uo:i=16,r=null;break e}throw Error(de(130,e==null?e:typeof e,""))}return t=hr(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Bs(e,t,n,r){return e=hr(7,e,r,t),e.lanes=n,e}function rd(e,t,n,r){return e=hr(22,e,r,t),e.elementType=C0,e.lanes=n,e.stateNode={isHidden:!1},e}function bf(e,t,n){return e=hr(6,e,null,t),e.lanes=n,e}function kf(e,t,n){return t=hr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jP(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tf(0),this.expirationTimes=tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Np(e,t,n,r,o,s,i,l,c){return e=new jP(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=hr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lp(s),e}function EP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xa,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function mb(e){if(!e)return ls;e=e._reactInternals;e:{if(na(e)!==e||e.tag!==1)throw Error(de(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(de(171))}if(e.tag===1){var n=e.type;if(Hn(n))return mw(e,n,t)}return t}function pb(e,t,n,r,o,s,i,l,c){return e=Np(n,r,!0,e,o,s,i,l,c),e.context=mb(null),n=e.current,r=Rn(),o=os(n),s=ko(r,o),s.callback=t??null,ns(n,s,o),e.current.lanes=o,Al(e,o,r),Vn(e,r),e}function od(e,t,n,r){var o=t.current,s=Rn(),i=os(o);return n=mb(n),t.context===null?t.context=n:t.pendingContext=n,t=ko(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ns(o,t,i),e!==null&&(_r(e,o,i,s),Bc(e,o,i)),i}function Nu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ip(e,t){fx(e,t),(e=e.alternate)&&fx(e,t)}function PP(){return null}var gb=typeof reportError=="function"?reportError:function(e){console.error(e)};function jp(e){this._internalRoot=e}sd.prototype.render=jp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(de(409));od(e,t,null,null)};sd.prototype.unmount=jp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ks(function(){od(null,e,null,null)}),t[So]=null}};function sd(e){this._internalRoot=e}sd.prototype.unstable_scheduleHydration=function(e){if(e){var t=G0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zo.length&&t!==0&&t<zo[n].priority;n++);zo.splice(n,0,e),n===0&&Y0(e)}};function Ep(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ad(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hx(){}function TP(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var u=Nu(i);s.call(u)}}var i=pb(t,r,e,0,null,!1,!1,"",hx);return e._reactRootContainer=i,e[So]=i.current,cl(e.nodeType===8?e.parentNode:e),Ks(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var u=Nu(c);l.call(u)}}var c=Np(e,0,!1,null,null,!1,!1,"",hx);return e._reactRootContainer=c,e[So]=c.current,cl(e.nodeType===8?e.parentNode:e),Ks(function(){od(t,c,n,r)}),c}function id(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var c=Nu(i);l.call(c)}}od(t,i,e,o)}else i=TP(n,t,e,o,r);return Nu(i)}V0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fi(t.pendingLanes);n!==0&&(Gm(t,n|1),Vn(t,Vt()),!(dt&6)&&(ri=Vt()+500,ms()))}break;case 13:Ks(function(){var r=No(e,1);if(r!==null){var o=Rn();_r(r,e,1,o)}}),Ip(e,1)}};Km=function(e){if(e.tag===13){var t=No(e,134217728);if(t!==null){var n=Rn();_r(t,e,134217728,n)}Ip(e,134217728)}};q0=function(e){if(e.tag===13){var t=os(e),n=No(e,t);if(n!==null){var r=Rn();_r(n,e,t,r)}Ip(e,t)}};G0=function(){return vt};K0=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}};gh=function(e,t,n){switch(t){case"input":if(ch(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Xu(r);if(!o)throw Error(de(90));N0(r),ch(r,o)}}}break;case"textarea":j0(e,n);break;case"select":t=n.value,t!=null&&Ra(e,!!n.multiple,t,!1)}};D0=bp;A0=Ks;var RP={usingClientEntryPoint:!1,Events:[Ll,Ca,Xu,_0,O0,bp]},Oi={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_P={bundleType:Oi.bundleType,version:Oi.version,rendererPackageName:Oi.rendererPackageName,rendererConfig:Oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Po.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$0(e),e===null?null:e.stateNode},findFiberByHostInstance:Oi.findFiberByHostInstance||PP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{Gu=Nc.inject(_P),eo=Nc}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RP;ir.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ep(t))throw Error(de(200));return EP(e,t,null,n)};ir.createRoot=function(e,t){if(!Ep(e))throw Error(de(299));var n=!1,r="",o=gb;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Np(e,1,!1,null,null,n,!1,r,o),e[So]=t.current,cl(e.nodeType===8?e.parentNode:e),new jp(t)};ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(de(188)):(e=Object.keys(e).join(","),Error(de(268,e)));return e=$0(t),e=e===null?null:e.stateNode,e};ir.flushSync=function(e){return Ks(e)};ir.hydrate=function(e,t,n){if(!ad(t))throw Error(de(200));return id(null,e,t,!0,n)};ir.hydrateRoot=function(e,t,n){if(!Ep(e))throw Error(de(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=gb;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=pb(t,null,e,1,n??null,o,!1,s,i),e[So]=t.current,cl(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new sd(t)};ir.render=function(e,t,n){if(!ad(t))throw Error(de(200));return id(null,e,t,!1,n)};ir.unmountComponentAtNode=function(e){if(!ad(e))throw Error(de(40));return e._reactRootContainer?(Ks(function(){id(null,null,e,!1,function(){e._reactRootContainer=null,e[So]=null})}),!0):!1};ir.unstable_batchedUpdates=bp;ir.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ad(n))throw Error(de(200));if(e==null||e._reactInternals===void 0)throw Error(de(38));return id(e,t,n,!1,r)};ir.version="18.3.1-next-f1338f8080-20240426";function vb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vb)}catch(e){console.error(e)}}vb(),v0.exports=ir;var ra=v0.exports;const xb=s0(ra);var yb,mx=ra;yb=mx.createRoot,mx.hydrateRoot;const OP=1,DP=1e6;let Cf=0;function AP(){return Cf=(Cf+1)%Number.MAX_SAFE_INTEGER,Cf.toString()}const Sf=new Map,px=e=>{if(Sf.has(e))return;const t=setTimeout(()=>{Sf.delete(e),Zi({type:"REMOVE_TOAST",toastId:e})},DP);Sf.set(e,t)},MP=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,OP)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?px(n):e.toasts.forEach(r=>{px(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Yc=[];let Qc={toasts:[]};function Zi(e){Qc=MP(Qc,e),Yc.forEach(t=>{t(Qc)})}function LP({...e}){const t=AP(),n=o=>Zi({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>Zi({type:"DISMISS_TOAST",toastId:t});return Zi({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function pi(){const[e,t]=f.useState(Qc);return f.useEffect(()=>(Yc.push(t),()=>{const n=Yc.indexOf(t);n>-1&&Yc.splice(n,1)}),[e]),{...e,toast:LP,dismiss:n=>Zi({type:"DISMISS_TOAST",toastId:n})}}function he(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function gx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ld(...e){return t=>{let n=!1;const r=e.map(o=>{const s=gx(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():gx(e[o],null)}}}}function Be(...e){return f.useCallback(ld(...e),e)}function $P(e,t){const n=f.createContext(t),r=s=>{const{children:i,...l}=s,c=f.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function o(s){const i=f.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,o]}function kn(e,t=[]){let n=[];function r(s,i){const l=f.createContext(i),c=n.length;n=[...n,i];const u=h=>{var g;const{scope:m,children:p,...b}=h,x=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,w=f.useMemo(()=>b,Object.values(b));return a.jsx(x.Provider,{value:w,children:p})};u.displayName=s+"Provider";function d(h,m){var x;const p=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,b=f.useContext(p);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,d]}const o=()=>{const s=n.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[e])||s;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return o.scopeName=e,[r,UP(o,...t)]}function UP(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(s)[`__scope${u}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function cs(e){const t=zP(e),n=f.forwardRef((r,o)=>{const{children:s,...i}=r,l=f.Children.toArray(s),c=l.find(WP);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return a.jsx(t,{...i,ref:o,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return a.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}var FP=cs("Slot");function zP(e){const t=f.forwardRef((n,r)=>{const{children:o,...s}=n;if(f.isValidElement(o)){const i=VP(o),l=HP(s,o.props);return o.type!==f.Fragment&&(l.ref=r?ld(r,i):i),f.cloneElement(o,l)}return f.Children.count(o)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wb=Symbol("radix.slottable");function BP(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=wb,t}function WP(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===wb}function HP(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...l)=>{const c=s(...l);return o(...l),c}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function VP(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ul(e){const t=e+"CollectionProvider",[n,r]=kn(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:w,children:g}=x,v=V.useRef(null),y=V.useRef(new Map).current;return a.jsx(o,{scope:w,itemMap:y,collectionRef:v,children:g})};i.displayName=t;const l=e+"CollectionSlot",c=cs(l),u=V.forwardRef((x,w)=>{const{scope:g,children:v}=x,y=s(l,g),k=Be(w,y.collectionRef);return a.jsx(c,{ref:k,children:v})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=cs(d),p=V.forwardRef((x,w)=>{const{scope:g,children:v,...y}=x,k=V.useRef(null),C=Be(w,k),N=s(d,g);return V.useEffect(()=>(N.itemMap.set(k,{ref:k,...y}),()=>void N.itemMap.delete(k))),a.jsx(m,{[h]:"",ref:C,children:v})});p.displayName=d;function b(x){const w=s(e+"CollectionConsumer",x);return V.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((N,S)=>y.indexOf(N.ref.current)-y.indexOf(S.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},b,r]}var qP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Se=qP.reduce((e,t)=>{const n=cs(`Primitive.${t}`),r=f.forwardRef((o,s)=>{const{asChild:i,...l}=o,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Pp(e,t){e&&ra.flushSync(()=>e.dispatchEvent(t))}function qt(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function GP(e,t=globalThis==null?void 0:globalThis.document){const n=qt(e);f.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var KP="DismissableLayer",Yh="dismissableLayer.update",YP="dismissableLayer.pointerDownOutside",QP="dismissableLayer.focusOutside",vx,bb=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),oa=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:l,...c}=e,u=f.useContext(bb),[d,h]=f.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),b=Be(t,S=>h(S)),x=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=x.indexOf(w),v=d?x.indexOf(d):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,k=v>=g,C=JP(S=>{const I=S.target,P=[...u.branches].some(E=>E.contains(I));!k||P||(o==null||o(S),i==null||i(S),S.defaultPrevented||l==null||l())},m),N=ZP(S=>{const I=S.target;[...u.branches].some(E=>E.contains(I))||(s==null||s(S),i==null||i(S),S.defaultPrevented||l==null||l())},m);return GP(S=>{v===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},m),f.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(vx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),xx(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=vx)}},[d,m,n,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),xx())},[d,u]),f.useEffect(()=>{const S=()=>p({});return document.addEventListener(Yh,S),()=>document.removeEventListener(Yh,S)},[]),a.jsx(Se.div,{...c,ref:b,style:{pointerEvents:y?k?"auto":"none":void 0,...e.style},onFocusCapture:he(e.onFocusCapture,N.onFocusCapture),onBlurCapture:he(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:he(e.onPointerDownCapture,C.onPointerDownCapture)})});oa.displayName=KP;var XP="DismissableLayerBranch",kb=f.forwardRef((e,t)=>{const n=f.useContext(bb),r=f.useRef(null),o=Be(t,r);return f.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),a.jsx(Se.div,{...e,ref:o})});kb.displayName=XP;function JP(e,t=globalThis==null?void 0:globalThis.document){const n=qt(e),r=f.useRef(!1),o=f.useRef(()=>{});return f.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let c=function(){Cb(YP,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=c,t.addEventListener("click",o.current,{once:!0})):c()}else t.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",s),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function ZP(e,t=globalThis==null?void 0:globalThis.document){const n=qt(e),r=f.useRef(!1);return f.useEffect(()=>{const o=s=>{s.target&&!r.current&&Cb(QP,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xx(){const e=new CustomEvent(Yh);document.dispatchEvent(e)}function Cb(e,t,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Pp(o,s):o.dispatchEvent(s)}var eT=oa,tT=kb,en=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},nT="Portal",gi=f.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[o,s]=f.useState(!1);en(()=>s(!0),[]);const i=n||o&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?xb.createPortal(a.jsx(Se.div,{...r,ref:t}),i):null});gi.displayName=nT;function rT(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var tn=e=>{const{present:t,children:n}=e,r=oT(t),o=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),s=Be(r.ref,sT(o));return typeof n=="function"||r.isPresent?f.cloneElement(o,{ref:s}):null};tn.displayName="Presence";function oT(e){const[t,n]=f.useState(),r=f.useRef(null),o=f.useRef(e),s=f.useRef("none"),i=e?"mounted":"unmounted",[l,c]=rT(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=Ic(r.current);s.current=l==="mounted"?u:"none"},[l]),en(()=>{const u=r.current,d=o.current;if(d!==e){const m=s.current,p=Ic(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),en(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=p=>{const x=Ic(r.current).includes(CSS.escape(p.animationName));if(p.target===t&&x&&(c("ANIMATION_END"),!o.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=p=>{p.target===t&&(s.current=Ic(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Ic(e){return(e==null?void 0:e.animationName)||"none"}function sT(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var aT=$m[" useInsertionEffect ".trim().toString()]||en;function xr({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,s,i]=iT({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:o;{const d=f.useRef(e!==void 0);f.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=f.useCallback(d=>{var h;if(l){const m=lT(d)?d(e):d;m!==e&&((h=i.current)==null||h.call(i,m))}else s(d)},[l,e,s,i]);return[c,u]}function iT({defaultProp:e,onChange:t}){const[n,r]=f.useState(e),o=f.useRef(n),s=f.useRef(t);return aT(()=>{s.current=t},[t]),f.useEffect(()=>{var i;o.current!==n&&((i=s.current)==null||i.call(s,n),o.current=n)},[n,o]),[n,r,s]}function lT(e){return typeof e=="function"}var Sb=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),cT="VisuallyHidden",cd=f.forwardRef((e,t)=>a.jsx(Se.span,{...e,ref:t,style:{...Sb,...e.style}}));cd.displayName=cT;var uT=cd,Tp="ToastProvider",[Rp,dT,fT]=Ul("Toast"),[Nb]=kn("Toast",[fT]),[hT,ud]=Nb(Tp),Ib=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:s=50,children:i}=e,[l,c]=f.useState(null),[u,d]=f.useState(0),h=f.useRef(!1),m=f.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Tp}\`. Expected non-empty \`string\`.`),a.jsx(Rp.Provider,{scope:t,children:a.jsx(hT,{scope:t,label:n,duration:r,swipeDirection:o,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>d(p=>p+1),[]),onToastRemove:f.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:i})})};Ib.displayName=Tp;var jb="ToastViewport",mT=["F8"],Qh="toast.viewportPause",Xh="toast.viewportResume",Eb=f.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=mT,label:o="Notifications ({hotkey})",...s}=e,i=ud(jb,n),l=dT(n),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),h=f.useRef(null),m=Be(t,h,i.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=i.toastCount>0;f.useEffect(()=>{const w=g=>{var y;r.length!==0&&r.every(k=>g[k]||g.code===k)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),f.useEffect(()=>{const w=c.current,g=h.current;if(b&&w&&g){const v=()=>{if(!i.isClosePausedRef.current){const N=new CustomEvent(Qh);g.dispatchEvent(N),i.isClosePausedRef.current=!0}},y=()=>{if(i.isClosePausedRef.current){const N=new CustomEvent(Xh);g.dispatchEvent(N),i.isClosePausedRef.current=!1}},k=N=>{!w.contains(N.relatedTarget)&&y()},C=()=>{w.contains(document.activeElement)||y()};return w.addEventListener("focusin",v),w.addEventListener("focusout",k),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",C),window.addEventListener("blur",v),window.addEventListener("focus",y),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",k),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",C),window.removeEventListener("blur",v),window.removeEventListener("focus",y)}}},[b,i.isClosePausedRef]);const x=f.useCallback(({tabbingDirection:w})=>{const v=l().map(y=>{const k=y.ref.current,C=[k,...jT(k)];return w==="forwards"?C:C.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return f.useEffect(()=>{const w=h.current;if(w){const g=v=>{var C,N,S;const y=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!y){const I=document.activeElement,P=v.shiftKey;if(v.target===w&&P){(C=u.current)==null||C.focus();return}const j=x({tabbingDirection:P?"backwards":"forwards"}),L=j.findIndex(D=>D===I);Nf(j.slice(L+1))?v.preventDefault():P?(N=u.current)==null||N.focus():(S=d.current)==null||S.focus()}};return w.addEventListener("keydown",g),()=>w.removeEventListener("keydown",g)}},[l,x]),a.jsxs(tT,{ref:c,role:"region","aria-label":o.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&a.jsx(Jh,{ref:u,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"forwards"});Nf(w)}}),a.jsx(Rp.Slot,{scope:n,children:a.jsx(Se.ol,{tabIndex:-1,...s,ref:m})}),b&&a.jsx(Jh,{ref:d,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"backwards"});Nf(w)}})]})});Eb.displayName=jb;var Pb="ToastFocusProxy",Jh=f.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=e,s=ud(Pb,n);return a.jsx(cd,{tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const l=i.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&r()}})});Jh.displayName=Pb;var Fl="Toast",pT="toast.swipeStart",gT="toast.swipeMove",vT="toast.swipeCancel",xT="toast.swipeEnd",Tb=f.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:s,...i}=e,[l,c]=xr({prop:r,defaultProp:o??!0,onChange:s,caller:Fl});return a.jsx(tn,{present:n||l,children:a.jsx(bT,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:qt(e.onPause),onResume:qt(e.onResume),onSwipeStart:he(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:he(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:he(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:he(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Tb.displayName=Fl;var[yT,wT]=Nb(Fl,{onClose(){}}),bT=f.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:s,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:p,...b}=e,x=ud(Fl,n),[w,g]=f.useState(null),v=Be(t,D=>g(D)),y=f.useRef(null),k=f.useRef(null),C=o||x.duration,N=f.useRef(0),S=f.useRef(C),I=f.useRef(0),{onToastAdd:P,onToastRemove:E}=x,_=qt(()=>{var z;(w==null?void 0:w.contains(document.activeElement))&&((z=x.viewport)==null||z.focus()),i()}),j=f.useCallback(D=>{!D||D===1/0||(window.clearTimeout(I.current),N.current=new Date().getTime(),I.current=window.setTimeout(_,D))},[_]);f.useEffect(()=>{const D=x.viewport;if(D){const z=()=>{j(S.current),u==null||u()},A=()=>{const R=new Date().getTime()-N.current;S.current=S.current-R,window.clearTimeout(I.current),c==null||c()};return D.addEventListener(Qh,A),D.addEventListener(Xh,z),()=>{D.removeEventListener(Qh,A),D.removeEventListener(Xh,z)}}},[x.viewport,C,c,u,j]),f.useEffect(()=>{s&&!x.isClosePausedRef.current&&j(C)},[s,C,x.isClosePausedRef,j]),f.useEffect(()=>(P(),()=>E()),[P,E]);const L=f.useMemo(()=>w?Lb(w):null,[w]);return x.viewport?a.jsxs(a.Fragment,{children:[L&&a.jsx(kT,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:L}),a.jsx(yT,{scope:n,onClose:_,children:ra.createPortal(a.jsx(Rp.ItemSlot,{scope:n,children:a.jsx(eT,{asChild:!0,onEscapeKeyDown:he(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||_(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(Se.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...b,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:he(e.onKeyDown,D=>{D.key==="Escape"&&(l==null||l(D.nativeEvent),D.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,_()))}),onPointerDown:he(e.onPointerDown,D=>{D.button===0&&(y.current={x:D.clientX,y:D.clientY})}),onPointerMove:he(e.onPointerMove,D=>{if(!y.current)return;const z=D.clientX-y.current.x,A=D.clientY-y.current.y,R=!!k.current,T=["left","right"].includes(x.swipeDirection),O=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,H=T?O(0,z):0,q=T?0:O(0,A),Z=D.pointerType==="touch"?10:2,G={x:H,y:q},K={originalEvent:D,delta:G};R?(k.current=G,jc(gT,h,K,{discrete:!1})):yx(G,x.swipeDirection,Z)?(k.current=G,jc(pT,d,K,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(z)>Z||Math.abs(A)>Z)&&(y.current=null)}),onPointerUp:he(e.onPointerUp,D=>{const z=k.current,A=D.target;if(A.hasPointerCapture(D.pointerId)&&A.releasePointerCapture(D.pointerId),k.current=null,y.current=null,z){const R=D.currentTarget,T={originalEvent:D,delta:z};yx(z,x.swipeDirection,x.swipeThreshold)?jc(xT,p,T,{discrete:!0}):jc(vT,m,T,{discrete:!0}),R.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),kT=e=>{const{__scopeToast:t,children:n,...r}=e,o=ud(Fl,t),[s,i]=f.useState(!1),[l,c]=f.useState(!1);return NT(()=>i(!0)),f.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(gi,{asChild:!0,children:a.jsx(cd,{...r,children:s&&a.jsxs(a.Fragment,{children:[o.label," ",n]})})})},CT="ToastTitle",Rb=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return a.jsx(Se.div,{...r,ref:t})});Rb.displayName=CT;var ST="ToastDescription",_b=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return a.jsx(Se.div,{...r,ref:t})});_b.displayName=ST;var Ob="ToastAction",Db=f.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?a.jsx(Mb,{altText:n,asChild:!0,children:a.jsx(_p,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ob}\`. Expected non-empty \`string\`.`),null)});Db.displayName=Ob;var Ab="ToastClose",_p=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,o=wT(Ab,n);return a.jsx(Mb,{asChild:!0,children:a.jsx(Se.button,{type:"button",...r,ref:t,onClick:he(e.onClick,o.onClose)})})});_p.displayName=Ab;var Mb=f.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...o}=e;return a.jsx(Se.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:t})});function Lb(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),IT(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!o)if(s){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Lb(r))}}),t}function jc(e,t,n,{discrete:r}){const o=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Pp(o,s):o.dispatchEvent(s)}var yx=(e,t,n=0)=>{const r=Math.abs(e.x),o=Math.abs(e.y),s=r>o;return t==="left"||t==="right"?s&&r>n:!s&&o>n};function NT(e=()=>{}){const t=qt(e);en(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function IT(e){return e.nodeType===e.ELEMENT_NODE}function jT(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Nf(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var ET=Ib,$b=Eb,Ub=Tb,Fb=Rb,zb=_b,Bb=Db,Wb=_p;function Hb(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Hb(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Vb(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Hb(e))&&(r&&(r+=" "),r+=t);return r}const wx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,bx=Vb,ps=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return bx(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(u=>{const d=n==null?void 0:n[u],h=s==null?void 0:s[u];if(d===null)return null;const m=wx(d)||wx(h);return o[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(b=>{let[x,w]=b;return Array.isArray(w)?w.includes({...s,...l}[x]):{...s,...l}[x]===w})?[...u,h,m]:u},[]);return bx(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qb=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...l},c)=>f.createElement("svg",{ref:c,...TT,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:qb("lucide",o),...l},[...i.map(([u,d])=>f.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(e,t)=>{const n=f.forwardRef(({className:r,...o},s)=>f.createElement(RT,{ref:s,iconNode:t,className:qb(`lucide-${PT(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=Ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=Ee("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=Ee("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=Ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=Ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=Ee("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=Ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=Ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=Ee("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=Ee("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=Ee("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=Ee("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Ee("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=Ee("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=Ee("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=Ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=Ee("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=Ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=Ee("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=Ee("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=Ee("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=Ee("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=Ee("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=Ee("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=Ee("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Ee("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=Ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=Ee("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=Ee("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=Ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=Ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=Ee("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=Ee("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=Ee("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=Ee("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=Ee("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=Ee("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=Ee("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=Ee("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=Ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=Ee("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=Ee("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=Ee("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=Ee("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Dp="-",e2=e=>{const t=n2(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const l=i.split(Dp);return l[0]===""&&l.length!==1&&l.shift(),ek(l,t)||t2(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&r[i]?[...c,...r[i]]:c}}},ek=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?ek(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const s=e.join(Dp);return(i=t.validators.find(({validator:l})=>l(s)))==null?void 0:i.classGroupId},Ix=/^\[(.+)\]$/,t2=e=>{if(Ix.test(e)){const t=Ix.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},n2=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return o2(Object.entries(e.classGroups),n).forEach(([s,i])=>{tm(i,r,s,t)}),r},tm=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const s=o===""?t:jx(t,o);s.classGroupId=n;return}if(typeof o=="function"){if(r2(o)){tm(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{tm(i,jx(t,s),n,r)})})},jx=(e,t)=>{let n=e;return t.split(Dp).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},r2=e=>e.isThemeGetter,o2=(e,t)=>t?e.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,l])=>[t+i,l])):s);return[n,o]}):e,s2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},tk="!",a2=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,o=t[0],s=t.length,i=l=>{const c=[];let u=0,d=0,h;for(let w=0;w<l.length;w++){let g=l[w];if(u===0){if(g===o&&(r||l.slice(w,w+s)===t)){c.push(l.slice(d,w)),d=w+s;continue}if(g==="/"){h=w;continue}}g==="["?u++:g==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(tk),b=p?m.substring(1):m,x=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:b,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:i}):i},i2=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},l2=e=>({cache:s2(e.cacheSize),parseClassName:a2(e),...e2(e)}),c2=/\s+/,u2=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=t,s=[],i=e.trim().split(c2);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=n(u);let b=!!p,x=r(b?m.substring(0,p):m);if(!x){if(!b){l=u+(l.length>0?" "+l:l);continue}if(x=r(m),!x){l=u+(l.length>0?" "+l:l);continue}b=!1}const w=i2(d).join(":"),g=h?w+tk:w,v=g+x;if(s.includes(v))continue;s.push(v);const y=o(x,b);for(let k=0;k<y.length;++k){const C=y[k];s.push(g+C)}l=u+(l.length>0?" "+l:l)}return l};function d2(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=nk(t))&&(r&&(r+=" "),r+=n);return r}const nk=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=nk(e[r]))&&(n&&(n+=" "),n+=t);return n};function f2(e,...t){let n,r,o,s=i;function i(c){const u=t.reduce((d,h)=>h(d),e());return n=l2(u),r=n.cache.get,o=n.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=u2(c,n);return o(c,d),d}return function(){return s(d2.apply(null,arguments))}}const jt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},rk=/^\[(?:([a-z-]+):)?(.+)\]$/i,h2=/^\d+\/\d+$/,m2=new Set(["px","full","screen"]),p2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,g2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,v2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,x2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,y2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,uo=e=>$a(e)||m2.has(e)||h2.test(e),Oo=e=>vi(e,"length",j2),$a=e=>!!e&&!Number.isNaN(Number(e)),jf=e=>vi(e,"number",$a),Di=e=>!!e&&Number.isInteger(Number(e)),w2=e=>e.endsWith("%")&&$a(e.slice(0,-1)),qe=e=>rk.test(e),Do=e=>p2.test(e),b2=new Set(["length","size","percentage"]),k2=e=>vi(e,b2,ok),C2=e=>vi(e,"position",ok),S2=new Set(["image","url"]),N2=e=>vi(e,S2,P2),I2=e=>vi(e,"",E2),Ai=()=>!0,vi=(e,t,n)=>{const r=rk.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},j2=e=>g2.test(e)&&!v2.test(e),ok=()=>!1,E2=e=>x2.test(e),P2=e=>y2.test(e),T2=()=>{const e=jt("colors"),t=jt("spacing"),n=jt("blur"),r=jt("brightness"),o=jt("borderColor"),s=jt("borderRadius"),i=jt("borderSpacing"),l=jt("borderWidth"),c=jt("contrast"),u=jt("grayscale"),d=jt("hueRotate"),h=jt("invert"),m=jt("gap"),p=jt("gradientColorStops"),b=jt("gradientColorStopPositions"),x=jt("inset"),w=jt("margin"),g=jt("opacity"),v=jt("padding"),y=jt("saturate"),k=jt("scale"),C=jt("sepia"),N=jt("skew"),S=jt("space"),I=jt("translate"),P=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",qe,t],j=()=>[qe,t],L=()=>["",uo,Oo],D=()=>["auto",$a,qe],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",qe],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[$a,qe];return{cacheSize:500,separator:":",theme:{colors:[Ai],spacing:[uo,Oo],blur:["none","",Do,qe],brightness:q(),borderColor:[e],borderRadius:["none","","full",Do,qe],borderSpacing:j(),borderWidth:L(),contrast:q(),grayscale:O(),hueRotate:q(),invert:O(),gap:j(),gradientColorStops:[e],gradientColorStopPositions:[w2,Oo],inset:_(),margin:_(),opacity:q(),padding:j(),saturate:q(),scale:q(),sepia:O(),skew:q(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",qe]}],container:["container"],columns:[{columns:[Do]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),qe]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Di,qe]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qe]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",Di,qe]}],"grid-cols":[{"grid-cols":[Ai]}],"col-start-end":[{col:["auto",{span:["full",Di,qe]},qe]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[Ai]}],"row-start-end":[{row:["auto",{span:[Di,qe]},qe]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qe,t]}],"min-w":[{"min-w":[qe,t,"min","max","fit"]}],"max-w":[{"max-w":[qe,t,"none","full","min","max","fit","prose",{screen:[Do]},Do]}],h:[{h:[qe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Do,Oo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jf]}],"font-family":[{font:[Ai]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qe]}],"line-clamp":[{"line-clamp":["none",$a,jf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",uo,qe]}],"list-image":[{"list-image":["none",qe]}],"list-style-type":[{list:["none","disc","decimal",qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",uo,Oo]}],"underline-offset":[{"underline-offset":["auto",uo,qe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),C2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",k2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},N2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:A()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[uo,qe]}],"outline-w":[{outline:[uo,Oo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[uo,Oo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Do,I2]}],"shadow-color":[{shadow:[Ai]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Do,qe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[y]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qe]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",qe]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Di,qe]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[uo,Oo,jf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},R2=f2(T2);function ke(...e){return R2(Vb(e))}const _2=ET,sk=f.forwardRef(({className:e,...t},n)=>a.jsx($b,{ref:n,className:ke("fixed top-4 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:top-4 sm:right-4 sm:left-auto sm:flex-col sm:max-w-[420px] max-w-[95vw] mx-auto",e),...t}));sk.displayName=$b.displayName;const O2=ps("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-xl border p-4 pr-8 shadow-floating transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full min-h-[60px] max-w-[90vw] mx-auto",{variants:{variant:{default:"border bg-card text-card-foreground backdrop-blur-xl",destructive:"border-destructive/20 bg-destructive text-destructive-foreground backdrop-blur-xl",success:"border-success/20 bg-success text-success-foreground backdrop-blur-xl",warning:"border-warning/20 bg-warning text-warning-foreground backdrop-blur-xl"}},defaultVariants:{variant:"default"}}),ak=f.forwardRef(({className:e,variant:t,...n},r)=>a.jsx(Ub,{ref:r,className:ke(O2({variant:t}),e),...n}));ak.displayName=Ub.displayName;const D2=f.forwardRef(({className:e,...t},n)=>a.jsx(Bb,{ref:n,className:ke("inline-flex min-h-[44px] shrink-0 items-center justify-center rounded-lg border bg-transparent px-4 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));D2.displayName=Bb.displayName;const ik=f.forwardRef(({className:e,...t},n)=>a.jsx(Wb,{ref:n,className:ke("absolute right-2 top-2 rounded-lg p-2 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-destructive-foreground/70 group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive-foreground min-h-[44px] min-w-[44px] flex items-center justify-center",e),"toast-close":"",...t,children:a.jsx(no,{className:"h-4 w-4"})}));ik.displayName=Wb.displayName;const lk=f.forwardRef(({className:e,...t},n)=>a.jsx(Fb,{ref:n,className:ke("text-sm font-semibold leading-tight",e),...t}));lk.displayName=Fb.displayName;const ck=f.forwardRef(({className:e,...t},n)=>a.jsx(zb,{ref:n,className:ke("text-sm opacity-90 leading-relaxed mt-1",e),...t}));ck.displayName=zb.displayName;function A2(){const{toasts:e}=pi();return a.jsxs(_2,{children:[e.map(function({id:t,title:n,description:r,action:o,...s}){return a.jsxs(ak,{...s,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(lk,{children:n}),r&&a.jsx(ck,{children:r})]}),o,a.jsx(ik,{})]},t)}),a.jsx(sk,{})]})}var Ex=["light","dark"],M2="(prefers-color-scheme: dark)",L2=f.createContext(void 0),$2={setTheme:e=>{},themes:[]},U2=()=>{var e;return(e=f.useContext(L2))!=null?e:$2};f.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:s,value:i,attrs:l,nonce:c})=>{let u=s==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=o?Ex.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(b,x=!1,w=!0)=>{let g=i?i[b]:b,v=x?b+"|| ''":`'${g}'`,y="";return o&&w&&!x&&Ex.includes(b)&&(y+=`d.style.colorScheme = '${b}';`),n==="class"?x||g?y+=`c.add(${v})`:y+="null":g&&(y+=`d[s](n,${v})`),y},p=e?`!function(){${d}${m(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${M2}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}${u?"":"else{"+m(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}else{${m(s,!1,!1)};}${h}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var F2=e=>{switch(e){case"success":return W2;case"info":return V2;case"warning":return H2;case"error":return q2;default:return null}},z2=Array(12).fill(0),B2=({visible:e,className:t})=>V.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},V.createElement("div",{className:"sonner-spinner"},z2.map((n,r)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),W2=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),H2=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),V2=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),q2=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),G2=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),K2=()=>{let[e,t]=V.useState(document.hidden);return V.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},nm=1,Y2=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:nm++,s=this.toasts.find(l=>l.id===o),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),s?this.toasts=this.toasts.map(l=>l.id===o?(this.publish({...l,...e,id:o,title:n}),{...l,...e,id:o,dismissible:i,title:n}):l):this.addToast({title:n,...r,dismissible:i,id:o}),o},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),o=n!==void 0,s,i=r.then(async c=>{if(s=["resolve",c],V.isValidElement(c))o=!1,this.create({id:n,type:"default",message:c});else if(X2(c)&&!c.ok){o=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){o=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(s=["reject",c],t.error!==void 0){o=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;o&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>i.then(()=>s[0]==="reject"?u(s[1]):c(s[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||nm++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},$n=new Y2,Q2=(e,t)=>{let n=(t==null?void 0:t.id)||nm++;return $n.addToast({title:e,...t,id:n}),n},X2=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",J2=Q2,Z2=()=>$n.toasts,eR=()=>$n.getActiveToasts(),ht=Object.assign(J2,{success:$n.success,info:$n.info,warning:$n.warning,error:$n.error,custom:$n.custom,message:$n.message,promise:$n.promise,dismiss:$n.dismiss,loading:$n.loading},{getHistory:Z2,getToasts:eR});function tR(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}tR(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ec(e){return e.label!==void 0}var nR=3,rR="32px",oR="16px",Px=4e3,sR=356,aR=14,iR=20,lR=200;function kr(...e){return e.filter(Boolean).join(" ")}function cR(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var uR=e=>{var t,n,r,o,s,i,l,c,u,d,h;let{invert:m,toast:p,unstyled:b,interacting:x,setHeights:w,visibleToasts:g,heights:v,index:y,toasts:k,expanded:C,removeToast:N,defaultRichColors:S,closeButton:I,style:P,cancelButtonStyle:E,actionButtonStyle:_,className:j="",descriptionClassName:L="",duration:D,position:z,gap:A,loadingIcon:R,expandByDefault:T,classNames:O,icons:H,closeButtonAriaLabel:q="Close toast",pauseWhenPageIsHidden:Z}=e,[G,K]=V.useState(null),[re,ie]=V.useState(null),[Y,ne]=V.useState(!1),[xe,le]=V.useState(!1),[se,pe]=V.useState(!1),[ge,We]=V.useState(!1),[Xe,Pe]=V.useState(!1),[ze,we]=V.useState(0),[be,_e]=V.useState(0),Ne=V.useRef(p.duration||D||Px),nt=V.useRef(null),He=V.useRef(null),Ye=y===0,It=y+1<=g,xt=p.type,Dt=p.dismissible!==!1,oe=p.className||"",me=p.descriptionClassName||"",Ie=V.useMemo(()=>v.findIndex(ae=>ae.toastId===p.id)||0,[v,p.id]),Ue=V.useMemo(()=>{var ae;return(ae=p.closeButton)!=null?ae:I},[p.closeButton,I]),Ct=V.useMemo(()=>p.duration||D||Px,[p.duration,D]),Te=V.useRef(0),Ge=V.useRef(0),it=V.useRef(0),Qe=V.useRef(null),[Nn,je]=z.split("-"),U=V.useMemo(()=>v.reduce((ae,Me,Je)=>Je>=Ie?ae:ae+Me.height,0),[v,Ie]),$=K2(),Ve=p.invert||m,Q=xt==="loading";Ge.current=V.useMemo(()=>Ie*A+U,[Ie,U]),V.useEffect(()=>{Ne.current=Ct},[Ct]),V.useEffect(()=>{ne(!0)},[]),V.useEffect(()=>{let ae=He.current;if(ae){let Me=ae.getBoundingClientRect().height;return _e(Me),w(Je=>[{toastId:p.id,height:Me,position:p.position},...Je]),()=>w(Je=>Je.filter(yt=>yt.toastId!==p.id))}},[w,p.id]),V.useLayoutEffect(()=>{if(!Y)return;let ae=He.current,Me=ae.style.height;ae.style.height="auto";let Je=ae.getBoundingClientRect().height;ae.style.height=Me,_e(Je),w(yt=>yt.find(mt=>mt.toastId===p.id)?yt.map(mt=>mt.toastId===p.id?{...mt,height:Je}:mt):[{toastId:p.id,height:Je,position:p.position},...yt])},[Y,p.title,p.description,w,p.id]);let lt=V.useCallback(()=>{le(!0),we(Ge.current),w(ae=>ae.filter(Me=>Me.toastId!==p.id)),setTimeout(()=>{N(p)},lR)},[p,N,w,Ge]);V.useEffect(()=>{if(p.promise&&xt==="loading"||p.duration===1/0||p.type==="loading")return;let ae;return C||x||Z&&$?(()=>{if(it.current<Te.current){let Me=new Date().getTime()-Te.current;Ne.current=Ne.current-Me}it.current=new Date().getTime()})():Ne.current!==1/0&&(Te.current=new Date().getTime(),ae=setTimeout(()=>{var Me;(Me=p.onAutoClose)==null||Me.call(p,p),lt()},Ne.current)),()=>clearTimeout(ae)},[C,x,p,xt,Z,$,lt]),V.useEffect(()=>{p.delete&&lt()},[lt,p.delete]);function bt(){var ae,Me,Je;return H!=null&&H.loading?V.createElement("div",{className:kr(O==null?void 0:O.loader,(ae=p==null?void 0:p.classNames)==null?void 0:ae.loader,"sonner-loader"),"data-visible":xt==="loading"},H.loading):R?V.createElement("div",{className:kr(O==null?void 0:O.loader,(Me=p==null?void 0:p.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":xt==="loading"},R):V.createElement(B2,{className:kr(O==null?void 0:O.loader,(Je=p==null?void 0:p.classNames)==null?void 0:Je.loader),visible:xt==="loading"})}return V.createElement("li",{tabIndex:0,ref:He,className:kr(j,oe,O==null?void 0:O.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[xt],(n=p==null?void 0:p.classNames)==null?void 0:n[xt]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:S,"data-styled":!(p.jsx||p.unstyled||b),"data-mounted":Y,"data-promise":!!p.promise,"data-swiped":Xe,"data-removed":xe,"data-visible":It,"data-y-position":Nn,"data-x-position":je,"data-index":y,"data-front":Ye,"data-swiping":se,"data-dismissible":Dt,"data-type":xt,"data-invert":Ve,"data-swipe-out":ge,"data-swipe-direction":re,"data-expanded":!!(C||T&&Y),style:{"--index":y,"--toasts-before":y,"--z-index":k.length-y,"--offset":`${xe?ze:Ge.current}px`,"--initial-height":T?"auto":`${be}px`,...P,...p.style},onDragEnd:()=>{pe(!1),K(null),Qe.current=null},onPointerDown:ae=>{Q||!Dt||(nt.current=new Date,we(Ge.current),ae.target.setPointerCapture(ae.pointerId),ae.target.tagName!=="BUTTON"&&(pe(!0),Qe.current={x:ae.clientX,y:ae.clientY}))},onPointerUp:()=>{var ae,Me,Je,yt;if(ge||!Dt)return;Qe.current=null;let mt=Number(((ae=He.current)==null?void 0:ae.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),zt=Number(((Me=He.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),fn=new Date().getTime()-((Je=nt.current)==null?void 0:Je.getTime()),nn=G==="x"?mt:zt,B=Math.abs(nn)/fn;if(Math.abs(nn)>=iR||B>.11){we(Ge.current),(yt=p.onDismiss)==null||yt.call(p,p),ie(G==="x"?mt>0?"right":"left":zt>0?"down":"up"),lt(),We(!0),Pe(!1);return}pe(!1),K(null)},onPointerMove:ae=>{var Me,Je,yt,mt;if(!Qe.current||!Dt||((Me=window.getSelection())==null?void 0:Me.toString().length)>0)return;let zt=ae.clientY-Qe.current.y,fn=ae.clientX-Qe.current.x,nn=(Je=e.swipeDirections)!=null?Je:cR(z);!G&&(Math.abs(fn)>1||Math.abs(zt)>1)&&K(Math.abs(fn)>Math.abs(zt)?"x":"y");let B={x:0,y:0};G==="y"?(nn.includes("top")||nn.includes("bottom"))&&(nn.includes("top")&&zt<0||nn.includes("bottom")&&zt>0)&&(B.y=zt):G==="x"&&(nn.includes("left")||nn.includes("right"))&&(nn.includes("left")&&fn<0||nn.includes("right")&&fn>0)&&(B.x=fn),(Math.abs(B.x)>0||Math.abs(B.y)>0)&&Pe(!0),(yt=He.current)==null||yt.style.setProperty("--swipe-amount-x",`${B.x}px`),(mt=He.current)==null||mt.style.setProperty("--swipe-amount-y",`${B.y}px`)}},Ue&&!p.jsx?V.createElement("button",{"aria-label":q,"data-disabled":Q,"data-close-button":!0,onClick:Q||!Dt?()=>{}:()=>{var ae;lt(),(ae=p.onDismiss)==null||ae.call(p,p)},className:kr(O==null?void 0:O.closeButton,(o=p==null?void 0:p.classNames)==null?void 0:o.closeButton)},(s=H==null?void 0:H.close)!=null?s:G2):null,p.jsx||f.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:V.createElement(V.Fragment,null,xt||p.icon||p.promise?V.createElement("div",{"data-icon":"",className:kr(O==null?void 0:O.icon,(i=p==null?void 0:p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||bt():null,p.type!=="loading"?p.icon||(H==null?void 0:H[xt])||F2(xt):null):null,V.createElement("div",{"data-content":"",className:kr(O==null?void 0:O.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},V.createElement("div",{"data-title":"",className:kr(O==null?void 0:O.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?V.createElement("div",{"data-description":"",className:kr(L,me,O==null?void 0:O.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),f.isValidElement(p.cancel)?p.cancel:p.cancel&&Ec(p.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||E,onClick:ae=>{var Me,Je;Ec(p.cancel)&&Dt&&((Je=(Me=p.cancel).onClick)==null||Je.call(Me,ae),lt())},className:kr(O==null?void 0:O.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,f.isValidElement(p.action)?p.action:p.action&&Ec(p.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||_,onClick:ae=>{var Me,Je;Ec(p.action)&&((Je=(Me=p.action).onClick)==null||Je.call(Me,ae),!ae.defaultPrevented&&lt())},className:kr(O==null?void 0:O.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function Tx(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function dR(e,t){let n={};return[e,t].forEach((r,o)=>{let s=o===1,i=s?"--mobile-offset":"--offset",l=s?oR:rR;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${i}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${i}-${u}`]=l:n[`${i}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var fR=f.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:o=["altKey","KeyT"],expand:s,closeButton:i,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:m,style:p,visibleToasts:b=nR,toastOptions:x,dir:w=Tx(),gap:g=aR,loadingIcon:v,icons:y,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:C}=e,[N,S]=V.useState([]),I=V.useMemo(()=>Array.from(new Set([r].concat(N.filter(Z=>Z.position).map(Z=>Z.position)))),[N,r]),[P,E]=V.useState([]),[_,j]=V.useState(!1),[L,D]=V.useState(!1),[z,A]=V.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=V.useRef(null),T=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=V.useRef(null),H=V.useRef(!1),q=V.useCallback(Z=>{S(G=>{var K;return(K=G.find(re=>re.id===Z.id))!=null&&K.delete||$n.dismiss(Z.id),G.filter(({id:re})=>re!==Z.id)})},[]);return V.useEffect(()=>$n.subscribe(Z=>{if(Z.dismiss){S(G=>G.map(K=>K.id===Z.id?{...K,delete:!0}:K));return}setTimeout(()=>{xb.flushSync(()=>{S(G=>{let K=G.findIndex(re=>re.id===Z.id);return K!==-1?[...G.slice(0,K),{...G[K],...Z},...G.slice(K+1)]:[Z,...G]})})})}),[]),V.useEffect(()=>{if(d!=="system"){A(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),typeof window>"u")return;let Z=window.matchMedia("(prefers-color-scheme: dark)");try{Z.addEventListener("change",({matches:G})=>{A(G?"dark":"light")})}catch{Z.addListener(({matches:K})=>{try{A(K?"dark":"light")}catch(re){console.error(re)}})}},[d]),V.useEffect(()=>{N.length<=1&&j(!1)},[N]),V.useEffect(()=>{let Z=G=>{var K,re;o.every(ie=>G[ie]||G.code===ie)&&(j(!0),(K=R.current)==null||K.focus()),G.code==="Escape"&&(document.activeElement===R.current||(re=R.current)!=null&&re.contains(document.activeElement))&&j(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[o]),V.useEffect(()=>{if(R.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,H.current=!1)}},[R.current]),V.createElement("section",{ref:t,"aria-label":`${k} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((Z,G)=>{var K;let[re,ie]=Z.split("-");return N.length?V.createElement("ol",{key:Z,dir:w==="auto"?Tx():w,tabIndex:-1,ref:R,className:l,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":re,"data-lifted":_&&N.length>1&&!s,"data-x-position":ie,style:{"--front-toast-height":`${((K=P[0])==null?void 0:K.height)||0}px`,"--width":`${sR}px`,"--gap":`${g}px`,...p,...dR(c,u)},onBlur:Y=>{H.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(H.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||H.current||(H.current=!0,O.current=Y.relatedTarget)},onMouseEnter:()=>j(!0),onMouseMove:()=>j(!0),onMouseLeave:()=>{L||j(!1)},onDragEnd:()=>j(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||D(!0)},onPointerUp:()=>D(!1)},N.filter(Y=>!Y.position&&G===0||Y.position===Z).map((Y,ne)=>{var xe,le;return V.createElement(uR,{key:Y.id,icons:y,index:ne,toast:Y,defaultRichColors:h,duration:(xe=x==null?void 0:x.duration)!=null?xe:m,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:n,visibleToasts:b,closeButton:(le=x==null?void 0:x.closeButton)!=null?le:i,interacting:L,position:Z,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:q,toasts:N.filter(se=>se.position==Y.position),heights:P.filter(se=>se.position==Y.position),setHeights:E,expandByDefault:s,gap:g,loadingIcon:v,expanded:_,pauseWhenPageIsHidden:C,swipeDirections:e.swipeDirections})})):null}))});const hR=({...e})=>{const{theme:t="system"}=U2();return a.jsx(fR,{theme:t,className:"toaster group",position:"top-center",expand:!0,richColors:!1,toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-card group-[.toaster]:text-card-foreground group-[.toaster]:border-border group-[.toaster]:shadow-floating group-[.toaster]:rounded-xl group-[.toaster]:backdrop-blur-xl group-[.toaster]:min-h-[60px] group-[.toaster]:w-full group-[.toaster]:max-w-[90vw] group-[.toaster]:mx-auto group-[.toaster]:p-4",description:"group-[.toast]:text-muted-foreground group-[.toast]:text-sm group-[.toast]:leading-relaxed group-[.toast]:mt-1",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground group-[.toast]:hover:bg-primary/90 group-[.toast]:rounded-lg group-[.toast]:min-h-[44px] group-[.toast]:px-4 group-[.toast]:font-medium group-[.toast]:transition-colors",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground group-[.toast]:hover:bg-muted/80 group-[.toast]:rounded-lg group-[.toast]:min-h-[44px] group-[.toast]:px-4 group-[.toast]:font-medium group-[.toast]:transition-colors",success:"group-[.toaster]:bg-success group-[.toaster]:text-success-foreground group-[.toaster]:border-success/20",error:"group-[.toaster]:bg-destructive group-[.toaster]:text-destructive-foreground group-[.toaster]:border-destructive/20",warning:"group-[.toaster]:bg-warning group-[.toaster]:text-warning-foreground group-[.toaster]:border-warning/20",info:"group-[.toaster]:bg-primary group-[.toaster]:text-primary-foreground group-[.toaster]:border-primary/20"},style:{background:"hsl(var(--card))",border:"1px solid hsl(var(--border))",color:"hsl(var(--card-foreground))"}},...e})};var mR=$m[" useId ".trim().toString()]||(()=>{}),pR=0;function tr(e){const[t,n]=f.useState(mR());return en(()=>{n(r=>r??String(pR++))},[e]),t?`radix-${t}`:""}const gR=["top","right","bottom","left"],us=Math.min,Xn=Math.max,Iu=Math.round,Pc=Math.floor,ro=e=>({x:e,y:e}),vR={left:"right",right:"left",bottom:"top",top:"bottom"},xR={start:"end",end:"start"};function rm(e,t,n){return Xn(e,us(t,n))}function jo(e,t){return typeof e=="function"?e(t):e}function Eo(e){return e.split("-")[0]}function xi(e){return e.split("-")[1]}function Ap(e){return e==="x"?"y":"x"}function Mp(e){return e==="y"?"height":"width"}const yR=new Set(["top","bottom"]);function Jr(e){return yR.has(Eo(e))?"y":"x"}function Lp(e){return Ap(Jr(e))}function wR(e,t,n){n===void 0&&(n=!1);const r=xi(e),o=Lp(e),s=Mp(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=ju(i)),[i,ju(i)]}function bR(e){const t=ju(e);return[om(e),t,om(t)]}function om(e){return e.replace(/start|end/g,t=>xR[t])}const Rx=["left","right"],_x=["right","left"],kR=["top","bottom"],CR=["bottom","top"];function SR(e,t,n){switch(e){case"top":case"bottom":return n?t?_x:Rx:t?Rx:_x;case"left":case"right":return t?kR:CR;default:return[]}}function NR(e,t,n,r){const o=xi(e);let s=SR(Eo(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(om)))),s}function ju(e){return e.replace(/left|right|bottom|top/g,t=>vR[t])}function IR(e){return{top:0,right:0,bottom:0,left:0,...e}}function uk(e){return typeof e!="number"?IR(e):{top:e,right:e,bottom:e,left:e}}function Eu(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function Ox(e,t,n){let{reference:r,floating:o}=e;const s=Jr(t),i=Lp(t),l=Mp(i),c=Eo(t),u=s==="y",d=r.x+r.width/2-o.width/2,h=r.y+r.height/2-o.height/2,m=r[l]/2-o[l]/2;let p;switch(c){case"top":p={x:d,y:r.y-o.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-o.width,y:h};break;default:p={x:r.x,y:r.y}}switch(xi(t)){case"start":p[i]-=m*(n&&u?-1:1);break;case"end":p[i]+=m*(n&&u?-1:1);break}return p}const jR=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,l=s.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:d,y:h}=Ox(u,r,c),m=r,p={},b=0;for(let x=0;x<l.length;x++){const{name:w,fn:g}=l[x],{x:v,y,data:k,reset:C}=await g({x:d,y:h,initialPlacement:r,placement:m,strategy:o,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});d=v??d,h=y??h,p={...p,[w]:{...p[w],...k}},C&&b<=50&&(b++,typeof C=="object"&&(C.placement&&(m=C.placement),C.rects&&(u=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):C.rects),{x:d,y:h}=Ox(u,m,c)),x=-1)}return{x:d,y:h,placement:m,strategy:o,middlewareData:p}};async function yl(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=jo(t,e),b=uk(p),w=l[m?h==="floating"?"reference":"floating":h],g=Eu(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),k=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},C=Eu(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:y,strategy:c}):v);return{top:(g.top-C.top+b.top)/k.y,bottom:(C.bottom-g.bottom+b.bottom)/k.y,left:(g.left-C.left+b.left)/k.x,right:(C.right-g.right+b.right)/k.x}}const ER=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=jo(e,t)||{};if(u==null)return{};const h=uk(d),m={x:n,y:r},p=Lp(o),b=Mp(p),x=await i.getDimensions(u),w=p==="y",g=w?"top":"left",v=w?"bottom":"right",y=w?"clientHeight":"clientWidth",k=s.reference[b]+s.reference[p]-m[p]-s.floating[b],C=m[p]-s.reference[p],N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let S=N?N[y]:0;(!S||!await(i.isElement==null?void 0:i.isElement(N)))&&(S=l.floating[y]||s.floating[b]);const I=k/2-C/2,P=S/2-x[b]/2-1,E=us(h[g],P),_=us(h[v],P),j=E,L=S-x[b]-_,D=S/2-x[b]/2+I,z=rm(j,D,L),A=!c.arrow&&xi(o)!=null&&D!==z&&s.reference[b]/2-(D<j?E:_)-x[b]/2<0,R=A?D<j?D-j:D-L:0;return{[p]:m[p]+R,data:{[p]:z,centerOffset:D-z-R,...A&&{alignmentOffset:R}},reset:A}}}),PR=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...w}=jo(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=Eo(o),v=Jr(l),y=Eo(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=m||(y||!x?[ju(l)]:bR(l)),N=b!=="none";!m&&N&&C.push(...NR(l,x,b,k));const S=[l,...C],I=await yl(t,w),P=[];let E=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&P.push(I[g]),h){const D=wR(o,i,k);P.push(I[D[0]],I[D[1]])}if(E=[...E,{placement:o,overflows:P}],!P.every(D=>D<=0)){var _,j;const D=(((_=s.flip)==null?void 0:_.index)||0)+1,z=S[D];if(z&&(!(h==="alignment"?v!==Jr(z):!1)||E.every(T=>Jr(T.placement)===v?T.overflows[0]>0:!0)))return{data:{index:D,overflows:E},reset:{placement:z}};let A=(j=E.filter(R=>R.overflows[0]<=0).sort((R,T)=>R.overflows[1]-T.overflows[1])[0])==null?void 0:j.placement;if(!A)switch(p){case"bestFit":{var L;const R=(L=E.filter(T=>{if(N){const O=Jr(T.placement);return O===v||O==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(O=>O>0).reduce((O,H)=>O+H,0)]).sort((T,O)=>T[1]-O[1])[0])==null?void 0:L[0];R&&(A=R);break}case"initialPlacement":A=l;break}if(o!==A)return{reset:{placement:A}}}return{}}}};function Dx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ax(e){return gR.some(t=>e[t]>=0)}const TR=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=jo(e,t);switch(r){case"referenceHidden":{const s=await yl(t,{...o,elementContext:"reference"}),i=Dx(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ax(i)}}}case"escaped":{const s=await yl(t,{...o,altBoundary:!0}),i=Dx(s,n.floating);return{data:{escapedOffsets:i,escaped:Ax(i)}}}default:return{}}}}},dk=new Set(["left","top"]);async function RR(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Eo(n),l=xi(n),c=Jr(n)==="y",u=dk.has(i)?-1:1,d=s&&c?-1:1,h=jo(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(p=l==="end"?b*-1:b),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const _R=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:l}=t,c=await RR(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:s+c.y,data:{...c,placement:i}}}}},OR=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x:g,y:v}=w;return{x:g,y:v}}},...c}=jo(e,t),u={x:n,y:r},d=await yl(t,c),h=Jr(Eo(o)),m=Ap(h);let p=u[m],b=u[h];if(s){const w=m==="y"?"top":"left",g=m==="y"?"bottom":"right",v=p+d[w],y=p-d[g];p=rm(v,p,y)}if(i){const w=h==="y"?"top":"left",g=h==="y"?"bottom":"right",v=b+d[w],y=b-d[g];b=rm(v,b,y)}const x=l.fn({...t,[m]:p,[h]:b});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[m]:s,[h]:i}}}}}},DR=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=jo(e,t),d={x:n,y:r},h=Jr(o),m=Ap(h);let p=d[m],b=d[h];const x=jo(l,t),w=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const y=m==="y"?"height":"width",k=s.reference[m]-s.floating[y]+w.mainAxis,C=s.reference[m]+s.reference[y]-w.mainAxis;p<k?p=k:p>C&&(p=C)}if(u){var g,v;const y=m==="y"?"width":"height",k=dk.has(Eo(o)),C=s.reference[h]-s.floating[y]+(k&&((g=i.offset)==null?void 0:g[h])||0)+(k?0:w.crossAxis),N=s.reference[h]+s.reference[y]+(k?0:((v=i.offset)==null?void 0:v[h])||0)-(k?w.crossAxis:0);b<C?b=C:b>N&&(b=N)}return{[m]:p,[h]:b}}}},AR=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:i,elements:l}=t,{apply:c=()=>{},...u}=jo(e,t),d=await yl(t,u),h=Eo(o),m=xi(o),p=Jr(o)==="y",{width:b,height:x}=s.floating;let w,g;h==="top"||h==="bottom"?(w=h,g=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(g=h,w=m==="end"?"top":"bottom");const v=x-d.top-d.bottom,y=b-d.left-d.right,k=us(x-d[w],v),C=us(b-d[g],y),N=!t.middlewareData.shift;let S=k,I=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=y),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=v),N&&!m){const E=Xn(d.left,0),_=Xn(d.right,0),j=Xn(d.top,0),L=Xn(d.bottom,0);p?I=b-2*(E!==0||_!==0?E+_:Xn(d.left,d.right)):S=x-2*(j!==0||L!==0?j+L:Xn(d.top,d.bottom))}await c({...t,availableWidth:I,availableHeight:S});const P=await i.getDimensions(l.floating);return b!==P.width||x!==P.height?{reset:{rects:!0}}:{}}}};function md(){return typeof window<"u"}function yi(e){return fk(e)?(e.nodeName||"").toLowerCase():"#document"}function nr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function io(e){var t;return(t=(fk(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function fk(e){return md()?e instanceof Node||e instanceof nr(e).Node:!1}function Dr(e){return md()?e instanceof Element||e instanceof nr(e).Element:!1}function so(e){return md()?e instanceof HTMLElement||e instanceof nr(e).HTMLElement:!1}function Mx(e){return!md()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof nr(e).ShadowRoot}const MR=new Set(["inline","contents"]);function Bl(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=Ar(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!MR.has(o)}const LR=new Set(["table","td","th"]);function $R(e){return LR.has(yi(e))}const UR=[":popover-open",":modal"];function pd(e){return UR.some(t=>{try{return e.matches(t)}catch{return!1}})}const FR=["transform","translate","scale","rotate","perspective"],zR=["transform","translate","scale","rotate","perspective","filter"],BR=["paint","layout","strict","content"];function $p(e){const t=Up(),n=Dr(e)?Ar(e):e;return FR.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||zR.some(r=>(n.willChange||"").includes(r))||BR.some(r=>(n.contain||"").includes(r))}function WR(e){let t=ds(e);for(;so(t)&&!ai(t);){if($p(t))return t;if(pd(t))return null;t=ds(t)}return null}function Up(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const HR=new Set(["html","body","#document"]);function ai(e){return HR.has(yi(e))}function Ar(e){return nr(e).getComputedStyle(e)}function gd(e){return Dr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ds(e){if(yi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Mx(e)&&e.host||io(e);return Mx(t)?t.host:t}function hk(e){const t=ds(e);return ai(t)?e.ownerDocument?e.ownerDocument.body:e.body:so(t)&&Bl(t)?t:hk(t)}function wl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=hk(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=nr(o);if(s){const l=sm(i);return t.concat(i,i.visualViewport||[],Bl(o)?o:[],l&&n?wl(l):[])}return t.concat(o,wl(o,[],n))}function sm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function mk(e){const t=Ar(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=so(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,l=Iu(n)!==s||Iu(r)!==i;return l&&(n=s,r=i),{width:n,height:r,$:l}}function Fp(e){return Dr(e)?e:e.contextElement}function Ua(e){const t=Fp(e);if(!so(t))return ro(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=mk(t);let i=(s?Iu(n.width):n.width)/r,l=(s?Iu(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const VR=ro(0);function pk(e){const t=nr(e);return!Up()||!t.visualViewport?VR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function qR(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==nr(e)?!1:t}function Ys(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=Fp(e);let i=ro(1);t&&(r?Dr(r)&&(i=Ua(r)):i=Ua(e));const l=qR(s,n,r)?pk(s):ro(0);let c=(o.left+l.x)/i.x,u=(o.top+l.y)/i.y,d=o.width/i.x,h=o.height/i.y;if(s){const m=nr(s),p=r&&Dr(r)?nr(r):r;let b=m,x=sm(b);for(;x&&r&&p!==b;){const w=Ua(x),g=x.getBoundingClientRect(),v=Ar(x),y=g.left+(x.clientLeft+parseFloat(v.paddingLeft))*w.x,k=g.top+(x.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,h*=w.y,c+=y,u+=k,b=nr(x),x=sm(b)}}return Eu({width:d,height:h,x:c,y:u})}function vd(e,t){const n=gd(e).scrollLeft;return t?t.left+n:Ys(io(e)).left+n}function gk(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-vd(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function GR(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=io(r),l=t?pd(t.floating):!1;if(r===i||l&&s)return n;let c={scrollLeft:0,scrollTop:0},u=ro(1);const d=ro(0),h=so(r);if((h||!h&&!s)&&((yi(r)!=="body"||Bl(i))&&(c=gd(r)),so(r))){const p=Ys(r);u=Ua(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const m=i&&!h&&!s?gk(i,c):ro(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function KR(e){return Array.from(e.getClientRects())}function YR(e){const t=io(e),n=gd(e),r=e.ownerDocument.body,o=Xn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Xn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+vd(e);const l=-n.scrollTop;return Ar(r).direction==="rtl"&&(i+=Xn(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:l}}const Lx=25;function QR(e,t){const n=nr(e),r=io(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,l=0,c=0;if(o){s=o.width,i=o.height;const d=Up();(!d||d&&t==="fixed")&&(l=o.offsetLeft,c=o.offsetTop)}const u=vd(r);if(u<=0){const d=r.ownerDocument,h=d.body,m=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,b=Math.abs(r.clientWidth-h.clientWidth-p);b<=Lx&&(s-=b)}else u<=Lx&&(s+=u);return{width:s,height:i,x:l,y:c}}const XR=new Set(["absolute","fixed"]);function JR(e,t){const n=Ys(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=so(e)?Ua(e):ro(1),i=e.clientWidth*s.x,l=e.clientHeight*s.y,c=o*s.x,u=r*s.y;return{width:i,height:l,x:c,y:u}}function $x(e,t,n){let r;if(t==="viewport")r=QR(e,n);else if(t==="document")r=YR(io(e));else if(Dr(t))r=JR(t,n);else{const o=pk(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Eu(r)}function vk(e,t){const n=ds(e);return n===t||!Dr(n)||ai(n)?!1:Ar(n).position==="fixed"||vk(n,t)}function ZR(e,t){const n=t.get(e);if(n)return n;let r=wl(e,[],!1).filter(l=>Dr(l)&&yi(l)!=="body"),o=null;const s=Ar(e).position==="fixed";let i=s?ds(e):e;for(;Dr(i)&&!ai(i);){const l=Ar(i),c=$p(i);!c&&l.position==="fixed"&&(o=null),(s?!c&&!o:!c&&l.position==="static"&&!!o&&XR.has(o.position)||Bl(i)&&!c&&vk(e,i))?r=r.filter(d=>d!==i):o=l,i=ds(i)}return t.set(e,r),r}function e_(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?pd(t)?[]:ZR(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,d)=>{const h=$x(t,d,o);return u.top=Xn(h.top,u.top),u.right=us(h.right,u.right),u.bottom=us(h.bottom,u.bottom),u.left=Xn(h.left,u.left),u},$x(t,l,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function t_(e){const{width:t,height:n}=mk(e);return{width:t,height:n}}function n_(e,t,n){const r=so(t),o=io(t),s=n==="fixed",i=Ys(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=ro(0);function u(){c.x=vd(o)}if(r||!r&&!s)if((yi(t)!=="body"||Bl(o))&&(l=gd(t)),r){const p=Ys(t,!0,s,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else o&&u();s&&!r&&o&&u();const d=o&&!r&&!s?gk(o,l):ro(0),h=i.left+l.scrollLeft-c.x-d.x,m=i.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:i.width,height:i.height}}function Ef(e){return Ar(e).position==="static"}function Ux(e,t){if(!so(e)||Ar(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return io(e)===n&&(n=n.ownerDocument.body),n}function xk(e,t){const n=nr(e);if(pd(e))return n;if(!so(e)){let o=ds(e);for(;o&&!ai(o);){if(Dr(o)&&!Ef(o))return o;o=ds(o)}return n}let r=Ux(e,t);for(;r&&$R(r)&&Ef(r);)r=Ux(r,t);return r&&ai(r)&&Ef(r)&&!$p(r)?n:r||WR(e)||n}const r_=async function(e){const t=this.getOffsetParent||xk,n=this.getDimensions,r=await n(e.floating);return{reference:n_(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function o_(e){return Ar(e).direction==="rtl"}const s_={convertOffsetParentRelativeRectToViewportRelativeRect:GR,getDocumentElement:io,getClippingRect:e_,getOffsetParent:xk,getElementRects:r_,getClientRects:KR,getDimensions:t_,getScale:Ua,isElement:Dr,isRTL:o_};function yk(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function a_(e,t){let n=null,r;const o=io(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:p}=u;if(l||t(),!m||!p)return;const b=Pc(h),x=Pc(o.clientWidth-(d+m)),w=Pc(o.clientHeight-(h+p)),g=Pc(d),y={rootMargin:-b+"px "+-x+"px "+-w+"px "+-g+"px",threshold:Xn(0,us(1,c))||1};let k=!0;function C(N){const S=N[0].intersectionRatio;if(S!==c){if(!k)return i();S?i(!1,S):r=setTimeout(()=>{i(!1,1e-7)},1e3)}S===1&&!yk(u,e.getBoundingClientRect())&&i(),k=!1}try{n=new IntersectionObserver(C,{...y,root:o.ownerDocument})}catch{n=new IntersectionObserver(C,y)}n.observe(e)}return i(!0),s}function i_(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Fp(e),d=o||s?[...u?wl(u):[],...wl(t)]:[];d.forEach(g=>{o&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const h=u&&l?a_(u,n):null;let m=-1,p=null;i&&(p=new ResizeObserver(g=>{let[v]=g;v&&v.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var y;(y=p)==null||y.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let b,x=c?Ys(e):null;c&&w();function w(){const g=Ys(e);x&&!yk(x,g)&&n(),x=g,b=requestAnimationFrame(w)}return n(),()=>{var g;d.forEach(v=>{o&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),h==null||h(),(g=p)==null||g.disconnect(),p=null,c&&cancelAnimationFrame(b)}}const l_=_R,c_=OR,u_=PR,d_=AR,f_=TR,Fx=ER,h_=DR,m_=(e,t,n)=>{const r=new Map,o={platform:s_,...n},s={...o.platform,_c:r};return jR(e,t,{...o,platform:s})};var p_=typeof document<"u",g_=function(){},Jc=p_?f.useLayoutEffect:g_;function Pu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Pu(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!Pu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function wk(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function zx(e,t){const n=wk(e);return Math.round(t*n)/n}function Pf(e){const t=f.useRef(e);return Jc(()=>{t.current=e}),t}function v_(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(r);Pu(m,r)||p(r);const[b,x]=f.useState(null),[w,g]=f.useState(null),v=f.useCallback(T=>{T!==N.current&&(N.current=T,x(T))},[]),y=f.useCallback(T=>{T!==S.current&&(S.current=T,g(T))},[]),k=s||b,C=i||w,N=f.useRef(null),S=f.useRef(null),I=f.useRef(d),P=c!=null,E=Pf(c),_=Pf(o),j=Pf(u),L=f.useCallback(()=>{if(!N.current||!S.current)return;const T={placement:t,strategy:n,middleware:m};_.current&&(T.platform=_.current),m_(N.current,S.current,T).then(O=>{const H={...O,isPositioned:j.current!==!1};D.current&&!Pu(I.current,H)&&(I.current=H,ra.flushSync(()=>{h(H)}))})},[m,t,n,_,j]);Jc(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(T=>({...T,isPositioned:!1})))},[u]);const D=f.useRef(!1);Jc(()=>(D.current=!0,()=>{D.current=!1}),[]),Jc(()=>{if(k&&(N.current=k),C&&(S.current=C),k&&C){if(E.current)return E.current(k,C,L);L()}},[k,C,L,E,P]);const z=f.useMemo(()=>({reference:N,floating:S,setReference:v,setFloating:y}),[v,y]),A=f.useMemo(()=>({reference:k,floating:C}),[k,C]),R=f.useMemo(()=>{const T={position:n,left:0,top:0};if(!A.floating)return T;const O=zx(A.floating,d.x),H=zx(A.floating,d.y);return l?{...T,transform:"translate("+O+"px, "+H+"px)",...wk(A.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:H}},[n,l,A.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:L,refs:z,elements:A,floatingStyles:R}),[d,L,z,A,R])}const x_=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Fx({element:r.current,padding:o}).fn(n):{}:r?Fx({element:r,padding:o}).fn(n):{}}}},y_=(e,t)=>({...l_(e),options:[e,t]}),w_=(e,t)=>({...c_(e),options:[e,t]}),b_=(e,t)=>({...h_(e),options:[e,t]}),k_=(e,t)=>({...u_(e),options:[e,t]}),C_=(e,t)=>({...d_(e),options:[e,t]}),S_=(e,t)=>({...f_(e),options:[e,t]}),N_=(e,t)=>({...x_(e),options:[e,t]});var I_="Arrow",bk=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...s}=e;return a.jsx(Se.svg,{...s,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});bk.displayName=I_;var j_=bk;function kk(e){const[t,n]=f.useState(void 0);return en(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var zp="Popper",[Ck,gs]=kn(zp),[E_,Sk]=Ck(zp),Nk=e=>{const{__scopePopper:t,children:n}=e,[r,o]=f.useState(null);return a.jsx(E_,{scope:t,anchor:r,onAnchorChange:o,children:n})};Nk.displayName=zp;var Ik="PopperAnchor",jk=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,s=Sk(Ik,n),i=f.useRef(null),l=Be(t,i),c=f.useRef(null);return f.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||i.current,u!==c.current&&s.onAnchorChange(c.current)}),r?null:a.jsx(Se.div,{...o,ref:l})});jk.displayName=Ik;var Bp="PopperContent",[P_,T_]=Ck(Bp),Ek=f.forwardRef((e,t)=>{var Y,ne,xe,le,se,pe;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:b,...x}=e,w=Sk(Bp,n),[g,v]=f.useState(null),y=Be(t,ge=>v(ge)),[k,C]=f.useState(null),N=kk(k),S=(N==null?void 0:N.width)??0,I=(N==null?void 0:N.height)??0,P=r+(s!=="center"?"-"+s:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},_=Array.isArray(u)?u:[u],j=_.length>0,L={padding:E,boundary:_.filter(__),altBoundary:j},{refs:D,floatingStyles:z,placement:A,isPositioned:R,middlewareData:T}=v_({strategy:"fixed",placement:P,whileElementsMounted:(...ge)=>i_(...ge,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[y_({mainAxis:o+I,alignmentAxis:i}),c&&w_({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?b_():void 0,...L}),c&&k_({...L}),C_({...L,apply:({elements:ge,rects:We,availableWidth:Xe,availableHeight:Pe})=>{const{width:ze,height:we}=We.reference,be=ge.floating.style;be.setProperty("--radix-popper-available-width",`${Xe}px`),be.setProperty("--radix-popper-available-height",`${Pe}px`),be.setProperty("--radix-popper-anchor-width",`${ze}px`),be.setProperty("--radix-popper-anchor-height",`${we}px`)}}),k&&N_({element:k,padding:l}),O_({arrowWidth:S,arrowHeight:I}),m&&S_({strategy:"referenceHidden",...L})]}),[O,H]=Rk(A),q=qt(b);en(()=>{R&&(q==null||q())},[R,q]);const Z=(Y=T.arrow)==null?void 0:Y.x,G=(ne=T.arrow)==null?void 0:ne.y,K=((xe=T.arrow)==null?void 0:xe.centerOffset)!==0,[re,ie]=f.useState();return en(()=>{g&&ie(window.getComputedStyle(g).zIndex)},[g]),a.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:R?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[(le=T.transformOrigin)==null?void 0:le.x,(se=T.transformOrigin)==null?void 0:se.y].join(" "),...((pe=T.hide)==null?void 0:pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(P_,{scope:n,placedSide:O,onArrowChange:C,arrowX:Z,arrowY:G,shouldHideArrow:K,children:a.jsx(Se.div,{"data-side":O,"data-align":H,...x,ref:y,style:{...x.style,animation:R?void 0:"none"}})})})});Ek.displayName=Bp;var Pk="PopperArrow",R_={top:"bottom",right:"left",bottom:"top",left:"right"},Tk=f.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,s=T_(Pk,r),i=R_[s.placedSide];return a.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:a.jsx(j_,{...o,ref:n,style:{...o.style,display:"block"}})})});Tk.displayName=Pk;function __(e){return e!==null}var O_=e=>({name:"transformOrigin",options:e,fn(t){var w,g,v;const{placement:n,rects:r,middlewareData:o}=t,i=((w=o.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,d]=Rk(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((g=o.arrow)==null?void 0:g.x)??0)+l/2,p=(((v=o.arrow)==null?void 0:v.y)??0)+c/2;let b="",x="";return u==="bottom"?(b=i?h:`${m}px`,x=`${-c}px`):u==="top"?(b=i?h:`${m}px`,x=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,x=i?h:`${p}px`):u==="left"&&(b=`${r.floating.width+c}px`,x=i?h:`${p}px`),{data:{x:b,y:x}}}});function Rk(e){const[t,n="center"]=e.split("-");return[t,n]}var Wp=Nk,Wl=jk,xd=Ek,yd=Tk,[wd]=kn("Tooltip",[gs]),Hp=gs(),_k="TooltipProvider",D_=700,Bx="tooltip.open",[A_,Ok]=wd(_k),Dk=e=>{const{__scopeTooltip:t,delayDuration:n=D_,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=e,i=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(A_,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(u=>{l.current=u},[]),disableHoverableContent:o,children:s})};Dk.displayName=_k;var Ak="Tooltip",[C6,bd]=wd(Ak),am="TooltipTrigger",M_=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=bd(am,n),s=Ok(am,n),i=Hp(n),l=f.useRef(null),c=Be(t,l,o.onTriggerChange),u=f.useRef(!1),d=f.useRef(!1),h=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(Wl,{asChild:!0,...i,children:a.jsx(Se.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:c,onPointerMove:he(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),d.current=!0)}),onPointerLeave:he(e.onPointerLeave,()=>{o.onTriggerLeave(),d.current=!1}),onPointerDown:he(e.onPointerDown,()=>{o.open&&o.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:he(e.onFocus,()=>{u.current||o.onOpen()}),onBlur:he(e.onBlur,o.onClose),onClick:he(e.onClick,o.onClose)})})});M_.displayName=am;var L_="TooltipPortal",[S6,$_]=wd(L_,{forceMount:void 0}),ii="TooltipContent",Mk=f.forwardRef((e,t)=>{const n=$_(ii,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=e,i=bd(ii,e.__scopeTooltip);return a.jsx(tn,{present:r||i.open,children:i.disableHoverableContent?a.jsx(Lk,{side:o,...s,ref:t}):a.jsx(U_,{side:o,...s,ref:t})})}),U_=f.forwardRef((e,t)=>{const n=bd(ii,e.__scopeTooltip),r=Ok(ii,e.__scopeTooltip),o=f.useRef(null),s=Be(t,o),[i,l]=f.useState(null),{trigger:c,onClose:u}=n,d=o.current,{onPointerInTransitChange:h}=r,m=f.useCallback(()=>{l(null),h(!1)},[h]),p=f.useCallback((b,x)=>{const w=b.currentTarget,g={x:b.clientX,y:b.clientY},v=H_(g,w.getBoundingClientRect()),y=V_(g,v),k=q_(x.getBoundingClientRect()),C=K_([...y,...k]);l(C),h(!0)},[h]);return f.useEffect(()=>()=>m(),[m]),f.useEffect(()=>{if(c&&d){const b=w=>p(w,d),x=w=>p(w,c);return c.addEventListener("pointerleave",b),d.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",x)}}},[c,d,p,m]),f.useEffect(()=>{if(i){const b=x=>{const w=x.target,g={x:x.clientX,y:x.clientY},v=(c==null?void 0:c.contains(w))||(d==null?void 0:d.contains(w)),y=!G_(g,i);v?m():y&&(m(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,d,i,u,m]),a.jsx(Lk,{...e,ref:s})}),[F_,z_]=wd(Ak,{isInside:!1}),B_=BP("TooltipContent"),Lk=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...l}=e,c=bd(ii,n),u=Hp(n),{onClose:d}=c;return f.useEffect(()=>(document.addEventListener(Bx,d),()=>document.removeEventListener(Bx,d)),[d]),f.useEffect(()=>{if(c.trigger){const h=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),a.jsx(oa,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:a.jsxs(xd,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(B_,{children:r}),a.jsx(F_,{scope:n,isInside:!0,children:a.jsx(uT,{id:c.contentId,role:"tooltip",children:o||r})})]})})});Mk.displayName=ii;var $k="TooltipArrow",W_=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Hp(n);return z_($k,n).isInside?null:a.jsx(yd,{...o,...r,ref:t})});W_.displayName=$k;function H_(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function V_(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function q_(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function G_(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const l=t[s],c=t[i],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(o=!o)}return o}function K_(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Y_(t)}function Y_(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const s=t[t.length-1],i=t[t.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Q_=Dk,Uk=Mk;const X_=Q_,J_=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>a.jsx(Uk,{ref:r,sideOffset:t,className:ke("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));J_.displayName=Uk.displayName;var kd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Z_={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Wo,Om,Qy,eO=(Qy=class{constructor(){rt(this,Wo,Z_);rt(this,Om,!1)}setTimeoutProvider(e){Fe(this,Wo,e)}setTimeout(e,t){return J(this,Wo).setTimeout(e,t)}clearTimeout(e){J(this,Wo).clearTimeout(e)}setInterval(e,t){return J(this,Wo).setInterval(e,t)}clearInterval(e){J(this,Wo).clearInterval(e)}},Wo=new WeakMap,Om=new WeakMap,Qy),im=new eO;function tO(e){setTimeout(e,0)}var Cd=typeof window>"u"||"Deno"in globalThis;function Nr(){}function nO(e,t){return typeof e=="function"?e(t):e}function rO(e){return typeof e=="number"&&e>=0&&e!==1/0}function oO(e,t){return Math.max(e+(t||0)-Date.now(),0)}function lm(e,t){return typeof e=="function"?e(t):e}function sO(e,t){return typeof e=="function"?e(t):e}function Wx(e,t){const{type:n="all",exact:r,fetchStatus:o,predicate:s,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==Vp(i,t.options))return!1}else if(!kl(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||o&&o!==t.state.fetchStatus||s&&!s(t))}function Hx(e,t){const{exact:n,status:r,predicate:o,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(bl(t.options.mutationKey)!==bl(s))return!1}else if(!kl(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||o&&!o(t))}function Vp(e,t){return((t==null?void 0:t.queryKeyHashFn)||bl)(e)}function bl(e){return JSON.stringify(e,(t,n)=>cm(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function kl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>kl(e[n],t[n])):!1}var aO=Object.prototype.hasOwnProperty;function Fk(e,t){if(e===t)return e;const n=Vx(e)&&Vx(t);if(!n&&!(cm(e)&&cm(t)))return t;const o=(n?e:Object.keys(e)).length,s=n?t:Object.keys(t),i=s.length,l=n?new Array(i):{};let c=0;for(let u=0;u<i;u++){const d=n?u:s[u],h=e[d],m=t[d];if(h===m){l[d]=h,(n?u<o:aO.call(e,d))&&c++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){l[d]=m;continue}const p=Fk(h,m);l[d]=p,p===h&&c++}return o===i&&c===o?e:l}function Vx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function cm(e){if(!qx(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!qx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function qx(e){return Object.prototype.toString.call(e)==="[object Object]"}function iO(e){return new Promise(t=>{im.setTimeout(t,e)})}function lO(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Fk(e,t):t}function cO(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function uO(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var qp=Symbol();function zk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===qp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var As,Ho,Wa,Xy,dO=(Xy=class extends kd{constructor(){super();rt(this,As);rt(this,Ho);rt(this,Wa);Fe(this,Wa,t=>{if(!Cd&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,Ho)||this.setEventListener(J(this,Wa))}onUnsubscribe(){var t;this.hasListeners()||((t=J(this,Ho))==null||t.call(this),Fe(this,Ho,void 0))}setEventListener(t){var n;Fe(this,Wa,t),(n=J(this,Ho))==null||n.call(this),Fe(this,Ho,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){J(this,As)!==t&&(Fe(this,As,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof J(this,As)=="boolean"?J(this,As):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},As=new WeakMap,Ho=new WeakMap,Wa=new WeakMap,Xy),Bk=new dO;function fO(){let e,t;const n=new Promise((o,s)=>{e=o,t=s});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),e(o)},n.reject=o=>{r({status:"rejected",reason:o}),t(o)},n}var hO=tO;function mO(){let e=[],t=0,n=l=>{l()},r=l=>{l()},o=hO;const s=l=>{t?e.push(l):o(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&o(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{o=l}}}var Tn=mO(),Ha,Vo,Va,Jy,pO=(Jy=class extends kd{constructor(){super();rt(this,Ha,!0);rt(this,Vo);rt(this,Va);Fe(this,Va,t=>{if(!Cd&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,Vo)||this.setEventListener(J(this,Va))}onUnsubscribe(){var t;this.hasListeners()||((t=J(this,Vo))==null||t.call(this),Fe(this,Vo,void 0))}setEventListener(t){var n;Fe(this,Va,t),(n=J(this,Vo))==null||n.call(this),Fe(this,Vo,t(this.setOnline.bind(this)))}setOnline(t){J(this,Ha)!==t&&(Fe(this,Ha,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return J(this,Ha)}},Ha=new WeakMap,Vo=new WeakMap,Va=new WeakMap,Jy),Tu=new pO;function gO(e){return Math.min(1e3*2**e,3e4)}function Wk(e){return(e??"online")==="online"?Tu.isOnline():!0}var um=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Hk(e){let t=!1,n=0,r;const o=fO(),s=()=>o.status!=="pending",i=x=>{var w;if(!s()){const g=new um(x);m(g),(w=e.onCancel)==null||w.call(e,g)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>Bk.isFocused()&&(e.networkMode==="always"||Tu.isOnline())&&e.canRun(),d=()=>Wk(e.networkMode)&&e.canRun(),h=x=>{s()||(r==null||r(),o.resolve(x))},m=x=>{s()||(r==null||r(),o.reject(x))},p=()=>new Promise(x=>{var w;r=g=>{(s()||u())&&x(g)},(w=e.onPause)==null||w.call(e)}).then(()=>{var x;r=void 0,s()||(x=e.onContinue)==null||x.call(e)}),b=()=>{if(s())return;let x;const w=n===0?e.initialPromise:void 0;try{x=w??e.fn()}catch(g){x=Promise.reject(g)}Promise.resolve(x).then(h).catch(g=>{var N;if(s())return;const v=e.retry??(Cd?0:3),y=e.retryDelay??gO,k=typeof y=="function"?y(n,g):y,C=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,g);if(t||!C){m(g);return}n++,(N=e.onFail)==null||N.call(e,n,g),iO(k).then(()=>u()?void 0:p()).then(()=>{t?m(g):b()})})};return{promise:o,status:()=>o.status,cancel:i,continue:()=>(r==null||r(),o),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?b():p().then(b),o)}}var Ms,Zy,Vk=(Zy=class{constructor(){rt(this,Ms)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rO(this.gcTime)&&Fe(this,Ms,im.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Cd?1/0:5*60*1e3))}clearGcTimeout(){J(this,Ms)&&(im.clearTimeout(J(this,Ms)),Fe(this,Ms,void 0))}},Ms=new WeakMap,Zy),Ls,qa,ur,$s,sn,Rl,Us,Ir,po,e0,vO=(e0=class extends Vk{constructor(t){super();rt(this,Ir);rt(this,Ls);rt(this,qa);rt(this,ur);rt(this,$s);rt(this,sn);rt(this,Rl);rt(this,Us);Fe(this,Us,!1),Fe(this,Rl,t.defaultOptions),this.setOptions(t.options),this.observers=[],Fe(this,$s,t.client),Fe(this,ur,J(this,$s).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Fe(this,Ls,Gx(this.options)),this.state=t.state??J(this,Ls),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=J(this,sn))==null?void 0:t.promise}setOptions(t){if(this.options={...J(this,Rl),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Gx(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Fe(this,Ls,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,ur).remove(this)}setData(t,n){const r=lO(this.state.data,t,this.options);return vn(this,Ir,po).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){vn(this,Ir,po).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,o;const n=(r=J(this,sn))==null?void 0:r.promise;return(o=J(this,sn))==null||o.cancel(t),n?n.then(Nr).catch(Nr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,Ls))}isActive(){return this.observers.some(t=>sO(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>lm(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!oO(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=J(this,sn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=J(this,sn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),J(this,ur).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(J(this,sn)&&(J(this,Us)?J(this,sn).cancel({revert:!0}):J(this,sn).cancelRetry()),this.scheduleGc()),J(this,ur).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||vn(this,Ir,po).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,d,h,m,p,b,x,w,g,v,y;if(this.state.fetchStatus!=="idle"&&((c=J(this,sn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(J(this,sn))return J(this,sn).continueRetry(),J(this,sn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const k=this.observers.find(C=>C.options.queryFn);k&&this.setOptions(k.options)}const r=new AbortController,o=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(Fe(this,Us,!0),r.signal)})},s=()=>{const k=zk(this.options,n),N=(()=>{const S={client:J(this,$s),queryKey:this.queryKey,meta:this.meta};return o(S),S})();return Fe(this,Us,!1),this.options.persister?this.options.persister(k,N,this):k(N)},l=(()=>{const k={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:J(this,$s),state:this.state,fetchFn:s};return o(k),k})();(u=this.options.behavior)==null||u.onFetch(l,this),Fe(this,qa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&vn(this,Ir,po).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),Fe(this,sn,Hk({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:k=>{k instanceof um&&k.revert&&this.setState({...J(this,qa),fetchStatus:"idle"}),r.abort()},onFail:(k,C)=>{vn(this,Ir,po).call(this,{type:"failed",failureCount:k,error:C})},onPause:()=>{vn(this,Ir,po).call(this,{type:"pause"})},onContinue:()=>{vn(this,Ir,po).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await J(this,sn).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(p=(m=J(this,ur).config).onSuccess)==null||p.call(m,k,this),(x=(b=J(this,ur).config).onSettled)==null||x.call(b,k,this.state.error,this),k}catch(k){if(k instanceof um){if(k.silent)return J(this,sn).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw vn(this,Ir,po).call(this,{type:"error",error:k}),(g=(w=J(this,ur).config).onError)==null||g.call(w,k,this),(y=(v=J(this,ur).config).onSettled)==null||y.call(v,this.state.data,k,this),k}finally{this.scheduleGc()}}},Ls=new WeakMap,qa=new WeakMap,ur=new WeakMap,$s=new WeakMap,sn=new WeakMap,Rl=new WeakMap,Us=new WeakMap,Ir=new WeakSet,po=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...xO(r.data,this.options),fetchMeta:t.meta??null};case"success":const o={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Fe(this,qa,t.manual?o:void 0),o;case"error":const s=t.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),J(this,ur).notify({query:this,type:"updated",action:t})})},e0);function xO(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Wk(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Gx(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function Kx(e){return{onFetch:(t,n)=>{var d,h,m,p,b;const r=t.options,o=(m=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,s=((p=t.state.data)==null?void 0:p.pages)||[],i=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let x=!1;const w=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},g=zk(t.options,t.fetchOptions),v=async(y,k,C)=>{if(x)return Promise.reject();if(k==null&&y.pages.length)return Promise.resolve(y);const S=(()=>{const _={client:t.client,queryKey:t.queryKey,pageParam:k,direction:C?"backward":"forward",meta:t.options.meta};return w(_),_})(),I=await g(S),{maxPages:P}=t.options,E=C?uO:cO;return{pages:E(y.pages,I,P),pageParams:E(y.pageParams,k,P)}};if(o&&s.length){const y=o==="backward",k=y?yO:Yx,C={pages:s,pageParams:i},N=k(r,C);l=await v(C,N,y)}else{const y=e??s.length;do{const k=c===0?i[0]??r.initialPageParam:Yx(r,l);if(c>0&&k==null)break;l=await v(l,k),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var x,w;return(w=(x=t.options).persister)==null?void 0:w.call(x,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function Yx(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function yO(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var _l,Vr,jn,Fs,qr,Lo,t0,wO=(t0=class extends Vk{constructor(t){super();rt(this,qr);rt(this,_l);rt(this,Vr);rt(this,jn);rt(this,Fs);Fe(this,_l,t.client),this.mutationId=t.mutationId,Fe(this,jn,t.mutationCache),Fe(this,Vr,[]),this.state=t.state||bO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){J(this,Vr).includes(t)||(J(this,Vr).push(t),this.clearGcTimeout(),J(this,jn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Fe(this,Vr,J(this,Vr).filter(n=>n!==t)),this.scheduleGc(),J(this,jn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){J(this,Vr).length||(this.state.status==="pending"?this.scheduleGc():J(this,jn).remove(this))}continue(){var t;return((t=J(this,Fs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,l,c,u,d,h,m,p,b,x,w,g,v,y,k,C,N,S,I,P;const n=()=>{vn(this,qr,Lo).call(this,{type:"continue"})},r={client:J(this,_l),meta:this.options.meta,mutationKey:this.options.mutationKey};Fe(this,Fs,Hk({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(E,_)=>{vn(this,qr,Lo).call(this,{type:"failed",failureCount:E,error:_})},onPause:()=>{vn(this,qr,Lo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,jn).canRun(this)}));const o=this.state.status==="pending",s=!J(this,Fs).canStart();try{if(o)n();else{vn(this,qr,Lo).call(this,{type:"pending",variables:t,isPaused:s}),await((l=(i=J(this,jn).config).onMutate)==null?void 0:l.call(i,t,this,r));const _=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,r));_!==this.state.context&&vn(this,qr,Lo).call(this,{type:"pending",context:_,variables:t,isPaused:s})}const E=await J(this,Fs).start();return await((h=(d=J(this,jn).config).onSuccess)==null?void 0:h.call(d,E,t,this.state.context,this,r)),await((p=(m=this.options).onSuccess)==null?void 0:p.call(m,E,t,this.state.context,r)),await((x=(b=J(this,jn).config).onSettled)==null?void 0:x.call(b,E,null,this.state.variables,this.state.context,this,r)),await((g=(w=this.options).onSettled)==null?void 0:g.call(w,E,null,t,this.state.context,r)),vn(this,qr,Lo).call(this,{type:"success",data:E}),E}catch(E){try{throw await((y=(v=J(this,jn).config).onError)==null?void 0:y.call(v,E,t,this.state.context,this,r)),await((C=(k=this.options).onError)==null?void 0:C.call(k,E,t,this.state.context,r)),await((S=(N=J(this,jn).config).onSettled)==null?void 0:S.call(N,void 0,E,this.state.variables,this.state.context,this,r)),await((P=(I=this.options).onSettled)==null?void 0:P.call(I,void 0,E,t,this.state.context,r)),E}finally{vn(this,qr,Lo).call(this,{type:"error",error:E})}}finally{J(this,jn).runNext(this)}}},_l=new WeakMap,Vr=new WeakMap,jn=new WeakMap,Fs=new WeakMap,qr=new WeakSet,Lo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Tn.batch(()=>{J(this,Vr).forEach(r=>{r.onMutationUpdate(t)}),J(this,jn).notify({mutation:this,type:"updated",action:t})})},t0);function bO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xo,jr,Ol,n0,kO=(n0=class extends kd{constructor(t={}){super();rt(this,xo);rt(this,jr);rt(this,Ol);this.config=t,Fe(this,xo,new Set),Fe(this,jr,new Map),Fe(this,Ol,0)}build(t,n,r){const o=new wO({client:t,mutationCache:this,mutationId:++lc(this,Ol)._,options:t.defaultMutationOptions(n),state:r});return this.add(o),o}add(t){J(this,xo).add(t);const n=Tc(t);if(typeof n=="string"){const r=J(this,jr).get(n);r?r.push(t):J(this,jr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(J(this,xo).delete(t)){const n=Tc(t);if(typeof n=="string"){const r=J(this,jr).get(n);if(r)if(r.length>1){const o=r.indexOf(t);o!==-1&&r.splice(o,1)}else r[0]===t&&J(this,jr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Tc(t);if(typeof n=="string"){const r=J(this,jr).get(n),o=r==null?void 0:r.find(s=>s.state.status==="pending");return!o||o===t}else return!0}runNext(t){var r;const n=Tc(t);if(typeof n=="string"){const o=(r=J(this,jr).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Tn.batch(()=>{J(this,xo).forEach(t=>{this.notify({type:"removed",mutation:t})}),J(this,xo).clear(),J(this,jr).clear()})}getAll(){return Array.from(J(this,xo))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Hx(n,r))}findAll(t={}){return this.getAll().filter(n=>Hx(t,n))}notify(t){Tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Tn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Nr))))}},xo=new WeakMap,jr=new WeakMap,Ol=new WeakMap,n0);function Tc(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Gr,r0,CO=(r0=class extends kd{constructor(t={}){super();rt(this,Gr);this.config=t,Fe(this,Gr,new Map)}build(t,n,r){const o=n.queryKey,s=n.queryHash??Vp(o,n);let i=this.get(s);return i||(i=new vO({client:t,queryKey:o,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(o)}),this.add(i)),i}add(t){J(this,Gr).has(t.queryHash)||(J(this,Gr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=J(this,Gr).get(t.queryHash);n&&(t.destroy(),n===t&&J(this,Gr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return J(this,Gr).get(t)}getAll(){return[...J(this,Gr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Wx(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Wx(t,r)):n}notify(t){Tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Gr=new WeakMap,r0),Bt,qo,Go,Ga,Ka,Ko,Ya,Qa,o0,SO=(o0=class{constructor(e={}){rt(this,Bt);rt(this,qo);rt(this,Go);rt(this,Ga);rt(this,Ka);rt(this,Ko);rt(this,Ya);rt(this,Qa);Fe(this,Bt,e.queryCache||new CO),Fe(this,qo,e.mutationCache||new kO),Fe(this,Go,e.defaultOptions||{}),Fe(this,Ga,new Map),Fe(this,Ka,new Map),Fe(this,Ko,0)}mount(){lc(this,Ko)._++,J(this,Ko)===1&&(Fe(this,Ya,Bk.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,Bt).onFocus())})),Fe(this,Qa,Tu.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,Bt).onOnline())})))}unmount(){var e,t;lc(this,Ko)._--,J(this,Ko)===0&&((e=J(this,Ya))==null||e.call(this),Fe(this,Ya,void 0),(t=J(this,Qa))==null||t.call(this),Fe(this,Qa,void 0))}isFetching(e){return J(this,Bt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return J(this,qo).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=J(this,Bt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=J(this,Bt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(lm(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return J(this,Bt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),o=J(this,Bt).get(r.queryHash),s=o==null?void 0:o.state.data,i=nO(t,s);if(i!==void 0)return J(this,Bt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return Tn.batch(()=>J(this,Bt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=J(this,Bt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=J(this,Bt);Tn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=J(this,Bt);return Tn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Tn.batch(()=>J(this,Bt).findAll(e).map(o=>o.cancel(n)));return Promise.all(r).then(Nr).catch(Nr)}invalidateQueries(e,t={}){return Tn.batch(()=>(J(this,Bt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Tn.batch(()=>J(this,Bt).findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let s=o.fetch(void 0,n);return n.throwOnError||(s=s.catch(Nr)),o.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Nr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=J(this,Bt).build(this,t);return n.isStaleByTime(lm(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Nr).catch(Nr)}fetchInfiniteQuery(e){return e.behavior=Kx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Nr).catch(Nr)}ensureInfiniteQueryData(e){return e.behavior=Kx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Tu.isOnline()?J(this,qo).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,Bt)}getMutationCache(){return J(this,qo)}getDefaultOptions(){return J(this,Go)}setDefaultOptions(e){Fe(this,Go,e)}setQueryDefaults(e,t){J(this,Ga).set(bl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...J(this,Ga).values()],n={};return t.forEach(r=>{kl(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){J(this,Ka).set(bl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...J(this,Ka).values()],n={};return t.forEach(r=>{kl(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...J(this,Go).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Vp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===qp&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...J(this,Go).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){J(this,Bt).clear(),J(this,qo).clear()}},Bt=new WeakMap,qo=new WeakMap,Go=new WeakMap,Ga=new WeakMap,Ka=new WeakMap,Ko=new WeakMap,Ya=new WeakMap,Qa=new WeakMap,o0),NO=f.createContext(void 0),IO=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(NO.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cl.apply(this,arguments)}var Xo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Xo||(Xo={}));const Qx="popstate";function jO(e){e===void 0&&(e={});function t(r,o){let{pathname:s,search:i,hash:l}=r.location;return dm("",{pathname:s,search:i,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Gk(o)}return PO(t,n,null,e)}function Yt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EO(){return Math.random().toString(36).substr(2,8)}function Xx(e,t){return{usr:e.state,key:e.key,idx:t}}function dm(e,t,n,r){return n===void 0&&(n=null),Cl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wi(t):t,{state:n,key:t&&t.key||r||EO()})}function Gk(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function wi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function PO(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,l=Xo.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(Cl({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function h(){l=Xo.Pop;let w=d(),g=w==null?null:w-u;u=w,c&&c({action:l,location:x.location,delta:g})}function m(w,g){l=Xo.Push;let v=dm(x.location,w,g);u=d()+1;let y=Xx(v,u),k=x.createHref(v);try{i.pushState(y,"",k)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;o.location.assign(k)}s&&c&&c({action:l,location:x.location,delta:1})}function p(w,g){l=Xo.Replace;let v=dm(x.location,w,g);u=d();let y=Xx(v,u),k=x.createHref(v);i.replaceState(y,"",k),s&&c&&c({action:l,location:x.location,delta:0})}function b(w){let g=o.location.origin!=="null"?o.location.origin:o.location.href,v=typeof w=="string"?w:Gk(w);return v=v.replace(/ $/,"%20"),Yt(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let x={get action(){return l},get location(){return e(o,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(Qx,h),c=w,()=>{o.removeEventListener(Qx,h),c=null}},createHref(w){return t(o,w)},createURL:b,encodeLocation(w){let g=b(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:p,go(w){return i.go(w)}};return x}var Jx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Jx||(Jx={}));function TO(e,t,n){return n===void 0&&(n="/"),RO(e,t,n)}function RO(e,t,n,r){let o=typeof t=="string"?wi(t):t,s=Qk(o.pathname||"/",n);if(s==null)return null;let i=Kk(e);_O(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=HO(s);l=zO(i[c],u)}return l}function Kk(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(s,i,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};c.relativePath.startsWith("/")&&(Yt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Ws([r,c.relativePath]),d=n.concat(c);s.children&&s.children.length>0&&(Yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Kk(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:UO(u,s.index),routesMeta:d})};return e.forEach((s,i)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))o(s,i);else for(let c of Yk(s.path))o(s,i,c)}),t}function Yk(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=Yk(r.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),o&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function _O(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:FO(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const OO=/^:[\w-]+$/,DO=3,AO=2,MO=1,LO=10,$O=-2,Zx=e=>e==="*";function UO(e,t){let n=e.split("/"),r=n.length;return n.some(Zx)&&(r+=$O),t&&(r+=AO),n.filter(o=>!Zx(o)).reduce((o,s)=>o+(OO.test(s)?DO:s===""?MO:LO),r)}function FO(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function zO(e,t,n){let{routesMeta:r}=e,o={},s="/",i=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=s==="/"?t:t.slice(s.length)||"/",h=BO({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h)return null;Object.assign(o,h.params),i.push({params:o,pathname:Ws([s,h.pathname]),pathnameBase:KO(Ws([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=Ws([s,h.pathnameBase]))}return i}function BO(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=WO(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let x=l[h]||"";i=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const b=l[h];return p&&!b?u[m]=void 0:u[m]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:e}}function WO(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),qk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function HO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Qk(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function VO(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?wi(e):e;return{pathname:n?n.startsWith("/")?n:qO(n,t):t,search:YO(r),hash:QO(o)}}function qO(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Tf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GO(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Xk(e,t){let n=GO(e);return t?n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jk(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=wi(e):(o=Cl({},e),Yt(!o.pathname||!o.pathname.includes("?"),Tf("?","pathname","search",o)),Yt(!o.pathname||!o.pathname.includes("#"),Tf("#","pathname","hash",o)),Yt(!o.search||!o.search.includes("#"),Tf("#","search","hash",o)));let s=e===""||o.pathname==="",i=s?"/":o.pathname,l;if(i==null)l=n;else{let h=t.length-1;if(!r&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),h-=1;o.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=VO(o,l),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ws=e=>e.join("/").replace(/\/\/+/g,"/"),KO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),YO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,QO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function XO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Zk=["post","put","patch","delete"];new Set(Zk);const JO=["get",...Zk];new Set(JO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sl.apply(this,arguments)}const Gp=f.createContext(null),ZO=f.createContext(null),Hl=f.createContext(null),Sd=f.createContext(null),aa=f.createContext({outlet:null,matches:[],isDataRoute:!1}),eC=f.createContext(null);function Vl(){return f.useContext(Sd)!=null}function Ot(){return Vl()||Yt(!1),f.useContext(Sd).location}function tC(e){f.useContext(Hl).static||f.useLayoutEffect(e)}function Cn(){let{isDataRoute:e}=f.useContext(aa);return e?fD():eD()}function eD(){Vl()||Yt(!1);let e=f.useContext(Gp),{basename:t,future:n,navigator:r}=f.useContext(Hl),{matches:o}=f.useContext(aa),{pathname:s}=Ot(),i=JSON.stringify(Xk(o,n.v7_relativeSplatPath)),l=f.useRef(!1);return tC(()=>{l.current=!0}),f.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=Jk(u,JSON.parse(i),s,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ws([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,i,s,e])}function tD(e,t){return nD(e,t)}function nD(e,t,n,r){Vl()||Yt(!1);let{navigator:o}=f.useContext(Hl),{matches:s}=f.useContext(aa),i=s[s.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=Ot(),d;if(t){var h;let w=typeof t=="string"?wi(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||Yt(!1),d=w}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=TO(e,{pathname:p}),x=iD(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Ws([c,o.encodeLocation?o.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ws([c,o.encodeLocation?o.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&x?f.createElement(Sd.Provider,{value:{location:Sl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Xo.Pop}},x):x}function rD(){let e=dD(),t=XO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:o},n):null,null)}const oD=f.createElement(rD,null);class sD extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(aa.Provider,{value:this.props.routeContext},f.createElement(eC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aD(e){let{routeContext:t,match:n,children:r}=e,o=f.useContext(Gp);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(aa.Provider,{value:t},r)}function iD(e,t,n,r){var o;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=(o=n)==null?void 0:o.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Yt(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:p}=n,b=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,h,m)=>{let p,b=!1,x=null,w=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||oD,c&&(u<0&&m===0?(hD("route-fallback"),b=!0,w=null):u===m&&(b=!0,w=h.route.hydrateFallbackElement||null)));let g=t.concat(i.slice(0,m+1)),v=()=>{let y;return p?y=x:b?y=w:h.route.Component?y=f.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,f.createElement(aD,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(sD,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var nC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nC||{}),rC=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(rC||{});function lD(e){let t=f.useContext(Gp);return t||Yt(!1),t}function cD(e){let t=f.useContext(ZO);return t||Yt(!1),t}function uD(e){let t=f.useContext(aa);return t||Yt(!1),t}function oC(e){let t=uD(),n=t.matches[t.matches.length-1];return n.route.id||Yt(!1),n.route.id}function dD(){var e;let t=f.useContext(eC),n=cD(),r=oC();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function fD(){let{router:e}=lD(nC.UseNavigateStable),t=oC(rC.UseNavigateStable),n=f.useRef(!1);return tC(()=>{n.current=!0}),f.useCallback(function(o,s){s===void 0&&(s={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Sl({fromRouteId:t},s)))},[e,t])}const ey={};function hD(e,t,n){ey[e]||(ey[e]=!0)}function mD(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ty(e){let{to:t,replace:n,state:r,relative:o}=e;Vl()||Yt(!1);let{future:s,static:i}=f.useContext(Hl),{matches:l}=f.useContext(aa),{pathname:c}=Ot(),u=Cn(),d=Jk(t,Xk(l,s.v7_relativeSplatPath),c,o==="path"),h=JSON.stringify(d);return f.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:o}),[u,h,o,n,r]),null}function Ln(e){Yt(!1)}function pD(e){let{basename:t="/",children:n=null,location:r,navigationType:o=Xo.Pop,navigator:s,static:i=!1,future:l}=e;Vl()&&Yt(!1);let c=t.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:s,static:i,future:Sl({v7_relativeSplatPath:!1},l)}),[c,l,s,i]);typeof r=="string"&&(r=wi(r));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:b="default"}=r,x=f.useMemo(()=>{let w=Qk(d,c);return w==null?null:{location:{pathname:w,search:h,hash:m,state:p,key:b},navigationType:o}},[c,d,h,m,p,b,o]);return x==null?null:f.createElement(Hl.Provider,{value:u},f.createElement(Sd.Provider,{children:n,value:x}))}function gD(e){let{children:t,location:n}=e;return tD(fm(t),n)}new Promise(()=>{});function fm(e,t){t===void 0&&(t=[]);let n=[];return f.Children.forEach(e,(r,o)=>{if(!f.isValidElement(r))return;let s=[...t,o];if(r.type===f.Fragment){n.push.apply(n,fm(r.props.children,s));return}r.type!==Ln&&Yt(!1),!r.props.index||!r.props.children||Yt(!1);let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=fm(r.props.children,s)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const vD="6";try{window.__reactRouterVersion=vD}catch{}const xD="startTransition",ny=$m[xD];function yD(e){let{basename:t,children:n,future:r,window:o}=e,s=f.useRef();s.current==null&&(s.current=jO({window:o,v5Compat:!0}));let i=s.current,[l,c]=f.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},d=f.useCallback(h=>{u&&ny?ny(()=>c(h)):c(h)},[c,u]);return f.useLayoutEffect(()=>i.listen(d),[i,d]),f.useEffect(()=>mD(r),[r]),f.createElement(pD,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,future:r})}var ry;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ry||(ry={}));var oy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(oy||(oy={}));function wD(){const e=Ot();f.useEffect(()=>{window.scrollTo(0,0)},[e.pathname,e.search])}function sC(e){f.useEffect(()=>{window.scrollTo(0,0)},e)}const bD=()=>{const e=Ot();f.useEffect(()=>{let t=0;const n=100,r=setInterval(()=>{if(t++,window.Weglot&&window.Weglot.initialize){clearInterval(r);try{window.Weglot.initialize({api_key:"wg_6be7719df4ec60c9ba79755ad0e8c43d3",hideWidget:!0,autoSwitch:!1,enableTranslationUI:!1}),console.log(" Weglot initialis avec succs (widget compltement dsactiv)");const o=()=>{const i=['[id^="weglot-"]','[class*="wg-"]','[class*="weglot"]',"a[lang]",'a[target="_self"][href="#"]'];let l=0;i.forEach(c=>{document.querySelectorAll(c).forEach(u=>{var d,h,m;((d=u.id)!=null&&d.includes("weglot")||(h=u.className)!=null&&h.includes("wg")||(m=u.className)!=null&&m.includes("weglot")||u.tagName==="A"&&u.getAttribute("lang"))&&(u.remove(),l++)})}),l>0&&console.log(` lments Weglot supprims du DOM (${l} lments)`)};o(),setTimeout(o,100),setTimeout(o,500);const s=localStorage.getItem("weglot_language")||"fr";window.Weglot.switchTo&&setTimeout(()=>{window.Weglot.switchTo(s),console.log(` Langue initiale applique: ${s}`)},500)}catch(o){console.error(" Erreur lors de l'initialisation de Weglot:",o)}}else t>=n&&(clearInterval(r),console.warn(" Weglot n'a pas pu tre initialis aprs 10 secondes"))},100);return()=>{clearInterval(r)}},[]),f.useEffect(()=>{const t=e.pathname.split("/").filter(Boolean),n=["en","fr","es","de","pt","ar"],r=t[0];if(n.includes(r))localStorage.setItem("weglot_language",r),sessionStorage.setItem("weglot_language",r),window.Weglot&&window.Weglot.switchTo&&setTimeout(()=>{window.Weglot.switchTo(r),console.log(` Langue change en: ${r}`)},100);else{const o=localStorage.getItem("weglot_language")||"fr";window.Weglot&&window.Weglot.switchTo&&setTimeout(()=>{window.Weglot.switchTo(o),console.log(` Langue applique (stocke): ${o}`)},100)}},[e.pathname]),f.useEffect(()=>{const t=()=>{const r=['[id^="weglot-"]','[class*="wg-"]','[class*="weglot"]',"a[lang]",'a[target="_self"][href="#"]'];let o=0;return r.forEach(s=>{document.querySelectorAll(s).forEach(i=>{var l,c,u;((l=i.id)!=null&&l.includes("weglot")||(c=i.className)!=null&&c.includes("wg")||(u=i.className)!=null&&u.includes("weglot")||i.tagName==="A"&&i.getAttribute("lang"))&&(i.remove(),o++)})}),o},n=new MutationObserver(()=>{const r=t();r>0&&console.log(` lments Weglot supprims (rapparition dtecte): ${r} lments`)});return n.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),()=>n.disconnect()},[])};var kD=f.createContext(void 0);function bi(e){const t=f.useContext(kD);return e||t||"ltr"}var Rf=0;function Nd(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??sy()),document.body.insertAdjacentElement("beforeend",e[1]??sy()),Rf++,()=>{Rf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Rf--}},[])}function sy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var _f="focusScope.autoFocusOnMount",Of="focusScope.autoFocusOnUnmount",ay={bubbles:!1,cancelable:!0},CD="FocusScope",ql=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=e,[l,c]=f.useState(null),u=qt(o),d=qt(s),h=f.useRef(null),m=Be(t,x=>c(x)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let x=function(y){if(p.paused||!l)return;const k=y.target;l.contains(k)?h.current=k:$o(h.current,{select:!0})},w=function(y){if(p.paused||!l)return;const k=y.relatedTarget;k!==null&&(l.contains(k)||$o(h.current,{select:!0}))},g=function(y){if(document.activeElement===document.body)for(const C of y)C.removedNodes.length>0&&$o(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",w);const v=new MutationObserver(g);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,p.paused]),f.useEffect(()=>{if(l){ly.add(p);const x=document.activeElement;if(!l.contains(x)){const g=new CustomEvent(_f,ay);l.addEventListener(_f,u),l.dispatchEvent(g),g.defaultPrevented||(SD(PD(aC(l)),{select:!0}),document.activeElement===x&&$o(l))}return()=>{l.removeEventListener(_f,u),setTimeout(()=>{const g=new CustomEvent(Of,ay);l.addEventListener(Of,d),l.dispatchEvent(g),g.defaultPrevented||$o(x??document.body,{select:!0}),l.removeEventListener(Of,d),ly.remove(p)},0)}}},[l,u,d,p]);const b=f.useCallback(x=>{if(!n&&!r||p.paused)return;const w=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,g=document.activeElement;if(w&&g){const v=x.currentTarget,[y,k]=ND(v);y&&k?!x.shiftKey&&g===k?(x.preventDefault(),n&&$o(y,{select:!0})):x.shiftKey&&g===y&&(x.preventDefault(),n&&$o(k,{select:!0})):g===v&&x.preventDefault()}},[n,r,p.paused]);return a.jsx(Se.div,{tabIndex:-1,...i,ref:m,onKeyDown:b})});ql.displayName=CD;function SD(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if($o(r,{select:t}),document.activeElement!==n)return}function ND(e){const t=aC(e),n=iy(t,e),r=iy(t.reverse(),e);return[n,r]}function aC(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function iy(e,t){for(const n of e)if(!ID(n,{upTo:t}))return n}function ID(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function jD(e){return e instanceof HTMLInputElement&&"select"in e}function $o(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&jD(e)&&t&&e.select()}}var ly=ED();function ED(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=cy(e,t),e.unshift(t)},remove(t){var n;e=cy(e,t),(n=e[0])==null||n.resume()}}}function cy(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function PD(e){return e.filter(t=>t.tagName!=="A")}var Df="rovingFocusGroup.onEntryFocus",TD={bubbles:!1,cancelable:!0},Gl="RovingFocusGroup",[hm,iC,RD]=Ul(Gl),[_D,Id]=kn(Gl,[RD]),[OD,DD]=_D(Gl),lC=f.forwardRef((e,t)=>a.jsx(hm.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(hm.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(AD,{...e,ref:t})})}));lC.displayName=Gl;var AD=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=f.useRef(null),p=Be(t,m),b=bi(s),[x,w]=xr({prop:i,defaultProp:l??null,onChange:c,caller:Gl}),[g,v]=f.useState(!1),y=qt(u),k=iC(n),C=f.useRef(!1),[N,S]=f.useState(0);return f.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(Df,y),()=>I.removeEventListener(Df,y)},[y]),a.jsx(OD,{scope:n,orientation:r,dir:b,loop:o,currentTabStopId:x,onItemFocus:f.useCallback(I=>w(I),[w]),onItemShiftTab:f.useCallback(()=>v(!0),[]),onFocusableItemAdd:f.useCallback(()=>S(I=>I+1),[]),onFocusableItemRemove:f.useCallback(()=>S(I=>I-1),[]),children:a.jsx(Se.div,{tabIndex:g||N===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:he(e.onMouseDown,()=>{C.current=!0}),onFocus:he(e.onFocus,I=>{const P=!C.current;if(I.target===I.currentTarget&&P&&!g){const E=new CustomEvent(Df,TD);if(I.currentTarget.dispatchEvent(E),!E.defaultPrevented){const _=k().filter(A=>A.focusable),j=_.find(A=>A.active),L=_.find(A=>A.id===x),z=[j,L,..._].filter(Boolean).map(A=>A.ref.current);dC(z,d)}}C.current=!1}),onBlur:he(e.onBlur,()=>v(!1))})})}),cC="RovingFocusGroupItem",uC=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,children:i,...l}=e,c=tr(),u=s||c,d=DD(cC,n),h=d.currentTabStopId===u,m=iC(n),{onFocusableItemAdd:p,onFocusableItemRemove:b,currentTabStopId:x}=d;return f.useEffect(()=>{if(r)return p(),()=>b()},[r,p,b]),a.jsx(hm.ItemSlot,{scope:n,id:u,focusable:r,active:o,children:a.jsx(Se.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:he(e.onMouseDown,w=>{r?d.onItemFocus(u):w.preventDefault()}),onFocus:he(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:he(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const g=$D(w,d.orientation,d.dir);if(g!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let y=m().filter(k=>k.focusable).map(k=>k.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const k=y.indexOf(w.currentTarget);y=d.loop?UD(y,k+1):y.slice(k+1)}setTimeout(()=>dC(y))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:x!=null}):i})})});uC.displayName=cC;var MD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function LD(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function $D(e,t,n){const r=LD(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return MD[r]}function dC(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function UD(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var fC=lC,hC=uC,FD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},fa=new WeakMap,Rc=new WeakMap,_c={},Af=0,mC=function(e){return e&&(e.host||mC(e.parentNode))},zD=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=mC(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},BD=function(e,t,n,r){var o=zD(t,Array.isArray(e)?e:[e]);_c[n]||(_c[n]=new WeakMap);var s=_c[n],i=[],l=new Set,c=new Set(o),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};o.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(r),b=p!==null&&p!=="false",x=(fa.get(m)||0)+1,w=(s.get(m)||0)+1;fa.set(m,x),s.set(m,w),i.push(m),x===1&&b&&Rc.set(m,!0),w===1&&m.setAttribute(n,"true"),b||m.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",m,g)}})};return d(t),l.clear(),Af++,function(){i.forEach(function(h){var m=fa.get(h)-1,p=s.get(h)-1;fa.set(h,m),s.set(h,p),m||(Rc.has(h)||h.removeAttribute(r),Rc.delete(h)),p||h.removeAttribute(n)}),Af--,Af||(fa=new WeakMap,fa=new WeakMap,Rc=new WeakMap,_c={})}},jd=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=FD(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),BD(r,o,n,"aria-hidden")):function(){return null}},Yr=function(){return Yr=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Yr.apply(this,arguments)};function pC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function WD(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Zc="right-scroll-bar-position",eu="width-before-scroll-bar",HD="with-scroll-bars-hidden",VD="--removed-body-scroll-bar-size";function Mf(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function qD(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var GD=typeof window<"u"?f.useLayoutEffect:f.useEffect,uy=new WeakMap;function KD(e,t){var n=qD(null,function(r){return e.forEach(function(o){return Mf(o,r)})});return GD(function(){var r=uy.get(n);if(r){var o=new Set(r),s=new Set(e),i=n.current;o.forEach(function(l){s.has(l)||Mf(l,null)}),s.forEach(function(l){o.has(l)||Mf(l,i)})}uy.set(n,e)},[e]),n}function YD(e){return e}function QD(e,t){t===void 0&&(t=YD);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var i=t(s,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(s),i=n}var c=function(){var d=i;i=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return o}function XD(e){e===void 0&&(e={});var t=QD(null);return t.options=Yr({async:!0,ssr:!1},e),t}var gC=function(e){var t=e.sideCar,n=pC(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,Yr({},n))};gC.isSideCarExport=!0;function JD(e,t){return e.useMedium(t),gC}var vC=XD(),Lf=function(){},Ed=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:Lf,onWheelCapture:Lf,onTouchMoveCapture:Lf}),o=r[0],s=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,p=e.noRelative,b=e.noIsolation,x=e.inert,w=e.allowPinchZoom,g=e.as,v=g===void 0?"div":g,y=e.gapMode,k=pC(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,N=KD([n,t]),S=Yr(Yr({},k),o);return f.createElement(f.Fragment,null,d&&f.createElement(C,{sideCar:vC,removeScrollBar:u,shards:h,noRelative:p,noIsolation:b,inert:x,setCallbacks:s,allowPinchZoom:!!w,lockRef:n,gapMode:y}),i?f.cloneElement(f.Children.only(l),Yr(Yr({},S),{ref:N})):f.createElement(v,Yr({},S,{className:c,ref:N}),l))});Ed.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ed.classNames={fullWidth:eu,zeroRight:Zc};var ZD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eA(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ZD();return t&&e.setAttribute("nonce",t),e}function tA(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function nA(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var rA=function(){var e=0,t=null;return{add:function(n){e==0&&(t=eA())&&(tA(t,n),nA(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},oA=function(){var e=rA();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},xC=function(){var e=oA(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},sA={left:0,top:0,right:0,gap:0},$f=function(e){return parseInt(e||"",10)||0},aA=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[$f(n),$f(r),$f(o)]},iA=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return sA;var t=aA(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},lA=xC(),Fa="data-scroll-locked",cA=function(e,t,n,r){var o=e.left,s=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(HD,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Fa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(eu,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Zc," .").concat(Zc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(eu," .").concat(eu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fa,`] {
    `).concat(VD,": ").concat(l,`px;
  }
`)},dy=function(){var e=parseInt(document.body.getAttribute(Fa)||"0",10);return isFinite(e)?e:0},uA=function(){f.useEffect(function(){return document.body.setAttribute(Fa,(dy()+1).toString()),function(){var e=dy()-1;e<=0?document.body.removeAttribute(Fa):document.body.setAttribute(Fa,e.toString())}},[])},dA=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;uA();var s=f.useMemo(function(){return iA(o)},[o]);return f.createElement(lA,{styles:cA(s,!t,o,n?"":"!important")})},mm=!1;if(typeof window<"u")try{var Oc=Object.defineProperty({},"passive",{get:function(){return mm=!0,!0}});window.addEventListener("test",Oc,Oc),window.removeEventListener("test",Oc,Oc)}catch{mm=!1}var ha=mm?{passive:!1}:!1,fA=function(e){return e.tagName==="TEXTAREA"},yC=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!fA(e)&&n[t]==="visible")},hA=function(e){return yC(e,"overflowY")},mA=function(e){return yC(e,"overflowX")},fy=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=wC(e,r);if(o){var s=bC(e,r),i=s[1],l=s[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},pA=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},gA=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},wC=function(e,t){return e==="v"?hA(t):mA(t)},bC=function(e,t){return e==="v"?pA(t):gA(t)},vA=function(e,t){return e==="h"&&t==="rtl"?-1:1},xA=function(e,t,n,r,o){var s=vA(e,window.getComputedStyle(t).direction),i=s*r,l=n.target,c=t.contains(l),u=!1,d=i>0,h=0,m=0;do{if(!l)break;var p=bC(e,l),b=p[0],x=p[1],w=p[2],g=x-w-s*b;(b||g)&&wC(e,l)&&(h+=g,m+=b);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(u=!0),u},Dc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},hy=function(e){return[e.deltaX,e.deltaY]},my=function(e){return e&&"current"in e?e.current:e},yA=function(e,t){return e[0]===t[0]&&e[1]===t[1]},wA=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},bA=0,ma=[];function kA(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),o=f.useState(bA++)[0],s=f.useState(xC)[0],i=f.useRef(e);f.useEffect(function(){i.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var x=WD([e.lockRef.current],(e.shards||[]).map(my),!0).filter(Boolean);return x.forEach(function(w){return w.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),x.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(x,w){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!i.current.allowPinchZoom;var g=Dc(x),v=n.current,y="deltaX"in x?x.deltaX:v[0]-g[0],k="deltaY"in x?x.deltaY:v[1]-g[1],C,N=x.target,S=Math.abs(y)>Math.abs(k)?"h":"v";if("touches"in x&&S==="h"&&N.type==="range")return!1;var I=fy(S,N);if(!I)return!0;if(I?C=S:(C=S==="v"?"h":"v",I=fy(S,N)),!I)return!1;if(!r.current&&"changedTouches"in x&&(y||k)&&(r.current=C),!C)return!0;var P=r.current||C;return xA(P,w,x,P==="h"?y:k)},[]),c=f.useCallback(function(x){var w=x;if(!(!ma.length||ma[ma.length-1]!==s)){var g="deltaY"in w?hy(w):Dc(w),v=t.current.filter(function(C){return C.name===w.type&&(C.target===w.target||w.target===C.shadowParent)&&yA(C.delta,g)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var y=(i.current.shards||[]).map(my).filter(Boolean).filter(function(C){return C.contains(w.target)}),k=y.length>0?l(w,y[0]):!i.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),u=f.useCallback(function(x,w,g,v){var y={name:x,delta:w,target:g,should:v,shadowParent:CA(g)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(k){return k!==y})},1)},[]),d=f.useCallback(function(x){n.current=Dc(x),r.current=void 0},[]),h=f.useCallback(function(x){u(x.type,hy(x),x.target,l(x,e.lockRef.current))},[]),m=f.useCallback(function(x){u(x.type,Dc(x),x.target,l(x,e.lockRef.current))},[]);f.useEffect(function(){return ma.push(s),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ha),document.addEventListener("touchmove",c,ha),document.addEventListener("touchstart",d,ha),function(){ma=ma.filter(function(x){return x!==s}),document.removeEventListener("wheel",c,ha),document.removeEventListener("touchmove",c,ha),document.removeEventListener("touchstart",d,ha)}},[]);var p=e.removeScrollBar,b=e.inert;return f.createElement(f.Fragment,null,b?f.createElement(s,{styles:wA(o)}):null,p?f.createElement(dA,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function CA(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const SA=JD(vC,kA);var Kl=f.forwardRef(function(e,t){return f.createElement(Ed,Yr({},e,{ref:t,sideCar:SA}))});Kl.classNames=Ed.classNames;var pm=["Enter"," "],NA=["ArrowDown","PageUp","Home"],kC=["ArrowUp","PageDown","End"],IA=[...NA,...kC],jA={ltr:[...pm,"ArrowRight"],rtl:[...pm,"ArrowLeft"]},EA={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Yl="Menu",[Nl,PA,TA]=Ul(Yl),[ia,CC]=kn(Yl,[TA,gs,Id]),Pd=gs(),SC=Id(),[RA,la]=ia(Yl),[_A,Ql]=ia(Yl),NC=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=e,l=Pd(t),[c,u]=f.useState(null),d=f.useRef(!1),h=qt(s),m=bi(o);return f.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),a.jsx(Wp,{...l,children:a.jsx(RA,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(_A,{scope:t,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:i,children:r})})})};NC.displayName=Yl;var OA="MenuAnchor",Kp=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Pd(n);return a.jsx(Wl,{...o,...r,ref:t})});Kp.displayName=OA;var Yp="MenuPortal",[DA,IC]=ia(Yp,{forceMount:void 0}),jC=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,s=la(Yp,t);return a.jsx(DA,{scope:t,forceMount:n,children:a.jsx(tn,{present:n||s.open,children:a.jsx(gi,{asChild:!0,container:o,children:r})})})};jC.displayName=Yp;var pr="MenuContent",[AA,Qp]=ia(pr),EC=f.forwardRef((e,t)=>{const n=IC(pr,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=la(pr,e.__scopeMenu),i=Ql(pr,e.__scopeMenu);return a.jsx(Nl.Provider,{scope:e.__scopeMenu,children:a.jsx(tn,{present:r||s.open,children:a.jsx(Nl.Slot,{scope:e.__scopeMenu,children:i.modal?a.jsx(MA,{...o,ref:t}):a.jsx(LA,{...o,ref:t})})})})}),MA=f.forwardRef((e,t)=>{const n=la(pr,e.__scopeMenu),r=f.useRef(null),o=Be(t,r);return f.useEffect(()=>{const s=r.current;if(s)return jd(s)},[]),a.jsx(Xp,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:he(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),LA=f.forwardRef((e,t)=>{const n=la(pr,e.__scopeMenu);return a.jsx(Xp,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),$A=cs("MenuContent.ScrollLock"),Xp=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:b,...x}=e,w=la(pr,n),g=Ql(pr,n),v=Pd(n),y=SC(n),k=PA(n),[C,N]=f.useState(null),S=f.useRef(null),I=Be(t,S,w.onContentChange),P=f.useRef(0),E=f.useRef(""),_=f.useRef(0),j=f.useRef(null),L=f.useRef("right"),D=f.useRef(0),z=b?Kl:f.Fragment,A=b?{as:$A,allowPinchZoom:!0}:void 0,R=O=>{var Y,ne;const H=E.current+O,q=k().filter(xe=>!xe.disabled),Z=document.activeElement,G=(Y=q.find(xe=>xe.ref.current===Z))==null?void 0:Y.textValue,K=q.map(xe=>xe.textValue),re=QA(K,H,G),ie=(ne=q.find(xe=>xe.textValue===re))==null?void 0:ne.ref.current;(function xe(le){E.current=le,window.clearTimeout(P.current),le!==""&&(P.current=window.setTimeout(()=>xe(""),1e3))})(H),ie&&setTimeout(()=>ie.focus())};f.useEffect(()=>()=>window.clearTimeout(P.current),[]),Nd();const T=f.useCallback(O=>{var q,Z;return L.current===((q=j.current)==null?void 0:q.side)&&JA(O,(Z=j.current)==null?void 0:Z.area)},[]);return a.jsx(AA,{scope:n,searchRef:E,onItemEnter:f.useCallback(O=>{T(O)&&O.preventDefault()},[T]),onItemLeave:f.useCallback(O=>{var H;T(O)||((H=S.current)==null||H.focus(),N(null))},[T]),onTriggerLeave:f.useCallback(O=>{T(O)&&O.preventDefault()},[T]),pointerGraceTimerRef:_,onPointerGraceIntentChange:f.useCallback(O=>{j.current=O},[]),children:a.jsx(z,{...A,children:a.jsx(ql,{asChild:!0,trapped:o,onMountAutoFocus:he(s,O=>{var H;O.preventDefault(),(H=S.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:a.jsx(oa,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:a.jsx(fC,{asChild:!0,...y,dir:g.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:N,onEntryFocus:he(c,O=>{g.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(xd,{role:"menu","aria-orientation":"vertical","data-state":HC(w.open),"data-radix-menu-content":"",dir:g.dir,...v,...x,ref:I,style:{outline:"none",...x.style},onKeyDown:he(x.onKeyDown,O=>{const q=O.target.closest("[data-radix-menu-content]")===O.currentTarget,Z=O.ctrlKey||O.altKey||O.metaKey,G=O.key.length===1;q&&(O.key==="Tab"&&O.preventDefault(),!Z&&G&&R(O.key));const K=S.current;if(O.target!==K||!IA.includes(O.key))return;O.preventDefault();const ie=k().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);kC.includes(O.key)&&ie.reverse(),KA(ie)}),onBlur:he(e.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(P.current),E.current="")}),onPointerMove:he(e.onPointerMove,Il(O=>{const H=O.target,q=D.current!==O.clientX;if(O.currentTarget.contains(H)&&q){const Z=O.clientX>D.current?"right":"left";L.current=Z,D.current=O.clientX}}))})})})})})})});EC.displayName=pr;var UA="MenuGroup",Jp=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(Se.div,{role:"group",...r,ref:t})});Jp.displayName=UA;var FA="MenuLabel",PC=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(Se.div,{...r,ref:t})});PC.displayName=FA;var Ru="MenuItem",py="menu.itemSelect",Td=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,s=f.useRef(null),i=Ql(Ru,e.__scopeMenu),l=Qp(Ru,e.__scopeMenu),c=Be(t,s),u=f.useRef(!1),d=()=>{const h=s.current;if(!n&&h){const m=new CustomEvent(py,{bubbles:!0,cancelable:!0});h.addEventListener(py,p=>r==null?void 0:r(p),{once:!0}),Pp(h,m),m.defaultPrevented?u.current=!1:i.onClose()}};return a.jsx(TC,{...o,ref:c,disabled:n,onClick:he(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:he(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:he(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||pm.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Td.displayName=Ru;var TC=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=e,i=Qp(Ru,n),l=SC(n),c=f.useRef(null),u=Be(t,c),[d,h]=f.useState(!1),[m,p]=f.useState("");return f.useEffect(()=>{const b=c.current;b&&p((b.textContent??"").trim())},[s.children]),a.jsx(Nl.ItemSlot,{scope:n,disabled:r,textValue:o??m,children:a.jsx(hC,{asChild:!0,...l,focusable:!r,children:a.jsx(Se.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:he(e.onPointerMove,Il(b=>{r?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:he(e.onPointerLeave,Il(b=>i.onItemLeave(b))),onFocus:he(e.onFocus,()=>h(!0)),onBlur:he(e.onBlur,()=>h(!1))})})})}),zA="MenuCheckboxItem",RC=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return a.jsx(MC,{scope:e.__scopeMenu,checked:n,children:a.jsx(Td,{role:"menuitemcheckbox","aria-checked":_u(n)?"mixed":n,...o,ref:t,"data-state":eg(n),onSelect:he(o.onSelect,()=>r==null?void 0:r(_u(n)?!0:!n),{checkForDefaultPrevented:!1})})})});RC.displayName=zA;var _C="MenuRadioGroup",[BA,WA]=ia(_C,{value:void 0,onValueChange:()=>{}}),OC=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,s=qt(r);return a.jsx(BA,{scope:e.__scopeMenu,value:n,onValueChange:s,children:a.jsx(Jp,{...o,ref:t})})});OC.displayName=_C;var DC="MenuRadioItem",AC=f.forwardRef((e,t)=>{const{value:n,...r}=e,o=WA(DC,e.__scopeMenu),s=n===o.value;return a.jsx(MC,{scope:e.__scopeMenu,checked:s,children:a.jsx(Td,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":eg(s),onSelect:he(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});AC.displayName=DC;var Zp="MenuItemIndicator",[MC,HA]=ia(Zp,{checked:!1}),LC=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,s=HA(Zp,n);return a.jsx(tn,{present:r||_u(s.checked)||s.checked===!0,children:a.jsx(Se.span,{...o,ref:t,"data-state":eg(s.checked)})})});LC.displayName=Zp;var VA="MenuSeparator",$C=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(Se.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});$C.displayName=VA;var qA="MenuArrow",UC=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Pd(n);return a.jsx(yd,{...o,...r,ref:t})});UC.displayName=qA;var GA="MenuSub",[N6,FC]=ia(GA),Bi="MenuSubTrigger",zC=f.forwardRef((e,t)=>{const n=la(Bi,e.__scopeMenu),r=Ql(Bi,e.__scopeMenu),o=FC(Bi,e.__scopeMenu),s=Qp(Bi,e.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:e.__scopeMenu},d=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(Kp,{asChild:!0,...u,children:a.jsx(TC,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":HC(n.open),...e,ref:ld(t,o.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:he(e.onPointerMove,Il(h=>{s.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:he(e.onPointerLeave,Il(h=>{var p,b;d();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const x=(b=n.content)==null?void 0:b.dataset.side,w=x==="right",g=w?-5:5,v=m[w?"left":"right"],y=m[w?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+g,y:h.clientY},{x:v,y:m.top},{x:y,y:m.top},{x:y,y:m.bottom},{x:v,y:m.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:he(e.onKeyDown,h=>{var p;const m=s.searchRef.current!=="";e.disabled||m&&h.key===" "||jA[r.dir].includes(h.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),h.preventDefault())})})})});zC.displayName=Bi;var BC="MenuSubContent",WC=f.forwardRef((e,t)=>{const n=IC(pr,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=la(pr,e.__scopeMenu),i=Ql(pr,e.__scopeMenu),l=FC(BC,e.__scopeMenu),c=f.useRef(null),u=Be(t,c);return a.jsx(Nl.Provider,{scope:e.__scopeMenu,children:a.jsx(tn,{present:r||s.open,children:a.jsx(Nl.Slot,{scope:e.__scopeMenu,children:a.jsx(Xp,{id:l.contentId,"aria-labelledby":l.triggerId,...o,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;i.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:he(e.onFocusOutside,d=>{d.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:he(e.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:he(e.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),m=EA[i.dir].includes(d.key);h&&m&&(s.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});WC.displayName=BC;function HC(e){return e?"open":"closed"}function _u(e){return e==="indeterminate"}function eg(e){return _u(e)?"indeterminate":e?"checked":"unchecked"}function KA(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function YA(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function QA(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let i=YA(e,Math.max(s,0));o.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function XA(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const l=t[s],c=t[i],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(o=!o)}return o}function JA(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return XA(n,t)}function Il(e){return t=>t.pointerType==="mouse"?e(t):void 0}var ZA=NC,eM=Kp,tM=jC,nM=EC,rM=Jp,oM=PC,sM=Td,aM=RC,iM=OC,lM=AC,cM=LC,uM=$C,dM=UC,fM=zC,hM=WC,Rd="DropdownMenu",[mM]=kn(Rd,[CC]),Mn=CC(),[pM,VC]=mM(Rd),qC=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:i,modal:l=!0}=e,c=Mn(t),u=f.useRef(null),[d,h]=xr({prop:o,defaultProp:s??!1,onChange:i,caller:Rd});return a.jsx(pM,{scope:t,triggerId:tr(),triggerRef:u,contentId:tr(),open:d,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:l,children:a.jsx(ZA,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};qC.displayName=Rd;var GC="DropdownMenuTrigger",KC=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,s=VC(GC,n),i=Mn(n);return a.jsx(eM,{asChild:!0,...i,children:a.jsx(Se.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:ld(t,s.triggerRef),onPointerDown:he(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:he(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});KC.displayName=GC;var gM="DropdownMenuPortal",YC=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Mn(t);return a.jsx(tM,{...r,...n})};YC.displayName=gM;var QC="DropdownMenuContent",XC=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=VC(QC,n),s=Mn(n),i=f.useRef(!1);return a.jsx(nM,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:t,onCloseAutoFocus:he(e.onCloseAutoFocus,l=>{var c;i.current||(c=o.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:he(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!o.modal||d)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});XC.displayName=QC;var vM="DropdownMenuGroup",xM=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(rM,{...o,...r,ref:t})});xM.displayName=vM;var yM="DropdownMenuLabel",JC=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(oM,{...o,...r,ref:t})});JC.displayName=yM;var wM="DropdownMenuItem",ZC=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(sM,{...o,...r,ref:t})});ZC.displayName=wM;var bM="DropdownMenuCheckboxItem",eS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(aM,{...o,...r,ref:t})});eS.displayName=bM;var kM="DropdownMenuRadioGroup",CM=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(iM,{...o,...r,ref:t})});CM.displayName=kM;var SM="DropdownMenuRadioItem",tS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(lM,{...o,...r,ref:t})});tS.displayName=SM;var NM="DropdownMenuItemIndicator",nS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(cM,{...o,...r,ref:t})});nS.displayName=NM;var IM="DropdownMenuSeparator",rS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(uM,{...o,...r,ref:t})});rS.displayName=IM;var jM="DropdownMenuArrow",EM=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(dM,{...o,...r,ref:t})});EM.displayName=jM;var PM="DropdownMenuSubTrigger",oS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(fM,{...o,...r,ref:t})});oS.displayName=PM;var TM="DropdownMenuSubContent",sS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Mn(n);return a.jsx(hM,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sS.displayName=TM;var RM=qC,_M=KC,OM=YC,aS=XC,iS=JC,lS=ZC,cS=eS,uS=tS,dS=nS,fS=rS,hS=oS,mS=sS;const DM=RM,AM=_M,MM=f.forwardRef(({className:e,inset:t,children:n,...r},o)=>a.jsxs(hS,{ref:o,className:ke("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,a.jsx(Zn,{className:"ml-auto h-4 w-4"})]}));MM.displayName=hS.displayName;const LM=f.forwardRef(({className:e,...t},n)=>a.jsx(mS,{ref:n,className:ke("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));LM.displayName=mS.displayName;const pS=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>a.jsx(OM,{children:a.jsx(aS,{ref:r,sideOffset:t,className:ke("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));pS.displayName=aS.displayName;const gS=f.forwardRef(({className:e,inset:t,...n},r)=>a.jsx(lS,{ref:r,className:ke("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));gS.displayName=lS.displayName;const $M=f.forwardRef(({className:e,children:t,checked:n,...r},o)=>a.jsxs(cS,{ref:o,className:ke("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(dS,{children:a.jsx(Fn,{className:"h-4 w-4"})})}),t]}));$M.displayName=cS.displayName;const UM=f.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(uS,{ref:r,className:ke("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(dS,{children:a.jsx(Zh,{className:"h-2 w-2 fill-current"})})}),t]}));UM.displayName=uS.displayName;const FM=f.forwardRef(({className:e,inset:t,...n},r)=>a.jsx(iS,{ref:r,className:ke("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));FM.displayName=iS.displayName;const zM=f.forwardRef(({className:e,...t},n)=>a.jsx(fS,{ref:n,className:ke("-mx-1 my-1 h-px bg-muted",e),...t}));zM.displayName=fS.displayName;const gy=[{code:"en",name:"English",nativeName:"English",flag:""},{code:"fr",name:"Franais",nativeName:"Franais",flag:""},{code:"es",name:"Espaol",nativeName:"Espaol",flag:""},{code:"de",name:"Deutsch",nativeName:"Deutsch",flag:""},{code:"pt",name:"Portugus",nativeName:"Portugus",flag:""},{code:"ar",name:"",nativeName:"",flag:""}],BM=()=>{const[e,t]=f.useState("en"),[n,r]=f.useState(!1);f.useEffect(()=>{if(window.Weglot&&window.Weglot.getCurrentLanguage){const i=window.Weglot.getCurrentLanguage();t(i),console.log(` Langue actuelle: ${i}`)}},[]);const o=i=>{if(!window.Weglot||!window.Weglot.switchTo){console.error(" Weglot n'est pas disponible");return}r(!0),console.log(` Changement de langue vers: ${i}`);try{localStorage.setItem("weglot_language",i),sessionStorage.setItem("weglot_language",i),window.Weglot.switchTo(i),t(i),setTimeout(()=>{window.Weglot&&window.Weglot.detectNewContent&&(window.Weglot.detectNewContent(),console.log(` Nouveau contenu dtect et traduit en: ${i}`)),r(!1)},100),console.log(` Langue change en: ${i}`)}catch(l){console.error(" Erreur lors du changement de langue:",l),r(!1)}},s=gy.find(i=>i.code===e);return a.jsxs(DM,{children:[a.jsx(AM,{asChild:!0,children:a.jsxs("button",{className:"flex items-center gap-2 px-2 sm:px-3 py-2 rounded-lg hover:bg-accent transition-colors z-50 relative",disabled:n,title:"Changer la langue / Change language / Cambiar idioma",children:[a.jsx(LT,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),a.jsxs("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:[s==null?void 0:s.flag," ",s==null?void 0:s.code.toUpperCase()]}),a.jsx("span",{className:"text-sm sm:hidden",children:s==null?void 0:s.flag})]})}),a.jsx(pS,{align:"end",className:"w-48 z-[9999]",children:gy.map(i=>a.jsxs(gS,{onClick:()=>o(i.code),className:`cursor-pointer ${e===i.code?"bg-primary/10":""}`,children:[a.jsx("span",{className:"mr-2 text-lg",children:i.flag}),a.jsx("span",{className:"flex-1",children:i.nativeName}),e===i.code&&a.jsx("span",{className:"ml-2 text-primary font-bold",children:""})]},i.code))})]})},WM=({children:e})=>{const t=Ot(),n=f.useRef(),r=f.useRef(null),o=f.useRef(0),s=()=>{if(window.Weglot){const i=localStorage.getItem("weglot_language")||"fr";try{window.Weglot.retranslate&&(window.Weglot.retranslate(),console.log(" Weglot: Contenu retraduit (retranslate)")),window.Weglot.switchTo&&(window.Weglot.switchTo(i),console.log(` Weglot: Langue applique: ${i}`)),window.Weglot.detectNewContent&&(window.Weglot.detectNewContent(),console.log(" Weglot: Nouveau contenu dtect"))}catch(l){console.warn(" Erreur lors de la retranslation:",l)}}};return f.useEffect(()=>{n.current&&clearTimeout(n.current);const i=localStorage.getItem("weglot_language")||"fr";return console.log(` Weglot: Route change vers ${t.pathname}, langue: ${i}`),n.current=setTimeout(()=>{s()},500),()=>{n.current&&clearTimeout(n.current)}},[t.pathname]),f.useEffect(()=>{const i=document.getElementById("root");if(i)return r.current=new MutationObserver(()=>{const l=Date.now();l-o.current>200&&(o.current=l,console.log(" Weglot: Changement du DOM dtect, retranslation..."),s())}),r.current.observe(i,{childList:!0,subtree:!0,characterData:!0,attributes:!0,characterDataOldValue:!0,attributeOldValue:!0}),setTimeout(()=>{s()},100),()=>{r.current&&r.current.disconnect()}},[]),a.jsx(a.Fragment,{children:e})},gm=ps("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-[1.02] active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:scale-[1.02] active:scale-[0.98]",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:scale-[1.02] active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:scale-[1.02] active:scale-[0.98]",ghost:"hover:bg-accent hover:text-accent-foreground hover:scale-105 active:scale-[0.95]",link:"text-primary underline-offset-4 hover:underline hover:scale-105",cta:"w-full h-12 font-medium text-base rounded-xl bg-gradient-primary hover:shadow-glow hover:scale-[1.02] active:scale-[0.98] shadow-card text-primary-foreground","cta-secondary":"w-full h-12 font-medium text-base rounded-xl bg-gradient-to-r from-purple-400 to-pink-400 hover:from-purple-500 hover:to-pink-500 text-white shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]",glass:"bg-white/10 backdrop-blur-sm border border-white/20 text-foreground hover:bg-white/20 hover:scale-[1.02] active:scale-[0.98] shadow-card",floating:"bg-gradient-primary text-primary-foreground shadow-floating hover:shadow-glow hover:scale-[1.05] active:scale-[0.95] rounded-full"},size:{default:"h-11 px-4 py-2.5 sm:h-10",sm:"h-9 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-11 w-11 sm:h-10 sm:w-10",cta:"h-12 px-6","touch-friendly":"h-11 px-6"}},defaultVariants:{variant:"default",size:"default"}}),fe=f.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},s)=>{const i=r?FP:"button";return a.jsx(i,{className:ke(gm({variant:t,size:n,className:e})),ref:s,...o})});fe.displayName="Button";const el=f.forwardRef(({className:e,type:t,...n},r)=>a.jsx("input",{type:t,className:ke("flex h-11 w-full rounded-md border border-input bg-background px-3 py-2.5 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sm:text-sm","text-base",e),ref:r,...n}));el.displayName="Input";var HM="Label",vS=f.forwardRef((e,t)=>a.jsx(Se.label,{...e,ref:t,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=e.onMouseDown)==null||o.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));vS.displayName=HM;var xS=vS;const VM=ps("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ts=f.forwardRef(({className:e,...t},n)=>a.jsx(xS,{ref:n,className:ke(VM(),e),...t}));Ts.displayName=xS.displayName;const qM=ps("rounded-lg text-card-foreground transition-all duration-300",{variants:{variant:{default:"border bg-card shadow-sm hover:shadow-md",elevated:"border border-border/50 bg-card shadow-card hover:shadow-floating hover:scale-[1.01]",glass:"bg-white/80 backdrop-blur-sm border border-white/30 shadow-card hover:shadow-floating hover:bg-white/90",outline:"border-2 border-border bg-transparent hover:bg-muted/50",gradient:"bg-gradient-subtle border border-white/20 shadow-elegant hover:shadow-glow"},padding:{none:"",sm:"p-3",default:"p-4",lg:"p-6"}},defaultVariants:{variant:"default",padding:"none"}}),$e=f.forwardRef(({className:e,variant:t,padding:n,...r},o)=>a.jsx("div",{ref:o,className:ke(qM({variant:t,padding:n}),e),...r}));$e.displayName="Card";const Lt=f.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:ke("flex flex-col space-y-1.5 p-4 sm:p-6",e),...t}));Lt.displayName="CardHeader";const $t=f.forwardRef(({className:e,...t},n)=>a.jsx("h3",{ref:n,className:ke("text-2xl font-semibold leading-none tracking-tight",e),...t}));$t.displayName="CardTitle";const GM=f.forwardRef(({className:e,...t},n)=>a.jsx("p",{ref:n,className:ke("text-sm text-muted-foreground",e),...t}));GM.displayName="CardDescription";const tt=f.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:ke("p-4 sm:p-6 pt-0",e),...t}));tt.displayName="CardContent";const KM=f.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:ke("flex items-center p-4 sm:p-6 pt-0",e),...t}));KM.displayName="CardFooter";var tg="Progress",ng=100,[YM]=kn(tg),[QM,XM]=YM(tg),yS=f.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:o,getValueLabel:s=JM,...i}=e;(o||o===0)&&!vy(o)&&console.error(ZM(`${o}`,"Progress"));const l=vy(o)?o:ng;r!==null&&!xy(r,l)&&console.error(e4(`${r}`,"Progress"));const c=xy(r,l)?r:null,u=Ou(c)?s(c,l):void 0;return a.jsx(QM,{scope:n,value:c,max:l,children:a.jsx(Se.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ou(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":kS(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});yS.displayName=tg;var wS="ProgressIndicator",bS=f.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,o=XM(wS,n);return a.jsx(Se.div,{"data-state":kS(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:t})});bS.displayName=wS;function JM(e,t){return`${Math.round(e/t*100)}%`}function kS(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ou(e){return typeof e=="number"}function vy(e){return Ou(e)&&!isNaN(e)&&e>0}function xy(e,t){return Ou(e)&&!isNaN(e)&&e<=t&&e>=0}function ZM(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ng}\`.`}function e4(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ng} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var CS=yS,t4=bS;const SS=f.forwardRef(({className:e,value:t,...n},r)=>a.jsx(CS,{ref:r,className:ke("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:a.jsx(t4,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));SS.displayName=CS.displayName;var _d="Popover",[NS]=kn(_d,[gs]),Xl=gs(),[n4,vs]=NS(_d),IS=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!1}=e,l=Xl(t),c=f.useRef(null),[u,d]=f.useState(!1),[h,m]=xr({prop:r,defaultProp:o??!1,onChange:s,caller:_d});return a.jsx(Wp,{...l,children:a.jsx(n4,{scope:t,contentId:tr(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:i,children:n})})};IS.displayName=_d;var jS="PopoverAnchor",r4=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=vs(jS,n),s=Xl(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=o;return f.useEffect(()=>(i(),()=>l()),[i,l]),a.jsx(Wl,{...s,...r,ref:t})});r4.displayName=jS;var ES="PopoverTrigger",PS=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=vs(ES,n),s=Xl(n),i=Be(t,o.triggerRef),l=a.jsx(Se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":DS(o.open),...r,ref:i,onClick:he(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?l:a.jsx(Wl,{asChild:!0,...s,children:l})});PS.displayName=ES;var rg="PopoverPortal",[o4,s4]=NS(rg,{forceMount:void 0}),TS=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,s=vs(rg,t);return a.jsx(o4,{scope:t,forceMount:n,children:a.jsx(tn,{present:n||s.open,children:a.jsx(gi,{asChild:!0,container:o,children:r})})})};TS.displayName=rg;var li="PopoverContent",RS=f.forwardRef((e,t)=>{const n=s4(li,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,s=vs(li,e.__scopePopover);return a.jsx(tn,{present:r||s.open,children:s.modal?a.jsx(i4,{...o,ref:t}):a.jsx(l4,{...o,ref:t})})});RS.displayName=li;var a4=cs("PopoverContent.RemoveScroll"),i4=f.forwardRef((e,t)=>{const n=vs(li,e.__scopePopover),r=f.useRef(null),o=Be(t,r),s=f.useRef(!1);return f.useEffect(()=>{const i=r.current;if(i)return jd(i)},[]),a.jsx(Kl,{as:a4,allowPinchZoom:!0,children:a.jsx(_S,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),s.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:he(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:he(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),l4=f.forwardRef((e,t)=>{const n=vs(li,e.__scopePopover),r=f.useRef(!1),o=f.useRef(!1);return a.jsx(_S,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),_S=f.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=e,m=vs(li,n),p=Xl(n);return Nd(),a.jsx(ql,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:a.jsx(oa,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:a.jsx(xd,{"data-state":DS(m.open),role:"dialog",id:m.contentId,...p,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),OS="PopoverClose",c4=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=vs(OS,n);return a.jsx(Se.button,{type:"button",...r,ref:t,onClick:he(e.onClick,()=>o.onOpenChange(!1))})});c4.displayName=OS;var u4="PopoverArrow",d4=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Xl(n);return a.jsx(yd,{...o,...r,ref:t})});d4.displayName=u4;function DS(e){return e?"open":"closed"}var f4=IS,h4=PS,m4=TS,AS=RS;const Du=f4,Au=h4,jl=f.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>a.jsx(m4,{children:a.jsx(AS,{ref:o,align:t,sideOffset:n,className:ke("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));jl.displayName=AS.displayName;function ft(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function or(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Pn(e,t){const n=ft(e);return isNaN(t)?or(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Mr(e,t){const n=ft(e);if(isNaN(t))return or(e,NaN);if(!t)return n;const r=n.getDate(),o=or(e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const s=o.getDate();return r>=s?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}const og=6048e5,p4=864e5;let g4={};function Jl(){return g4}function ao(e,t){var l,c,u,d;const n=Jl(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,o=ft(e),s=o.getDay(),i=(s<r?7:0)+s-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function Qs(e){return ao(e,{weekStartsOn:1})}function MS(e){const t=ft(e),n=t.getFullYear(),r=or(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=Qs(r),s=or(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=Qs(s);return t.getTime()>=o.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function ci(e){const t=ft(e);return t.setHours(0,0,0,0),t}function Mu(e){const t=ft(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Zr(e,t){const n=ci(e),r=ci(t),o=+n-Mu(n),s=+r-Mu(r);return Math.round((o-s)/p4)}function v4(e){const t=MS(e),n=or(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Qs(n)}function vm(e,t){const n=t*7;return Pn(e,n)}function x4(e,t){return Mr(e,t*12)}function y4(e){let t;return e.forEach(function(n){const r=ft(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function w4(e){let t;return e.forEach(n=>{const r=ft(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function Bn(e,t){const n=ci(e),r=ci(t);return+n==+r}function sg(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function b4(e){if(!sg(e)&&typeof e!="number")return!1;const t=ft(e);return!isNaN(Number(t))}function El(e,t){const n=ft(e),r=ft(t),o=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return o*12+s}function k4(e,t,n){const r=ao(e,n),o=ao(t,n),s=+r-Mu(r),i=+o-Mu(o);return Math.round((s-i)/og)}function ag(e){const t=ft(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function qn(e){const t=ft(e);return t.setDate(1),t.setHours(0,0,0,0),t}function LS(e){const t=ft(e),n=or(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function ig(e,t){var l,c,u,d;const n=Jl(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,o=ft(e),s=o.getDay(),i=(s<r?-7:0)+6-(s-r);return o.setDate(o.getDate()+i),o.setHours(23,59,59,999),o}function $S(e){return ig(e,{weekStartsOn:1})}const C4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},S4=(e,t,n)=>{let r;const o=C4[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function za(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const N4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},I4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},j4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},E4={date:za({formats:N4,defaultWidth:"full"}),time:za({formats:I4,defaultWidth:"full"}),dateTime:za({formats:j4,defaultWidth:"full"})},P4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},T4=(e,t,n,r)=>P4[e];function Qr(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):i;o=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;o=e.values[l]||e.values[i]}const s=e.argumentCallback?e.argumentCallback(t):t;return o[s]}}const R4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},O4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},D4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},A4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},M4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},L4=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},$4={ordinalNumber:L4,era:Qr({values:R4,defaultWidth:"wide"}),quarter:Qr({values:_4,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Qr({values:O4,defaultWidth:"wide"}),day:Qr({values:D4,defaultWidth:"wide"}),dayPeriod:Qr({values:A4,defaultWidth:"wide",formattingValues:M4,defaultFormattingWidth:"wide"})};function Xr(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(o);if(!s)return null;const i=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?F4(l,h=>h.test(i)):U4(l,h=>h.test(i));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(i.length);return{value:u,rest:d}}}function U4(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function F4(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function US(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],s=t.match(e.parsePattern);if(!s)return null;let i=e.valueCallback?e.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const l=t.slice(o.length);return{value:i,rest:l}}}const z4=/^(\d+)(th|st|nd|rd)?/i,B4=/\d+/i,W4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},H4={any:[/^b/i,/^(a|c)/i]},V4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},q4={any:[/1/i,/2/i,/3/i,/4/i]},G4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},K4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Y4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Q4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},X4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},J4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Z4={ordinalNumber:US({matchPattern:z4,parsePattern:B4,valueCallback:e=>parseInt(e,10)}),era:Xr({matchPatterns:W4,defaultMatchWidth:"wide",parsePatterns:H4,defaultParseWidth:"any"}),quarter:Xr({matchPatterns:V4,defaultMatchWidth:"wide",parsePatterns:q4,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Xr({matchPatterns:G4,defaultMatchWidth:"wide",parsePatterns:K4,defaultParseWidth:"any"}),day:Xr({matchPatterns:Y4,defaultMatchWidth:"wide",parsePatterns:Q4,defaultParseWidth:"any"}),dayPeriod:Xr({matchPatterns:X4,defaultMatchWidth:"any",parsePatterns:J4,defaultParseWidth:"any"})},FS={code:"en-US",formatDistance:S4,formatLong:E4,formatRelative:T4,localize:$4,match:Z4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function eL(e){const t=ft(e);return Zr(t,LS(t))+1}function zS(e){const t=ft(e),n=+Qs(t)-+v4(t);return Math.round(n/og)+1}function BS(e,t){var d,h,m,p;const n=ft(e),r=n.getFullYear(),o=Jl(),s=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??o.firstWeekContainsDate??((p=(m=o.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=or(e,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const l=ao(i,t),c=or(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=ao(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function tL(e,t){var l,c,u,d;const n=Jl(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,o=BS(e,t),s=or(e,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),ao(s,t)}function WS(e,t){const n=ft(e),r=+ao(n,t)-+tL(n,t);return Math.round(r/og)+1}function pt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ao={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return pt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):pt(n+1,2)},d(e,t){return pt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return pt(e.getHours()%12||12,t.length)},H(e,t){return pt(e.getHours(),t.length)},m(e,t){return pt(e.getMinutes(),t.length)},s(e,t){return pt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return pt(o,t.length)}},pa={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yy={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Ao.y(e,t)},Y:function(e,t,n,r){const o=BS(e,r),s=o>0?o:1-o;if(t==="YY"){const i=s%100;return pt(i,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):pt(s,t.length)},R:function(e,t){const n=MS(e);return pt(n,t.length)},u:function(e,t){const n=e.getFullYear();return pt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return pt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return pt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ao.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return pt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=WS(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):pt(o,t.length)},I:function(e,t,n){const r=zS(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):pt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ao.d(e,t)},D:function(e,t,n){const r=eL(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):pt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return pt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return pt(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return pt(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=pa.noon:r===0?o=pa.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=pa.evening:r>=12?o=pa.afternoon:r>=4?o=pa.morning:o=pa.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ao.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ao.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):pt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):pt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ao.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ao.s(e,t)},S:function(e,t){return Ao.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return by(r);case"XXXX":case"XX":return Ps(r);case"XXXXX":case"XXX":default:return Ps(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return by(r);case"xxxx":case"xx":return Ps(r);case"xxxxx":case"xxx":default:return Ps(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+wy(r,":");case"OOOO":default:return"GMT"+Ps(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+wy(r,":");case"zzzz":default:return"GMT"+Ps(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return pt(r,t.length)},T:function(e,t,n){const r=e.getTime();return pt(r,t.length)}};function wy(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+t+pt(s,2)}function by(e,t){return e%60===0?(e>0?"-":"+")+pt(Math.abs(e)/60,2):Ps(e,t)}function Ps(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=pt(Math.trunc(r/60),2),s=pt(r%60,2);return n+o+t+s}const ky=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},HS=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},nL=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return ky(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",ky(r,t)).replace("{{time}}",HS(o,t))},rL={p:HS,P:nL},oL=/^D+$/,sL=/^Y+$/,aL=["D","DD","YY","YYYY"];function iL(e){return oL.test(e)}function lL(e){return sL.test(e)}function cL(e,t,n){const r=uL(e,t,n);if(console.warn(r),aL.includes(e))throw new RangeError(r)}function uL(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hL=/^'([^]*?)'?$/,mL=/''/g,pL=/[a-zA-Z]/;function ca(e,t,n){var d,h,m,p,b,x,w,g;const r=Jl(),o=(n==null?void 0:n.locale)??r.locale??FS,s=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((x=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??r.weekStartsOn??((g=(w=r.locale)==null?void 0:w.options)==null?void 0:g.weekStartsOn)??0,l=ft(e);if(!b4(l))throw new RangeError("Invalid time value");let c=t.match(fL).map(v=>{const y=v[0];if(y==="p"||y==="P"){const k=rL[y];return k(v,o.formatLong)}return v}).join("").match(dL).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const y=v[0];if(y==="'")return{isToken:!1,value:gL(v)};if(yy[y])return{isToken:!0,value:v};if(y.match(pL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:v}});o.localize.preprocessor&&(c=o.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:i,locale:o};return c.map(v=>{if(!v.isToken)return v.value;const y=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&lL(y)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&iL(y))&&cL(y,t,String(e));const k=yy[y[0]];return k(l,y,o.localize,u)}).join("")}function gL(e){const t=e.match(hL);return t?t[1].replace(mL,"'"):e}function vL(e){const t=ft(e),n=t.getFullYear(),r=t.getMonth(),o=or(e,0);return o.setFullYear(n,r+1,0),o.setHours(0,0,0,0),o.getDate()}function xL(e){return Math.trunc(+ft(e)/1e3)}function yL(e){const t=ft(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function wL(e,t){return k4(yL(e),qn(e),t)+1}function xm(e,t){const n=ft(e),r=ft(t);return n.getTime()>r.getTime()}function VS(e,t){const n=ft(e),r=ft(t);return+n<+r}function lg(e,t){const n=ft(e),r=ft(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function bL(e,t){const n=ft(e),r=ft(t);return n.getFullYear()===r.getFullYear()}function Uf(e,t){return Pn(e,-t)}function Ff(e,t){const n=ft(e),r=n.getFullYear(),o=n.getDate(),s=or(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const i=vL(s);return n.setMonth(t,Math.min(o,i)),n}function Cy(e,t){const n=ft(e);return isNaN(+n)?or(e,NaN):(n.setFullYear(t),n)}const kL={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},CL=(e,t,n)=>{let r;const o=kL[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},SL={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},NL={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},IL={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jL={date:za({formats:SL,defaultWidth:"full"}),time:za({formats:NL,defaultWidth:"full"}),dateTime:za({formats:IL,defaultWidth:"full"})},EL={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},PL=(e,t,n,r)=>EL[e],TL={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},RL={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},_L={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},OL={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},DL={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},AL=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const o=["year","week","hour","minute","second"];let s;return n===1?s=r&&o.includes(r)?"re":"er":s="me",n+s},ML=["MMM","MMMM"],LL={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&ML.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:AL,era:Qr({values:TL,defaultWidth:"wide"}),quarter:Qr({values:RL,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Qr({values:_L,defaultWidth:"wide"}),day:Qr({values:OL,defaultWidth:"wide"}),dayPeriod:Qr({values:DL,defaultWidth:"wide"})},$L=/^(\d+)(ime|re|me|er|e)?/i,UL=/\d+/i,FL={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},zL={any:[/^av/i,/^ap/i]},BL={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},WL={any:[/1/i,/2/i,/3/i,/4/i]},HL={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},VL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},qL={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},GL={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},KL={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},YL={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},QL={ordinalNumber:US({matchPattern:$L,parsePattern:UL,valueCallback:e=>parseInt(e)}),era:Xr({matchPatterns:FL,defaultMatchWidth:"wide",parsePatterns:zL,defaultParseWidth:"any"}),quarter:Xr({matchPatterns:BL,defaultMatchWidth:"wide",parsePatterns:WL,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Xr({matchPatterns:HL,defaultMatchWidth:"wide",parsePatterns:VL,defaultParseWidth:"any"}),day:Xr({matchPatterns:qL,defaultMatchWidth:"wide",parsePatterns:GL,defaultParseWidth:"any"}),dayPeriod:Xr({matchPatterns:KL,defaultMatchWidth:"any",parsePatterns:YL,defaultParseWidth:"any"})},XL={code:"fr",formatDistance:CL,formatLong:jL,formatRelative:PL,localize:LL,match:QL,options:{weekStartsOn:1,firstWeekContainsDate:4}};var Le=function(){return Le=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Le.apply(this,arguments)};function JL(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function qS(e,t,n){for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Zl(e){return e.mode==="multiple"}function ec(e){return e.mode==="range"}function Od(e){return e.mode==="single"}var ZL={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function e3(e,t){return ca(e,"LLLL y",t)}function t3(e,t){return ca(e,"d",t)}function n3(e,t){return ca(e,"LLLL",t)}function r3(e){return"".concat(e)}function o3(e,t){return ca(e,"cccccc",t)}function s3(e,t){return ca(e,"yyyy",t)}var a3=Object.freeze({__proto__:null,formatCaption:e3,formatDay:t3,formatMonthCaption:n3,formatWeekNumber:r3,formatWeekdayName:o3,formatYearCaption:s3}),i3=function(e,t,n){return ca(e,"do MMMM (EEEE)",n)},l3=function(){return"Month: "},c3=function(){return"Go to next month"},u3=function(){return"Go to previous month"},d3=function(e,t){return ca(e,"cccc",t)},f3=function(e){return"Week n. ".concat(e)},h3=function(){return"Year: "},m3=Object.freeze({__proto__:null,labelDay:i3,labelMonthDropdown:l3,labelNext:c3,labelPrevious:u3,labelWeekNumber:f3,labelWeekday:d3,labelYearDropdown:h3});function p3(){var e="buttons",t=ZL,n=FS,r={},o={},s=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:a3,labels:m3,locale:n,modifiersClassNames:r,modifiers:o,numberOfMonths:s,styles:i,today:l,mode:"default"}}function g3(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,o=e.toMonth,s=e.fromDate,i=e.toDate;return r?s=qn(r):t&&(s=new Date(t,0,1)),o?i=ag(o):n&&(i=new Date(n,11,31)),{fromDate:s?ci(s):void 0,toDate:i?ci(i):void 0}}var GS=f.createContext(void 0);function v3(e){var t,n=e.initialProps,r=p3(),o=g3(n),s=o.fromDate,i=o.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!i)&&(l="buttons");var c;(Od(n)||Zl(n)||ec(n))&&(c=n.onSelect);var u=Le(Le(Le({},r),n),{captionLayout:l,classNames:Le(Le({},r.classNames),n.classNames),components:Le({},n.components),formatters:Le(Le({},r.formatters),n.formatters),fromDate:s,labels:Le(Le({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Le(Le({},r.modifiers),n.modifiers),modifiersClassNames:Le(Le({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Le(Le({},r.styles),n.styles),toDate:i});return a.jsx(GS.Provider,{value:u,children:e.children})}function Nt(){var e=f.useContext(GS);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function KS(e){var t=Nt(),n=t.locale,r=t.classNames,o=t.styles,s=t.formatters.formatCaption;return a.jsx("div",{className:r.caption_label,style:o.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function x3(e){return a.jsx("svg",Le({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function YS(e){var t,n,r=e.onChange,o=e.value,s=e.children,i=e.caption,l=e.className,c=e.style,u=Nt(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:x3;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),a.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:o,onChange:r,children:s}),a.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[i,a.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function y3(e){var t,n=Nt(),r=n.fromDate,o=n.toDate,s=n.styles,i=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return a.jsx(a.Fragment,{});if(!o)return a.jsx(a.Fragment,{});var h=[];if(bL(r,o))for(var m=qn(r),p=r.getMonth();p<=o.getMonth();p++)h.push(Ff(m,p));else for(var m=qn(new Date),p=0;p<=11;p++)h.push(Ff(m,p));var b=function(w){var g=Number(w.target.value),v=Ff(qn(e.displayMonth),g);e.onChange(v)},x=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:YS;return a.jsx(x,{name:"months","aria-label":d(),className:c.dropdown_month,style:s.dropdown_month,onChange:b,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:h.map(function(w){return a.jsx("option",{value:w.getMonth(),children:l(w,{locale:i})},w.getMonth())})})}function w3(e){var t,n=e.displayMonth,r=Nt(),o=r.fromDate,s=r.toDate,i=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,h=r.labels.labelYearDropdown,m=[];if(!o)return a.jsx(a.Fragment,{});if(!s)return a.jsx(a.Fragment,{});for(var p=o.getFullYear(),b=s.getFullYear(),x=p;x<=b;x++)m.push(Cy(LS(new Date),x));var w=function(v){var y=Cy(qn(n),Number(v.target.value));e.onChange(y)},g=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:YS;return a.jsx(g,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:w,value:n.getFullYear(),caption:d(n,{locale:i}),children:m.map(function(v){return a.jsx("option",{value:v.getFullYear(),children:d(v,{locale:i})},v.getFullYear())})})}function b3(e,t){var n=f.useState(e),r=n[0],o=n[1],s=t===void 0?r:t;return[s,o]}function k3(e){var t=e.month,n=e.defaultMonth,r=e.today,o=t||n||r||new Date,s=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&El(s,o)<0){var u=-1*(c-1);o=Mr(s,u)}return i&&El(o,i)<0&&(o=i),qn(o)}function C3(){var e=Nt(),t=k3(e),n=b3(t,e.month),r=n[0],o=n[1],s=function(i){var l;if(!e.disableNavigation){var c=qn(i);o(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function S3(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,o=qn(e),s=qn(Mr(o,r)),i=El(s,o),l=[],c=0;c<i;c++){var u=Mr(o,c);l.push(u)}return n&&(l=l.reverse()),l}function N3(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,o=t.numberOfMonths,s=o===void 0?1:o,i=r?s:1,l=qn(e);if(!n)return Mr(l,i);var c=El(n,e);if(!(c<s))return Mr(l,i)}}function I3(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,o=t.numberOfMonths,s=o===void 0?1:o,i=r?s:1,l=qn(e);if(!n)return Mr(l,-i);var c=El(l,n);if(!(c<=0))return Mr(l,-i)}}var QS=f.createContext(void 0);function j3(e){var t=Nt(),n=C3(),r=n[0],o=n[1],s=S3(r,t),i=N3(r,t),l=I3(r,t),c=function(h){return s.some(function(m){return lg(h,m)})},u=function(h,m){c(h)||(m&&VS(h,m)?o(Mr(h,1+t.numberOfMonths*-1)):o(h))},d={currentMonth:r,displayMonths:s,goToMonth:o,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return a.jsx(QS.Provider,{value:d,children:e.children})}function tc(){var e=f.useContext(QS);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Sy(e){var t,n=Nt(),r=n.classNames,o=n.styles,s=n.components,i=tc().goToMonth,l=function(d){i(Mr(d,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:KS,u=a.jsx(c,{id:e.id,displayMonth:e.displayMonth});return a.jsxs("div",{className:r.caption_dropdowns,style:o.caption_dropdowns,children:[a.jsx("div",{className:r.vhidden,children:u}),a.jsx(y3,{onChange:l,displayMonth:e.displayMonth}),a.jsx(w3,{onChange:l,displayMonth:e.displayMonth})]})}function E3(e){return a.jsx("svg",Le({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function P3(e){return a.jsx("svg",Le({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Lu=f.forwardRef(function(e,t){var n=Nt(),r=n.classNames,o=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var i=s.join(" "),l=Le(Le({},o.button_reset),o.button);return e.style&&Object.assign(l,e.style),a.jsx("button",Le({},e,{ref:t,type:"button",className:i,style:l}))});function T3(e){var t,n,r=Nt(),o=r.dir,s=r.locale,i=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,h=r.components;if(!e.nextMonth&&!e.previousMonth)return a.jsx(a.Fragment,{});var m=u(e.previousMonth,{locale:s}),p=[i.nav_button,i.nav_button_previous].join(" "),b=d(e.nextMonth,{locale:s}),x=[i.nav_button,i.nav_button_next].join(" "),w=(t=h==null?void 0:h.IconRight)!==null&&t!==void 0?t:P3,g=(n=h==null?void 0:h.IconLeft)!==null&&n!==void 0?n:E3;return a.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&a.jsx(Lu,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:o==="rtl"?a.jsx(w,{className:i.nav_icon,style:l.nav_icon}):a.jsx(g,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&a.jsx(Lu,{name:"next-month","aria-label":b,className:x,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:o==="rtl"?a.jsx(g,{className:i.nav_icon,style:l.nav_icon}):a.jsx(w,{className:i.nav_icon,style:l.nav_icon})})]})}function Ny(e){var t=Nt().numberOfMonths,n=tc(),r=n.previousMonth,o=n.nextMonth,s=n.goToMonth,i=n.displayMonths,l=i.findIndex(function(b){return lg(e.displayMonth,b)}),c=l===0,u=l===i.length-1,d=t>1&&(c||!u),h=t>1&&(u||!c),m=function(){r&&s(r)},p=function(){o&&s(o)};return a.jsx(T3,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:h,nextMonth:o,previousMonth:r,onPreviousClick:m,onNextClick:p})}function R3(e){var t,n=Nt(),r=n.classNames,o=n.disableNavigation,s=n.styles,i=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:KS,u;return o?u=a.jsx(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?u=a.jsx(Sy,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?u=a.jsxs(a.Fragment,{children:[a.jsx(Sy,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),a.jsx(Ny,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),a.jsx(Ny,{displayMonth:e.displayMonth,id:e.id})]}),a.jsx("div",{className:r.caption,style:s.caption,children:u})}function _3(e){var t=Nt(),n=t.footer,r=t.styles,o=t.classNames.tfoot;return n?a.jsx("tfoot",{className:o,style:r.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:n})})}):a.jsx(a.Fragment,{})}function O3(e,t,n){for(var r=n?Qs(new Date):ao(new Date,{locale:e,weekStartsOn:t}),o=[],s=0;s<7;s++){var i=Pn(r,s);o.push(i)}return o}function D3(){var e=Nt(),t=e.classNames,n=e.styles,r=e.showWeekNumber,o=e.locale,s=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=O3(o,s,i);return a.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&a.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,h){return a.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:o}),children:l(d,{locale:o})},h)})]})}function A3(){var e,t=Nt(),n=t.classNames,r=t.styles,o=t.components,s=(e=o==null?void 0:o.HeadRow)!==null&&e!==void 0?e:D3;return a.jsx("thead",{style:r.head,className:n.head,children:a.jsx(s,{})})}function M3(e){var t=Nt(),n=t.locale,r=t.formatters.formatDay;return a.jsx(a.Fragment,{children:r(e.date,{locale:n})})}var cg=f.createContext(void 0);function L3(e){if(!Zl(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return a.jsx(cg.Provider,{value:t,children:e.children})}return a.jsx($3,{initialProps:e.initialProps,children:e.children})}function $3(e){var t=e.initialProps,n=e.children,r=t.selected,o=t.min,s=t.max,i=function(u,d,h){var m,p;(m=t.onDayClick)===null||m===void 0||m.call(t,u,d,h);var b=!!(d.selected&&o&&(r==null?void 0:r.length)===o);if(!b){var x=!!(!d.selected&&s&&(r==null?void 0:r.length)===s);if(!x){var w=r?qS([],r):[];if(d.selected){var g=w.findIndex(function(v){return Bn(u,v)});w.splice(g,1)}else w.push(u);(p=t.onSelect)===null||p===void 0||p.call(t,w,u,d,h)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=s&&r.length>s-1,h=r.some(function(m){return Bn(m,u)});return!!(d&&!h)});var c={selected:r,onDayClick:i,modifiers:l};return a.jsx(cg.Provider,{value:c,children:n})}function ug(){var e=f.useContext(cg);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function U3(e,t){var n=t||{},r=n.from,o=n.to;return r&&o?Bn(o,e)&&Bn(r,e)?void 0:Bn(o,e)?{from:o,to:void 0}:Bn(r,e)?void 0:xm(r,e)?{from:e,to:o}:{from:r,to:e}:o?xm(e,o)?{from:o,to:e}:{from:e,to:o}:r?VS(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var dg=f.createContext(void 0);function F3(e){if(!ec(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(dg.Provider,{value:t,children:e.children})}return a.jsx(z3,{initialProps:e.initialProps,children:e.children})}function z3(e){var t=e.initialProps,n=e.children,r=t.selected,o=r||{},s=o.from,i=o.to,l=t.min,c=t.max,u=function(p,b,x){var w,g;(w=t.onDayClick)===null||w===void 0||w.call(t,p,b,x);var v=U3(p,r);(g=t.onSelect)===null||g===void 0||g.call(t,v,p,b,x)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],i?(d.range_end=[i],Bn(s,i)||(d.range_middle=[{after:s,before:i}])):d.range_end=[s]):i&&(d.range_start=[i],d.range_end=[i]),l&&(s&&!i&&d.disabled.push({after:Uf(s,l-1),before:Pn(s,l-1)}),s&&i&&d.disabled.push({after:s,before:Pn(s,l-1)}),!s&&i&&d.disabled.push({after:Uf(i,l-1),before:Pn(i,l-1)})),c){if(s&&!i&&(d.disabled.push({before:Pn(s,-c+1)}),d.disabled.push({after:Pn(s,c-1)})),s&&i){var h=Zr(i,s)+1,m=c-h;d.disabled.push({before:Uf(s,m)}),d.disabled.push({after:Pn(i,m)})}!s&&i&&(d.disabled.push({before:Pn(i,-c+1)}),d.disabled.push({after:Pn(i,c-1)}))}return a.jsx(dg.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function fg(){var e=f.useContext(dg);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function tu(e){return Array.isArray(e)?qS([],e):e!==void 0?[e]:[]}function B3(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],o=n[1];t[r]=tu(o)}),t}var Lr;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Lr||(Lr={}));var W3=Lr.Selected,fo=Lr.Disabled,H3=Lr.Hidden,V3=Lr.Today,zf=Lr.RangeEnd,Bf=Lr.RangeMiddle,Wf=Lr.RangeStart,q3=Lr.Outside;function G3(e,t,n){var r,o=(r={},r[W3]=tu(e.selected),r[fo]=tu(e.disabled),r[H3]=tu(e.hidden),r[V3]=[e.today],r[zf]=[],r[Bf]=[],r[Wf]=[],r[q3]=[],r);return e.fromDate&&o[fo].push({before:e.fromDate}),e.toDate&&o[fo].push({after:e.toDate}),Zl(e)?o[fo]=o[fo].concat(t.modifiers[fo]):ec(e)&&(o[fo]=o[fo].concat(n.modifiers[fo]),o[Wf]=n.modifiers[Wf],o[Bf]=n.modifiers[Bf],o[zf]=n.modifiers[zf]),o}var XS=f.createContext(void 0);function K3(e){var t=Nt(),n=ug(),r=fg(),o=G3(t,n,r),s=B3(t.modifiers),i=Le(Le({},o),s);return a.jsx(XS.Provider,{value:i,children:e.children})}function JS(){var e=f.useContext(XS);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Y3(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Q3(e){return!!(e&&typeof e=="object"&&"from"in e)}function X3(e){return!!(e&&typeof e=="object"&&"after"in e)}function J3(e){return!!(e&&typeof e=="object"&&"before"in e)}function Z3(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function e5(e,t){var n,r=t.from,o=t.to;if(r&&o){var s=Zr(o,r)<0;s&&(n=[o,r],r=n[0],o=n[1]);var i=Zr(e,r)>=0&&Zr(o,e)>=0;return i}return o?Bn(o,e):r?Bn(r,e):!1}function t5(e){return sg(e)}function n5(e){return Array.isArray(e)&&e.every(sg)}function r5(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(t5(n))return Bn(e,n);if(n5(n))return n.includes(e);if(Q3(n))return e5(e,n);if(Z3(n))return n.dayOfWeek.includes(e.getDay());if(Y3(n)){var r=Zr(n.before,e),o=Zr(n.after,e),s=r>0,i=o<0,l=xm(n.before,n.after);return l?i&&s:s||i}return X3(n)?Zr(e,n.after)>0:J3(n)?Zr(n.before,e)>0:typeof n=="function"?n(e):!1})}function hg(e,t,n){var r=Object.keys(t).reduce(function(s,i){var l=t[i];return r5(e,l)&&s.push(i),s},[]),o={};return r.forEach(function(s){return o[s]=!0}),n&&!lg(e,n)&&(o.outside=!0),o}function o5(e,t){for(var n=qn(e[0]),r=ag(e[e.length-1]),o,s,i=n;i<=r;){var l=hg(i,t),c=!l.disabled&&!l.hidden;if(!c){i=Pn(i,1);continue}if(l.selected)return i;l.today&&!s&&(s=i),o||(o=i),i=Pn(i,1)}return s||o}var s5=365;function ZS(e,t){var n=t.moveBy,r=t.direction,o=t.context,s=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=o.weekStartsOn,u=o.fromDate,d=o.toDate,h=o.locale,m={day:Pn,week:vm,month:Mr,year:x4,startOfWeek:function(w){return o.ISOWeek?Qs(w):ao(w,{locale:h,weekStartsOn:c})},endOfWeek:function(w){return o.ISOWeek?$S(w):ig(w,{locale:h,weekStartsOn:c})}},p=m[n](e,r==="after"?1:-1);r==="before"&&u?p=y4([u,p]):r==="after"&&d&&(p=w4([d,p]));var b=!0;if(s){var x=hg(p,s);b=!x.disabled&&!x.hidden}return b?p:l.count>s5?l.lastFocused:ZS(p,{moveBy:n,direction:r,context:o,modifiers:s,retry:Le(Le({},l),{count:l.count+1})})}var e1=f.createContext(void 0);function a5(e){var t=tc(),n=JS(),r=f.useState(),o=r[0],s=r[1],i=f.useState(),l=i[0],c=i[1],u=o5(t.displayMonths,n),d=o??(l&&t.isDateDisplayed(l))?l:u,h=function(){c(o),s(void 0)},m=function(w){s(w)},p=Nt(),b=function(w,g){if(o){var v=ZS(o,{moveBy:w,direction:g,context:p,modifiers:n});Bn(o,v)||(t.goToDate(v,o),m(v))}},x={focusedDay:o,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return b("day","after")},focusDayBefore:function(){return b("day","before")},focusWeekAfter:function(){return b("week","after")},focusWeekBefore:function(){return b("week","before")},focusMonthBefore:function(){return b("month","before")},focusMonthAfter:function(){return b("month","after")},focusYearBefore:function(){return b("year","before")},focusYearAfter:function(){return b("year","after")},focusStartOfWeek:function(){return b("startOfWeek","before")},focusEndOfWeek:function(){return b("endOfWeek","after")}};return a.jsx(e1.Provider,{value:x,children:e.children})}function mg(){var e=f.useContext(e1);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function i5(e,t){var n=JS(),r=hg(e,n,t);return r}var pg=f.createContext(void 0);function l5(e){if(!Od(e.initialProps)){var t={selected:void 0};return a.jsx(pg.Provider,{value:t,children:e.children})}return a.jsx(c5,{initialProps:e.initialProps,children:e.children})}function c5(e){var t=e.initialProps,n=e.children,r=function(s,i,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,i,l),i.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,s,i,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,s,s,i,l)},o={selected:t.selected,onDayClick:r};return a.jsx(pg.Provider,{value:o,children:n})}function t1(){var e=f.useContext(pg);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function u5(e,t){var n=Nt(),r=t1(),o=ug(),s=fg(),i=mg(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,d=i.focusWeekBefore,h=i.blur,m=i.focus,p=i.focusMonthBefore,b=i.focusMonthAfter,x=i.focusYearBefore,w=i.focusYearAfter,g=i.focusStartOfWeek,v=i.focusEndOfWeek,y=function(R){var T,O,H,q;Od(n)?(T=r.onDayClick)===null||T===void 0||T.call(r,e,t,R):Zl(n)?(O=o.onDayClick)===null||O===void 0||O.call(o,e,t,R):ec(n)?(H=s.onDayClick)===null||H===void 0||H.call(s,e,t,R):(q=n.onDayClick)===null||q===void 0||q.call(n,e,t,R)},k=function(R){var T;m(e),(T=n.onDayFocus)===null||T===void 0||T.call(n,e,t,R)},C=function(R){var T;h(),(T=n.onDayBlur)===null||T===void 0||T.call(n,e,t,R)},N=function(R){var T;(T=n.onDayMouseEnter)===null||T===void 0||T.call(n,e,t,R)},S=function(R){var T;(T=n.onDayMouseLeave)===null||T===void 0||T.call(n,e,t,R)},I=function(R){var T;(T=n.onDayPointerEnter)===null||T===void 0||T.call(n,e,t,R)},P=function(R){var T;(T=n.onDayPointerLeave)===null||T===void 0||T.call(n,e,t,R)},E=function(R){var T;(T=n.onDayTouchCancel)===null||T===void 0||T.call(n,e,t,R)},_=function(R){var T;(T=n.onDayTouchEnd)===null||T===void 0||T.call(n,e,t,R)},j=function(R){var T;(T=n.onDayTouchMove)===null||T===void 0||T.call(n,e,t,R)},L=function(R){var T;(T=n.onDayTouchStart)===null||T===void 0||T.call(n,e,t,R)},D=function(R){var T;(T=n.onDayKeyUp)===null||T===void 0||T.call(n,e,t,R)},z=function(R){var T;switch(R.key){case"ArrowLeft":R.preventDefault(),R.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":R.preventDefault(),R.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":R.preventDefault(),R.stopPropagation(),u();break;case"ArrowUp":R.preventDefault(),R.stopPropagation(),d();break;case"PageUp":R.preventDefault(),R.stopPropagation(),R.shiftKey?x():p();break;case"PageDown":R.preventDefault(),R.stopPropagation(),R.shiftKey?w():b();break;case"Home":R.preventDefault(),R.stopPropagation(),g();break;case"End":R.preventDefault(),R.stopPropagation(),v();break}(T=n.onDayKeyDown)===null||T===void 0||T.call(n,e,t,R)},A={onClick:y,onFocus:k,onBlur:C,onKeyDown:z,onKeyUp:D,onMouseEnter:N,onMouseLeave:S,onPointerEnter:I,onPointerLeave:P,onTouchCancel:E,onTouchEnd:_,onTouchMove:j,onTouchStart:L};return A}function d5(){var e=Nt(),t=t1(),n=ug(),r=fg(),o=Od(e)?t.selected:Zl(e)?n.selected:ec(e)?r.selected:void 0;return o}function f5(e){return Object.values(Lr).includes(e)}function h5(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var o=e.modifiersClassNames[r];if(o)n.push(o);else if(f5(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function m5(e,t){var n=Le({},e.styles.day);return Object.keys(t).forEach(function(r){var o;n=Le(Le({},n),(o=e.modifiersStyles)===null||o===void 0?void 0:o[r])}),n}function p5(e,t,n){var r,o,s,i=Nt(),l=mg(),c=i5(e,t),u=u5(e,c),d=d5(),h=!!(i.onDayClick||i.mode!=="default");f.useEffect(function(){var N;c.outside||l.focusedDay&&h&&Bn(l.focusedDay,e)&&((N=n.current)===null||N===void 0||N.focus())},[l.focusedDay,e,n,h,c.outside]);var m=h5(i,c).join(" "),p=m5(i,c),b=!!(c.outside&&!i.showOutsideDays||c.hidden),x=(s=(o=i.components)===null||o===void 0?void 0:o.DayContent)!==null&&s!==void 0?s:M3,w=a.jsx(x,{date:e,displayMonth:t,activeModifiers:c}),g={style:p,className:m,children:w,role:"gridcell"},v=l.focusTarget&&Bn(l.focusTarget,e)&&!c.outside,y=l.focusedDay&&Bn(l.focusedDay,e),k=Le(Le(Le({},g),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=y||v?0:-1,r)),u),C={isButton:h,isHidden:b,activeModifiers:c,selectedDays:d,buttonProps:k,divProps:g};return C}function g5(e){var t=f.useRef(null),n=p5(e.date,e.displayMonth,t);return n.isHidden?a.jsx("div",{role:"gridcell"}):n.isButton?a.jsx(Lu,Le({name:"day",ref:t},n.buttonProps)):a.jsx("div",Le({},n.divProps))}function v5(e){var t=e.number,n=e.dates,r=Nt(),o=r.onWeekNumberClick,s=r.styles,i=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!o)return a.jsx("span",{className:i.weeknumber,style:s.weeknumber,children:d});var h=c(Number(t),{locale:l}),m=function(p){o(t,n,p)};return a.jsx(Lu,{name:"week-number","aria-label":h,className:i.weeknumber,style:s.weeknumber,onClick:m,children:d})}function x5(e){var t,n,r=Nt(),o=r.styles,s=r.classNames,i=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:g5,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:v5,d;return i&&(d=a.jsx("td",{className:s.cell,style:o.cell,children:a.jsx(u,{number:e.weekNumber,dates:e.dates})})),a.jsxs("tr",{className:s.row,style:o.row,children:[d,e.dates.map(function(h){return a.jsx("td",{className:s.cell,style:o.cell,role:"presentation",children:a.jsx(c,{displayMonth:e.displayMonth,date:h})},xL(h))})]})}function Iy(e,t,n){for(var r=n!=null&&n.ISOWeek?$S(t):ig(t,n),o=n!=null&&n.ISOWeek?Qs(e):ao(e,n),s=Zr(r,o),i=[],l=0;l<=s;l++)i.push(Pn(o,l));var c=i.reduce(function(u,d){var h=n!=null&&n.ISOWeek?zS(d):WS(d,n),m=u.find(function(p){return p.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function y5(e,t){var n=Iy(qn(e),ag(e),t);if(t!=null&&t.useFixedWeeks){var r=wL(e,t);if(r<6){var o=n[n.length-1],s=o.dates[o.dates.length-1],i=vm(s,6-r),l=Iy(vm(s,1),i,t);n.push.apply(n,l)}}return n}function w5(e){var t,n,r,o=Nt(),s=o.locale,i=o.classNames,l=o.styles,c=o.hideHead,u=o.fixedWeeks,d=o.components,h=o.weekStartsOn,m=o.firstWeekContainsDate,p=o.ISOWeek,b=y5(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:s,weekStartsOn:h,firstWeekContainsDate:m}),x=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:A3,w=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:x5,g=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:_3;return a.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&a.jsx(x,{}),a.jsx("tbody",{className:i.tbody,style:l.tbody,children:b.map(function(v){return a.jsx(w,{displayMonth:e.displayMonth,dates:v.dates,weekNumber:v.weekNumber},v.weekNumber)})}),a.jsx(g,{displayMonth:e.displayMonth})]})}function b5(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var k5=b5()?f.useLayoutEffect:f.useEffect,Hf=!1,C5=0;function jy(){return"react-day-picker-".concat(++C5)}function S5(e){var t,n=e??(Hf?jy():null),r=f.useState(n),o=r[0],s=r[1];return k5(function(){o===null&&s(jy())},[]),f.useEffect(function(){Hf===!1&&(Hf=!0)},[]),(t=e??o)!==null&&t!==void 0?t:void 0}function N5(e){var t,n,r=Nt(),o=r.dir,s=r.classNames,i=r.styles,l=r.components,c=tc().displayMonths,u=S5(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,h=[s.month],m=i.month,p=e.displayIndex===0,b=e.displayIndex===c.length-1,x=!p&&!b;o==="rtl"&&(t=[p,b],b=t[0],p=t[1]),p&&(h.push(s.caption_start),m=Le(Le({},m),i.caption_start)),b&&(h.push(s.caption_end),m=Le(Le({},m),i.caption_end)),x&&(h.push(s.caption_between),m=Le(Le({},m),i.caption_between));var w=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:R3;return a.jsxs("div",{className:h.join(" "),style:m,children:[a.jsx(w,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),a.jsx(w5,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function I5(e){var t=Nt(),n=t.classNames,r=t.styles;return a.jsx("div",{className:n.months,style:r.months,children:e.children})}function j5(e){var t,n,r=e.initialProps,o=Nt(),s=mg(),i=tc(),l=f.useState(!1),c=l[0],u=l[1];f.useEffect(function(){o.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[o.initialFocus,c,s.focus,s.focusTarget,s]);var d=[o.classNames.root,o.className];o.numberOfMonths>1&&d.push(o.classNames.multiple_months),o.showWeekNumber&&d.push(o.classNames.with_weeknumber);var h=Le(Le({},o.styles.root),o.style),m=Object.keys(r).filter(function(b){return b.startsWith("data-")}).reduce(function(b,x){var w;return Le(Le({},b),(w={},w[x]=r[x],w))},{}),p=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:I5;return a.jsx("div",Le({className:d.join(" "),style:h,dir:o.dir,id:o.id,nonce:r.nonce,title:r.title,lang:r.lang},m,{children:a.jsx(p,{children:i.displayMonths.map(function(b,x){return a.jsx(N5,{displayIndex:x,displayMonth:b},x)})})}))}function E5(e){var t=e.children,n=JL(e,["children"]);return a.jsx(v3,{initialProps:n,children:a.jsx(j3,{children:a.jsx(l5,{initialProps:n,children:a.jsx(L3,{initialProps:n,children:a.jsx(F3,{initialProps:n,children:a.jsx(K3,{children:a.jsx(a5,{children:t})})})})})})})}function P5(e){return a.jsx(E5,Le({},e,{children:a.jsx(j5,{initialProps:e})}))}function ym({className:e,classNames:t,showOutsideDays:n=!0,...r}){return a.jsx(P5,{showOutsideDays:n,locale:XL,className:ke("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ke(gm({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ke(gm({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...o})=>a.jsx(Gb,{className:"h-4 w-4"}),IconRight:({...o})=>a.jsx(Zn,{className:"h-4 w-4"})},...r})}ym.displayName="Calendar";const Vf=!1,T5=!0,ho="https://checkeasy-57905.bubbleapps.io",mo="version-live",ot={isDevelopment:Vf,isProduction:T5,IS_DEV:Vf,API_BASE_URL:ho,BUBBLE_ENV:mo,PARCOURS_DATA_URL:`${ho}/${mo}/api/1.1/wf/endpointPiece`,UPLOAD_ENABLED:!0,IMAGE_UPLOAD_URL:`${ho}/${mo}/api/1.1/wf/createfileapi`,UPLOAD_TIMEOUT:parseInt("30000",10),UPLOAD_RETRY_ATTEMPTS:parseInt("3",10),WEBHOOK_UNIFIED_URL_INIT:`${ho}/${mo}/api/1.1/wf/checkendpoint/initialize`,WEBHOOK_UNIFIED_URL:`${ho}/${mo}/api/1.1/wf/checkendpoint`,WEBHOOK_CHECKIN_URL:`${ho}/${mo}/api/1.1/wf/checkinendpoint/initialize`,WEBHOOK_CHECKOUT_URL:`${ho}/${mo}/api/1.1/wf/checkoutendpoint/initialize`,CREATE_CHECK_INITIALIZE_URL:`${ho}/${mo}/api/1.1/wf/createcheck`,CHECK_RAPPORT_URL:`${ho}/${mo}/api/1.1/wf/checkrapport`,DEBUG_MODE:Vf,LOG_LEVEL:"error",CAMERA_IDEAL_WIDTH:parseInt("1920",10),CAMERA_IDEAL_HEIGHT:parseInt("1440",10),CAMERA_FACING_MODE:"environment",BLUR_DETECTION_ENABLED:!0,BLUR_THRESHOLD:parseInt("250",10),BLUR_ANALYSIS_STEP:parseInt("4",10),BLUR_EDGE_MARGIN:parseInt("50",10),BLUR_MIN_VARIANCE:parseInt("100",10),STORAGE_PREFIX:"checkeasy_",INDEXEDDB_NAME:"checkeasy_db",INDEXEDDB_VERSION:parseInt("2",10),SESSION_TIMEOUT:parseInt("3600000",10),SESSION_CLEANUP_INTERVAL:parseInt("300000",10)};class R5{constructor(){gn(this,"dbName",ot.INDEXEDDB_NAME);gn(this,"dbVersion",ot.INDEXEDDB_VERSION);gn(this,"storeName","checkSessions");gn(this,"db",null)}async resetDatabase(){try{this.db&&(this.db.close(),this.db=null),await new Promise((t,n)=>{const r=indexedDB.deleteDatabase(this.dbName);r.onsuccess=()=>{console.log(" Base de donnes supprime"),t()},r.onerror=()=>{console.error(" Erreur suppression DB:",r.error),n(r.error)},r.onblocked=()=>{console.warn(" Suppression DB bloque (connexions ouvertes)")}}),await this.initDB(),console.log(" Base de donnes rinitialise")}catch(t){throw console.error(" Erreur rinitialisation DB:",t),t}}async initDB(){if(this.db){if(this.db.objectStoreNames.contains(this.storeName))return this.db;console.warn(" Store manquant, rinitialisation de la DB..."),this.db.close(),this.db=null}return new Promise((t,n)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>{console.error(" Erreur ouverture IndexedDB:",r.error),n(r.error)},r.onsuccess=()=>{if(this.db=r.result,!this.db.objectStoreNames.contains(this.storeName)){console.error(" Store checkSessions manquant aprs ouverture!"),console.log(" Stores disponibles:",Array.from(this.db.objectStoreNames)),this.db.close(),this.db=null;const o=this.dbVersion+1;console.log(` Rouverture avec version ${o}...`);const s=indexedDB.open(this.dbName,o);s.onerror=()=>{console.error(" Erreur rouverture IndexedDB:",s.error),n(s.error)},s.onsuccess=()=>{this.db=s.result,console.log(" IndexedDB rinitialise avec succs"),t(this.db)},s.onupgradeneeded=i=>{const l=i.target.result;if(!l.objectStoreNames.contains(this.storeName)){const c=l.createObjectStore(this.storeName,{keyPath:"checkId"});c.createIndex("userId","userId",{unique:!1}),c.createIndex("parcoursId","parcoursId",{unique:!1}),c.createIndex("status","status",{unique:!1}),c.createIndex("createdAt","createdAt",{unique:!1}),console.log(" Store checkSessions cr (retry)")}};return}console.log(" IndexedDB initialise"),t(this.db)},r.onupgradeneeded=o=>{const s=o.target.result;if(!s.objectStoreNames.contains(this.storeName)){const i=s.createObjectStore(this.storeName,{keyPath:"checkId"});i.createIndex("userId","userId",{unique:!1}),i.createIndex("parcoursId","parcoursId",{unique:!1}),i.createIndex("status","status",{unique:!1}),i.createIndex("createdAt","createdAt",{unique:!1}),console.log(" Store checkSessions cr")}}})}async createCheckSession(t,n,r,o,s){const i=this.generateCheckId(),l=new Date().toISOString(),c={checkId:i,userId:t,parcoursId:n,flowType:r,status:"active",isFlowCompleted:!1,createdAt:l,lastActiveAt:l,userInfo:o,parcoursInfo:s,progress:{currentPieceId:"",currentTaskIndex:0,interactions:{}}};return await this.saveCheckSession(c),console.log(" Session cre:",i),c}async saveCheckSession(t,n=0){var r,o;try{const s=await this.initDB();if(!s.objectStoreNames.contains(this.storeName))throw new Error(`Store ${this.storeName} n'existe pas dans la DB`);const l=s.transaction([this.storeName],"readwrite").objectStore(this.storeName);t.lastActiveAt=new Date().toISOString(),await new Promise((c,u)=>{const d=l.put(t);d.onsuccess=()=>c(),d.onerror=()=>u(d.error)}),console.log(" Session sauvegarde:",t.checkId)}catch(s){console.error(" Erreur sauvegarde session:",s);const i=s;if(n===0&&((r=i==null?void 0:i.message)!=null&&r.includes("not found")||(o=i==null?void 0:i.message)!=null&&o.includes("n'existe pas")||(i==null?void 0:i.name)==="NotFoundError")){console.warn(" Store manquant, tentative de rinitialisation...");try{return await this.resetDatabase(),console.log(" Nouvelle tentative de sauvegarde..."),await this.saveCheckSession(t,n+1)}catch(l){console.error(" chec de la rinitialisation:",l)}}throw s}}async updateCheckSession(t,n){try{const r=await this.getCheckSession(t);if(!r)return console.error(" Session introuvable pour mise  jour:",t),!1;const o={...r,...n};return await this.saveCheckSession(o),console.log(" Session mise  jour:",t,n),!0}catch(r){return console.error(" Erreur mise  jour session:",r),!1}}async getCheckSession(t){try{const o=(await this.initDB()).transaction([this.storeName],"readonly").objectStore(this.storeName);return new Promise((s,i)=>{const l=o.get(t);l.onsuccess=()=>{const c=l.result;c?(console.log(" Session rcupre:",t),s(c)):(console.log(" Session non trouve:",t),s(null))},l.onerror=()=>{console.error(" Erreur rcupration session:",l.error),i(l.error)}})}catch(n){return console.error(" Erreur getCheckSession:",n),null}}async checkExistingSessions(t,n){try{const o=(await this.getUserSessions(t)).filter(l=>l.parcoursId===n),s=o.find(l=>l.status==="active"&&!l.isFlowCompleted),i=o.find(l=>l.isFlowCompleted);return{hasExistingSession:!!s,hasCompletedSession:!!i,session:s,completedSession:i}}catch(r){return console.error(" Erreur checkExistingSessions:",r),{hasExistingSession:!1,hasCompletedSession:!1}}}async getUserSessions(t){try{const s=(await this.initDB()).transaction([this.storeName],"readonly").objectStore(this.storeName).index("userId");return new Promise((i,l)=>{const c=s.getAll(t);c.onsuccess=()=>{const u=c.result;console.log(" Sessions utilisateur rcupres:",u.length),i(u)},c.onerror=()=>{console.error(" Erreur rcupration sessions utilisateur:",c.error),l(c.error)}})}catch(n){return console.error(" Erreur getUserSessions:",n),[]}}async updateSessionProgress(t,n){try{const r=await this.getCheckSession(t);if(!r){console.error(" Session non trouve pour mise  jour:",t);return}const o=r.progress.interactions||{},s=n.interactions||{},i={buttonClicks:{...o.buttonClicks||{},...s.buttonClicks||{}},photosTaken:{...o.photosTaken||{},...s.photosTaken||{}},checkboxStates:{...o.checkboxStates||{},...s.checkboxStates||{}},signalements:{...o.signalements||{},...s.signalements||{}},pieceStates:{...o.pieceStates||{},...s.pieceStates||{}},exitQuestions:{...o.exitQuestions||{},...s.exitQuestions||{}},navigation:s.navigation||o.navigation};r.progress={...r.progress,...n,interactions:i},await this.saveCheckSession(r),console.log(" Progression mise  jour:",t)}catch(r){throw console.error(" Erreur updateSessionProgress:",r),r}}async completeCheckSession(t){try{const n=await this.getCheckSession(t);if(!n){console.error(" Session non trouve:",t);return}n.status="completed",n.isFlowCompleted=!0,n.completedAt=new Date().toISOString(),await this.saveCheckSession(n),console.log(" Session complte:",t)}catch(n){throw console.error(" Erreur completeCheckSession:",n),n}}async terminateCheckSession(t,n){try{const r=await this.getCheckSession(t);if(!r){console.error(" Session non trouve:",t);return}r.status="terminated",r.isFlowCompleted=!0,r.terminatedAt=new Date().toISOString(),r.completedAt||(r.completedAt=new Date().toISOString(),console.log(" completedAt stock:",r.completedAt)),n&&(r.rapportID=n,console.log(" Rapport ID sauvegard:",n)),await this.saveCheckSession(r),console.log(" Session termine:",t)}catch(r){throw console.error(" Erreur terminateCheckSession:",r),r}}async deleteCheckSession(t){try{const o=(await this.initDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName);await new Promise((s,i)=>{const l=o.delete(t);l.onsuccess=()=>s(),l.onerror=()=>i(l.error)}),console.log(" Session supprime:",t)}catch(n){throw console.error(" Erreur deleteCheckSession:",n),n}}getStoredSessions(){try{return Object.keys(localStorage).filter(n=>n.startsWith("check_session_")).map(n=>{try{return JSON.parse(localStorage.getItem(n)||"{}")}catch{return null}}).filter(Boolean)}catch(t){return console.error(" Erreur getStoredSessions:",t),[]}}async getUserSessionsList(t){try{const n=await this.getUserSessions(t),r=n.filter(i=>i.status==="active"&&!i.isFlowCompleted),o=n.filter(i=>i.isFlowCompleted),s={};return n.forEach(i=>{s[i.parcoursId]||(s[i.parcoursId]=[]),s[i.parcoursId].push(i)}),{userId:t,sessions:n,activeSessions:r,completedSessions:o,hasAnySessions:n.length>0,totalCount:n.length,sessionsByParcours:s}}catch(n){return console.error(" Erreur getUserSessionsList:",n),{userId:t,sessions:[],activeSessions:[],completedSessions:[],hasAnySessions:!1,totalCount:0,sessionsByParcours:{}}}}generateCheckId(){return`check_${Date.now()}_${Math.random().toString(36).substring(2,11)}`}async migrateSession(t,n,r){try{console.log(" Migration de la session:",t);const o=await this.getCheckSession(t);if(!o)return console.warn(" Session introuvable pour migration:",t),!1;const s={...o,userInfo:n,parcoursInfo:r,lastActiveAt:new Date().toISOString()};return await this.saveCheckSession(s),console.log(" Session migre avec succs:",t),!0}catch(o){return console.error(" Erreur migration session:",o),!1}}async migrateAllUserSessions(t,n){try{console.log(" Migration de toutes les sessions de:",t);const r=await this.getUserSessions(t);let o=0;for(const s of r)if(!s.userInfo){const i=s.parcoursInfo||{name:"Parcours",type:s.flowType==="checkin"?"Voyageur":"Mnage"};await this.migrateSession(s.checkId,n,i)&&o++}return console.log(` ${o} sessions migres sur ${r.length}`),o}catch(r){return console.error(" Erreur migration sessions utilisateur:",r),0}}async clearAllSessions(){try{const r=(await this.initDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName);await new Promise((o,s)=>{const i=r.clear();i.onsuccess=()=>{console.log(" Toutes les sessions IndexedDB supprimes"),o()},i.onerror=()=>{console.error(" Erreur suppression sessions:",i.error),s(i.error)}})}catch(t){throw console.error(" Erreur clearAllSessions:",t),t}}}const Oe=new R5,Pr=Object.freeze(Object.defineProperty({__proto__:null,checkSessionManager:Oe},Symbol.toStringTag,{value:"Module"}));class _5{static adaptRealDataToExistingFormat(t,n){const r={},o=n||(t.parcoursType==="Mnage"?"checkout":"checkin");return console.log(" Mode dtermin:",{forceFlowType:n,parcoursType:t.parcoursType,finalFlowType:o}),console.log(" Ordre des pices reues de l'API:",t.piece.map((s,i)=>({index:i,nom:s.nom,pieceID:s.pieceID}))),t.piece.forEach((s,i)=>{const l=this.adaptPieceToRoom(s,i+1);l&&(r[l.id]=l)}),console.log(" IDs de pices gnrs:",Object.keys(r)),{roomsData:r,flowType:o}}static adaptPieceToRoom(t,n){const r=t.pieceID;console.log(` Pice "${t.nom}"  ID: "${r}"`,{travelerNote:t.travelerNote,cleanerNote:t.cleanerNote,infoEntrance:t.infoEntrance,hasTravelerNote:!!t.travelerNote,hasCleanerNote:!!t.cleanerNote,hasInfoEntrance:!!t.infoEntrance});const o=t.etapes.filter(u=>u.isTodo),s=t.etapes.filter(u=>!u.isTodo),i=this.createPhotoReferences(s,o),l=t.travelerNote||`Instructions de nettoyage pour ${this.cleanRoomName(t.nom)}`,c=t.infoEntrance||t.cleanerNote||`Informations pour ${this.cleanRoomName(t.nom)}`;return console.log(` Pice adapte "${t.nom}":`,{roomInfo:c.substring(0,50)+"...",cleaningInfo:l.substring(0,50)+"...",hasTravelerNote:!!t.travelerNote,hasCleanerNote:!!t.cleanerNote,hasInfoEntrance:!!t.infoEntrance}),{id:r,nom:this.cleanRoomName(t.nom),ordre:n,roomInfo:c,cleaningInfo:l,travelerNote:t.travelerNote,cleanerNote:t.cleanerNote,infoEntrance:t.infoEntrance,photoReferences:i}}static generateRoomId(t){const n=t.toLowerCase().replace(/[]/g,"").trim();return n.includes("chambre")?n.includes("1")||n.includes("domino")?"chambre-1":n.includes("2")||n.includes("tempo")?"chambre-2":n.includes("3")||n.includes("ratio")?"chambre-3":n.includes("4")||n.includes("ego")?"chambre-4":"chambre":n.includes("cuisine")?"cuisine":n.includes("salon")?"salon":n.includes("salle d'eau")||n.includes("salle d eau")?n.includes("chambres vertes")?"salle-eau-vertes":n.includes("domino")?"salle-eau-domino":n.includes("ego")?"salle-eau-ego":"salle-eau":n.includes("toilettes")?n.includes("rdc")?"toilettes-rdc":n.includes("etage")?"toilettes-etage":"toilettes":n.includes("ensemble du logement")?"ensemble-logement":n.includes("terrasse")?"terrasse":n.includes("buanderie")?"buanderie":n.includes("salle de reunion")?"salle-reunion":n.replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,30)||"piece"}static cleanRoomName(t){return t.replace(/[]\s*/g,"").trim()}static createPhotoReferences(t,n){const r={},o=t.filter(s=>s.image);if(o.length>0){const s=o.map((i,l)=>({tache_id:i.etapeID,etapeID:i.etapeID,url:i.image,expected_orientation:l%2===0?"paysage":"portrait",overlay_enabled:!0,isTodo:!1}));r.checkin=s,r.checkout=s}return r}static generateTasksFromRealData(t,n){const r=[],o=t.etapes.filter(i=>i.isTodo),s=t.etapes.filter(i=>!i.isTodo);if(console.log(` Pice ${t.nom}:`,{totalEtapes:t.etapes.length,todoEtapes:o.length,photoEtapes:s.length}),o.forEach((i,l)=>{const c=this.createTaskFromEtape(i,t.pieceID,l);c&&(r.push(c),console.log(` Tche todo cre (${n}):`,{id:c.id,label:c.label,type:c.type,isTodo:c.isTodo,piece_id:c.piece_id}))}),s.length>0){const i=this.createReferencePhotoTask(s,t.pieceID,r.length);i&&(r.push(i),console.log(` Tche photos de rfrence cre: ${s.length} images`))}return console.log(` Total tches cres pour ${t.nom} (mode ${n}):`,r.length),r}static createTaskFromEtape(t,n,r){const o=t.todoTitle||t.todoOrder;if(!o)return null;const s=t.etapeID;let i;t.todoParam==="photoRequired"?i=t.todoOrder:i=t.todoParam||t.todoOrder,console.log(" DataAdapter: tape TODO reue de l'API:",{title:o,todoTitle:t.todoTitle,todoOrder:t.todoOrder,todoParam:t.todoParam,todoImage:t.todoImage,instructions:i,etapeID:t.etapeID});const u=t.todoParam&&t.todoParam.trim()!==""&&(!!t.todoImage||t.todoParam==="photoRequired")?"photo_required":"checkbox",d=i==null?void 0:i.trim();let h;return t.todoImage&&(h={tache_id:t.etapeID,etapeID:t.etapeID,url:t.todoImage.startsWith("//")?"https:"+t.todoImage:t.todoImage,expected_orientation:"paysage",overlay_enabled:!0,isTodo:!0,todoTitle:o.trim()}),{id:s,etapeID:t.etapeID,piece_id:n,ordre:r+1,type:u,label:o.trim(),description:d,completed:!1,isTodo:!0,...h&&{photo_reference:h}}}static createReferencePhotoTask(t,n,r){var c;const o=t.filter(u=>u.image);if(o.length===0)return null;const s=((c=o[0])==null?void 0:c.etapeID)||`reference-photos-${n}`,i=o.map((u,d)=>{let h=u.image;return h.startsWith("//")&&(h="https:"+h),console.log(` Cration photo rfrence ${d+1}/${o.length}:`,{etapeID:u.etapeID,originalUrl:u.image,correctedUrl:h,hasImage:!!u.image}),{tache_id:u.etapeID,etapeID:u.etapeID,url:h,expected_orientation:d%2===0?"paysage":"portrait",overlay_enabled:!0}}),l={id:s,etapeID:s,piece_id:n,ordre:r+1,type:"reference_photos",label:` Photos de rfrence (${i.length})`,description:`Consultez les ${i.length} photo${i.length>1?"s":""} de rfrence pour cette pice`,completed:!1,total_photos_required:0,photos_done:0,photo_references:i};return console.log(" Tche photos de rfrence cre:",{id:l.id,etapeID:l.etapeID,type:l.type,photoCount:i.length,urls:i.map(u=>u.url)}),l}static createPhotoTaskFromEtapes(t,n,r,o){var h;const s=t.filter(m=>m.image);if(s.length===0)return null;const i=((h=s[0])==null?void 0:h.etapeID)||`photos-${n}`,l=s.map((m,p)=>{let b=m.image;return b.startsWith("//")&&(b="https:"+b),console.log(` Cration photo rfrence ${p+1}/${s.length}:`,{etapeID:m.etapeID,originalUrl:m.image,correctedUrl:b,hasImage:!!m.image}),{tache_id:m.etapeID,etapeID:m.etapeID,url:b,expected_orientation:p%2===0?"paysage":"portrait",overlay_enabled:!0}}),c=s.length===1?"photo_optional":"photo_multiple",u=r==="checkin"?" Photos d'tat d'entre":" Photos finales",d={id:i,etapeID:i,piece_id:n,ordre:o+1,type:c,label:u,description:`Prendre ${l.length} photo${l.length>1?"s":""} de rfrence`,completed:!1,total_photos_required:l.length,photos_done:0,photo_references:l};return console.log(" Tche photo cre:",{id:d.id,etapeID:d.etapeID,type:c,photoCount:l.length,urls:l.map(m=>m.url)}),d}static generateTaskId(t,n){return(t.todoTitle||t.todoOrder||`task-${n}`).toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").substring(0,30).replace(/-+$/,"")||`task-${n}`}static adaptSignalements(t,n){return!t.signalements||!Array.isArray(t.signalements)?(console.log(" Aucun signalement dans les donnes API"),[]):(console.log(" Adaptation des signalements:",t.signalements.length),t.signalements.map(r=>{const o=t.piece.find(h=>h.pieceID===r.pieceID),s=o?this.cleanRoomName(o.nom):"Pice inconnue",i=r.commentaire.length>50?r.commentaire.substring(0,50)+"...":r.commentaire,l=r.commentaireTraitement&&r.commentaireTraitement.trim()!==""?"RESOLU":"A_TRAITER",c=r.signalementID.match(/^(\d+)x/),u=c?parseInt(c[1]):Date.now(),d=new Date(u).toISOString();return{id:r.signalementID,roomId:r.pieceID,piece:s,etapeId:void 0,titre:i,commentaire:r.commentaire,imgUrl:r.photo,imgBase64:void 0,flowType:n,origine:"HISTORIQUE",status:l,priorite:!1,created_at:d,updated_at:d,parcoursId:t.parcourID,rapportRef:r.rapportRef}}))}static adaptCompleteData(t,n){var l,c;if(console.log(" Dbut adaptation complte des donnes:",{parcourID:t==null?void 0:t.parcourID,piecesCount:((l=t==null?void 0:t.piece)==null?void 0:l.length)||0,signalementsCount:((c=t==null?void 0:t.signalements)==null?void 0:c.length)||0}),!t)throw new Error("rawData est null ou undefined");if(!t.piece||!Array.isArray(t.piece))throw console.error(" Erreur: realData.piece n'est pas un tableau valide:",t.piece),new Error("Format de donnes invalide: piece n'est pas un tableau");const{roomsData:r,flowType:o}=this.adaptRealDataToExistingFormat(t,n),s=Object.keys(r).reduce((u,d)=>{const h=r[d],m=t.piece.find(p=>p.pieceID===d);if(m){const p=this.generateTasksFromRealData(m,o);u[d]={...h,tasks:p}}return u},{}),i=this.adaptSignalements(t,o);return console.log(" Signalements adapts:",i.length),{roomsData:s,flowType:o,parcoursInfo:{name:t.parcoursName,type:t.parcoursType,logement:t.logementName,takePicture:t.takePicture},apiSignalements:i}}}let O5=class{constructor(){gn(this,"currentParcours",null);gn(this,"listeners",new Set)}async loadParcours(t,n){console.log(" ParcoursManager: Chargement du parcours:",t);try{const r=`${ot.PARCOURS_DATA_URL}?parcours=${t}`;console.log(" URL API:",r);const o=await fetch(r);if(!o.ok)throw new Error(`Erreur API: ${o.status}`);const s=await o.json();return console.log(" Donnes brutes rcupres:",s),s.piece&&Array.isArray(s.piece)&&(console.log(" Nombre de pices dans rawData:",s.piece.length),s.piece.forEach((i,l)=>{console.log(` Pice ${l+1}/${s.piece.length} - "${i.nom}":`,{pieceID:i.pieceID,travelerNote:i.travelerNote||"(vide)",cleanerNote:i.cleanerNote||"(vide)",infoEntrance:i.infoEntrance||"(vide)",hasTravelerNote:!!i.travelerNote,hasCleanerNote:!!i.cleanerNote,hasInfoEntrance:!!i.infoEntrance})})),this.loadFromRawDataWithMode(s,n),this.currentParcours}catch(r){throw console.error(" Erreur chargement parcours:",r),r}}loadFromRawDataWithMode(t,n){console.log(" ParcoursManager: Adaptation des donnes avec mode:",n);try{const r=_5.adaptCompleteData(t,n);return this.currentParcours={id:t.parcourID||t._id,rawData:t,adaptedData:{...r,parcoursInfo:{id:t.parcourID||t._id,...r.parcoursInfo}},loadedAt:Date.now()},console.log(" Parcours charg:",{id:this.currentParcours.id,flowType:this.currentParcours.adaptedData.flowType,roomsCount:Object.keys(this.currentParcours.adaptedData.roomsData).length}),this.notifyListeners(),this.currentParcours}catch(r){throw console.error(" Erreur adaptation donnes:",r),r}}getCurrentParcours(){return this.currentParcours}getCurrentRooms(){return this.currentParcours?Object.values(this.currentParcours.adaptedData.roomsData):[]}getCurrentStats(){if(!this.currentParcours)return{totalRooms:0,totalTasks:0,totalPhotos:0,flowType:"checkin"};const t=this.getCurrentRooms(),n=t.reduce((o,s)=>o+s.tasks.length,0),r=t.reduce((o,s)=>o+s.tasks.filter(i=>i.type==="photo_required").length,0);return{totalRooms:t.length,totalTasks:n,totalPhotos:r,flowType:this.currentParcours.adaptedData.flowType}}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}notifyListeners(){this.listeners.forEach(t=>{try{t(this.currentParcours)}catch(n){console.error(" Erreur dans listener:",n)}})}clearParcours(){console.log(" ParcoursManager: Rinitialisation du parcours"),this.currentParcours=null,this.notifyListeners()}};const an=new O5,Ey=Object.freeze(Object.defineProperty({__proto__:null,parcoursManager:an},Symbol.toStringTag,{value:"Module"})),D5="CheckEasyCache",A5=2,In="parcours";class M5{constructor(){gn(this,"dbPromise",null)}async openDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((t,n)=>{const r=indexedDB.open(D5,A5);r.onerror=()=>{console.error(" Erreur ouverture IndexedDB:",r.error),n(r.error)},r.onsuccess=()=>{console.log(" IndexedDB ouverte"),t(r.result)},r.onupgradeneeded=o=>{const s=o.target.result;s.objectStoreNames.contains(In)||(s.createObjectStore(In,{keyPath:"id"}).createIndex("cachedAt","cachedAt",{unique:!1}),console.log(" Object store cr:",In))}}),this.dbPromise)}async saveParcours(t,n,r){try{const i=(await this.openDB()).transaction([In],"readwrite").objectStore(In),l={id:t,data:n,cachedAt:Date.now(),metadata:r};await new Promise((c,u)=>{const d=i.put(l);d.onsuccess=()=>{console.log(" Parcours sauvegard dans le cache:",t),c()},d.onerror=()=>{console.error(" Erreur sauvegarde cache:",d.error),u(d.error)}})}catch(o){throw console.error(" Erreur saveParcours:",o),o}}async getParcours(t){try{const o=(await this.openDB()).transaction([In],"readonly").objectStore(In);return new Promise((s,i)=>{const l=o.get(t);l.onsuccess=()=>{const c=l.result;c?(console.log(" Parcours trouv dans le cache:",t),s(c.data)):(console.log(" Parcours non trouv dans le cache:",t),s(null))},l.onerror=()=>{console.error(" Erreur lecture cache:",l.error),i(l.error)}})}catch(n){return console.error(" Erreur getParcours:",n),null}}async hasParcours(t){return await this.getParcours(t)!==null}async isCacheValid(t,n=24){try{const s=(await this.openDB()).transaction([In],"readonly").objectStore(In);return new Promise(i=>{const l=s.get(t);l.onsuccess=()=>{const c=l.result;if(!c){i(!1);return}const d=(Date.now()-c.cachedAt)/(1e3*60*60),h=d<n;console.log(` Cache ${h?"valide":"expir"}:`,{parcoursId:t,ageHours:d.toFixed(2),maxAgeHours:n}),i(h)},l.onerror=()=>{console.error(" Erreur vrification cache:",l.error),i(!1)}})}catch(r){return console.error(" Erreur isCacheValid:",r),!1}}async getParcoursMetadata(t){try{const o=(await this.openDB()).transaction([In],"readonly").objectStore(In);return new Promise(s=>{const i=o.get(t);i.onsuccess=()=>{const l=i.result;s((l==null?void 0:l.metadata)||null)},i.onerror=()=>{console.error(" Erreur lecture mtadonnes:",i.error),s(null)}})}catch(n){return console.error(" Erreur getParcoursMetadata:",n),null}}async removeParcours(t){try{const o=(await this.openDB()).transaction([In],"readwrite").objectStore(In);await new Promise((s,i)=>{const l=o.delete(t);l.onsuccess=()=>{console.log(" Parcours supprim du cache:",t),s()},l.onerror=()=>{console.error(" Erreur suppression cache:",l.error),i(l.error)}})}catch(n){throw console.error(" Erreur removeParcours:",n),n}}async clearCache(t){return this.removeParcours(t)}async clearAll(){try{const r=(await this.openDB()).transaction([In],"readwrite").objectStore(In);await new Promise((o,s)=>{const i=r.clear();i.onsuccess=()=>{console.log(" Cache vid compltement"),o()},i.onerror=()=>{console.error(" Erreur vidage cache:",i.error),s(i.error)}})}catch(t){throw console.error(" Erreur clearAll:",t),t}}async clearAllCache(){return this.clearAll()}}const bo=new M5,L5=Object.freeze(Object.defineProperty({__proto__:null,parcoursCache:bo},Symbol.toStringTag,{value:"Module"})),$5={maxAgeHours:24,revalidateAfterHours:20,enableBackgroundRevalidation:!0,strategy:"cache-first"};class U5{constructor(){gn(this,"loadingLocks",new Map);gn(this,"loadingStates",new Map);gn(this,"cacheStrategy",$5)}setCacheStrategy(t){this.cacheStrategy={...this.cacheStrategy,...t},console.log(" [DataLoadingOrchestrator] Stratgie de cache mise  jour:",this.cacheStrategy)}getCacheStrategy(){return{...this.cacheStrategy}}async loadSessionData(t){const n=`session_${t}`;if(this.loadingLocks.has(n))return console.log(` [DataLoadingOrchestrator] Chargement session ${t} dj en cours, attente...`),this.loadingLocks.get(n);const r=this._loadSessionDataInternal(t);this.loadingLocks.set(n,r),this.loadingStates.set(n,{isLoading:!0,promise:r});try{return await r}finally{this.loadingLocks.delete(n),this.loadingStates.set(n,{isLoading:!1,promise:null})}}async _loadSessionDataInternal(t){console.log(` [DataLoadingOrchestrator] Chargement session ${t}...`);try{const n=await Oe.getCheckSession(t);return n?console.log(` [DataLoadingOrchestrator] Session ${t} charge`,{status:n.status,flowType:n.flowType,isFlowCompleted:n.isFlowCompleted}):console.warn(` [DataLoadingOrchestrator] Session ${t} introuvable`),n}catch(n){throw console.error(` [DataLoadingOrchestrator] Erreur chargement session ${t}:`,n),n}}async loadParcoursData(t,n){const r=`parcours_${t}_${n||"default"}`;if(this.loadingLocks.has(r))return console.log(` [DataLoadingOrchestrator] Chargement parcours ${t} dj en cours, attente...`),this.loadingLocks.get(r);const o=this._loadParcoursDataInternal(t,n);this.loadingLocks.set(r,o),this.loadingStates.set(r,{isLoading:!0,promise:o});try{return await o}finally{this.loadingLocks.delete(r),this.loadingStates.set(r,{isLoading:!1,promise:null})}}async _loadParcoursDataInternal(t,n){console.log(` [DataLoadingOrchestrator] Chargement parcours ${t}...`);try{const r=this.cacheStrategy.strategy;if(console.log(` [DataLoadingOrchestrator] Stratgie: ${r}`),r==="network-only"){console.log(` [DataLoadingOrchestrator] Chargement parcours ${t} depuis l'API (network-only)...`);const i=await an.loadParcours(t,n);return console.log(` [DataLoadingOrchestrator] Parcours ${t} charg depuis l'API`),i}console.log(` [DataLoadingOrchestrator] Vrification cache pour parcours ${t}...`);const o=await bo.getParcours(t);console.log(" [DataLoadingOrchestrator] Donnes cache:",{hasCachedData:!!o,cachedDataType:typeof o,cachedDataKeys:o?Object.keys(o).slice(0,5):[]});const s=o&&await bo.isCacheValid(t,this.cacheStrategy.maxAgeHours);if(console.log(" [DataLoadingOrchestrator] Cache valide:",s),r==="cache-only"){if(s&&o)return console.log(` [DataLoadingOrchestrator] Parcours ${t} charg depuis le cache (cache-only)`),an.loadFromRawDataWithMode(o,n);throw new Error(`Cache non disponible pour parcours ${t} (cache-only mode)`)}if(r==="cache-first"&&s&&o){console.log(` [DataLoadingOrchestrator] Parcours ${t} charg depuis le cache`);const i=an.loadFromRawDataWithMode(o,n);return this.cacheStrategy.enableBackgroundRevalidation&&this._reloadParcoursInBackground(t,n),i}console.log(` [DataLoadingOrchestrator] Chargement parcours ${t} depuis l'API...`);try{const i=await an.loadParcours(t,n);return console.log(` [DataLoadingOrchestrator] Parcours ${t} charg depuis l'API`),i}catch(i){if(r==="network-first"&&o)return console.warn(" [DataLoadingOrchestrator] Erreur API, fallback sur cache:",i),an.loadFromRawDataWithMode(o,n);throw i}}catch(r){throw console.error(` [DataLoadingOrchestrator] Erreur chargement parcours ${t}:`,r),r}}_reloadParcoursInBackground(t,n){an.loadParcours(t,n).then(()=>{console.log(` [DataLoadingOrchestrator] Parcours ${t} recharg en arrire-plan`)}).catch(r=>{console.error(" [DataLoadingOrchestrator] Erreur rechargement arrire-plan:",r)})}async invalidateParcoursCache(t){console.log(` [DataLoadingOrchestrator] Invalidation cache parcours ${t}`),await bo.clearCache(t)}isLoading(t){const n=this.loadingStates.get(t);return(n==null?void 0:n.isLoading)||!1}isLoadingSession(t){return this.isLoading(`session_${t}`)}isLoadingParcours(t,n){return this.isLoading(`parcours_${t}_${n||"default"}`)}clearAllLocks(){console.log(" [DataLoadingOrchestrator] Nettoyage de tous les locks"),this.loadingLocks.clear(),this.loadingStates.clear()}getLoadingStates(){return new Map(this.loadingStates)}preloadParcours(t,n){console.log(` [DataLoadingOrchestrator] Prchargement parcours ${t}`),this.loadParcoursData(t,n).then(()=>{console.log(` [DataLoadingOrchestrator] Parcours ${t} prcharg`)}).catch(r=>{console.error(" [DataLoadingOrchestrator] Erreur prchargement:",r)})}async loadSessionAndParcours(t,n,r){console.log(" [DataLoadingOrchestrator] Chargement session + parcours...");const[o,s]=await Promise.all([this.loadSessionData(t),this.loadParcoursData(n,r)]);return console.log(" [DataLoadingOrchestrator] Session + parcours chargs"),{session:o,parcours:s}}clearCache(){console.log(" [DataLoadingOrchestrator] Nettoyage du cache");try{bo.clearAllCache(),this.clearAllLocks(),console.log(" Cache compltement vid")}catch(t){console.warn(" Erreur nettoyage cache:",t)}}}const Pl=new U5;class F5{static async cleanupAllData(){console.log(" [LogoutCleanupService] Dbut du nettoyage complet...");try{await this.cleanupLocalStorage(),await this.cleanupIndexedDB(),await this.cleanupSessionStorage(),await this.cleanupManagers(),console.log(" [LogoutCleanupService] Nettoyage complet termin")}catch(t){console.error(" [LogoutCleanupService] Erreur lors du nettoyage:",t)}}static async cleanupLocalStorage(){console.log(" [LogoutCleanupService] Nettoyage localStorage...");const t=localStorage.getItem("activeParcoursId"),n=["userInfo","activeCheckId","checkeasy_url_params","checkeasy_last_path","app-flow-state","checkout-flow-state","checkin-flow-state","unified-flow-state","parcours-cache","parcours-data",...Object.keys(localStorage).filter(r=>r.startsWith("uploaded_image_")),...Object.keys(localStorage).filter(r=>r.includes("temp")||r.includes("cache")||r.includes("session"))];n.forEach(r=>{try{localStorage.removeItem(r)}catch(o){console.warn(` Erreur suppression localStorage[${r}]:`,o)}}),t&&(localStorage.setItem("activeParcoursId",t),console.log(` activeParcoursId conserv: ${t}`)),console.log(` ${n.length} cls localStorage supprimes (activeParcoursId conserv)`)}static async cleanupSessionStorage(){console.log(" [LogoutCleanupService] Nettoyage sessionStorage...");try{sessionStorage.clear(),console.log(" sessionStorage vid")}catch(t){console.warn(" Erreur nettoyage sessionStorage:",t)}}static async cleanupIndexedDB(){console.log(" [LogoutCleanupService] Nettoyage IndexedDB...");try{await Oe.clearAllSessions(),console.log(" Toutes les sessions IndexedDB supprimes")}catch(t){console.warn(" Erreur nettoyage IndexedDB:",t)}}static async cleanupManagers(){console.log(" [LogoutCleanupService] Nettoyage des managers...");try{an.clearParcours(),console.log(" ParcoursManager rinitialis"),Pl.clearCache(),console.log(" DataLoadingOrchestrator rinitialis")}catch(t){console.warn(" Erreur nettoyage managers:",t)}}static async cleanup(){return this.cleanupAllData()}}const z5=F5,n1=f.createContext(void 0),cr=()=>{const e=f.useContext(n1);if(e===void 0)throw new Error("useUser must be used within a UserProvider");return e},B5=({children:e})=>{const[t,n]=f.useState(null);f.useEffect(()=>{const l=localStorage.getItem("userInfo");if(l)try{const c=JSON.parse(l);n(c)}catch(c){console.error("Erreur lors de la rcupration des informations utilisateur:",c),localStorage.removeItem("userInfo")}},[]);const r=l=>{n(l),localStorage.setItem("userInfo",JSON.stringify(l))},o=async()=>{await z5.cleanupAllData(),n(null),localStorage.removeItem("userInfo"),console.log(" Dconnexion complte avec nettoyage des donnes")},s=l=>{if(t){const c={...t,...l};n(c),localStorage.setItem("userInfo",JSON.stringify(c))}},i=!!t;return a.jsx(n1.Provider,{value:{user:t,isAuthenticated:i,login:r,logout:o,updateUser:s},children:e})},r1=f.createContext(void 0),W5=({children:e})=>{const[t,n]=f.useState(null),[r,o]=f.useState(!1),[s,i]=f.useState(null);f.useEffect(()=>{console.log(" GlobalParcoursContext: Abonnement au ParcoursManager");const v=an.subscribe(k=>{var C,N,S,I;console.log(" GlobalParcoursContext: Notification de changement:",{parcoursId:k==null?void 0:k.id,flowType:(C=k==null?void 0:k.adaptedData)==null?void 0:C.flowType,roomsCount:Object.keys(((N=k==null?void 0:k.adaptedData)==null?void 0:N.roomsData)||{}).length,firstRoom:Object.values(((S=k==null?void 0:k.adaptedData)==null?void 0:S.roomsData)||{})[0]?{nom:Object.values(k.adaptedData.roomsData)[0].nom,tasksCount:((I=Object.values(k.adaptedData.roomsData)[0].tasks)==null?void 0:I.length)||0}:null}),n(k)}),y=an.getCurrentParcours();return y&&n(y),()=>{console.log(" GlobalParcoursContext: Dsabonnement du ParcoursManager"),v()}},[]);const l=f.useCallback(async(v,y)=>{var k,C;console.log(" GlobalParcoursContext: Chargement du parcours:",v),o(!0),i(null);try{const N=new URLSearchParams(window.location.search).get("forceReload")==="true";if(N&&(console.log(" FORCE RELOAD activ - Suppression du cache"),await bo.clearCache(v)),await bo.isCacheValid(v,24)&&!N){console.log(" Utilisation du cache");const P=await bo.getParcours(v);if(P){console.log(" Donnes du cache:",{hasPiece:!!P.piece,pieceCount:((k=P.piece)==null?void 0:k.length)||0,firstPiece:(C=P.piece)!=null&&C[0]?{nom:P.piece[0].nom,hasTravelerNote:!!P.piece[0].travelerNote,hasCleanerNote:!!P.piece[0].cleanerNote}:null}),an.loadFromRawDataWithMode(P,y),o(!1);return}}console.log(" Chargement depuis l'API");const I=await an.loadParcours(v,y);await bo.saveParcours(v,I.rawData,{name:I.adaptedData.parcoursInfo.name,type:I.adaptedData.parcoursInfo.type,roomsCount:Object.keys(I.adaptedData.roomsData).length}),o(!1)}catch(N){console.error(" Erreur chargement parcours:",N),i(N instanceof Error?N.message:"Erreur inconnue"),o(!1)}},[]),c=f.useCallback(()=>{console.log(" GlobalParcoursContext: Rinitialisation du parcours"),an.clearParcours(),i(null)},[]),u=f.useCallback(()=>{t&&(console.log(" GlobalParcoursContext: Rafrachissement du parcours"),l(t.id,t.adaptedData.flowType))},[t,l]),d=f.useCallback(()=>{const v=an.getCurrentParcours();v&&(console.log(" GlobalParcoursContext: Forage du mode checkout"),an.loadFromRawDataWithMode(v.rawData,"checkout"))},[]),h=f.useCallback(()=>{const v=an.getCurrentParcours();v&&(console.log(" GlobalParcoursContext: Forage du mode checkin"),an.loadFromRawDataWithMode(v.rawData,"checkin"))},[]),m=f.useCallback(v=>t!=null&&t.adaptedData.apiSignalements?t.adaptedData.apiSignalements.filter(y=>y.roomId===v):[],[t]),p=(t==null?void 0:t.adaptedData.parcoursInfo)||null,b=t?Object.values(t.adaptedData.roomsData).sort((v,y)=>v.ordre-y.ordre):[];b.length>0&&console.log(" Ordre final des rooms aprs tri (CROISSANT):",b.map((v,y)=>({index:y,nom:v.nom,ordre:v.ordre,id:v.id,isPremiere:y===0?" PREMIRE":""})));const x=an.getCurrentStats(),w=(t==null?void 0:t.adaptedData.apiSignalements)||[],g={currentParcours:t,loading:r,error:s,parcoursInfo:p,rooms:b,stats:x,apiSignalements:w,loadParcours:l,clearParcours:c,refreshParcours:u,forceCheckoutMode:d,forceCheckinMode:h,getApiSignalementsByRoom:m};return a.jsx(r1.Provider,{value:g,children:e})},xs=()=>{const e=f.useContext(r1);if(!e)throw new Error("useGlobalParcours must be used within a GlobalParcoursProvider");return e},Sn=()=>{const{currentParcours:e,parcoursInfo:t,rooms:n,stats:r,apiSignalements:o,loading:s,error:i,forceCheckoutMode:l,forceCheckinMode:c,getApiSignalementsByRoom:u}=xs();return{currentParcours:e,info:t,rooms:n,stats:r,apiSignalements:o,isLoaded:!!e,loading:s,error:i,forceCheckoutMode:l,forceCheckinMode:c,getApiSignalementsByRoom:u}},H5=()=>{const{loadParcours:e,clearParcours:t,refreshParcours:n}=xs();return{loadParcours:e,clearParcours:t,refreshParcours:n}};class V5{getCorrectRouteForSession(t){var n;if(t.status==="terminated")return"/checkout-home";if(t.status==="completed"&&t.flowType==="checkin")return"/checkin-home";if(t.status==="active"){if(t.flowType==="checkin")return t.isFlowCompleted?"/checkin-home":"/checkin";if(t.flowType==="checkout"){const r=((n=t.parcoursInfo)==null?void 0:n.takePicture)==="checkInAndCheckOut",o=t.progress.etatInitialCompleted===!0;return r&&!o?(console.log(" NavigationStateManager: Redirection vers /etat-initial (tat initial non complt)"),"/etat-initial"):t.progress.exitQuestionsCompleted?"/checkout-home":t.isFlowCompleted?"/exit-questions":"/checkout"}}return console.warn(" tat de session non reconnu, redirection vers /welcome",t),"/welcome"}isRouteAllowed(t,n){if(["/welcome","/","/signalements-a-traiter","/signalements-historique"].includes(t))return!0;if(n.status==="terminated")return t==="/checkout-home";if(n.status==="completed"&&n.flowType==="checkin")return t==="/checkin-home";if(n.status==="active"){if(n.flowType==="checkin")return["/checkin","/checkin-home","/etat-initial"].includes(t);if(n.flowType==="checkout")return["/checkout","/checkout-home","/etat-initial","/exit-questions"].includes(t)}return!1}shouldRedirect(t,n){return!this.isRouteAllowed(t,n)}getRedirectTarget(t,n){return this.shouldRedirect(t,n)?this.getCorrectRouteForSession(n):null}buildUrl(t,n,r){const o=new URLSearchParams;return o.set("parcours",n),o.set("checkid",r),`${t}?${o.toString()}`}extractUrlParams(t){const n=typeof t=="string"?new URLSearchParams(t):t;return{parcoursId:n.get("parcours"),checkId:n.get("checkid")}}areUrlParamsValid(t,n){return!!(t&&n)}requiresUrlParams(t){return!["/welcome"].includes(t)}logNavigation(t,n){const r=new Date().toISOString();console.log(` [NavigationStateManager] ${r} - ${t}`,n||"")}isSessionInFinalState(t){return t.status==="terminated"||t.status==="cancelled"}isSessionModifiable(t){return t.status==="active"}getNextStep(t){if(t.status==="terminated")return"Session termine - Consulter le rapport";if(t.status==="completed"&&t.flowType==="checkin")return"Checkin termin - Dmarrer le checkout";if(t.status==="active"){if(t.flowType==="checkin")return t.isFlowCompleted?"Checkin termin - Voir le rcapitulatif":"Continuer le checkin";if(t.flowType==="checkout")return t.progress.exitQuestionsCompleted?"Checkout termin - Voir le rcapitulatif":t.isFlowCompleted?"Rpondre aux questions de sortie":"Continuer le checkout"}return"tat inconnu"}needsFlowTransition(t){return t.status==="completed"&&t.flowType==="checkin"}determineFlowTypeFromParcours(t){const n=t.toLowerCase();return n.includes("voyage")||n.includes("checkin")?"checkin":"checkout"}}const Pt=new V5,o1=f.createContext(void 0),Ns="activeCheckId",q5=({children:e})=>{const[t,n]=f.useState(()=>{try{const m=Pt.extractUrlParams(window.location.search),p=m.checkId,b=m.parcoursId;if(p)return console.log(" CheckID charg depuis URL:",p),localStorage.setItem(Ns,p),p;if(b)return console.log(" Nouveau parcours dtect (parcoursId sans checkId)"),console.log(" Ne PAS charger ancien checkId depuis localStorage"),localStorage.removeItem(Ns),null;const x=localStorage.getItem(Ns);return x?(console.log(" CheckID charg depuis localStorage (navigation interne):",x),x):(console.log(" Aucun CheckID trouv"),null)}catch(m){return console.error(" Erreur chargement CheckID:",m),null}}),r=t!==null,o=m=>{var p,b,x,w,g,v,y,k;return{checkId:m.checkId,userId:m.userId,userInfo:{firstName:((p=m.userInfo)==null?void 0:p.firstName)||"",lastName:((b=m.userInfo)==null?void 0:b.lastName)||"",phone:((x=m.userInfo)==null?void 0:x.phone)||m.userId,phoneIndex:(w=m.userInfo)==null?void 0:w.phoneIndex,type:((g=m.userInfo)==null?void 0:g.type)||"AGENT"},parcoursId:m.parcoursId,parcoursInfo:{id:m.parcoursId,name:((v=m.parcoursInfo)==null?void 0:v.name)||"",type:((y=m.parcoursInfo)==null?void 0:y.type)||"",logement:"",takePicture:((k=m.parcoursInfo)==null?void 0:k.takePicture)||""},flowType:m.flowType,status:m.status,isFlowCompleted:m.isFlowCompleted,createdAt:m.createdAt,lastActiveAt:m.lastActiveAt,completedAt:m.completedAt,progress:m.progress}},s=f.useCallback(async()=>{if(console.log(" Nettoyage de l'ancien CheckID:",t),t)try{await Oe.completeCheckSession(t),console.log(" Ancienne session marque comme complte:",t)}catch(b){console.error(" Erreur lors de la compltion de l'ancienne session:",b)}const m=Object.keys(localStorage).filter(b=>b.startsWith("uploaded_image_"));let p=0;m.forEach(b=>{try{localStorage.removeItem(b),p++}catch(x){console.error(" Erreur suppression photo localStorage:",b,x)}}),p>0&&console.log(` ${p} photos nettoyes de localStorage`),n(null),localStorage.removeItem(Ns),console.log(" CheckID nettoy, prt pour un nouveau parcours")},[t]),i=async(m,p,b,x,w)=>{try{const g=ot.CREATE_CHECK_INITIALIZE_URL,v={checkId:m,parcoursId:p,flowType:b,status:"active",createdAt:new Date().toISOString(),firstname:x.firstName,lastname:x.lastName,phone:x.phone,phoneIndex:x.phoneIndex,checkinDate:w.checkinDate||null,checkoutDate:w.checkoutDate||null,parcoursInfo:{name:w.name,type:w.type}};console.log(" ActiveCheckIdContext: Envoi cration check  Bubble:",{url:g,checkId:m,parcoursId:p,flowType:b,checkinDate:w.checkinDate,checkoutDate:w.checkoutDate});const y=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!y.ok){let C=`HTTP error! status: ${y.status}`;try{const N=await y.json();console.error(" ActiveCheckIdContext: Rponse d'erreur de Bubble:",N),C=`HTTP ${y.status}: ${JSON.stringify(N)}`}catch{const S=await y.text();console.error(" ActiveCheckIdContext: Rponse d'erreur (texte):",S),C=`HTTP ${y.status}: ${S}`}throw new Error(C)}const k=await y.json();console.log(" ActiveCheckIdContext: Cration check envoye  Bubble avec succs:",k)}catch(g){console.error(" ActiveCheckIdContext: Erreur lors de l'envoi de la cration du check  Bubble:",g)}},l=f.useCallback(async(m,p,b)=>{console.log(" Cration nouveau CheckID (IndexedDB):",{userInfo:m,parcoursInfo:p,flowType:b}),await s(),console.log(" Ancienne session nettoye, cration d'une nouvelle session");const x=m.phone;try{const g=(await Oe.createCheckSession(x,p.id,b,{firstName:m.firstName,lastName:m.lastName,phone:m.phone,phoneIndex:m.phoneIndex,type:m.type},{name:p.name,type:p.type,takePicture:p.takePicture})).checkId;return n(g),localStorage.setItem(Ns,g),console.log(" CheckID cr et activ (IndexedDB):",g),await i(g,p.id,b,m,p),g}catch(w){throw console.error(" Erreur cration CheckID:",w),w}},[s]),c=f.useCallback(async m=>{if(console.log(" Changement CheckID actif (IndexedDB):",m),n(m),m){localStorage.setItem(Ns,m);try{const p=await Oe.getCheckSession(m);p&&await Oe.saveCheckSession({...p,lastActiveAt:new Date().toISOString()})}catch(p){console.error(" Erreur mise  jour lastActiveAt:",p)}}else localStorage.removeItem(Ns)},[]),u=f.useCallback(async m=>{try{const p=await Oe.getCheckSession(m);return p?o(p):null}catch(p){return console.error(" Erreur rcupration session:",p),null}},[]),d=f.useCallback(async()=>{if(!t){console.warn(" Aucun CheckID actif  complter");return}console.log(" Compltion du CheckID (IndexedDB):",t);try{await Oe.completeCheckSession(t)}catch(m){console.error(" Erreur compltion CheckID:",m)}},[t]);f.useEffect(()=>{if(!t)return;const m=setInterval(async()=>{try{const p=await Oe.getCheckSession(t);p&&await Oe.saveCheckSession({...p,lastActiveAt:new Date().toISOString()})}catch(p){console.error(" Erreur mise  jour priodique lastActiveAt:",p)}},6e4);return()=>clearInterval(m)},[t]);const h={currentCheckId:t,isCheckIdActive:r,createNewCheckId:l,setActiveCheckId:c,getCheckSession:u,completeCheckId:d,clearCheckId:s};return a.jsx(o1.Provider,{value:h,children:e})},Kn=()=>{const e=f.useContext(o1);if(!e)throw new Error("useActiveCheckId must be used within an ActiveCheckIdProvider");return e};var Dd="Dialog",[s1]=kn(Dd),[G5,$r]=s1(Dd),a1=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=e,l=f.useRef(null),c=f.useRef(null),[u,d]=xr({prop:r,defaultProp:o??!1,onChange:s,caller:Dd});return a.jsx(G5,{scope:t,triggerRef:l,contentRef:c,contentId:tr(),titleId:tr(),descriptionId:tr(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(h=>!h),[d]),modal:i,children:n})};a1.displayName=Dd;var i1="DialogTrigger",l1=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=$r(i1,n),s=Be(t,o.triggerRef);return a.jsx(Se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":xg(o.open),...r,ref:s,onClick:he(e.onClick,o.onOpenToggle)})});l1.displayName=i1;var gg="DialogPortal",[K5,c1]=s1(gg,{forceMount:void 0}),u1=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,s=$r(gg,t);return a.jsx(K5,{scope:t,forceMount:n,children:f.Children.map(r,i=>a.jsx(tn,{present:n||s.open,children:a.jsx(gi,{asChild:!0,container:o,children:i})}))})};u1.displayName=gg;var $u="DialogOverlay",d1=f.forwardRef((e,t)=>{const n=c1($u,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=$r($u,e.__scopeDialog);return s.modal?a.jsx(tn,{present:r||s.open,children:a.jsx(Q5,{...o,ref:t})}):null});d1.displayName=$u;var Y5=cs("DialogOverlay.RemoveScroll"),Q5=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=$r($u,n);return a.jsx(Kl,{as:Y5,allowPinchZoom:!0,shards:[o.contentRef],children:a.jsx(Se.div,{"data-state":xg(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Xs="DialogContent",f1=f.forwardRef((e,t)=>{const n=c1(Xs,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=$r(Xs,e.__scopeDialog);return a.jsx(tn,{present:r||s.open,children:s.modal?a.jsx(X5,{...o,ref:t}):a.jsx(J5,{...o,ref:t})})});f1.displayName=Xs;var X5=f.forwardRef((e,t)=>{const n=$r(Xs,e.__scopeDialog),r=f.useRef(null),o=Be(t,n.contentRef,r);return f.useEffect(()=>{const s=r.current;if(s)return jd(s)},[]),a.jsx(h1,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:he(e.onPointerDownOutside,s=>{const i=s.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&s.preventDefault()}),onFocusOutside:he(e.onFocusOutside,s=>s.preventDefault())})}),J5=f.forwardRef((e,t)=>{const n=$r(Xs,e.__scopeDialog),r=f.useRef(!1),o=f.useRef(!1);return a.jsx(h1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),h1=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=e,l=$r(Xs,n),c=f.useRef(null),u=Be(t,c);return Nd(),a.jsxs(a.Fragment,{children:[a.jsx(ql,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:a.jsx(oa,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":xg(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(Z5,{titleId:l.titleId}),a.jsx(t$,{contentRef:c,descriptionId:l.descriptionId})]})]})}),vg="DialogTitle",m1=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=$r(vg,n);return a.jsx(Se.h2,{id:o.titleId,...r,ref:t})});m1.displayName=vg;var p1="DialogDescription",g1=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=$r(p1,n);return a.jsx(Se.p,{id:o.descriptionId,...r,ref:t})});g1.displayName=p1;var v1="DialogClose",x1=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=$r(v1,n);return a.jsx(Se.button,{type:"button",...r,ref:t,onClick:he(e.onClick,()=>o.onOpenChange(!1))})});x1.displayName=v1;function xg(e){return e?"open":"closed"}var y1="DialogTitleWarning",[j6,w1]=$P(y1,{contentName:Xs,titleName:vg,docsSlug:"dialog"}),Z5=({titleId:e})=>{const t=w1(y1),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},e$="DialogDescriptionWarning",t$=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${w1(e$).contentName}}.`;return f.useEffect(()=>{var s;const o=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},yg=a1,b1=l1,wg=u1,nc=d1,rc=f1,oc=m1,sc=g1,bg=x1;const Gn=yg,Js=b1,n$=wg,k1=f.forwardRef(({className:e,...t},n)=>a.jsx(nc,{ref:n,className:ke("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));k1.displayName=nc.displayName;const On=f.forwardRef(({className:e,children:t,hideCloseButton:n=!1,...r},o)=>a.jsxs(n$,{children:[a.jsx(k1,{}),a.jsxs(rc,{ref:o,className:ke("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,!n&&a.jsxs(bg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(no,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));On.displayName=rc.displayName;const sr=({className:e,...t})=>a.jsx("div",{className:ke("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});sr.displayName="DialogHeader";const ar=f.forwardRef(({className:e,...t},n)=>a.jsx(oc,{ref:n,className:ke("text-lg font-semibold leading-none tracking-tight",e),...t}));ar.displayName=oc.displayName;const kg=f.forwardRef(({className:e,...t},n)=>a.jsx(sc,{ref:n,className:ke("text-sm text-muted-foreground",e),...t}));kg.displayName=sc.displayName;const r$=ps("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function De({className:e,variant:t,...n}){return a.jsx("div",{className:ke(r$({variant:t}),e),...n})}function wm(e,[t,n]){return Math.min(n,Math.max(t,e))}function o$(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var Cg="ScrollArea",[C1]=kn(Cg),[s$,yr]=C1(Cg),S1=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...i}=e,[l,c]=f.useState(null),[u,d]=f.useState(null),[h,m]=f.useState(null),[p,b]=f.useState(null),[x,w]=f.useState(null),[g,v]=f.useState(0),[y,k]=f.useState(0),[C,N]=f.useState(!1),[S,I]=f.useState(!1),P=Be(t,_=>c(_)),E=bi(o);return a.jsx(s$,{scope:n,type:r,dir:E,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:b,scrollbarXEnabled:C,onScrollbarXEnabledChange:N,scrollbarY:x,onScrollbarYChange:w,scrollbarYEnabled:S,onScrollbarYEnabledChange:I,onCornerWidthChange:v,onCornerHeightChange:k,children:a.jsx(Se.div,{dir:E,...i,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});S1.displayName=Cg;var N1="ScrollAreaViewport",I1=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...s}=e,i=yr(N1,n),l=f.useRef(null),c=Be(t,l,i.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),a.jsx(Se.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});I1.displayName=N1;var lo="ScrollAreaScrollbar",Sg=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=yr(lo,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=o,l=e.orientation==="horizontal";return f.useEffect(()=>(l?s(!0):i(!0),()=>{l?s(!1):i(!1)}),[l,s,i]),o.type==="hover"?a.jsx(a$,{...r,ref:t,forceMount:n}):o.type==="scroll"?a.jsx(i$,{...r,ref:t,forceMount:n}):o.type==="auto"?a.jsx(j1,{...r,ref:t,forceMount:n}):o.type==="always"?a.jsx(Ng,{...r,ref:t}):null});Sg.displayName=lo;var a$=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=yr(lo,e.__scopeScrollArea),[s,i]=f.useState(!1);return f.useEffect(()=>{const l=o.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[o.scrollArea,o.scrollHideDelay]),a.jsx(tn,{present:n||s,children:a.jsx(j1,{"data-state":s?"visible":"hidden",...r,ref:t})})}),i$=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=yr(lo,e.__scopeScrollArea),s=e.orientation==="horizontal",i=Md(()=>c("SCROLL_END"),100),[l,c]=o$("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,o.scrollHideDelay,c]),f.useEffect(()=>{const u=o.viewport,d=s?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const p=u[d];h!==p&&(c("SCROLL"),i()),h=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[o.viewport,s,c,i]),a.jsx(tn,{present:n||l!=="hidden",children:a.jsx(Ng,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:he(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:he(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),j1=f.forwardRef((e,t)=>{const n=yr(lo,e.__scopeScrollArea),{forceMount:r,...o}=e,[s,i]=f.useState(!1),l=e.orientation==="horizontal",c=Md(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:d)}},10);return ui(n.viewport,c),ui(n.content,c),a.jsx(tn,{present:r||s,children:a.jsx(Ng,{"data-state":s?"visible":"hidden",...o,ref:t})})}),Ng=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=yr(lo,e.__scopeScrollArea),s=f.useRef(null),i=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=_1(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>s.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function h(m,p){return h$(m,i.current,l,p)}return n==="horizontal"?a.jsx(l$,{...d,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const m=o.viewport.scrollLeft,p=Py(m,l,o.dir);s.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{o.viewport&&(o.viewport.scrollLeft=m)},onDragScroll:m=>{o.viewport&&(o.viewport.scrollLeft=h(m,o.dir))}}):n==="vertical"?a.jsx(c$,{...d,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const m=o.viewport.scrollTop,p=Py(m,l);s.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{o.viewport&&(o.viewport.scrollTop=m)},onDragScroll:m=>{o.viewport&&(o.viewport.scrollTop=h(m))}}):null}),l$=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=yr(lo,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Be(t,c,s.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(P1,{"data-orientation":"horizontal",...o,ref:u,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ad(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(s.viewport){const m=s.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),D1(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&i&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Fu(i.paddingLeft),paddingEnd:Fu(i.paddingRight)}})}})}),c$=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=yr(lo,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Be(t,c,s.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(P1,{"data-orientation":"vertical",...o,ref:u,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ad(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(s.viewport){const m=s.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),D1(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&i&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Fu(i.paddingTop),paddingEnd:Fu(i.paddingBottom)}})}})}),[u$,E1]=C1(lo),P1=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=e,p=yr(lo,n),[b,x]=f.useState(null),w=Be(t,P=>x(P)),g=f.useRef(null),v=f.useRef(""),y=p.viewport,k=r.content-r.viewport,C=qt(d),N=qt(c),S=Md(h,10);function I(P){if(g.current){const E=P.clientX-g.current.left,_=P.clientY-g.current.top;u({x:E,y:_})}}return f.useEffect(()=>{const P=E=>{const _=E.target;(b==null?void 0:b.contains(_))&&C(E,k)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[y,b,k,C]),f.useEffect(N,[r,N]),ui(b,S),ui(p.content,S),a.jsx(u$,{scope:n,scrollbar:b,hasThumb:o,onThumbChange:qt(s),onThumbPointerUp:qt(i),onThumbPositionChange:N,onThumbPointerDown:qt(l),children:a.jsx(Se.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:he(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),g.current=b.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),I(P))}),onPointerMove:he(e.onPointerMove,I),onPointerUp:he(e.onPointerUp,P=>{const E=P.target;E.hasPointerCapture(P.pointerId)&&E.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),g.current=null})})})}),Uu="ScrollAreaThumb",T1=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=E1(Uu,e.__scopeScrollArea);return a.jsx(tn,{present:n||o.hasThumb,children:a.jsx(d$,{ref:t,...r})})}),d$=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,s=yr(Uu,n),i=E1(Uu,n),{onThumbPositionChange:l}=i,c=Be(t,h=>i.onThumbChange(h)),u=f.useRef(void 0),d=Md(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const h=s.viewport;if(h){const m=()=>{if(d(),!u.current){const p=m$(h,l);u.current=p,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[s.viewport,d,l]),a.jsx(Se.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:he(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),b=h.clientX-p.left,x=h.clientY-p.top;i.onThumbPointerDown({x:b,y:x})}),onPointerUp:he(e.onPointerUp,i.onThumbPointerUp)})});T1.displayName=Uu;var Ig="ScrollAreaCorner",R1=f.forwardRef((e,t)=>{const n=yr(Ig,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(f$,{...e,ref:t}):null});R1.displayName=Ig;var f$=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=yr(Ig,n),[s,i]=f.useState(0),[l,c]=f.useState(0),u=!!(s&&l);return ui(o.scrollbarX,()=>{var h;const d=((h=o.scrollbarX)==null?void 0:h.offsetHeight)||0;o.onCornerHeightChange(d),c(d)}),ui(o.scrollbarY,()=>{var h;const d=((h=o.scrollbarY)==null?void 0:h.offsetWidth)||0;o.onCornerWidthChange(d),i(d)}),u?a.jsx(Se.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Fu(e){return e?parseInt(e,10):0}function _1(e,t){const n=e/t;return isNaN(n)?0:n}function Ad(e){const t=_1(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function h$(e,t,n,r="ltr"){const o=Ad(n),s=o/2,i=t||s,l=o-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return O1([c,u],h)(e)}function Py(e,t,n="ltr"){const r=Ad(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-o,i=t.content-t.viewport,l=s-r,c=n==="ltr"?[0,i]:[i*-1,0],u=wm(e,c);return O1([0,i],[0,l])(u)}function O1(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function D1(e,t){return e>0&&e<t}var m$=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function o(){const s={left:e.scrollLeft,top:e.scrollTop},i=n.left!==s.left,l=n.top!==s.top;(i||l)&&t(),n=s,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function Md(e,t){const n=qt(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function ui(e,t){const n=qt(t);en(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}var A1=S1,p$=I1,g$=R1;const M1=f.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(A1,{ref:r,className:ke("relative overflow-hidden",e),...n,children:[a.jsx(p$,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(L1,{}),a.jsx(g$,{})]}));M1.displayName=A1.displayName;const L1=f.forwardRef(({className:e,orientation:t="vertical",...n},r)=>a.jsx(Sg,{ref:r,orientation:t,className:ke("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:a.jsx(T1,{className:"relative flex-1 rounded-full bg-border"})}));L1.displayName=Sg.displayName;function v$({isOpen:e,userSessionsList:t,userName:n,onResumeSession:r,onCreateNewSession:o,onClose:s}){const i=d=>{const h=new Date(d);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}).format(h)},l=d=>d.isFlowCompleted?a.jsx(De,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Complt"}):d.status==="active"?a.jsx(De,{variant:"default",className:"bg-blue-100 text-blue-800",children:"En cours"}):a.jsx(De,{variant:"outline",children:"Inactif"}),c=d=>d==="checkin"?a.jsx(De,{variant:"outline",className:"bg-purple-50 text-purple-700",children:"Check-in"}):a.jsx(De,{variant:"outline",className:"bg-orange-50 text-orange-700",children:"Check-out"}),u=()=>{if(t.activeSessions.length===0&&t.completedSessions.length===0)return"Nouveau mnage";const d=t.activeSessions[0]||t.completedSessions[0];return(d==null?void 0:d.flowType)==="checkin"?"Nouveau sjour":"Nouveau mnage"};return a.jsx(Gn,{open:e,onOpenChange:s,children:a.jsxs(On,{className:"w-full max-w-sm mx-auto p-4 sm:p-6 max-h-[90vh] flex flex-col",children:[a.jsxs(sr,{className:"space-y-2 mb-4",children:[a.jsx(ar,{className:"text-lg sm:text-xl",children:"Bienvenue "}),a.jsxs(kg,{className:"text-xs sm:text-sm",children:[t.activeSessions.length," session(s) en cours"]})]}),a.jsx(M1,{className:"flex-1 pr-4 mb-4",children:a.jsxs("div",{className:"space-y-2",children:[t.activeSessions.map(d=>a.jsxs("button",{onClick:()=>r(d),className:"w-full text-left p-3 rounded-lg border border-border bg-card hover:bg-accent transition-colors active:scale-95",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c(d.flowType),l(d)]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs text-muted-foreground",children:[" Cre: ",i(d.createdAt)]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[" Dernire activit: ",i(d.lastActiveAt)]})]})]},d.checkId)),t.completedSessions.length>0&&a.jsxs("div",{className:"pt-3 border-t border-border/50",children:[a.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-2 px-1",children:" Sessions compltes"}),t.completedSessions.map(d=>a.jsxs("button",{onClick:()=>r(d),className:"w-full text-left p-3 rounded-lg border border-border/50 bg-muted/30 hover:bg-muted/50 transition-colors active:scale-95 opacity-75",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c(d.flowType),l(d)]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs text-muted-foreground",children:[" Cre: ",i(d.createdAt)]}),d.completedAt&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:[" Complte: ",i(d.completedAt)]})]})]},d.checkId))]})]})}),a.jsxs("div",{className:"flex gap-2 pt-3 border-t border-border/50",children:[a.jsx(fe,{variant:"outline",onClick:s,className:"flex-1 h-10 text-sm",children:"Annuler"}),a.jsx(fe,{onClick:o,className:"flex-1 h-10 text-sm",children:u()})]})]})})}function ys(e){const[t,n]=f.useState(null),[r,o]=f.useState(!0),[s,i]=f.useState(null),l=async()=>{if(!e){n(null),o(!1);return}try{o(!0),i(null);const c=await Pl.loadSessionData(e);n(c)}catch(c){i(c instanceof Error?c.message:"Erreur de chargement"),n(null)}finally{o(!1)}};return f.useEffect(()=>{if(!e){n(null),o(!1);return}let c=!1;async function u(){try{o(!0),i(null);const d=await Pl.loadSessionData(e);c||n(d)}catch(d){c||(i(d instanceof Error?d.message:"Erreur de chargement"),n(null))}finally{c||o(!1)}}return u(),()=>{c=!0}},[e]),{session:t,loading:r,error:s,reload:l}}function ws(e,t){const[n,r]=f.useState(null),[o,s]=f.useState(!0),[i,l]=f.useState(null),c=async()=>{if(!e){r(null),s(!1);return}try{s(!0),l(null);const u=await Pl.loadParcoursData(e,t);r(u)}catch(u){l(u instanceof Error?u.message:"Erreur de chargement"),r(null)}finally{s(!1)}};return f.useEffect(()=>{if(!e){r(null),s(!1);return}let u=!1;async function d(){try{s(!0),l(null);const h=await Pl.loadParcoursData(e,t);u||r(h)}catch(h){u||(l(h instanceof Error?h.message:"Erreur de chargement"),r(null))}finally{u||s(!1)}}return d(),()=>{u=!0}},[e,t]),{parcours:n,loading:o,error:i,reload:c}}function bs(){const e=Cn(),t=Ot();return(n,r)=>{const o=new URLSearchParams(t.search),s=o.get("parcours"),i=o.get("checkid"),l=new URLSearchParams;s&&l.set("parcours",s),i&&l.set("checkid",i);const c=l.toString()?`${n}?${l.toString()}`:n;console.log(` [useNavigateWithParams] Navigation: ${t.pathname}  ${c}`),e(c,r)}}const Mo={FR:{code:"+33",flag:""},CH:{code:"+41",flag:""},BE:{code:"+32",flag:""},CA:{code:"+1",flag:""},ES:{code:"+34",flag:""},IT:{code:"+39",flag:""},PT:{code:"+351",flag:""},DE:{code:"+49",flag:""},GB:{code:"+44",flag:""},NL:{code:"+31",flag:""},US:{code:"+1",flag:""},HR:{code:"+385",flag:""},OTHER:{code:"+",flag:""}},$1=()=>{const[e,t]=f.useState(1),[n,r]=f.useState(""),[o,s]=f.useState("AGENT"),[i,l]=f.useState("FR"),[c,u]=f.useState(""),[d,h]=f.useState(0),[m,p]=f.useState(null),[b,x]=f.useState({firstName:"",lastName:"",phone:"",acceptTerms:!1}),[w,g]=f.useState(!1),[v,y]=f.useState(!1),[k,C]=f.useState(null),[N,S]=f.useState(null),[I,P]=f.useState(!1),[E,_]=f.useState({}),[j,L]=f.useState(!1),[D,z]=f.useState(!1),A=Cn(),R=Ot();bs();const{toast:T}=pi(),{login:O}=cr(),{createNewCheckId:H,setActiveCheckId:q,currentCheckId:Z}=Kn(),{loadParcours:G,loading:K,error:re}=H5(),{info:ie,rooms:Y,isLoaded:ne}=Sn(),xe=Pt.extractUrlParams(R.search),le=xe.parcoursId,se=xe.checkId,{session:pe,loading:ge}=ys(se);ws(le,void 0),f.useEffect(()=>{(async()=>{if(!se){console.log(" Welcome: Pas de checkID dans l'URL, parcours normal");return}if(ge){console.log(" Welcome: Chargement session en cours...");return}if(!pe){console.error(" Welcome: Session introuvable pour checkID:",se),T({title:"Session introuvable",description:"Impossible de reprendre ce parcours. Veuillez recommencer.",variant:"destructive"});return}if(console.log(" Welcome: Session trouve:",{checkId:pe.checkId,status:pe.status,flowType:pe.flowType,parcoursId:pe.parcoursId}),le&&pe.parcoursId!==le){console.error(" Welcome: ParcoursId mismatch!"),T({title:"Parcours incompatible",description:"Ce checkID appartient  un autre parcours.",variant:"destructive"}),localStorage.removeItem("activeCheckId");return}await q(se);const me=pe.userInfo||{firstName:"Utilisateur",lastName:"",phone:pe.userId,type:pe.flowType==="checkin"?"CLIENT":"AGENT"};O({firstName:me.firstName,lastName:me.lastName,phone:me.phone,phoneIndex:me.phoneIndex,connectedAt:new Date().toISOString(),type:me.type}),le&&!ne&&await G(le),await new Promise(Ue=>setTimeout(Ue,100));const Ie=Pt.getCorrectRouteForSession(pe);if(R.pathname==="/welcome"){const Ue=Pt.buildUrl(Ie,pe.parcoursId,pe.checkId);console.log(" Welcome: Redirection vers:",Ue),A(Ue,{replace:!0})}})()},[se,pe,ge,le,ne,R.pathname,q,O,G,A,T]),f.useEffect(()=>{!se&&le&&!ne&&G(le).catch(oe=>{console.error(" Welcome: Erreur chargement parcours:",oe)})},[se,le,ne,G]),f.useEffect(()=>{if(ie!=null&&ie.type){const oe=ie.type;console.log(" Welcome: Type de parcours dtect:",oe),oe==="Mnage"?(s("AGENT"),console.log(" Welcome: Type utilisateur pr-slectionn  AGENT (Mnage)")):oe==="Voyageur"&&(s("CLIENT"),console.log(" Welcome: Type utilisateur pr-slectionn  CLIENT (Voyageur)"))}},[ie==null?void 0:ie.type]),f.useEffect(()=>{const oe=localStorage.getItem("lastUserPhone"),me=localStorage.getItem("lastCountryCode");if(oe){const Ie=oe.replace(/^\+\d+\s?/,"");r(Ie),console.log(" Welcome: Numro de tlphone pr-rempli:",Ie)}me&&me in Mo&&(l(me),console.log(" Welcome: Indicatif pr-rempli:",me))},[]),f.useEffect(()=>{const oe=me=>{me.preventDefault(),S(me),P(!0),console.log(" PWA: Installation disponible")};return window.addEventListener("beforeinstallprompt",oe),window.matchMedia("(display-mode: standalone)").matches&&(console.log(" PWA: App dj installe"),P(!1)),()=>window.removeEventListener("beforeinstallprompt",oe)},[]);const We=async()=>{if(!N){T({title:"Installation non disponible",description:"L'installation PWA n'est pas supporte sur ce navigateur",variant:"destructive"});return}N.prompt();const{outcome:oe}=await N.userChoice;oe==="accepted"?(console.log(" PWA: Installation accepte"),T({title:"Installation russie !",description:"L'application a t ajoute  votre cran d'accueil"}),P(!1)):console.log(" PWA: Installation refuse"),S(null)},Xe=async(oe,me)=>{console.log(" Welcome: Vrification sessions pour:",{userId:oe,parcoursId:me});try{const Ie=await Oe.getUserSessionsList(oe);if(!Ie.hasAnySessions)return console.log(" Welcome: Aucune session trouve pour cet utilisateur"),!1;console.log(" Welcome: Total sessions utilisateur:",Ie.totalCount);let Ue=Ie.sessions;if(me&&(Ue=Ie.sessions.filter(Te=>Te.parcoursId===me),console.log(` Welcome: Sessions filtres pour parcoursId=${me}:`,Ue.length)),Ue.length===0)return console.log(" Welcome: Aucune session trouve pour ce logement"),!1;const Ct={userId:oe,sessions:Ue,activeSessions:Ue.filter(Te=>Te.status==="active"&&!Te.isFlowCompleted),completedSessions:Ue.filter(Te=>Te.isFlowCompleted),hasAnySessions:Ue.length>0,totalCount:Ue.length,sessionsByParcours:{[me||"unknown"]:Ue}};return console.log(" Welcome: Affichage sessions de CE logement uniquement:",{total:Ct.totalCount,active:Ct.activeSessions.length,completed:Ct.completedSessions.length}),C(Ct),y(!0),!0}catch(Ie){return console.error(" Welcome: Erreur vrification sessions:",Ie),!1}},Pe=ie?{type:ie.type,logement:ie.logement,totalPieces:Y.length,pieces:Y.map(oe=>oe.nom||"Pice inconnue")}:null,ze=()=>{try{const oe=localStorage.getItem("registeredUsers");return oe?JSON.parse(oe):{}}catch{return{}}},we=(oe,me)=>{const Ie=ze();Ie[oe]=me,localStorage.setItem("registeredUsers",JSON.stringify(Ie))},be=oe=>ze()[oe]||null,_e=(oe,me)=>{x(Ie=>({...Ie,[oe]:me}))},Ne=async oe=>{if(oe.preventDefault(),!n.trim()||n.length!==9){T({title:"Tlphone requis",description:"Veuillez saisir un numro  9 chiffres",variant:"destructive"});return}if(i==="OTHER"&&(!c.trim()||!c.startsWith("+"))){T({title:"Indicatif requis",description:"Veuillez saisir un indicatif valide (ex: +212)",variant:"destructive"});return}g(!0);try{await new Promise(Ct=>setTimeout(Ct,500));const Ie=`${i==="OTHER"?c:Mo[i].code}${n}`,Ue=be(Ie);if(Ue){if(p(Ue),le&&!D&&await Xe(Ie,le)){g(!1);return}}else x(Ct=>({...Ct,phone:Ie}));localStorage.setItem("lastUserPhone",Ie),localStorage.setItem("lastCountryCode",i),t(2)}catch{T({title:"Erreur",description:"Une erreur est survenue, veuillez ressayer",variant:"destructive"})}finally{g(!1)}},nt=async()=>{if(m){g(!0);try{await new Promise(Ie=>setTimeout(Ie,500));const me=`${i==="OTHER"?c:Mo[i].code}${n}`;if(le&&!D&&await Xe(me,le)){g(!1);return}await Ye()}catch{T({title:"Erreur",description:"Une erreur est survenue, veuillez ressayer",variant:"destructive"}),g(!1)}}},He=async oe=>{if(oe.preventDefault(),!b.firstName.trim()||!b.lastName.trim()){T({title:"Informations incompltes",description:"Veuillez remplir tous les champs",variant:"destructive"});return}g(!0);try{await new Promise(Ue=>setTimeout(Ue,800));const Ie=`${i==="OTHER"?c:Mo[i].code}${n}`;we(Ie,{firstName:b.firstName,lastName:b.lastName,registeredAt:new Date().toISOString()}),await Ye()}catch{T({title:"Erreur",description:"Une erreur est survenue, veuillez ressayer",variant:"destructive"}),g(!1)}},Ye=async()=>{var Ct,Te;const oe=m||{firstName:b.firstName,lastName:b.lastName},me=i==="OTHER"?c:Mo[i].code,Ie=`${me}${n}`;localStorage.setItem("lastUserPhone",Ie),console.log(" Welcome: Numro de tlphone sauvegard:",Ie);const Ue=le;if(console.log(" Welcome: ParcoursId effectif:",{fromUrl:le,effective:Ue}),!Ue||!ie){if(O({firstName:oe.firstName,lastName:oe.lastName,phone:Ie,phoneIndex:me,connectedAt:new Date().toISOString(),type:o}),await new Promise(Ge=>setTimeout(Ge,100)),Ue&&Z){const Ge=Pt.buildUrl("/",Ue,Z);console.log(" Welcome: Navigation reprise session avec params:",Ge),A(Ge)}else A("/");return}try{const Ge=o==="CLIENT"?"checkin":"checkout",it=await H({firstName:oe.firstName,lastName:oe.lastName,phone:Ie,phoneIndex:me,type:o},{id:Ue,name:ie.name,type:ie.type,logement:ie.logement,takePicture:ie.takePicture,checkinDate:((Ct=E.from)==null?void 0:Ct.toISOString())||null,checkoutDate:((Te=E.to)==null?void 0:Te.toISOString())||null},Ge);console.log(" Welcome: Nouvelle session CheckID cre et active:",it),O({firstName:oe.firstName,lastName:oe.lastName,phone:Ie,phoneIndex:me,connectedAt:new Date().toISOString(),type:o}),await new Promise(Nn=>setTimeout(Nn,100));const Qe=Pt.buildUrl("/",Ue,it);console.log(" Welcome: Navigation avec checkID dans URL:",Qe),A(Qe)}catch(Ge){throw console.error(" Welcome: Erreur cration session:",Ge),Ge}finally{g(!1)}},It=async()=>{if(y(!1),z(!0),o==="CLIENT"){if(_({}),L(!1),t(2),k&&k.activeSessions.length>0){const me=k.activeSessions[0];me.userInfo&&(p({firstName:me.userInfo.firstName,lastName:me.userInfo.lastName,registeredAt:me.createdAt}),console.log(" Welcome: Infos utilisateur rcupres depuis la session:",me.userInfo))}return}g(!0),h(0);const oe=setInterval(()=>{h(me=>me>=90?me:me+Math.random()*30)},300);try{await Ye(),h(100)}catch{T({title:"Erreur",description:"Impossible de crer une nouvelle session",variant:"destructive"}),g(!1),h(0)}finally{clearInterval(oe)}},xt=async oe=>{var me;y(!1),g(!0),console.log(" Welcome: Reprise session spcifique:",{checkId:oe.checkId,parcoursId:oe.parcoursId,flowType:oe.flowType,status:oe.status,hasUserInfo:!!oe.userInfo});try{await q(oe.checkId),console.log(" Welcome: CheckID activ:",oe.checkId);let Ie=oe.userInfo,Ue=!1;if(!Ie){console.log(" Welcome: userInfo manquant dans la session, rcupration depuis localStorage"),Ue=!0;const it=localStorage.getItem("userInfo");if(it){const Qe=JSON.parse(it);Ie={firstName:Qe.firstName,lastName:Qe.lastName,phone:Qe.phone,type:Qe.type},console.log(" Welcome: userInfo rcupr depuis localStorage")}else Ie={firstName:(m==null?void 0:m.firstName)||b.firstName||"Utilisateur",lastName:(m==null?void 0:m.lastName)||b.lastName||"",phone:n||oe.userId,type:o},console.log(" Welcome: userInfo cr depuis le formulaire actuel")}if(Ue&&Ie){const it=oe.parcoursInfo||{name:"Parcours",type:oe.flowType==="checkin"?"Voyageur":"Mnage"};await Oe.migrateSession(oe.checkId,Ie,it),console.log(" Welcome: Session migre avec userInfo et parcoursInfo")}O({firstName:Ie.firstName,lastName:Ie.lastName,phone:Ie.phone,phoneIndex:Ie.phoneIndex,connectedAt:new Date().toISOString(),type:Ie.type}),console.log(" Welcome: Utilisateur authentifi"),await G(oe.parcoursId),console.log(" Welcome: Parcours charg");const Ct=((me=oe.parcoursInfo)==null?void 0:me.name)||"Parcours";T({title:"Session reprise",description:`${Ct} - CheckID: ${oe.checkId.split("_")[1]}`});const Te=Pt.getCorrectRouteForSession(oe),Ge=Pt.buildUrl(Te,oe.parcoursId,oe.checkId);console.log(" Welcome: Navigation vers:",Ge),await new Promise(it=>setTimeout(it,100)),A(Ge,{replace:!0})}catch(Ie){console.error(" Erreur reprise session:",Ie),T({title:"Erreur",description:"Impossible de reprendre cette session",variant:"destructive"})}finally{g(!1)}},Dt=()=>{t(1),p(null),y(!1),C(null),x({firstName:"",lastName:"",phone:"",acceptTerms:!1})};return a.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[a.jsx("div",{className:"absolute top-3 left-3 sm:top-4 sm:left-4 z-10",children:a.jsx("img",{src:"/lovable-uploads/8c04ee7e-d5f8-4b65-aed9-e6094b5cc244.png",alt:"CheckEasy",className:"h-8 sm:h-10 w-auto"})}),I&&a.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 z-10",children:a.jsxs(fe,{onClick:We,variant:"outline",size:"sm",className:"flex items-center gap-2 shadow-md hover:shadow-lg transition-all bg-background/90 backdrop-blur-sm text-xs sm:text-sm",children:[a.jsx(Kb,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Installer l'app"})]})}),w&&d>0&&a.jsx("div",{className:"fixed top-0 left-0 right-0 z-50",children:a.jsx(SS,{value:Math.min(d,100),className:"h-1 rounded-none"})}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-4 py-6 pb-32",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-4 sm:space-y-6",children:[a.jsx("div",{className:"text-center space-y-2 sm:space-y-3",children:a.jsx("div",{children:e===1?a.jsxs(a.Fragment,{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Bienvenue !"}),K?a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),a.jsx("p",{className:"text-muted-foreground text-sm",children:"Chargement du parcours..."})]}):re?a.jsxs("div",{className:"mt-2 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[a.jsxs("p",{className:"text-destructive text-sm",children:[" ",re]}),!le&&a.jsx("p",{className:"text-muted-foreground text-xs mt-1",children:`Aucun paramtre "parcours" dans l'URL`})]}):ne&&Pe?a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(La,{className:"h-4 w-4 text-primary"}),a.jsxs("p",{className:"text-muted-foreground text-sm",children:[Pe.type,"  ",Pe.logement]})]}),a.jsx("div",{className:"flex items-center justify-center gap-4 text-xs text-muted-foreground",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(oo,{className:"h-3 w-3"}),a.jsxs("span",{children:[Pe.totalPieces," pices"]})]})})]}):le?a.jsxs("p",{className:"text-muted-foreground text-sm mt-1",children:["Parcours ID: ",le]}):a.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Parcours par dfaut"})]}):m?a.jsxs(a.Fragment,{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:["Bonjour ",m.firstName," !"]}),Pe&&a.jsx("div",{className:"mt-2",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(La,{className:"h-4 w-4 text-primary"}),a.jsxs("p",{className:"text-muted-foreground text-sm",children:[Pe.type,"  ",Pe.logement]})]})})]}):a.jsxs(a.Fragment,{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Bienvenue "}),Pe?a.jsx("div",{className:"mt-2",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(La,{className:"h-4 w-4 text-primary"}),a.jsxs("p",{className:"text-muted-foreground text-sm",children:[Pe.type,"  ",Pe.logement]})]})}):a.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Finalisons votre profil"})]})})}),a.jsx($e,{className:"p-4 sm:p-6 shadow-lg border-0 bg-card/80 backdrop-blur-sm",children:e===1?a.jsx("div",{className:"space-y-4 sm:space-y-5",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ts,{htmlFor:"phone",className:"text-xs sm:text-sm font-medium text-foreground",children:"Saisissez votre numro pour commencer"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex items-center gap-0.5 h-11 sm:h-12 px-2.5 sm:px-3 rounded-md border border-input bg-background w-fit",children:[a.jsx("select",{value:i,onChange:oe=>l(oe.target.value),className:"bg-transparent text-sm sm:text-base font-medium text-foreground focus:outline-none appearance-none cursor-pointer",children:Object.entries(Mo).map(([oe,{flag:me,code:Ie}])=>a.jsxs("option",{value:oe,children:[me," ",Ie]},oe))}),i==="OTHER"&&a.jsx("input",{type:"text",inputMode:"numeric",placeholder:"###",value:c.replace(/^\+/,""),onChange:oe=>{let me=oe.target.value.replace(/\D/g,"");me.length<=3&&u("+"+me)},maxLength:3,className:"w-10 sm:w-12 bg-transparent text-sm sm:text-base font-medium text-foreground focus:outline-none text-center"})]}),a.jsx("div",{className:"relative flex-1",children:a.jsx(el,{id:"phone",type:"tel",placeholder:"6 00 00 00 00",value:n.replace(/(\d)(\d{2})(\d{2})(\d{2})(\d{2})/,"$1 $2 $3 $4 $5").trim(),onChange:oe=>{const me=oe.target.value.replace(/\D/g,"");me.length<=9&&r(me)},maxLength:14,className:"bg-background/60 border-border/40 focus:border-primary text-sm"})})]})]})}):m?a.jsxs("div",{className:"space-y-5",children:[a.jsx("div",{className:"text-center p-4 bg-primary/5 rounded-lg border border-primary/10",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Numro: ",a.jsxs("span",{className:"font-medium text-foreground",children:[i==="OTHER"?c:Mo[i].code," ",n.replace(/(\d)(\d{2})(\d{2})(\d{2})(\d{2})/,"$1 $2 $3 $4 $5").trim()]})]})}),a.jsxs(fe,{onClick:Dt,variant:"ghost",className:"w-fit h-auto px-0 py-1 text-xs sm:text-sm text-secondary hover:text-secondary hover:bg-transparent",children:[a.jsx(xl,{className:"h-3 w-3 mr-1"}),"Ce n'est pas moi"]}),o==="CLIENT"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Ts,{className:"text-xs sm:text-sm font-medium text-foreground",children:["Dates du sjour",E.from&&E.to&&a.jsxs("span",{className:"ml-2 text-primary font-semibold",children:[E.from.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})," - ",E.to.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]}),a.jsxs(Du,{open:j,onOpenChange:oe=>{L(oe),oe&&_({})},children:[a.jsx(Au,{asChild:!0,children:a.jsxs(fe,{variant:"outline",className:"w-full justify-start text-left font-normal bg-background/60 border-border/40 hover:bg-background/80 hover:border-primary/50 h-11 sm:h-12",children:[a.jsx(kx,{className:"mr-2 h-4 w-4 text-muted-foreground"}),E.from&&E.to?a.jsxs("span",{className:"text-foreground",children:[E.from.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})," - ",E.to.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]}):a.jsx("span",{className:"text-muted-foreground",children:"Slectionner les dates de sjour"})]})}),a.jsx(jl,{className:"w-auto p-0",align:"start",children:a.jsx(ym,{initialFocus:!0,mode:"range",defaultMonth:E.from||new Date,selected:E,onSelect:oe=>{_(oe||{})},disabled:oe=>!1,numberOfMonths:1})})]})]})]}):a.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[a.jsx("div",{className:"text-center p-2.5 sm:p-3 bg-primary/5 rounded-lg border border-primary/10",children:a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Numro: ",a.jsxs("span",{className:"font-medium text-foreground text-xs sm:text-sm",children:[i==="OTHER"?c:Mo[i].code," ",n.replace(/(\d)(\d{2})(\d{2})(\d{2})(\d{2})/,"$1 $2 $3 $4 $5").trim()]})]})}),a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ts,{htmlFor:"firstName",className:"text-xs sm:text-sm font-medium text-foreground",children:"Prnom"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(el,{id:"firstName",type:"text",placeholder:"Votre prnom",value:b.firstName,onChange:oe=>_e("firstName",oe.target.value),className:"pl-10 bg-background/60 border-border/40 focus:border-primary text-sm"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ts,{htmlFor:"lastName",className:"text-xs sm:text-sm font-medium text-foreground",children:"Nom"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(el,{id:"lastName",type:"text",placeholder:"Votre nom de famille",value:b.lastName,onChange:oe=>_e("lastName",oe.target.value),className:"pl-10 bg-background/60 border-border/40 focus:border-primary text-sm"})]})]}),o==="CLIENT"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Ts,{className:"text-xs sm:text-sm font-medium text-foreground",children:["Dates du sjour",E.from&&E.to&&a.jsxs("span",{className:"ml-2 text-primary font-semibold",children:[E.from.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})," - ",E.to.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]}),a.jsxs(Du,{open:j,onOpenChange:oe=>{L(oe),oe&&_({})},children:[a.jsx(Au,{asChild:!0,children:a.jsxs(fe,{variant:"outline",className:"w-full justify-start text-left font-normal bg-background/60 border-border/40 hover:bg-background/80 hover:border-primary/50 h-11 sm:h-12",children:[a.jsx(kx,{className:"mr-2 h-4 w-4 text-muted-foreground"}),E.from&&E.to?a.jsxs("span",{className:"text-foreground",children:[E.from.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})," - ",E.to.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]}):a.jsx("span",{className:"text-muted-foreground",children:"Slectionner les dates de sjour"})]})}),a.jsx(jl,{className:"w-auto p-0",align:"start",children:a.jsx(ym,{initialFocus:!0,mode:"range",defaultMonth:E.from||new Date,selected:E,onSelect:oe=>{_(oe||{})},disabled:oe=>!1,numberOfMonths:1})})]})]})]}),a.jsxs(fe,{onClick:Dt,variant:"outline",className:"w-full h-10 border-secondary text-secondary hover:bg-secondary/5",children:[a.jsx(xl,{className:"h-4 w-4 mr-2"}),"Retour"]})]})})]})}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-3 sm:p-4 bg-gradient-to-t from-background via-background/95 to-transparent backdrop-blur-sm border-t border-border/20 pb-safe pb-6 sm:pb-8",children:a.jsx("div",{className:"w-full max-w-sm mx-auto",children:e===1?a.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[a.jsx(fe,{onClick:Ne,disabled:w||!n.trim()||K,className:"w-full h-12 sm:h-14 bg-primary hover:bg-primary/90 disabled:bg-muted disabled:text-muted-foreground disabled:opacity-70 text-primary-foreground font-medium text-sm sm:text-base shadow-lg hover:shadow-xl transition-all duration-200",children:K?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full animate-spin"}),a.jsx("span",{children:"Chargement du parcours..."})]}):w?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full animate-spin"}),a.jsx("span",{children:"Vrification..."})]}):"Continuer"}),a.jsxs("p",{className:"text-xs text-center text-muted-foreground px-2 leading-snug",children:["En continuant, vous acceptez les"," ",a.jsx("span",{className:"text-primary underline",children:"CGU"})," et la"," ",a.jsx("span",{className:"text-primary underline",children:"Politique de confidentialit"}),"."]})]}):m?a.jsx(fe,{onClick:nt,disabled:w||o==="CLIENT"&&(!E.from||!E.to),className:"w-full h-12 sm:h-14 bg-primary hover:bg-primary/90 text-primary-foreground font-medium text-sm sm:text-base shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:w?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full animate-spin"}),a.jsx("span",{children:"Connexion..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(dn,{className:"h-5 w-5 mr-2"}),"Me connecter"]})}):a.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[a.jsx(fe,{onClick:He,disabled:w||!b.firstName.trim()||!b.lastName.trim()||o==="CLIENT"&&(!E.from||!E.to),className:"w-full h-12 sm:h-14 bg-primary hover:bg-primary/90 disabled:bg-muted disabled:text-muted-foreground disabled:opacity-70 text-primary-foreground font-medium text-sm sm:text-base shadow-lg hover:shadow-xl transition-all duration-200",children:w?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full animate-spin"}),a.jsx("span",{children:"Cration..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(dn,{className:"h-5 w-5 mr-2"}),"C'est parti !"]})}),a.jsxs("p",{className:"text-xs text-center text-muted-foreground px-2",children:["En continuant, vous acceptez les"," ",a.jsx("span",{className:"text-primary underline",children:"CGU"})," et la"," ",a.jsx("span",{className:"text-primary underline",children:"Politique de confidentialit"}),"."]})]})})}),k&&a.jsx(v$,{isOpen:v,userSessionsList:k,userName:(m==null?void 0:m.firstName)||b.firstName||"Utilisateur",onResumeSession:xt,onCreateNewSession:It,onClose:()=>{y(!1),z(!1)}})]})},jg=({propertyData:e})=>{const[t,n]=f.useState(!1),[r,o]=f.useState(!1),s=c=>e.visibleSections.includes(c),i=async()=>{try{await navigator.clipboard.writeText(e.wifi.password),n(!0),ht.success("Mot de passe WiFi copi !"),setTimeout(()=>{n(!1)},2e3)}catch{ht.error("Erreur lors de la copie")}},l=async()=>{try{await navigator.clipboard.writeText(e.address),o(!0),ht.success("Adresse copie !"),setTimeout(()=>{o(!1)},2e3)}catch{ht.error("Erreur lors de la copie")}};return a.jsxs("div",{className:"space-y-4",children:[s("adresse")&&a.jsxs($e,{children:[a.jsx(Lt,{className:"pb-3",children:a.jsxs($t,{className:"text-lg flex items-center gap-2",children:[a.jsx(La,{className:"h-5 w-5 text-primary"}),"Adresse"]})}),a.jsx(tt,{children:a.jsxs("div",{className:"flex justify-between items-center gap-2",children:[a.jsx("span",{className:"text-foreground text-sm flex-1",children:e.address}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:l,className:"h-8 w-8 p-0 hover:bg-muted flex-shrink-0",children:r?a.jsx(Fn,{className:"h-4 w-4 text-green-600"}):a.jsx(em,{className:"h-4 w-4"})})]})})]}),s("wifi")&&a.jsxs($e,{children:[a.jsx(Lt,{className:"pb-3",children:a.jsxs($t,{className:"text-lg flex items-center gap-2",children:[a.jsx(hd,{className:"h-5 w-5 text-primary"}),"Accs WiFi"]})}),a.jsxs(tt,{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Rseau :"}),a.jsx(De,{variant:"outline",children:e.wifi.network})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Mot de passe :"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"bg-muted px-2 py-1 rounded text-sm",children:e.wifi.password}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:i,className:"h-6 w-6 p-0 hover:bg-muted",children:t?a.jsx(Fn,{className:"h-3 w-3 text-green-600"}):a.jsx(em,{className:"h-3 w-3"})})]})]})]})]}),s("parking")&&a.jsxs($e,{children:[a.jsx(Lt,{className:"pb-3",children:a.jsxs($t,{className:"text-lg flex items-center gap-2",children:[a.jsx(dd,{className:"h-5 w-5 text-primary"}),"Se garer"]})}),a.jsx(tt,{children:a.jsx("p",{className:"text-foreground",children:e.parking})})]}),s("access")&&a.jsxs($e,{children:[a.jsx(Lt,{className:"pb-3",children:a.jsxs($t,{className:"text-lg flex items-center gap-2",children:[a.jsx(Op,{className:"h-5 w-5 text-primary"}),"Comment rentrer"]})}),a.jsx(tt,{children:a.jsx("p",{className:"text-foreground",children:e.access})})]}),s("airbnb")&&a.jsxs($e,{children:[a.jsx(Lt,{className:"pb-3",children:a.jsxs($t,{className:"text-lg flex items-center gap-2",children:[a.jsx(Yb,{className:"h-5 w-5 text-primary"}),"Lien Airbnb"]})}),a.jsx(tt,{children:a.jsx("a",{href:e.airbnbLink,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline break-all",children:"Voir l'annonce Airbnb"})})]}),s("checkin-checkout")&&a.jsxs($e,{children:[a.jsx(Lt,{className:"pb-3",children:a.jsxs($t,{className:"text-lg flex items-center gap-2",children:[a.jsx(sa,{className:"h-5 w-5 text-primary"}),"Horaires"]})}),a.jsxs(tt,{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Check-in :"}),a.jsx(De,{variant:"outline",children:e.checkIn})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Check-out :"}),a.jsx(De,{variant:"outline",children:e.checkOut})]})]})]})]})};var x$="Separator",Ty="horizontal",y$=["horizontal","vertical"],U1=f.forwardRef((e,t)=>{const{decorative:n,orientation:r=Ty,...o}=e,s=w$(r)?r:Ty,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return a.jsx(Se.div,{"data-orientation":s,...l,...o,ref:t})});U1.displayName=x$;function w$(e){return y$.includes(e)}var F1=U1;const Eg=f.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>a.jsx(F1,{ref:o,decorative:n,orientation:t,className:ke("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Eg.displayName=F1.displayName;const b$=({report:e,onDownloadReport:t})=>{if(e.status==="generating")return a.jsx($e,{children:a.jsx(tt,{className:"p-6 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:"Gnration du rapport IA"}),a.jsx("p",{className:"text-muted-foreground",children:"Analyse des photos en cours..."})]})]})})});const n=s=>{switch(s){case"clean":return a.jsx(oi,{className:"h-5 w-5 text-success"});case"issues":return a.jsx(_n,{className:"h-5 w-5 text-warning"});case"damage":return a.jsx(_n,{className:"h-5 w-5 text-destructive"});default:return a.jsx(sa,{className:"h-5 w-5 text-muted-foreground"})}},r=s=>{switch(s){case"clean":return a.jsx(De,{className:"bg-success hover:bg-success",children:"Conforme"});case"issues":return a.jsx(De,{variant:"secondary",className:"bg-warning hover:bg-warning text-warning-foreground",children:"Problmes mineurs"});case"damage":return a.jsx(De,{variant:"destructive",children:"Dgts dtects"});default:return a.jsx(De,{variant:"outline",children:"En attente"})}},o=s=>{switch(s){case"low":return a.jsx(De,{variant:"outline",className:"text-xs",children:"Mineur"});case"medium":return a.jsx(De,{variant:"secondary",className:"bg-warning hover:bg-warning text-warning-foreground text-xs",children:"Modr"});case"high":return a.jsx(De,{variant:"destructive",className:"text-xs",children:"Svre"});default:return a.jsx(De,{variant:"outline",className:"text-xs",children:"-"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs($e,{children:[a.jsx(Lt,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs($t,{className:"flex items-center gap-2",children:[a.jsx(zl,{className:"h-6 w-6 text-primary"}),"Rapport IA - tat des lieux"]}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Gnr le ",new Date(e.generatedAt).toLocaleString("fr-FR")]})]}),a.jsxs(fe,{onClick:t,children:[a.jsx(Kb,{className:"h-4 w-4 mr-2"}),"Tlcharger"]})]})}),a.jsxs(tt,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[n(e.summary.overallStatus),a.jsx("span",{className:"font-medium",children:"tat gnral"})]}),r(e.summary.overallStatus)]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-primary",children:[e.summary.cleaningScore,"%"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Score propret"})]}),a.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:e.summary.issuesDetected}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Problmes dtects"})]})]})]})]}),a.jsxs($e,{children:[a.jsx(Lt,{children:a.jsx($t,{className:"text-lg",children:"Analyse par pice"})}),a.jsx(tt,{className:"space-y-4",children:e.roomAnalysis.map((s,i)=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[n(s.status),a.jsx("span",{className:"font-medium",children:s.roomName})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.cleaningScore,"%"]}),r(s.status)]})]}),s.issues.length>0&&a.jsx("ul",{className:"ml-7 space-y-1",children:s.issues.map((l,c)=>a.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[a.jsx("span",{className:"w-1 h-1 bg-muted-foreground rounded-full mt-2 flex-shrink-0"}),l]},c))}),i<e.roomAnalysis.length-1&&a.jsx(Eg,{className:"mt-4"})]},i))})]}),e.detectedIssues.length>0&&a.jsxs($e,{children:[a.jsx(Lt,{children:a.jsx($t,{className:"text-lg",children:"Problmes dtects"})}),a.jsx(tt,{className:"space-y-4",children:e.detectedIssues.map((s,i)=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_n,{className:"h-4 w-4 text-warning"}),a.jsx("span",{className:"font-medium",children:s.room})]}),o(s.severity)]}),a.jsx("p",{className:"text-sm text-foreground mb-2",children:s.description}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(De,{variant:"outline",className:"text-xs",children:s.type==="damage"?"Dgt":s.type==="cleanliness"?"Propret":"Manquant"}),a.jsx("span",{children:""}),a.jsx("span",{children:"Photo de preuve disponible"})]})]},i))})]})]})};var Ld="Collapsible",[k$,z1]=kn(Ld),[C$,Pg]=k$(Ld),B1=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:s,onOpenChange:i,...l}=e,[c,u]=xr({prop:r,defaultProp:o??!1,onChange:i,caller:Ld});return a.jsx(C$,{scope:n,disabled:s,contentId:tr(),open:c,onOpenToggle:f.useCallback(()=>u(d=>!d),[u]),children:a.jsx(Se.div,{"data-state":Rg(c),"data-disabled":s?"":void 0,...l,ref:t})})});B1.displayName=Ld;var W1="CollapsibleTrigger",H1=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=Pg(W1,n);return a.jsx(Se.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":Rg(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:he(e.onClick,o.onOpenToggle)})});H1.displayName=W1;var Tg="CollapsibleContent",V1=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Pg(Tg,e.__scopeCollapsible);return a.jsx(tn,{present:n||o.open,children:({present:s})=>a.jsx(S$,{...r,ref:t,present:s})})});V1.displayName=Tg;var S$=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...s}=e,i=Pg(Tg,n),[l,c]=f.useState(r),u=f.useRef(null),d=Be(t,u),h=f.useRef(0),m=h.current,p=f.useRef(0),b=p.current,x=i.open||l,w=f.useRef(x),g=f.useRef(void 0);return f.useEffect(()=>{const v=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(v)},[]),en(()=>{const v=u.current;if(v){g.current=g.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const y=v.getBoundingClientRect();h.current=y.height,p.current=y.width,w.current||(v.style.transitionDuration=g.current.transitionDuration,v.style.animationName=g.current.animationName),c(r)}},[i.open,r]),a.jsx(Se.div,{"data-state":Rg(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!x,...s,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:x&&o})});function Rg(e){return e?"open":"closed"}var N$=B1,I$=H1,j$=V1,Ur="Accordion",E$=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[_g,P$,T$]=Ul(Ur),[$d]=kn(Ur,[T$,z1]),Og=z1(),q1=V.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,s=r;return a.jsx(_g.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?a.jsx(D$,{...s,ref:t}):a.jsx(O$,{...o,ref:t})})});q1.displayName=Ur;var[G1,R$]=$d(Ur),[K1,_$]=$d(Ur,{collapsible:!1}),O$=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:s=!1,...i}=e,[l,c]=xr({prop:n,defaultProp:r??"",onChange:o,caller:Ur});return a.jsx(G1,{scope:e.__scopeAccordion,value:V.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:V.useCallback(()=>s&&c(""),[s,c]),children:a.jsx(K1,{scope:e.__scopeAccordion,collapsible:s,children:a.jsx(Y1,{...i,ref:t})})})}),D$=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i,l]=xr({prop:n,defaultProp:r??[],onChange:o,caller:Ur}),c=V.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=V.useCallback(d=>l((h=[])=>h.filter(m=>m!==d)),[l]);return a.jsx(G1,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:u,children:a.jsx(K1,{scope:e.__scopeAccordion,collapsible:!0,children:a.jsx(Y1,{...s,ref:t})})})}),[A$,Ud]=$d(Ur),Y1=V.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:s="vertical",...i}=e,l=V.useRef(null),c=Be(l,t),u=P$(n),h=bi(o)==="ltr",m=he(e.onKeyDown,p=>{var I;if(!E$.includes(p.key))return;const b=p.target,x=u().filter(P=>{var E;return!((E=P.ref.current)!=null&&E.disabled)}),w=x.findIndex(P=>P.ref.current===b),g=x.length;if(w===-1)return;p.preventDefault();let v=w;const y=0,k=g-1,C=()=>{v=w+1,v>k&&(v=y)},N=()=>{v=w-1,v<y&&(v=k)};switch(p.key){case"Home":v=y;break;case"End":v=k;break;case"ArrowRight":s==="horizontal"&&(h?C():N());break;case"ArrowDown":s==="vertical"&&C();break;case"ArrowLeft":s==="horizontal"&&(h?N():C());break;case"ArrowUp":s==="vertical"&&N();break}const S=v%g;(I=x[S].ref.current)==null||I.focus()});return a.jsx(A$,{scope:n,disabled:r,direction:o,orientation:s,children:a.jsx(_g.Slot,{scope:n,children:a.jsx(Se.div,{...i,"data-orientation":s,ref:c,onKeyDown:r?void 0:m})})})}),zu="AccordionItem",[M$,Dg]=$d(zu),Q1=V.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,s=Ud(zu,n),i=R$(zu,n),l=Og(n),c=tr(),u=r&&i.value.includes(r)||!1,d=s.disabled||e.disabled;return a.jsx(M$,{scope:n,open:u,disabled:d,triggerId:c,children:a.jsx(N$,{"data-orientation":s.orientation,"data-state":nN(u),...l,...o,ref:t,disabled:d,open:u,onOpenChange:h=>{h?i.onItemOpen(r):i.onItemClose(r)}})})});Q1.displayName=zu;var X1="AccordionHeader",J1=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Ud(Ur,n),s=Dg(X1,n);return a.jsx(Se.h3,{"data-orientation":o.orientation,"data-state":nN(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:t})});J1.displayName=X1;var bm="AccordionTrigger",Z1=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Ud(Ur,n),s=Dg(bm,n),i=_$(bm,n),l=Og(n);return a.jsx(_g.ItemSlot,{scope:n,children:a.jsx(I$,{"aria-disabled":s.open&&!i.collapsible||void 0,"data-orientation":o.orientation,id:s.triggerId,...l,...r,ref:t})})});Z1.displayName=bm;var eN="AccordionContent",tN=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Ud(Ur,n),s=Dg(eN,n),i=Og(n);return a.jsx(j$,{role:"region","aria-labelledby":s.triggerId,"data-orientation":o.orientation,...i,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});tN.displayName=eN;function nN(e){return e?"open":"closed"}var L$=q1,$$=Q1,U$=J1,rN=Z1,oN=tN;const sN=L$,Ag=f.forwardRef(({className:e,...t},n)=>a.jsx($$,{ref:n,className:ke("border-b",e),...t}));Ag.displayName="AccordionItem";const Mg=f.forwardRef(({className:e,children:t,...n},r)=>a.jsx(U$,{className:"flex",children:a.jsxs(rN,{ref:r,className:ke("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,a.jsx(fd,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Mg.displayName=rN.displayName;const Lg=f.forwardRef(({className:e,children:t,...n},r)=>a.jsx(oN,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:ke("pb-4 pt-0",e),children:t})}));Lg.displayName=oN.displayName;const $g=({children:e,flowType:t})=>{const{rooms:n}=Sn(),{currentCheckId:r}=Kn(),[o,s]=f.useState({});f.useEffect(()=>{(async()=>{var u,d;if(r)try{const h=await Oe.getCheckSession(r);if(!((d=(u=h==null?void 0:h.progress)==null?void 0:u.interactions)!=null&&d.photosTaken))return;const m=h.progress.interactions.photosTaken,p={};Object.values(m).forEach(b=>{Array.isArray(b)&&b.forEach(x=>{x.pieceId&&(p[x.pieceId]||(p[x.pieceId]=[]),p[x.pieceId].push(x))})}),console.log(" RoomsModal: Photos captures charges:",p),s(p)}catch(h){console.error(" RoomsModal: Erreur chargement photos:",h)}})()},[r]);const i=c=>t==="checkin"?c.roomInfo||c.travelerNote:c.cleaningInfo||c.cleanerNote,l=c=>{var u,d;return t==="checkin"?((u=c.photoReferences)==null?void 0:u.checkin)||[]:((d=c.photoReferences)==null?void 0:d.checkout)||[]};return a.jsxs(Gn,{children:[a.jsx(Js,{asChild:!0,children:e}),a.jsxs(On,{className:"max-w-sm max-h-[80vh] overflow-y-auto",children:[a.jsx(sr,{children:a.jsx(ar,{children:"Voir les pices"})}),a.jsx(sN,{type:"single",collapsible:!0,className:"w-full space-y-3",children:n.map(c=>{const u=i(c),d=l(c),h=o[c.id]||[];return a.jsxs(Ag,{value:c.id,className:"border border-border/50 rounded-xl overflow-hidden bg-card",children:[a.jsx(Mg,{className:"px-4 py-3 hover:no-underline hover:bg-muted/50 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),a.jsx("h3",{className:"text-lg font-semibold text-foreground capitalize",children:c.nom})]})}),a.jsx(Lg,{className:"px-4 pb-4",children:a.jsxs("div",{className:"space-y-4",children:[u&&a.jsx("div",{className:"border-l-4 border-primary bg-primary/5 rounded-r-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Qb,{className:"h-4 w-4 text-primary flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-sm font-medium text-foreground",children:u})]})}),d.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a.jsx(kt,{className:"h-4 w-4"}),"Photos de rfrence"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:d.slice(0,4).map((m,p)=>a.jsx("div",{className:"aspect-square bg-muted rounded-xl overflow-hidden cursor-pointer hover:scale-105 transition-transform duration-200 shadow-sm hover:shadow-md",children:a.jsx("img",{src:m.url,alt:`${c.nom} - Rfrence ${p+1}`,className:"w-full h-full object-cover"})},p))})]}),h.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a.jsx(kt,{className:"h-4 w-4 text-green-600"}),"Photos captures (",h.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:h.map((m,p)=>a.jsx("div",{className:"aspect-square bg-muted rounded-xl overflow-hidden cursor-pointer hover:scale-105 transition-transform duration-200 shadow-sm hover:shadow-md border-2 border-green-500",children:a.jsx("img",{src:m.photoData||m.url,alt:`${c.nom} - Capture ${p+1}`,className:"w-full h-full object-cover"})},m.photoId))})]})]})})]},c.id)})})]})]})},Ug=({children:e,flowType:t="checkout"})=>{const{rooms:n}=Sn();console.log(" CleaningInstructionsModal: Donnes des pices:",{roomsCount:n.length,flowType:t,rooms:n.map(s=>{var i;return{id:s.id,nom:s.nom,hasCleaningInfo:!!s.cleaningInfo,cleaningInfo:((i=s.cleaningInfo)==null?void 0:i.substring(0,50))+"...",hasTravelerNote:!!s.travelerNote,hasCleanerNote:!!s.cleanerNote}})});const r=s=>{if(!s.tasks)return console.log(` CleaningInstructionsModal: Pice "${s.nom}" n'a pas de tches`),[];console.log(` CleaningInstructionsModal: Analyse des tches pour "${s.nom}":`,{totalTasks:s.tasks.length,tasks:s.tasks.map(l=>({id:l.id,label:l.label,type:l.type,isTodo:l.isTodo}))});const i=s.tasks.filter(l=>{var d;if(l.isTodo)return console.log(` Tche incluse (isTodo=true): ${l.label}`),!0;if(l.type==="photo_multiple"||l.type==="photo_optional")return console.log(` Tche exclue (photo_multiple/optional): ${l.label}`),!1;const c=["similaires","tat d'entre","contrle","rfrence"],u=((d=l.label)==null?void 0:d.toLowerCase())||"";return c.some(h=>u.includes(h))?(console.log(` Tche exclue (mot-cl): ${l.label}`),!1):(console.log(` Tche exclue (dfaut): ${l.label}`),!1)});return console.log(` CleaningInstructionsModal: Tches filtres pour "${s.nom}": ${i.length}/${s.tasks.length}`),i},o=s=>{switch(s){case"checkbox":return a.jsx(oi,{className:"h-4 w-4 text-primary"});case"photo_required":return a.jsx(kt,{className:"h-4 w-4 text-primary"});default:return a.jsx(JT,{className:"h-4 w-4 text-primary"})}};return a.jsxs(Gn,{children:[a.jsx(Js,{asChild:!0,children:e}),a.jsxs(On,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsx(sr,{children:a.jsxs(ar,{className:"flex items-center gap-2",children:[a.jsx(si,{className:"h-5 w-5 text-primary"}),"Consignes mnage"]})}),a.jsx("div",{className:"space-y-4",children:a.jsx(sN,{type:"multiple",className:"w-full",defaultValue:[],children:n.map(s=>{const i=r(s),l=s.cleaningInfo||s.cleanerNote;return a.jsxs(Ag,{value:s.id,className:"border border-border/50 rounded-xl overflow-hidden bg-card",children:[a.jsx(Mg,{className:"px-4 py-3 hover:no-underline hover:bg-muted/50 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0"}),a.jsx("span",{className:"font-semibold capitalize truncate",children:s.nom}),i.length>0&&a.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",i.length," tche",i.length>1?"s":"",")"]})]})}),a.jsxs(Lg,{className:"px-4 pb-4 space-y-4",children:[l&&a.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-primary/10 p-4 rounded-lg border-l-4 border-primary",children:[a.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2 text-primary",children:[a.jsx(Qb,{className:"h-4 w-4"}),"Instructions spciales"]}),a.jsx("p",{className:"text-foreground text-sm leading-relaxed",children:l})]}),i.length>0?a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[a.jsx(oi,{className:"h-4 w-4 text-primary"}),"Tches  effectuer :"]}),a.jsx("div",{className:"space-y-2",children:i.map((c,u)=>a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border/50 bg-card hover:bg-muted/30 transition-colors",children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o(c.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium",children:c.label}),c.description&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:c.description}),c.hint&&a.jsxs("p",{className:"text-xs text-primary/70 mt-1 italic",children:[" Astuce : ",c.hint]})]}),c.total_photos_required&&c.total_photos_required>0&&a.jsxs("div",{className:"flex-shrink-0 text-xs text-muted-foreground bg-muted px-2 py-1 rounded",children:[a.jsx(kt,{className:"h-3 w-3 inline mr-1"}),c.total_photos_required]})]},c.id))})]}):a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(si,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Aucune tche de mnage spcifique pour cette pice"})]})]})]},s.id)})})})]})]})};function F$(){const{info:e,rooms:t,stats:n,isLoaded:r,loading:o,refreshParcours:s}=xs();return r?a.jsxs($e,{className:"border-primary/20",children:[a.jsx(Lt,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs($t,{className:"text-base flex items-center gap-2",children:[a.jsx(oo,{className:"h-4 w-4"}),"Parcours actuel"]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:s,disabled:o,className:"h-8 w-8 p-0",children:a.jsx(Xc,{className:`h-4 w-4 ${o?"animate-spin":""}`})})]})}),a.jsxs(tt,{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:e.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.logement})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(De,{variant:"outline",className:"text-xs",children:[a.jsx(Zb,{className:"h-3 w-3 mr-1"}),e.type]}),a.jsxs(De,{variant:"outline",className:"text-xs",children:[a.jsx(kt,{className:"h-3 w-3 mr-1"}),e.takePicture]}),a.jsxs(De,{variant:"outline",className:"text-xs",children:[a.jsx(oo,{className:"h-3 w-3 mr-1"}),t.length," pices"]}),a.jsxs(De,{variant:"outline",className:"text-xs",children:[a.jsx(dn,{className:"h-3 w-3 mr-1"}),n.totalTasks," tches"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2 border-t",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Pices"}),a.jsx("p",{className:"text-lg font-semibold",children:n.totalRooms})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Tches"}),a.jsx("p",{className:"text-lg font-semibold",children:n.totalTasks})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Photos"}),a.jsx("p",{className:"text-lg font-semibold",children:n.totalPhotos})]})]})]})]}):null}const aN=f.createContext(void 0),ks=()=>{const e=f.useContext(aN);if(!e)throw new Error("useReportProblem must be used within a ReportProblemProvider");return e},z$=({children:e})=>{const[t,n]=f.useState(!1),[r,o]=f.useState(),s=l=>{o(l),n(!0)},i=()=>{n(!1),o(void 0)};return a.jsx(aN.Provider,{value:{isOpen:t,preselectedRoom:r,openReportModal:s,closeReportModal:i},children:e})},iN=f.createContext(void 0),qf="app-flow-state",Gf={currentStage:"checkin",checkinCompleted:!1,cleaningProgress:0,checkoutCompleted:!1,entryPhotosCount:0,exitPhotosCount:0,totalTasks:0,completedTasks:0},B$=({children:e})=>{const[t,n]=f.useState(()=>{try{const d=localStorage.getItem(qf);return d?JSON.parse(d):Gf}catch{return Gf}});f.useEffect(()=>{localStorage.setItem(qf,JSON.stringify(t))},[t]),f.useEffect(()=>{let d="checkin";t.checkoutCompleted?d="completed":t.cleaningProgress===100?d="checkout":t.checkinCompleted&&(d="cleaning"),d!==t.currentStage&&n(h=>({...h,currentStage:d}))},[t.checkinCompleted,t.cleaningProgress,t.checkoutCompleted]);const r=d=>{n(h=>({...h,...d}))},o=()=>{n(d=>({...d,checkinCompleted:!0,currentStage:"cleaning"}))},s=(d,h)=>{const m=h>0?Math.round(d/h*100):0;n(p=>({...p,completedTasks:d,totalTasks:h,cleaningProgress:m,currentStage:m===100?"checkout":"cleaning"}))},i=()=>{n(d=>({...d,checkoutCompleted:!0,currentStage:"completed"}))},l=()=>{n(Gf),localStorage.removeItem(qf)},u={flowState:t,updateFlowState:r,completeCheckin:o,updateCleaningProgress:s,completeCheckout:i,resetFlow:l,getStageConfig:()=>{switch(t.currentStage){case"checkin":return{title:"Check d'entre",subtitle:"Photographiez l'tat actuel du logement",ctaText:"Faire le check d'entre",ctaAction:()=>window.location.href="/checkin",showCTA:!0};case"cleaning":return{title:"Mnage en cours",subtitle:`${t.completedTasks}/${t.totalTasks} tches termines (${t.cleaningProgress}%)`,ctaText:"Continuer le mnage",ctaAction:()=>{},showCTA:!1};case"checkout":return{title:"Check de sortie",subtitle:"Vrifiez et documentez l'tat final",ctaText:"Faire le check de sortie",ctaAction:()=>window.location.href="/checkout",showCTA:!0};case"completed":return{title:"Parcours termin",subtitle:"Tous les contrles ont t effectus avec succs",ctaText:"Nouveau parcours",ctaAction:l,showCTA:!0};default:return{title:"Parcours mnage",subtitle:"tat du parcours inconnu",ctaText:"Commencer",ctaAction:l,showCTA:!0}}}};return a.jsx(iN.Provider,{value:u,children:e})},lN=()=>{const e=f.useContext(iN);if(!e)throw new Error("useAppFlow must be used within an AppFlowProvider");return e};class W${constructor(){gn(this,"currentCheckId",null);gn(this,"sessionQueue",[])}setCurrentCheckId(t){this.currentCheckId=t,console.log(" InteractionTracker: CheckID dfini:",t),t&&this.sessionQueue.length>0&&(console.log(" Traitement file d'attente:",this.sessionQueue.length,"interactions"),this.sessionQueue.forEach(n=>{this.processQueuedInteraction(n)}),this.sessionQueue=[])}async trackButtonClick(t){if(console.log(" InteractionTracker: Clic bouton:",{buttonId:t.buttonId,pieceId:t.pieceId,taskId:t.taskId,etapeId:t.etapeId,actionType:t.actionType}),!this.currentCheckId){this.sessionQueue.push({type:"buttonClick",data:t}),console.log(" Ajout  la file d'attente (pas de CheckID)");return}try{const n=this.cleanEtapeId(t.etapeId),r=n?`${t.pieceId}_${n}_${t.buttonId}`:`${t.pieceId}_${t.buttonId}`,o={...t,etapeId:n};await this.updateCheckIdInteractions({buttonClicks:{[`${r}_${Date.now()}`]:[o]}})}catch(n){console.error(" Erreur enregistrement clic bouton:",n)}}async trackPhotoTaken(t){if(console.log(" InteractionTracker: Photo prise:",{photoId:t.photoId,taskId:t.taskId,pieceId:t.pieceId,etapeId:t.etapeId,validated:t.validated}),!this.currentCheckId){this.sessionQueue.push({type:"photoTaken",data:t});return}try{const n={...t,etapeId:this.cleanEtapeId(t.etapeId)};await this.updateCheckIdInteractions({photosTaken:{[t.photoId]:[n]}}),await this.updatePieceState(t.pieceId,{photosCount:1})}catch(n){console.error(" Erreur enregistrement photo:",n)}}async trackCheckboxChange(t){if(console.log(" InteractionTracker: Checkbox change:",{checkboxId:t.checkboxId,taskId:t.taskId,pieceId:t.pieceId,isChecked:t.isChecked}),!this.currentCheckId){this.sessionQueue.push({type:"checkboxChange",data:t});return}try{await this.updateCheckIdInteractions({checkboxStates:{[t.checkboxId]:t}}),await this.updatePieceState(t.pieceId,{checkboxesCount:t.isChecked?1:-1})}catch(n){console.error(" Erreur enregistrement checkbox:",n)}}async trackSignalement(t){if(console.log(" InteractionTracker: Signalement cr:",{signalementId:t.signalementId,pieceId:t.pieceId,type:t.type,severity:t.severity}),!this.currentCheckId){this.sessionQueue.push({type:"signalement",data:t});return}try{await this.updateCheckIdInteractions({signalements:{[t.signalementId]:t}}),await this.updatePieceState(t.pieceId,{signalementsCount:1,status:"issues_reported"})}catch(n){console.error(" Erreur enregistrement signalement:",n)}}async trackPieceStateChange(t){if(console.log(" InteractionTracker: tat pice mis  jour:",{pieceId:t.pieceId,status:t.status,completionPercentage:t.completionPercentage}),!this.currentCheckId){this.sessionQueue.push({type:"pieceState",data:t});return}try{await this.updateCheckIdInteractions({pieceStates:{[t.pieceId]:t}})}catch(n){console.error(" Erreur mise  jour tat pice:",n)}}async trackExitQuestionResponse(t){var n;if(console.log(" InteractionTracker: Rponse question de sortie:",{questionID:t.questionID,questionType:t.questionType,hasImage:t.hasImage,checked:t.checked,textResponse:(n=t.textResponse)==null?void 0:n.substring(0,50)}),!this.currentCheckId){this.sessionQueue.push({type:"exitQuestion",data:t});return}try{await this.updateCheckIdInteractions({exitQuestions:{[t.questionID]:t}}),console.log(" InteractionTracker: Rponse question de sortie sauvegarde")}catch(r){console.error(" Erreur enregistrement rponse question de sortie:",r)}}async getExitQuestionResponses(){var t,n;if(!this.currentCheckId)return console.warn(" Pas de CheckID actif"),{};try{const r=await Oe.getCheckSession(this.currentCheckId);return((n=(t=r==null?void 0:r.progress)==null?void 0:t.interactions)==null?void 0:n.exitQuestions)||{}}catch(r){return console.error(" Erreur rcupration rponses questions de sortie:",r),{}}}async markExitQuestionsCompleted(){if(!this.currentCheckId){console.warn(" Pas de CheckID actif");return}try{const t=await Oe.getCheckSession(this.currentCheckId);t&&(t.progress=t.progress||{interactions:{}},t.progress.exitQuestionsCompleted=!0,t.progress.exitQuestionsCompletedAt=new Date().toISOString(),await Oe.updateSessionProgress(this.currentCheckId,{currentPieceId:t.progress.currentPieceId,currentTaskIndex:t.progress.currentTaskIndex,interactions:t.progress.interactions}),console.log(" InteractionTracker: Questions de sortie marques comme compltes"))}catch(t){console.error(" Erreur marquage questions de sortie compltes:",t)}}async trackNavigation(t,n,r){if(console.log(" InteractionTracker: Navigation:",{from:t,to:n,trigger:r}),!this.currentCheckId){this.sessionQueue.push({type:"navigation",data:{fromPieceId:t,toPieceId:n,trigger:r,timestamp:new Date().toISOString()}});return}try{const o=await Oe.getCheckSession(this.currentCheckId);if(!o)return;const s=o.progress.interactions.navigation||{visitedPieces:[],timeSpentPerPiece:{},totalTimeSpent:0,navigationHistory:[]};s.navigationHistory.push({fromPieceId:t,toPieceId:n,timestamp:new Date().toISOString(),trigger:r}),s.visitedPieces.includes(n)||s.visitedPieces.push(n),await this.updateCheckIdInteractions({navigation:s})}catch(o){console.error(" Erreur enregistrement navigation:",o)}}async trackPagePath(t){if(!this.currentCheckId){console.warn(" Pas de CheckID actif pour enregistrer le chemin de page");return}try{const n=await Oe.getCheckSession(this.currentCheckId);if(!n)return;const r=n.progress.interactions.navigation||{visitedPieces:[],timeSpentPerPiece:{},totalTimeSpent:0,navigationHistory:[],lastPath:void 0};r.lastPath=t,await this.updateCheckIdInteractions({navigation:r}),localStorage.setItem("checkeasy_last_path",t),console.log(" Chemin de page sauvegard dans session ET localStorage:",t)}catch(n){console.error(" Erreur sauvegarde chemin de page:",n)}}async getPieceInteractionState(t){var n;if(!this.currentCheckId)return null;try{const r=await Oe.getCheckSession(this.currentCheckId);if(!r)return null;const o=r.progress.interactions;return{pieceState:(n=o.pieceStates)==null?void 0:n[t],photos:Object.values(o.photosTaken||{}).flat().filter(s=>s.pieceId===t),checkboxes:Object.values(o.checkboxStates||{}).filter(s=>s.pieceId===t),signalements:Object.values(o.signalements||{}).filter(s=>s.pieceId===t),buttonClicks:Object.values(o.buttonClicks||{}).flat().filter(s=>s.pieceId===t)}}catch(r){return console.error(" Erreur rcupration tat pice:",r),null}}async updateCheckIdInteractions(t){if(!this.currentCheckId)return;const n=await Oe.getCheckSession(this.currentCheckId);if(!n)return;const r=n.progress.interactions||{},o=this.mergeInteractions(r,t);await Oe.updateSessionProgress(this.currentCheckId,{currentPieceId:n.progress.currentPieceId,currentTaskIndex:n.progress.currentTaskIndex,interactions:o})}mergeInteractions(t,n){const r={...t};return Object.keys(n).forEach(o=>{n[o]&&(r[o]={...r[o],...n[o]})}),r}async updatePieceState(t,n){var r;if(this.currentCheckId)try{const o=await Oe.getCheckSession(this.currentCheckId);if(!o)return;const s=((r=o.progress.interactions.pieceStates)==null?void 0:r[t])||{pieceId:t,status:"not_started",completionPercentage:0,totalInteractions:0,photosCount:0,checkboxesCount:0,signalementsCount:0},i={...s,...n,totalInteractions:s.totalInteractions+1,...n.photosCount&&{photosCount:Math.max(0,s.photosCount+n.photosCount)},...n.checkboxesCount&&{checkboxesCount:Math.max(0,s.checkboxesCount+n.checkboxesCount)},...n.signalementsCount&&{signalementsCount:Math.max(0,s.signalementsCount+n.signalementsCount)}};await this.trackPieceStateChange(i)}catch(o){console.error(" Erreur mise  jour tat pice:",o)}}processQueuedInteraction(t){switch(t.type){case"buttonClick":this.trackButtonClick(t.data);break;case"photoTaken":this.trackPhotoTaken(t.data);break;case"checkboxChange":this.trackCheckboxChange(t.data);break;case"signalement":this.trackSignalement(t.data);break;case"pieceState":this.trackPieceStateChange(t.data);break;case"navigation":this.trackNavigation(t.data.fromPieceId,t.data.toPieceId,t.data.trigger);break;case"exitQuestion":this.trackExitQuestionResponse(t.data);break}}generatePhotoId(){return`photo_${Date.now()}_${Math.random().toString(36).substring(2,8)}`}cleanEtapeId(t){if(!t)return;const n=t.match(/(\d+x\d+)/),r=n?n[1]:t;return console.log(" EtapeId nettoy:",{original:t,cleaned:r}),r}generateSignalementId(){return`signalement_${Date.now()}_${Math.random().toString(36).substring(2,8)}`}getCurrentCheckId(){return this.currentCheckId}getQueueLength(){return this.sessionQueue.length}}const at=new W$,Tl=Object.freeze(Object.defineProperty({__proto__:null,interactionTracker:at},Symbol.toStringTag,{value:"Module"})),cN=f.createContext(void 0),To=()=>{const e=f.useContext(cN);if(!e)throw new Error("useSignalements must be used within a SignalementsProvider");return e},H$=[],V$=({children:e})=>{const[t,n]=f.useState(H$),{currentCheckId:r,isCheckIdActive:o}=Kn(),{currentParcours:s}=xs();f.useEffect(()=>{console.log(" SignalementsContext: useEffect dclench:",{currentCheckId:r,isCheckIdActive:o}),r&&o?(console.log(" SignalementsContext: Chargement automatique des signalements..."),l()):console.log(" SignalementsContext: Conditions non remplies:",{hasCheckId:!!r,isActive:o})},[r,o]),f.useEffect(()=>{(async()=>{await new Promise(p=>setTimeout(p,100)),r&&o&&(console.log(" SignalementsContext: Re-chargement aprs dlai (F5 reload)"),l())})()},[]);const i=async(m,p)=>{var b,x;try{const w=await Oe.getCheckSession(p);if(!w){console.warn(" SignalementsContext: Session non trouve, impossible d'envoyer le signalement  Bubble");return}const g=w.parcoursId;let v={firstName:"",lastName:"",phone:""};try{const S=localStorage.getItem("userInfo");if(S){const I=JSON.parse(S);v={firstName:I.firstName||"",lastName:I.lastName||"",phone:I.phone||""}}}catch(S){console.error(" SignalementsContext: Erreur rcupration infos user:",S)}const y=`${ot.API_BASE_URL}/${ot.BUBBLE_ENV}/api/1.1/wf/SignalementEndPoint`,k={parcour:g,commentaire:m.commentaire,pieceid:m.roomId,firstname:v.firstName,lastname:v.lastName,phone:v.phone,type:m.typeSignalement||"Technique",reportid:p};m.imgBase64&&(k.imagebase64=m.imgBase64),console.log(" SignalementsContext: Envoi du signalement  Bubble:",{url:y,signalementId:m.id,parcoursId:g,roomId:m.roomId,hasBase64:!!m.imgBase64,base64Length:((b=m.imgBase64)==null?void 0:b.length)||0,base64Preview:m.imgBase64?m.imgBase64.substring(0,50)+"...":"vide",requestBodyKeys:Object.keys(k),requestBodyBase64Length:((x=k.imagebase64)==null?void 0:x.length)||0}),console.log(" SignalementsContext: Request Body:",{...k,imagebase64:k.imagebase64?`[BASE64 ${k.imagebase64.length} chars]`:void 0});const C=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!C.ok){let S=`HTTP error! status: ${C.status}`;try{const I=await C.json();console.error(" SignalementsContext: Rponse d'erreur de Bubble:",I),S=`HTTP ${C.status}: ${JSON.stringify(I)}`}catch{const P=await C.text();console.error(" SignalementsContext: Rponse d'erreur (texte):",P),S=`HTTP ${C.status}: ${P}`}throw new Error(S)}const N=await C.json();console.log(" SignalementsContext: Signalement envoy  Bubble avec succs:",N)}catch(w){console.error(" SignalementsContext: Erreur lors de l'envoi du signalement  Bubble:",w)}},l=async()=>{var m,p;if(!r){console.log(" SignalementsContext: Pas de checkId actif, impossible de charger les signalements");return}try{console.log(" SignalementsContext: Chargement des signalements pour checkId:",r);const b=await Oe.getCheckSession(r);if(!b){console.log(" SignalementsContext: Session non trouve");return}const x=((p=(m=b.progress)==null?void 0:m.interactions)==null?void 0:p.signalements)||{};console.log(" SignalementsContext: Signalements bruts de la session:",x);const w=Object.entries(x).map(([g,v])=>{var y,k,C,N,S,I,P,E,_;return console.log(" SignalementsContext: Conversion signalement:",g,v),{id:v.signalementId||g,roomId:v.pieceId||v.roomId||"",piece:((y=v.metadata)==null?void 0:y.piece)||v.pieceName||v.piece||"",etapeId:v.etapeId,titre:v.title||v.titre||"",commentaire:v.description||v.commentaire||"",imgUrl:((k=v.photos)==null?void 0:k[0])||((C=v.metadata)==null?void 0:C.imgUrl)||v.imgUrl,imgBase64:((N=v.metadata)==null?void 0:N.imgBase64)||v.imgBase64,flowType:((S=v.metadata)==null?void 0:S.flowType)||v.flowType||"checkin",origine:((I=v.metadata)==null?void 0:I.origine)||v.origine||"CLIENT",status:v.status==="resolved"?"RESOLU":"A_TRAITER",priorite:v.severity==="high"||v.severity==="critical"||v.priorite||!1,created_at:v.createdAt||v.created_at||new Date().toISOString(),updated_at:v.updatedAt||v.updated_at||new Date().toISOString(),parcoursId:((P=v.metadata)==null?void 0:P.parcoursId)||v.parcoursId,checkId:((E=v.metadata)==null?void 0:E.checkId)||r,rapportRef:((_=v.metadata)==null?void 0:_.rapportRef)||v.rapportRef}});console.log(" SignalementsContext: Signalements chargs depuis la session:",w.length,w),n(w),w.length===0&&console.log(" SignalementsContext: Aucun signalement trouv dans la session (tat vide correct)")}catch(b){console.error(" SignalementsContext: Erreur chargement signalements:",b)}},c=async m=>{var w;const p=`${Date.now()}x${Math.random().toString(36).substring(2,9)}`,b=new Date().toISOString();console.log(" SignalementsContext: Cration signalement avec parcoursId:",{parcoursId:s==null?void 0:s.id,currentParcours:s});const x={...m,id:p,created_at:b,updated_at:b,parcoursId:s==null?void 0:s.id,checkId:r||void 0};if(n(g=>[x,...g]),r&&o)try{await at.trackSignalement({signalementId:x.id,pieceId:x.roomId,taskId:void 0,etapeId:x.etapeId,type:"issue",severity:x.priorite?"high":"medium",title:x.titre,description:x.commentaire,photos:x.imgUrl?[x.imgUrl]:[],imgUrl:x.imgUrl,imgBase64:x.imgBase64,createdAt:x.created_at,status:"open",metadata:{flowType:x.flowType,origine:x.origine,piece:x.piece,checkId:r,parcoursId:s==null?void 0:s.id}}),console.log(" SignalementsContext: Signalement sauvegard dans la session:",{signalementId:p,hasImgUrl:!!x.imgUrl,hasImgBase64:!!x.imgBase64,imgBase64Length:(w=x.imgBase64)==null?void 0:w.length}),await i(x,r)}catch(g){console.error(" SignalementsContext: Erreur sauvegarde signalement:",g)}else console.log(" SignalementsContext: Pas de checkId actif, signalement non sauvegard")},u=m=>{n(p=>p.map(b=>b.id===m?{...b,status:"RESOLU",updated_at:new Date().toISOString()}:b))},d=m=>t.filter(p=>p.piece===m&&p.status==="A_TRAITER"),h=()=>t.filter(m=>m.status==="A_TRAITER");return a.jsx(cN.Provider,{value:{signalements:t,addSignalement:c,resolveSignalement:u,getSignalementsByRoom:d,getPendingSignalements:h,loadSignalementsFromSession:l},children:e})},ua=({user:e,size:t="sm",onClick:n})=>{const r=i=>i?i.firstName&&i.lastName?`${i.firstName.charAt(0)}${i.lastName.charAt(0)}`.toUpperCase():i.phone&&i.phone.length>=2?`${i.phone.slice(-2)}`:"":"",o={sm:"h-8 w-8 text-sm",md:"h-12 w-12 text-base"},s=t==="sm"?"min-h-[44px] min-w-[44px] p-2":"";return a.jsx("button",{onClick:n,className:`
        ${o[t]} 
        ${s}
        bg-gradient-primary text-primary-foreground rounded-full 
        flex items-center justify-center font-medium
        hover:shadow-glow active:scale-[0.98] 
        transition-all duration-200
        focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2
        ${n?"cursor-pointer":"cursor-default"}
      `,"aria-label":e?`Profil de ${e.firstName} ${e.lastName}`:"Profil utilisateur",children:a.jsx("span",{className:"select-none",children:r(e)})})};function q$(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const uN=V.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),ac=()=>{const e=V.useContext(uN);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};q$(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const G$=24,K$=typeof window<"u"?f.useLayoutEffect:f.useEffect;function Ry(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}function Y$(){return Fg(/^Mac/)}function Q$(){return Fg(/^iPhone/)}function _y(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function X$(){return Fg(/^iPad/)||Y$()&&navigator.maxTouchPoints>1}function dN(){return Q$()||X$()}function Fg(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const Kf=typeof document<"u"&&window.visualViewport;function Oy(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function fN(e){for(Oy(e)&&(e=e.parentElement);e&&!Oy(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const J$=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Ac=0,Yf;function Z$(e={}){let{isDisabled:t}=e;K$(()=>{if(!t)return Ac++,Ac===1&&dN()&&(Yf=eU()),()=>{Ac--,Ac===0&&(Yf==null||Yf())}},[t])}function eU(){let e,t=0,n=h=>{e=fN(h.target),!(e===document.documentElement&&e===document.body)&&(t=h.changedTouches[0].pageY)},r=h=>{if(!e||e===document.documentElement||e===document.body){h.preventDefault();return}let m=h.changedTouches[0].pageY,p=e.scrollTop,b=e.scrollHeight-e.clientHeight;b!==0&&((p<=0&&m>t||p>=b&&m<t)&&h.preventDefault(),t=m)},o=h=>{let m=h.target;km(m)&&m!==document.activeElement&&(h.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},s=h=>{let m=h.target;km(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",Kf&&(Kf.height<window.innerHeight?requestAnimationFrame(()=>{Dy(m)}):Kf.addEventListener("resize",()=>Dy(m),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=Ry(tU(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=Ry(Mi(document,"touchstart",n,{passive:!1,capture:!0}),Mi(document,"touchmove",r,{passive:!1,capture:!0}),Mi(document,"touchend",o,{passive:!1,capture:!0}),Mi(document,"focus",s,!0),Mi(window,"scroll",i));return()=>{u(),d(),window.scrollTo(l,c)}}function tU(e,t,n){let r=e.style[t];return e.style[t]=n,()=>{e.style[t]=r}}function Mi(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}function Dy(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=fN(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let r=n.getBoundingClientRect().top,o=e.getBoundingClientRect().top,s=e.getBoundingClientRect().bottom;const i=n.getBoundingClientRect().bottom+G$;s>i&&(n.scrollTop+=o-r)}e=n.parentElement}}function km(e){return e instanceof HTMLInputElement&&!J$.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function nU(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function rU(...e){return t=>e.forEach(n=>nU(n,t))}function hN(...e){return f.useCallback(rU(...e),e)}const mN=new WeakMap;function Qt(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let r={};Object.entries(t).forEach(([o,s])=>{if(o.startsWith("--")){e.style.setProperty(o,s);return}r[o]=e.style[o],e.style[o]=s}),!n&&mN.set(e,r)}function oU(e,t){if(!e||!(e instanceof HTMLElement))return;let n=mN.get(e);n&&(e.style[t]=n[t])}const Xt=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Mc(e,t){if(!e)return null;const n=window.getComputedStyle(e),r=n.transform||n.webkitTransform||n.mozTransform;let o=r.match(/^matrix3d\((.+)\)$/);return o?parseFloat(o[1].split(", ")[Xt(t)?13:12]):(o=r.match(/^matrix\((.+)\)$/),o?parseFloat(o[1].split(", ")[Xt(t)?5:4]):null)}function sU(e){return 8*(Math.log(e+1)-2)}function Qf(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function aU(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const At={DURATION:.5,EASE:[.32,.72,0,1]},pN=.4,iU=.25,lU=100,gN=8,Is=16,Cm=26,Xf="vaul-dragging";function vN(e){const t=V.useRef(e);return V.useEffect(()=>{t.current=e}),V.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function cU({defaultProp:e,onChange:t}){const n=V.useState(e),[r]=n,o=V.useRef(r),s=vN(t);return V.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}function xN({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=cU({defaultProp:t,onChange:n}),s=e!==void 0,i=s?e:r,l=vN(n),c=V.useCallback(u=>{if(s){const h=typeof u=="function"?u(e):u;h!==e&&l(h)}else o(u)},[s,e,o,l]);return[i,c]}function uU({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:r,overlayRef:o,fadeFromIndex:s,onSnapPointChange:i,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[d,h]=xN({prop:e,defaultProp:n==null?void 0:n[0],onChange:t}),[m,p]=V.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);V.useEffect(()=>{function S(){p({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const b=V.useMemo(()=>d===(n==null?void 0:n[n.length-1])||null,[n,d]),x=V.useMemo(()=>n==null?void 0:n.findIndex(S=>S===d),[n,d]),w=n&&n.length>0&&(s||s===0)&&!Number.isNaN(s)&&n[s]===d||!n,g=V.useMemo(()=>{const S=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var I;return(I=n==null?void 0:n.map(P=>{const E=typeof P=="string";let _=0;if(E&&(_=parseInt(P,10)),Xt(l)){const L=E?_:m?P*S.height:0;return m?l==="bottom"?S.height-L:-S.height+L:L}const j=E?_:m?P*S.width:0;return m?l==="right"?S.width-j:-S.width+j:j}))!=null?I:[]},[n,m,c]),v=V.useMemo(()=>x!==null?g==null?void 0:g[x]:null,[g,x]),y=V.useCallback(S=>{var I;const P=(I=g==null?void 0:g.findIndex(E=>E===S))!=null?I:null;i(P),Qt(r.current,{transition:`transform ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,transform:Xt(l)?`translate3d(0, ${S}px, 0)`:`translate3d(${S}px, 0, 0)`}),g&&P!==g.length-1&&P!==s&&P<s?Qt(o.current,{transition:`opacity ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,opacity:"0"}):Qt(o.current,{transition:`opacity ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,opacity:"1"}),h(n==null?void 0:n[Math.max(P,0)])},[r.current,n,g,s,o,h]);V.useEffect(()=>{if(d||e){var S;const I=(S=n==null?void 0:n.findIndex(P=>P===e||P===d))!=null?S:-1;g&&I!==-1&&typeof g[I]=="number"&&y(g[I])}},[d,e,n,g,y]);function k({draggedDistance:S,closeDrawer:I,velocity:P,dismissible:E}){if(s===void 0)return;const _=l==="bottom"||l==="right"?(v??0)-S:(v??0)+S,j=x===s-1,L=x===0,D=S>0;if(j&&Qt(o.current,{transition:`opacity ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`}),!u&&P>2&&!D){E?I():y(g[0]);return}if(!u&&P>2&&D&&g&&n){y(g[n.length-1]);return}const z=g==null?void 0:g.reduce((R,T)=>typeof R!="number"||typeof T!="number"?R:Math.abs(T-_)<Math.abs(R-_)?T:R),A=Xt(l)?window.innerHeight:window.innerWidth;if(P>pN&&Math.abs(S)<A*.4){const R=D?1:-1;if(R>0&&b){y(g[n.length-1]);return}if(L&&R<0&&E&&I(),x===null)return;y(g[x+R]);return}y(z)}function C({draggedDistance:S}){if(v===null)return;const I=l==="bottom"||l==="right"?v-S:v+S;(l==="bottom"||l==="right")&&I<g[g.length-1]||(l==="top"||l==="left")&&I>g[g.length-1]||Qt(r.current,{transform:Xt(l)?`translate3d(0, ${I}px, 0)`:`translate3d(${I}px, 0, 0)`})}function N(S,I){if(!n||typeof x!="number"||!g||s===void 0)return null;const P=x===s-1;if(x>=s&&I)return 0;if(P&&!I)return 1;if(!w&&!P)return null;const _=P?x+1:x-1,j=P?g[_]-g[_-1]:g[_+1]-g[_],L=S/Math.abs(j);return P?1-L:L}return{isLastSnapPoint:b,activeSnapPoint:d,shouldFade:w,getPercentageDragged:N,setActiveSnapPoint:h,activeSnapPointIndex:x,onRelease:k,onDrag:C,snapPointsOffset:g}}const dU=()=>()=>{};function fU(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:r,noBodyStyles:o}=ac(),s=V.useRef(null),i=f.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-Cm)/window.innerWidth}V.useEffect(()=>{if(t&&n){s.current&&clearTimeout(s.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;aU(r&&!o?Qf(document.body,{background:"black"}):dU,Qf(c,{transformOrigin:Xt(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${At.DURATION}s`,transitionTimingFunction:`cubic-bezier(${At.EASE.join(",")})`}));const u=Qf(c,{borderRadius:`${gN}px`,overflow:"hidden",...Xt(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),s.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},At.DURATION*1e3)}}},[t,n,i])}let Li=null;function hU({isOpen:e,modal:t,nested:n,hasBeenOpened:r,preventScrollRestoration:o,noBodyStyles:s}){const[i,l]=V.useState(()=>typeof window<"u"?window.location.href:""),c=V.useRef(0),u=V.useCallback(()=>{if(_y()&&Li===null&&e&&!s){Li={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:h,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-h}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const p=m-window.innerHeight;p&&c.current>=m&&(document.body.style.top=`${-(c.current+p)}px`)}),300)}},[e]),d=V.useCallback(()=>{if(_y()&&Li!==null&&!s){const h=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Li),window.requestAnimationFrame(()=>{if(o&&i!==window.location.href){l(window.location.href);return}window.scrollTo(m,h)}),Li=null}},[i]);return V.useEffect(()=>{function h(){c.current=window.scrollY}return h(),window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}},[]),V.useEffect(()=>{n||!r||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{d()},500)):d())},[e,r,i,t,n,u,d]),{restorePositionSetting:d}}function mU({open:e,onOpenChange:t,children:n,onDrag:r,onRelease:o,snapPoints:s,shouldScaleBackground:i=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=iU,scrollLockTimeout:u=lU,dismissible:d=!0,handleOnly:h=!1,fadeFromIndex:m=s&&s.length-1,activeSnapPoint:p,setActiveSnapPoint:b,fixed:x,modal:w=!0,onClose:g,nested:v,noBodyStyles:y,direction:k="bottom",defaultOpen:C=!1,disablePreventScroll:N=!0,snapToSequentialPoint:S=!1,preventScrollRestoration:I=!1,repositionInputs:P=!0,onAnimationEnd:E,container:_,autoFocus:j=!1}){var L,D;const[z=!1,A]=xN({defaultProp:C,prop:e,onChange:je=>{t==null||t(je),!je&&!v&&xt(),setTimeout(()=>{E==null||E(je)},At.DURATION*1e3),je&&!w&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),je||(document.body.style.pointerEvents="auto")}}),[R,T]=V.useState(!1),[O,H]=V.useState(!1),[q,Z]=V.useState(!1),G=V.useRef(null),K=V.useRef(null),re=V.useRef(null),ie=V.useRef(null),Y=V.useRef(null),ne=V.useRef(!1),xe=V.useRef(null),le=V.useRef(0),se=V.useRef(!1),pe=V.useRef(0),ge=V.useRef(null),We=V.useRef(((L=ge.current)==null?void 0:L.getBoundingClientRect().height)||0),Xe=V.useRef(((D=ge.current)==null?void 0:D.getBoundingClientRect().width)||0),Pe=V.useRef(0),ze=V.useCallback(je=>{s&&je===nt.length-1&&(K.current=new Date)},[]),{activeSnapPoint:we,activeSnapPointIndex:be,setActiveSnapPoint:_e,onRelease:Ne,snapPointsOffset:nt,onDrag:He,shouldFade:Ye,getPercentageDragged:It}=uU({snapPoints:s,activeSnapPointProp:p,setActiveSnapPointProp:b,drawerRef:ge,fadeFromIndex:m,overlayRef:G,onSnapPointChange:ze,direction:k,container:_,snapToSequentialPoint:S});Z$({isDisabled:!z||O||!w||q||!R||!P||!N});const{restorePositionSetting:xt}=hU({isOpen:z,modal:w,nested:v,hasBeenOpened:R,preventScrollRestoration:I,noBodyStyles:y});function Dt(){return(window.innerWidth-Cm)/window.innerWidth}function oe(je){var U,$;!d&&!s||ge.current&&!ge.current.contains(je.target)||(We.current=((U=ge.current)==null?void 0:U.getBoundingClientRect().height)||0,Xe.current=(($=ge.current)==null?void 0:$.getBoundingClientRect().width)||0,H(!0),re.current=new Date,dN()&&window.addEventListener("touchend",()=>ne.current=!1,{once:!0}),je.target.setPointerCapture(je.pointerId),le.current=Xt(k)?je.pageY:je.pageX)}function me(je,U){var $,Ve;let Q=je;const lt=($=window.getSelection())==null?void 0:$.toString(),bt=ge.current?Mc(ge.current,k):null,ae=new Date;if(Q.hasAttribute("data-vaul-no-drag")||Q.closest("[data-vaul-no-drag]"))return!1;if(k==="right"||k==="left")return!0;if(K.current&&ae.getTime()-K.current.getTime()<500)return!1;if(bt!==null&&(k==="bottom"?bt>0:bt<0))return!0;if(lt&&lt.length>0)return!1;if(ae.getTime()-((Ve=Y.current)==null?void 0:Ve.getTime())<u&&bt===0||U)return Y.current=ae,!1;for(;Q;){if(Q.scrollHeight>Q.clientHeight){if(Q.scrollTop!==0)return Y.current=new Date,!1;if(Q.getAttribute("role")==="dialog")return!0}Q=Q.parentNode}return!0}function Ie(je){if(ge.current&&O){const U=k==="bottom"||k==="right"?1:-1,$=(le.current-(Xt(k)?je.pageY:je.pageX))*U,Ve=$>0,Q=s&&!d&&!Ve;if(Q&&be===0)return;const lt=Math.abs($),bt=document.querySelector("[data-vaul-drawer-wrapper]"),ae=k==="bottom"||k==="top"?We.current:Xe.current;let Me=lt/ae;const Je=It(lt,Ve);if(Je!==null&&(Me=Je),Q&&Me>=1||!ne.current&&!me(je.target,Ve))return;if(ge.current.classList.add(Xf),ne.current=!0,Qt(ge.current,{transition:"none"}),Qt(G.current,{transition:"none"}),s&&He({draggedDistance:$}),Ve&&!s){const mt=sU($),zt=Math.min(mt*-1,0)*U;Qt(ge.current,{transform:Xt(k)?`translate3d(0, ${zt}px, 0)`:`translate3d(${zt}px, 0, 0)`});return}const yt=1-Me;if((Ye||m&&be===m-1)&&(r==null||r(je,Me),Qt(G.current,{opacity:`${yt}`,transition:"none"},!0)),bt&&G.current&&i){const mt=Math.min(Dt()+Me*(1-Dt()),1),zt=8-Me*8,fn=Math.max(0,14-Me*14);Qt(bt,{borderRadius:`${zt}px`,transform:Xt(k)?`scale(${mt}) translate3d(0, ${fn}px, 0)`:`scale(${mt}) translate3d(${fn}px, 0, 0)`,transition:"none"},!0)}if(!s){const mt=lt*U;Qt(ge.current,{transform:Xt(k)?`translate3d(0, ${mt}px, 0)`:`translate3d(${mt}px, 0, 0)`})}}}V.useEffect(()=>{var je;function U(){if(!ge.current||!P)return;const $=document.activeElement;if(km($)||se.current){var Ve;const Q=((Ve=window.visualViewport)==null?void 0:Ve.height)||0,lt=window.innerHeight;let bt=lt-Q;const ae=ge.current.getBoundingClientRect().height||0,Me=ae>lt*.8;Pe.current||(Pe.current=ae);const Je=ge.current.getBoundingClientRect().top;if(Math.abs(pe.current-bt)>60&&(se.current=!se.current),s&&s.length>0&&nt&&be){const yt=nt[be]||0;bt+=yt}if(pe.current=bt,ae>Q||se.current){const yt=ge.current.getBoundingClientRect().height;let mt=yt;yt>Q&&(mt=Q-(Me?Je:Cm)),x?ge.current.style.height=`${yt-Math.max(bt,0)}px`:ge.current.style.height=`${Math.max(mt,Q-Je)}px`}else ge.current.style.height=`${Pe.current}px`;s&&s.length>0&&!se.current?ge.current.style.bottom="0px":ge.current.style.bottom=`${Math.max(bt,0)}px`}}return(je=window.visualViewport)==null||je.addEventListener("resize",U),()=>{var $;return($=window.visualViewport)==null?void 0:$.removeEventListener("resize",U)}},[be,s,nt]);function Ue(je){Te(),g==null||g(),je||A(!1),setTimeout(()=>{s&&_e(s[0])},At.DURATION*1e3)}function Ct(){if(!ge.current)return;const je=document.querySelector("[data-vaul-drawer-wrapper]"),U=Mc(ge.current,k);Qt(ge.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`}),Qt(G.current,{transition:`opacity ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,opacity:"1"}),i&&U&&U>0&&z&&Qt(je,{borderRadius:`${gN}px`,overflow:"hidden",...Xt(k)?{transform:`scale(${Dt()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Dt()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${At.DURATION}s`,transitionTimingFunction:`cubic-bezier(${At.EASE.join(",")})`},!0)}function Te(){!O||!ge.current||(ge.current.classList.remove(Xf),ne.current=!1,H(!1),ie.current=new Date)}function Ge(je){if(!O||!ge.current)return;ge.current.classList.remove(Xf),ne.current=!1,H(!1),ie.current=new Date;const U=Mc(ge.current,k);if(!me(je.target,!1)||!U||Number.isNaN(U)||re.current===null)return;const $=ie.current.getTime()-re.current.getTime(),Ve=le.current-(Xt(k)?je.pageY:je.pageX),Q=Math.abs(Ve)/$;if(Q>.05&&(Z(!0),setTimeout(()=>{Z(!1)},200)),s){Ne({draggedDistance:Ve*(k==="bottom"||k==="right"?1:-1),closeDrawer:Ue,velocity:Q,dismissible:d}),o==null||o(je,!0);return}if(k==="bottom"||k==="right"?Ve>0:Ve<0){Ct(),o==null||o(je,!0);return}if(Q>pN){Ue(),o==null||o(je,!1);return}var lt;const bt=Math.min((lt=ge.current.getBoundingClientRect().height)!=null?lt:0,window.innerHeight);var ae;const Me=Math.min((ae=ge.current.getBoundingClientRect().width)!=null?ae:0,window.innerWidth),Je=k==="left"||k==="right";if(Math.abs(U)>=(Je?Me:bt)*c){Ue(),o==null||o(je,!1);return}o==null||o(je,!0),Ct()}V.useEffect(()=>(z&&(Qt(document.documentElement,{scrollBehavior:"auto"}),K.current=new Date),()=>{oU(document.documentElement,"scrollBehavior")}),[z]);function it(je){const U=je?(window.innerWidth-Is)/window.innerWidth:1,$=je?-Is:0;xe.current&&window.clearTimeout(xe.current),Qt(ge.current,{transition:`transform ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,transform:`scale(${U}) translate3d(0, ${$}px, 0)`}),!je&&ge.current&&(xe.current=setTimeout(()=>{const Ve=Mc(ge.current,k);Qt(ge.current,{transition:"none",transform:Xt(k)?`translate3d(0, ${Ve}px, 0)`:`translate3d(${Ve}px, 0, 0)`})},500))}function Qe(je,U){if(U<0)return;const $=(window.innerWidth-Is)/window.innerWidth,Ve=$+U*(1-$),Q=-Is+U*Is;Qt(ge.current,{transform:Xt(k)?`scale(${Ve}) translate3d(0, ${Q}px, 0)`:`scale(${Ve}) translate3d(${Q}px, 0, 0)`,transition:"none"})}function Nn(je,U){const $=Xt(k)?window.innerHeight:window.innerWidth,Ve=U?($-Is)/$:1,Q=U?-Is:0;U&&Qt(ge.current,{transition:`transform ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,transform:Xt(k)?`scale(${Ve}) translate3d(0, ${Q}px, 0)`:`scale(${Ve}) translate3d(${Q}px, 0, 0)`})}return V.createElement(yg,{defaultOpen:C,onOpenChange:je=>{!d&&!je||(je?T(!0):Ue(!0),A(je))},open:z},V.createElement(uN.Provider,{value:{activeSnapPoint:we,snapPoints:s,setActiveSnapPoint:_e,drawerRef:ge,overlayRef:G,onOpenChange:t,onPress:oe,onRelease:Ge,onDrag:Ie,dismissible:d,handleOnly:h,isOpen:z,isDragging:O,shouldFade:Ye,closeDrawer:Ue,onNestedDrag:Qe,onNestedOpenChange:it,onNestedRelease:Nn,keyboardIsOpen:se,modal:w,snapPointsOffset:nt,direction:k,shouldScaleBackground:i,setBackgroundColorOnScale:l,noBodyStyles:y,container:_,autoFocus:j}},n))}const yN=V.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:r,onRelease:o,shouldFade:s,isOpen:i,modal:l}=ac(),c=hN(t,n),u=r&&r.length>0;return l?V.createElement(nc,{onMouseUp:o,ref:c,"data-vaul-overlay":"","data-vaul-snap-points":i&&u?"true":"false","data-vaul-snap-points-overlay":i&&s?"true":"false",...e}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});yN.displayName="Drawer.Overlay";const wN=V.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...r},o){const{drawerRef:s,onPress:i,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:d,modal:h,isOpen:m,direction:p,snapPoints:b,container:x,handleOnly:w,autoFocus:g}=ac(),[v,y]=V.useState(!1),k=hN(o,s),C=V.useRef(null),N=V.useRef(null),S=V.useRef(!1),I=b&&b.length>0;fU();const P=(_,j,L=0)=>{if(S.current)return!0;const D=Math.abs(_.y),z=Math.abs(_.x),A=z>D,R=["bottom","right"].includes(j)?1:-1;if(j==="left"||j==="right"){if(!(_.x*R<0)&&z>=0&&z<=L)return A}else if(!(_.y*R<0)&&D>=0&&D<=L)return!A;return S.current=!0,!0};V.useEffect(()=>{I&&window.requestAnimationFrame(()=>{y(!0)})},[]);function E(_){C.current=null,S.current=!1,l(_)}return V.createElement(rc,{"data-vaul-drawer-direction":p,"data-vaul-drawer":"","data-vaul-delayed-snap-points":v?"true":"false","data-vaul-snap-points":m&&I?"true":"false","data-vaul-custom-container":x?"true":"false",...r,ref:k,style:d&&d.length>0?{"--snap-point-height":`${d[0]}px`,...t}:t,onPointerDown:_=>{w||(r.onPointerDown==null||r.onPointerDown.call(r,_),C.current={x:_.pageX,y:_.pageY},i(_))},onOpenAutoFocus:_=>{n==null||n(_),g||_.preventDefault()},onPointerDownOutside:_=>{if(e==null||e(_),!h||_.defaultPrevented){_.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:_=>{if(!h){_.preventDefault();return}},onPointerMove:_=>{if(N.current=_,w||(r.onPointerMove==null||r.onPointerMove.call(r,_),!C.current))return;const j=_.pageY-C.current.y,L=_.pageX-C.current.x,D=_.pointerType==="touch"?10:2;P({x:L,y:j},p,D)?c(_):(Math.abs(L)>D||Math.abs(j)>D)&&(C.current=null)},onPointerUp:_=>{r.onPointerUp==null||r.onPointerUp.call(r,_),C.current=null,S.current=!1,l(_)},onPointerOut:_=>{r.onPointerOut==null||r.onPointerOut.call(r,_),E(N.current)},onContextMenu:_=>{r.onContextMenu==null||r.onContextMenu.call(r,_),E(N.current)}})});wN.displayName="Drawer.Content";const pU=250,gU=120,vU=V.forwardRef(function({preventCycle:e=!1,children:t,...n},r){const{closeDrawer:o,isDragging:s,snapPoints:i,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:d,isOpen:h,onPress:m,onDrag:p}=ac(),b=V.useRef(null),x=V.useRef(!1);function w(){if(x.current){y();return}window.setTimeout(()=>{g()},gU)}function g(){if(s||e||x.current){y();return}if(y(),(!i||i.length===0)&&u){o();return}if(l===i[i.length-1]&&u){o();return}const C=i.findIndex(S=>S===l);if(C===-1)return;const N=i[C+1];c(N)}function v(){b.current=window.setTimeout(()=>{x.current=!0},pU)}function y(){window.clearTimeout(b.current),x.current=!1}return V.createElement("div",{onClick:w,onPointerCancel:y,onPointerDown:k=>{d&&m(k),v()},onPointerMove:k=>{d&&p(k)},ref:r,"data-vaul-drawer-visible":h?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},V.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});vU.displayName="Drawer.Handle";function xU(e){const t=ac(),{container:n=t.container,...r}=e;return V.createElement(wg,{container:n,...r})}const Fr={Root:mU,Content:wN,Overlay:yN,Trigger:b1,Portal:xU,Close:bg,Title:oc,Description:sc},zg=({shouldScaleBackground:e=!0,...t})=>a.jsx(Fr.Root,{shouldScaleBackground:e,...t});zg.displayName="Drawer";const yU=Fr.Trigger,wU=Fr.Portal,bU=Fr.Close,bN=f.forwardRef(({className:e,...t},n)=>a.jsx(Fr.Overlay,{ref:n,className:ke("fixed inset-0 z-50 bg-black/80",e),...t}));bN.displayName=Fr.Overlay.displayName;const Bg=f.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(wU,{children:[a.jsx(bN,{}),a.jsxs(Fr.Content,{ref:r,className:ke("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...n,children:[a.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));Bg.displayName="DrawerContent";const Wg=({className:e,...t})=>a.jsx("div",{className:ke("grid gap-1.5 p-4 text-center sm:text-left",e),...t});Wg.displayName="DrawerHeader";const Hg=f.forwardRef(({className:e,...t},n)=>a.jsx(Fr.Title,{ref:n,className:ke("text-lg font-semibold leading-none tracking-tight",e),...t}));Hg.displayName=Fr.Title.displayName;const kU=f.forwardRef(({className:e,...t},n)=>a.jsx(Fr.Description,{ref:n,className:ke("text-sm text-muted-foreground",e),...t}));kU.displayName=Fr.Description.displayName;const CU=({isOpen:e,onClose:t,fieldName:n,fieldLabel:r,currentValue:o,onSave:s,placeholder:i,inputType:l="text"})=>{const[c,u]=f.useState(o),{toast:d}=pi();f.useEffect(()=>{u(o)},[o]);const h=()=>{const p=c.trim();if(!p){d({title:"Erreur",description:`Le ${r.toLowerCase()} ne peut pas tre vide`,variant:"destructive"});return}if(n==="phone"&&!/^[0-9]{9}$/.test(p)){d({title:"Erreur",description:"Le numro de tlphone doit contenir 9 chiffres",variant:"destructive"});return}s(p),d({title:"Modification enregistre",description:`${r} mis  jour avec succs`}),t()},m=()=>{u(o),t()};return a.jsx(Gn,{open:e,onOpenChange:m,children:a.jsxs(On,{className:"max-w-sm mx-auto bg-white rounded-2xl shadow-xl border-0",children:[a.jsx(sr,{children:a.jsxs(ar,{className:"text-lg font-semibold text-gray-900 text-left",children:["Modifier ",r.toLowerCase()]})}),a.jsxs("div",{className:"space-y-4 mt-4",children:[a.jsxs("div",{children:[a.jsx(Ts,{htmlFor:n,className:"text-sm font-medium text-gray-900",children:r}),a.jsx(el,{id:n,type:l,value:c,onChange:p=>u(p.target.value),placeholder:i||`Entrez votre ${r.toLowerCase()}`,className:"mt-2 border-2 border-pink-200 focus:border-pink-400 rounded-lg",autoFocus:!0}),n==="phone"&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: 9 chiffres sans indicatif (ex: 123456789)"})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx(fe,{variant:"outline",onClick:m,className:"flex-1 h-12 rounded-xl border-gray-200 text-gray-600 hover:bg-gray-50",children:"Annuler"}),a.jsx(fe,{onClick:h,className:"flex-1 h-12 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-medium",children:"Enregistrer"})]})]})]})})},ki=({isOpen:e,onClose:t,onLogout:n,onOpenHelp:r})=>{const o=Cn(),{toast:s}=pi(),{user:i,updateUser:l,logout:c}=cr(),{info:u}=Sn(),[d,h]=f.useState({isOpen:!1,field:"firstName",label:""}),m=()=>(u==null?void 0:u.type)==="Voyageur"?"Voyageur":"Agent de mnage",p=(N,S)=>{if(S)return{countryCode:S,number:N};if(N.startsWith("+")){const I=N.match(/^\+(\d{1,3})/);if(I){const P=`+${I[1]}`,E=N.slice(I[0].length);return{countryCode:P,number:E}}}return{countryCode:"+33",number:N}},b=(N,S)=>{const{countryCode:I,number:P}=p(N,S);return P.length===9?`${I} ${P.charAt(0)} ${P.slice(1,3)} ${P.slice(3,5)} ${P.slice(5,7)} ${P.slice(7,9)}`:N},x=async()=>{if(i!=null&&i.phone)try{const{countryCode:N,number:S}=p(i.phone,i.phoneIndex),I=`${N}${S}`;await navigator.clipboard.writeText(I),s({title:"Numro copi",description:"Le numro de tlphone a t copi dans le presse-papiers"})}catch{s({title:"Erreur",description:"Impossible de copier le numro",variant:"destructive"})}},w=()=>{if(i!=null&&i.phone){const{countryCode:N,number:S}=p(i.phone,i.phoneIndex),I=`tel:${N}${S}`;window.location.href=I}},g=(N,S)=>{h({isOpen:!0,field:N,label:S})},v=(N,S)=>{l({[N]:S}),h({isOpen:!1,field:"firstName",label:""})},y=()=>{h({isOpen:!1,field:"firstName",label:""})},k=()=>{s({title:"Mes rapports",description:"Affichage des rapports bientt disponible"})},C=async()=>{try{await c(),t(),s({title:"Dconnexion",description:"Vous avez t dconnect avec succs"});const N=localStorage.getItem("activeParcoursId");N?o(`/welcome?parcours=${N}`,{replace:!0}):o("/welcome",{replace:!0})}catch(N){console.error(" Erreur lors de la dconnexion:",N),s({title:"Erreur",description:"Erreur lors de la dconnexion",variant:"destructive"})}};return a.jsx(zg,{open:e,onOpenChange:t,children:a.jsxs(Bg,{className:"h-[85vh] bg-white rounded-t-2xl",children:[a.jsx(Wg,{className:"border-b border-border/20 pb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ua,{user:i,size:"md"}),a.jsxs("div",{className:"text-left",children:[a.jsx(Hg,{className:"text-lg font-semibold text-foreground",children:i!=null&&i.firstName&&(i!=null&&i.lastName)?`${i.firstName} ${i.lastName}`:"Profil agent"}),a.jsx(De,{variant:"secondary",className:"mt-1 bg-muted text-muted-foreground text-xs",children:m()})]})]}),a.jsx(bU,{asChild:!0,children:a.jsxs(fe,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[a.jsx(no,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Fermer"})]})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Informations personnelles"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center py-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Prnom"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:(i==null?void 0:i.firstName)||""}),a.jsx("button",{onClick:()=>g("firstName","Prnom"),className:"p-1 hover:bg-muted rounded transition-colors","aria-label":"Modifier le prnom",children:a.jsx(If,{className:"h-3 w-3 text-muted-foreground"})})]})]}),a.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-border/20",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Nom"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:(i==null?void 0:i.lastName)||""}),a.jsx("button",{onClick:()=>g("lastName","Nom"),className:"p-1 hover:bg-muted rounded transition-colors","aria-label":"Modifier le nom",children:a.jsx(If,{className:"h-3 w-3 text-muted-foreground"})})]})]}),a.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-border/20",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Tlphone"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:w,className:"text-sm font-medium text-[#5C6BC0] hover:text-[#3F51B5] transition-colors",disabled:!(i!=null&&i.phone),children:i!=null&&i.phone?b(i.phone,i.phoneIndex):""}),(i==null?void 0:i.phone)&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:x,className:"p-1 hover:bg-muted rounded transition-colors","aria-label":"Copier le numro",children:a.jsx(em,{className:"h-3 w-3 text-muted-foreground"})}),a.jsx("button",{onClick:w,className:"p-1 hover:bg-muted rounded transition-colors","aria-label":"Appeler",children:a.jsx(VT,{className:"h-3 w-3 text-[#5C6BC0]"})})]}),a.jsx("button",{onClick:()=>g("phone","Tlphone"),className:"p-1 hover:bg-muted rounded transition-colors","aria-label":"Modifier le tlphone",children:a.jsx(If,{className:"h-3 w-3 text-muted-foreground"})})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Mes rapports"}),a.jsx("div",{className:"space-y-2",children:a.jsxs(fe,{variant:"ghost",onClick:k,className:"w-full justify-start h-12 px-3 text-sm",children:[a.jsx(zl,{className:"h-4 w-4 mr-3 text-[#5C6BC0]"}),"Historique de rapport(s)"]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"}),a.jsx("div",{className:"space-y-2",children:a.jsxs(fe,{variant:"ghost",onClick:C,className:"w-full justify-start h-12 px-3 text-sm text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(zT,{className:"h-4 w-4 mr-3"}),"Se dconnecter"]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Aide"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{variant:"ghost",onClick:()=>{window.open("https://www.checkeasy.co/tutoriel-check-easy","_blank")},className:"w-full justify-start h-12 px-3 text-sm",children:[a.jsx(Cx,{className:"h-4 w-4 mr-3 text-[#5C6BC0]"}),"Tutoriel"]}),a.jsxs(fe,{variant:"ghost",onClick:()=>{window.open("https://www.checkeasy.co/faq","_blank")},className:"w-full justify-start h-12 px-3 text-sm",children:[a.jsx(Cx,{className:"h-4 w-4 mr-3 text-[#5C6BC0]"}),"FAQ"]})]})]})]}),a.jsx(CU,{isOpen:d.isOpen,onClose:y,fieldName:d.field,fieldLabel:d.label,currentValue:(i==null?void 0:i[d.field])||"",onSave:N=>v(d.field,N),inputType:d.field==="phone"?"tel":"text"})]})})},SU=yg,NU=wg,kN=f.forwardRef(({className:e,...t},n)=>a.jsx(nc,{className:ke("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));kN.displayName=nc.displayName;const IU=ps("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),CN=f.forwardRef(({side:e="right",className:t,children:n,...r},o)=>a.jsxs(NU,{children:[a.jsx(kN,{}),a.jsxs(rc,{ref:o,className:ke(IU({side:e}),t),...r,children:[n,a.jsxs(bg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(no,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));CN.displayName=rc.displayName;const SN=({className:e,...t})=>a.jsx("div",{className:ke("flex flex-col space-y-2 text-center sm:text-left",e),...t});SN.displayName="SheetHeader";const NN=f.forwardRef(({className:e,...t},n)=>a.jsx(oc,{ref:n,className:ke("text-lg font-semibold text-foreground",e),...t}));NN.displayName=oc.displayName;const jU=f.forwardRef(({className:e,...t},n)=>a.jsx(sc,{ref:n,className:ke("text-sm text-muted-foreground",e),...t}));jU.displayName=sc.displayName;const Vg=({isOpen:e,onClose:t})=>{const n=[{id:"tutorial",icon:_T,title:"Tutoriel",description:"Parcours guid pour bien commencer",action:()=>{console.log("Tutorial clicked"),t()}},{id:"use-cases",icon:Zb,title:"Cas d'usage",description:"Bonnes pratiques et exemples",action:()=>{console.log("Use cases clicked"),t()}},{id:"faq",icon:BT,title:"FAQ",description:"Questions frquentes",action:()=>{console.log("FAQ clicked"),t()}}],r=o=>{console.log(`help_${o.id.replace("-","")}_clicked`),o.action()};return a.jsx(SU,{open:e,onOpenChange:t,children:a.jsxs(CN,{side:"bottom",className:"h-[85vh] rounded-t-2xl border-0 p-0",children:[a.jsx("div",{className:"mx-auto mt-2 h-1 w-10 rounded-full bg-muted"}),a.jsx(SN,{className:"px-6 pt-6 pb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(NN,{className:"text-lg font-semibold",children:"Aide"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0 hover:bg-muted rounded-full",children:a.jsx(no,{className:"h-4 w-4"})})]})}),a.jsx("div",{className:"px-6 pb-safe",children:a.jsx("div",{className:"space-y-1",children:n.map((o,s)=>a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>r(o),className:"w-full flex items-center gap-4 p-4 hover:bg-muted/50 transition-colors rounded-lg group",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-secondary/20 rounded-full flex items-center justify-center",children:a.jsx(o.icon,{className:"w-5 h-5 text-secondary"})}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("div",{className:"font-medium text-foreground",children:o.title}),a.jsx("div",{className:"text-sm text-muted-foreground",children:o.description})]}),a.jsx(Zn,{className:"w-4 h-4 text-muted-foreground group-hover:text-foreground transition-colors"})]}),s<n.length-1&&a.jsx(Eg,{className:"ml-14 mr-4"})]},o.id))})})]})})},Ci=({onClick:e,disabled:t=!1,variant:n="outline",size:r="md",className:o="",showIcon:s=!0})=>a.jsxs(fe,{onClick:e,disabled:t,variant:n,className:`py-2.5 sm:h-10 h-8 text-xs font-medium transition-all duration-300 px-3 gap-1.5 ${o}`,children:[s&&a.jsx(_n,{className:"w-3 h-3 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:"Signaler un problme"})]});function di(e){if(console.log(" Extraction des donnes du logement depuis rawData:",e),!e)return console.warn(" rawData est null ou undefined, utilisation des donnes par dfaut"),PU();const t=e.logementAdress||"",n=e.logementWifiName||"",r=e.logementWifiPassword||"",o=e.logementInfoParking||"",s=e.logementInfoEntrance||"",i=e.logementEntranceHour||"15:00",l=e.logementExitHour||"11:00",c=e.logementContentview,u=EU(c);return console.log(" Donnes extraites:",{address:t,wifiName:n,wifiPassword:r?"***":"(vide)",parking:o,entrance:s,entranceHour:i,exitHour:l,visibleSections:u}),{address:t||"Adresse non renseigne",wifi:{network:n||"Rseau WiFi non renseign",password:r||"Mot de passe non renseign"},parking:o||"Informations de parking non renseignes",access:s||"Informations d'accs non renseignes",airbnbLink:"",checkIn:i,checkOut:l,visibleSections:u}}function EU(e){if(e===void 0)return console.log(" logementContentview absent  Affichage de toutes les sections (rtrocompatibilit)"),["adresse","wifi","parking","access","airbnb","checkin-checkout"];if(e===""||e.trim()==="")return console.log(" logementContentview vide  Aucune section affiche"),[];const t=e.split(",").map(r=>r.trim().toLowerCase()),n=[];return t.forEach(r=>{r.includes("adresse")?n.push("adresse"):r.includes("wi-fi")||r.includes("wifi")?n.push("wifi"):r.includes("garer")||r.includes("parking")?n.push("parking"):r.includes("rentrer")||r.includes("accs")||r.includes("acces")?n.push("access"):r.includes("annonce")||r.includes("airbnb")||r.includes("lien")?n.push("airbnb"):(r.includes("check-in")||r.includes("check-out")||r.includes("horaire"))&&n.push("checkin-checkout")}),console.log(" Sections visibles parses:",{original:e,normalized:n}),n}function PU(){return{address:"Adresse non disponible",wifi:{network:"Rseau WiFi non configur",password:"Mot de passe non disponible"},parking:"Informations de parking non disponibles",access:"Informations d'accs non disponibles",airbnbLink:"",checkIn:"15:00",checkOut:"11:00",visibleSections:["adresse","wifi","parking","access","airbnb","checkin-checkout"]}}const TU=(e,t,n,r,o,s,i)=>{const l=h=>{const m=new URLSearchParams(window.location.search),p=m.get("checkid"),b=m.get("parcours"),x=r||b,w=i||p;if(console.log(" CheckEasy: Navigation avec prservation des paramtres:",{path:h,effectiveParcoursId:x,effectiveCheckId:w}),!x){console.error(" ERREUR CRITIQUE: Aucun parcoursId disponible pour la navigation !"),n(h);return}const g=w?Pt.buildUrl(h,x,w):`${h}?parcours=${x}`;console.log(" CheckEasy: Navigation vers:",g),n(g)};if(!e||!t)return{buttonText:"Commencer",navigationAction:()=>n("/"),shouldShowInitialStateScreen:!1,flowDescription:"Configuration par dfaut"};const c=e==="AGENT",u=e==="GESTIONNAIRE",d=t.takePicture==="checkInAndCheckOut";return(c||u)&&t.takePicture==="checkOutOnly"?{buttonText:"Finaliser mon mnage",navigationAction:()=>l("/checkout"),shouldShowInitialStateScreen:!1,flowDescription:"Agent de mnage - Photos de sortie uniquement"}:(c||u)&&t.takePicture==="checkInOnly"?{buttonText:"Finaliser mon mnage",navigationAction:()=>l("/checkout"),shouldShowInitialStateScreen:!1,flowDescription:"Agent de mnage - Finalisation uniquement (checkInOnly - compatibilit)"}:(c||u)&&d?{buttonText:"Commencer le mnage",navigationAction:()=>l("/etat-initial"),shouldShowInitialStateScreen:!0,flowDescription:"Agent de mnage - Contrle d'entre puis sortie"}:e==="CLIENT"&&t.takePicture==="checkOutOnly"?{buttonText:o?"Continuer mon tat des lieux de sortie":"Commencer mon tat des lieux de sortie",navigationAction:()=>l("/checkout"),shouldShowInitialStateScreen:!1,flowDescription:"Voyageur - tat des lieux de sortie uniquement"}:e==="CLIENT"&&t.takePicture==="checkInOnly"?{buttonText:"Commencer mon check-in",navigationAction:()=>l("/checkin"),shouldShowInitialStateScreen:!1,flowDescription:"Voyageur - Check-in uniquement (checkInOnly - compatibilit)"}:e==="CLIENT"&&d?{buttonText:o?"Continuer mon tat des lieux d'entre":"Commencer mon tat des lieux d'entre",navigationAction:()=>l("/checkin"),shouldShowInitialStateScreen:!1,flowDescription:"Voyageur - tat des lieux d'entre et sortie"}:{buttonText:"Commencer le parcours",navigationAction:()=>l("/"),shouldShowInitialStateScreen:!1,flowDescription:"Configuration non reconnue"}},RU=(e,t)=>{const n=[];return e||n.push("Type d'utilisateur non dfini"),t?(["checkOutOnly","checkInOnly","checkInAndCheckOut"].includes(t.takePicture)||n.push(`Valeur takePicture invalide: ${t.takePicture}`),["Mnage","Voyageur","Voyage","Location","Cleaning","Guest"].includes(t.type),(e==="AGENT"||e==="GESTIONNAIRE")&&t.type,e==="CLIENT"&&t.type,{isValid:n.length===0,errors:n}):(n.push("Informations de parcours non disponibles"),{isValid:!1,errors:n})},_U={id:"report-123",status:"completed",summary:{overallStatus:"clean",issuesDetected:0,cleaningScore:95},roomAnalysis:[{roomName:"Salon",status:"clean",issues:[],cleaningScore:98},{roomName:"Cuisine",status:"clean",issues:[],cleaningScore:92}],detectedIssues:[],generatedAt:new Date().toISOString()};function IN(){const e=Cn(),{user:t,logout:n}=cr(),{currentCheckId:r,isCheckIdActive:o,createNewCheckId:s,setActiveCheckId:i}=Kn(),{toast:l}=pi(),c=f.useRef(window.location.href);f.useEffect(()=>{const be=setInterval(()=>{const _e=window.location.href;_e!==c.current&&(console.log(" CHECKEASY URL CHANGED DETECTED:",{from:c.current,to:_e,hasCheckId:_e.includes("checkid"),hasParcoursId:_e.includes("parcours"),timestamp:new Date().toISOString()}),c.current=_e)},100);return()=>clearInterval(be)},[]);const[u,d]=f.useState("info"),[h,m]=f.useState({}),[p,b]=f.useState(null),[x,w]=f.useState(!1),[g,v]=f.useState(!0),y=Ot(),k=bs(),{loading:C,error:N,parcoursInfo:S,rooms:I,stats:P,loadParcours:E,clearParcours:_,currentParcours:j}=xs(),{isLoaded:L,apiSignalements:D}=Sn(),{getPendingSignalements:z}=To(),A=Pt.extractUrlParams(y.search),R=A.parcoursId,T=A.checkId;ys(T);const{parcours:O,loading:H}=ws(R,void 0);f.useEffect(()=>{R&&!L&&E(R).catch(we=>{console.error(" CheckEasy: Erreur chargement parcours:",we)})},[R,L,E]),f.useEffect(()=>{if(S&&j&&!R){const we=r||T,be=we?Pt.buildUrl(y.pathname,j.id,we):`${y.pathname}?parcours=${j.id}`;console.log(" CheckEasy: Mise  jour URL sans rechargement:",be),window.history.replaceState({},"",be)}},[S,j,r,R,T,y.pathname]);const q=f.useMemo(()=>{var be;let we=null;return(be=O==null?void 0:O.adaptedData)!=null&&be.parcoursInfo?we=O.adaptedData.parcoursInfo:S&&(we=S),we?(console.log(" CheckEasy: Donnes parcours utilises:",{takePicture:we.takePicture,logement:we.logement,type:we.type,source:O?"unified":"global"}),we):null},[S,O]),Z=RU(t==null?void 0:t.type,q),[G,K]=f.useState(!1);f.useEffect(()=>{(async()=>{if(!(j!=null&&j.id)){K(!1);return}try{if(P&&P.totalTasks>0){K(!0);return}K(!1)}catch{K(!1)}})()},[j==null?void 0:j.id,P]);const re=TU(t==null?void 0:t.type,q,e,j==null?void 0:j.id,G,o,r);f.useEffect(()=>{q&&(t!=null&&t.type)},[q,t==null?void 0:t.type,re]),f.useEffect(()=>{console.log(" USEEFFECT 3 (ensureCheckIdExists) TRIGGERED"),(async()=>{if(!(!t||!j||!q)&&!T&&!(o&&r))try{const be=t.type==="CLIENT"?"checkin":"checkout",_e=await s({firstName:t.firstName,lastName:t.lastName,phone:t.phone,type:t.type},{id:j.id,name:q.name,type:q.type,logement:q.logement,takePicture:q.takePicture},be);l({title:"Session initialise",description:`CheckID: ${_e.split("_")[1]}`})}catch(be){console.error(" CheckEasy: Erreur cration auto CheckID:",be)}})()},[t,j,q,o,r,s,l]);const ie=j!=null&&j.rawData?di(j.rawData):di(null),Y=I.map(we=>{var be,_e,Ne,nt,He;return{id:we.id,name:we.nom,photos:((_e=(be=we.photoReferences)==null?void 0:be.checkin)==null?void 0:_e.map(Ye=>Ye.url))||[],instructions:((Ne=we.tasks)==null?void 0:Ne.filter(Ye=>Ye.type==="checkbox").map(Ye=>Ye.label))||[],checkpoints:((nt=we.tasks)==null?void 0:nt.filter(Ye=>Ye.type==="checkbox").map(Ye=>Ye.description||Ye.label))||[],generalInstructions:[we.cleaningInfo],cleaningInfo:we.cleaningInfo,roomInfo:we.roomInfo,specificTasks:((He=we.tasks)==null?void 0:He.map(Ye=>({id:Ye.id,task:Ye.label,completed:Ye.completed||!1,description:Ye.description})))||[]}}),[ne,xe]=f.useState(!1),{openReportModal:le}=ks(),{flowState:se,updateCleaningProgress:pe,getStageConfig:ge}=lN();Y.reduce((we,be)=>we+be.specificTasks.length,0),Y.reduce((we,be)=>we+be.specificTasks.filter(_e=>_e.completed).length,0),f.useEffect(()=>{Z.isValid||Z.errors.forEach(we=>{l({title:"Configuration invalide",description:we,variant:"destructive"})})},[Z.isValid,Z.errors,l]);const[We]=f.useState([{id:"1",titre:"Fuite d'eau sous le lavabo, le sol est mouill",piece:"Salle de bain",roomId:"salle_de_bain",origine:"Voyageur",commentaire:"Il y a une fuite d'eau importante sous le lavabo",status:"A_TRAITER",priorite:!0,flowType:"checkin",created_at:"2025-01-07T14:30:00Z",updated_at:"2025-01-07T14:30:00Z"},{id:"2",titre:"Rfrigrateur ne fonctionne plus, aliments  risque",piece:"Cuisine",roomId:"cuisine",origine:"Agent Mnage",commentaire:"Le rfrigrateur est compltement en panne",status:"A_TRAITER",priorite:!1,flowType:"checkin",created_at:"2025-01-07T09:15:00Z",updated_at:"2025-01-07T09:15:00Z"}]);Y.length*2,Y.length*2,Object.values(h).reduce((we,be)=>we+be,0);const Xe=z(),Pe=D.filter(we=>we.status==="A_TRAITER"),ze=Xe.length+Pe.length;return!Z.isValid&&!C&&!H?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:a.jsxs($e,{className:"max-w-md w-full",children:[a.jsx(Lt,{children:a.jsxs($t,{className:"text-red-600 flex items-center gap-2",children:[a.jsx(_n,{className:"h-5 w-5"}),"Configuration Invalide"]})}),a.jsxs(tt,{className:"space-y-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Les donnes de parcours ne permettent pas de dterminer le flux appropri :"}),a.jsx("ul",{className:"text-sm space-y-1",children:Z.errors.map((we,be)=>a.jsxs("li",{className:"text-red-600",children:[" ",we]},be))}),a.jsx(fe,{onClick:()=>e("/welcome"),className:"w-full",children:"Retour  la slection"})]})]})}):(C||H)&&!S?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Chargement du parcours..."})]})}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx("div",{className:"bg-background px-4 py-3",children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx("div",{className:"mb-4",children:a.jsx(F$,{})}),a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-semibold text-foreground",children:(t==null?void 0:t.type)==="AGENT"||(t==null?void 0:t.type)==="GESTIONNAIRE"?"Mnage en cours":(t==null?void 0:t.type)==="CLIENT"?(q==null?void 0:q.takePicture)==="checkOutOnly"?"tat des lieux de sortie":(q==null?void 0:q.takePicture)==="checkInOnly"?"Check-in en cours":"Sjour en cours":"Parcours en cours"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:(ie==null?void 0:ie.address)||(q==null?void 0:q.logement)||"Adresse non disponible"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:(()=>{if((t==null?void 0:t.type)==="AGENT"||(t==null?void 0:t.type)==="GESTIONNAIRE"){if((q==null?void 0:q.takePicture)==="checkOutOnly")return"Validation du mnage";if((q==null?void 0:q.takePicture)==="checkInOnly")return"Contrle de l'tat initial et validation du mnage";if((q==null?void 0:q.takePicture)==="checkInAndCheckOut")return"Contrle de l'tat du logement et validation du mnage"}return(q==null?void 0:q.takePicture)==="checkOutOnly"?(t==null?void 0:t.type)==="CLIENT"?"tat des lieux  la sortie":"Finalisation et photos de sortie":(q==null?void 0:q.takePicture)==="checkInOnly"?(t==null?void 0:t.type)==="CLIENT"?"tat des lieux  l'entre":"Finalisation du mnage":(q==null?void 0:q.takePicture)==="checkInAndCheckOut"?(t==null?void 0:t.type)==="CLIENT"?"tat des lieux  l'entre et  la sortie":"Contrle d'tat initial puis mnage et sortie":"Parcours - Mode de photos non dfini"})()}),C&&a.jsx("div",{className:"text-xs text-blue-600 mt-1",children:" Chargement des donnes..."}),N&&a.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[" ",N]})]}),a.jsx(ua,{user:t,size:"sm",onClick:()=>w(!0)})]})]})}),a.jsxs("div",{className:"max-w-md mx-auto px-4 space-y-2",children:[a.jsxs(Gn,{children:[a.jsx(Js,{asChild:!0,children:a.jsx($e,{className:"border border-border/50 cursor-pointer hover:bg-muted/50 transition-colors",children:a.jsxs(Lt,{className:"py-3",children:[a.jsxs($t,{className:"text-sm flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(oo,{className:"h-4 w-4 text-primary"}),"Informations utiles"]}),a.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[ie.visibleSections.includes("adresse")&&a.jsxs(De,{variant:"outline",className:"text-xs flex items-center gap-1.5 justify-start",children:[a.jsx(La,{className:"h-3 w-3"}),"Adresse"]}),ie.visibleSections.includes("wifi")&&a.jsxs(De,{variant:"outline",className:"text-xs flex items-center gap-1.5 justify-start",children:[a.jsx(hd,{className:"h-3 w-3"}),"WiFi"]}),ie.visibleSections.includes("parking")&&a.jsxs(De,{variant:"outline",className:"text-xs flex items-center gap-1.5 justify-start",children:[a.jsx(dd,{className:"h-3 w-3"}),"Se garer"]}),ie.visibleSections.includes("access")&&a.jsxs(De,{variant:"outline",className:"text-xs flex items-center gap-1.5 justify-start",children:[a.jsx(Op,{className:"h-3 w-3"}),"Accs"]}),ie.visibleSections.includes("airbnb")&&a.jsxs(De,{variant:"outline",className:"text-xs flex items-center gap-1.5 justify-start",children:[a.jsx(Yb,{className:"h-3 w-3"}),"Annonce"]}),ie.visibleSections.includes("checkin-checkout")&&a.jsxs(De,{variant:"outline",className:"text-xs flex items-center gap-1.5 justify-start",children:[a.jsx(sa,{className:"h-3 w-3"}),"Check-in/out"]})]})]})})}),a.jsxs(On,{className:"max-w-sm max-h-[80vh] overflow-y-auto",children:[a.jsx(sr,{children:a.jsx(ar,{children:"Informations utiles"})}),a.jsx(jg,{propertyData:ie})]})]}),a.jsx($g,{flowType:"checkin",children:a.jsx($e,{className:"border border-border/50 cursor-pointer hover:bg-muted/50 transition-colors",children:a.jsx(Lt,{className:"py-3",children:a.jsxs($t,{className:"text-sm flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(kt,{className:"h-4 w-4 text-primary"}),"Fiche du logement"]}),a.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]})})})}),a.jsx(Ug,{flowType:"checkout",children:a.jsx($e,{className:"border border-border/50 cursor-pointer hover:bg-muted/50 transition-colors",children:a.jsx(Lt,{className:"py-3",children:a.jsxs($t,{className:"text-sm flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(si,{className:"h-4 w-4 text-primary"}),"Consigne pour le mnage"]}),a.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]})})})}),ze>0&&a.jsx($e,{className:"border border-border/50 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>k("/signalements-a-traiter"),children:a.jsx(Lt,{className:"py-3",children:a.jsxs($t,{className:"text-sm flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_n,{className:"h-4 w-4 text-orange-500"}),"Signalements en cours",a.jsx(De,{variant:"destructive",className:"ml-2 text-xs",children:ze})]}),a.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]})})})]}),a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-background/90 backdrop-blur-sm border-t border-border/30 shadow-[0_-2px_12px_-2px_rgba(0,0,0,0.08)] px-4 py-3 pb-4 space-y-3 safe-area-inset-bottom",children:[a.jsxs(fe,{onClick:()=>{se.currentStage==="completed"?l({title:"Rapport gnr",description:"Le rapport IA est maintenant disponible"}):re.navigationAction()},className:"w-full h-12 font-medium text-base rounded-xl transition-all duration-300 bg-gradient-primary hover:shadow-glow hover:shadow-glow hover:scale-[1.02] active:scale-[0.98] shadow-card flex items-center justify-center gap-2",children:[a.jsx(kt,{className:"h-5 w-5"}),re.buttonText]}),a.jsx("div",{className:"flex justify-center",children:a.jsx(Ci,{onClick:()=>le(),variant:"outline",size:"md",className:"w-full"})})]}),se.currentStage==="completed"&&a.jsxs(Gn,{children:[a.jsx(Js,{asChild:!0,children:a.jsxs(fe,{variant:"outline",className:"w-full",children:[a.jsx(zl,{className:"h-4 w-4 mr-2"}),"Voir le rapport IA"]})}),a.jsxs(On,{className:"max-w-sm max-h-[80vh] overflow-y-auto",children:[a.jsx(sr,{children:a.jsx(ar,{children:"Rapport IA"})}),a.jsx(b$,{report:_U,onDownloadReport:()=>{l({title:"Tlchargement",description:"Le rapport sera disponible sous peu"})}})]})]}),a.jsx(ki,{isOpen:x,onClose:()=>w(!1),onLogout:n}),a.jsx(Vg,{isOpen:ne,onClose:()=>xe(!1)}),p&&a.jsx(Gn,{open:!!p,onOpenChange:()=>b(null),children:a.jsx(On,{className:"max-w-[90vw] max-h-[90vh] p-0 border-0 bg-black/90",children:a.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[a.jsx("img",{src:p,alt:"Photo de rfrence",className:"max-w-full max-h-full object-contain"}),a.jsx(fe,{variant:"outline",size:"icon",className:"absolute top-4 right-4 bg-background/80 hover:bg-background",onClick:()=>b(null),children:""})]})})})]})}const OU="modulepreload",DU=function(e){return"/"+e},Ay={},Wt=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=DU(c),c in Ay)return;Ay[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":OU,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})};function jN(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var AU=[" ","Enter","ArrowUp","ArrowDown"],MU=[" ","Enter"],Zs="Select",[Fd,zd,LU]=Ul(Zs),[Si]=kn(Zs,[LU,gs]),Bd=gs(),[$U,Cs]=Si(Zs),[UU,FU]=Si(Zs),EN=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:s,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:p,form:b}=e,x=Bd(t),[w,g]=f.useState(null),[v,y]=f.useState(null),[k,C]=f.useState(!1),N=bi(u),[S,I]=xr({prop:r,defaultProp:o??!1,onChange:s,caller:Zs}),[P,E]=xr({prop:i,defaultProp:l,onChange:c,caller:Zs}),_=f.useRef(null),j=w?b||!!w.closest("form"):!0,[L,D]=f.useState(new Set),z=Array.from(L).map(A=>A.props.value).join(";");return a.jsx(Wp,{...x,children:a.jsxs($U,{required:p,scope:t,trigger:w,onTriggerChange:g,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:k,onValueNodeHasChildrenChange:C,contentId:tr(),value:P,onValueChange:E,open:S,onOpenChange:I,dir:N,triggerPointerDownPosRef:_,disabled:m,children:[a.jsx(Fd.Provider,{scope:t,children:a.jsx(UU,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(A=>{D(R=>new Set(R).add(A))},[]),onNativeOptionRemove:f.useCallback(A=>{D(R=>{const T=new Set(R);return T.delete(A),T})},[]),children:n})}),j?a.jsxs(JN,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:P,onChange:A=>E(A.target.value),disabled:m,form:b,children:[P===void 0?a.jsx("option",{value:""}):null,Array.from(L)]},z):null]})})};EN.displayName=Zs;var PN="SelectTrigger",TN=f.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,s=Bd(n),i=Cs(PN,n),l=i.disabled||r,c=Be(t,i.onTriggerChange),u=zd(n),d=f.useRef("touch"),[h,m,p]=eI(x=>{const w=u().filter(y=>!y.disabled),g=w.find(y=>y.value===i.value),v=tI(w,x,g);v!==void 0&&i.onValueChange(v.value)}),b=x=>{l||(i.onOpenChange(!0),p()),x&&(i.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return a.jsx(Wl,{asChild:!0,...s,children:a.jsx(Se.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ZN(i.value)?"":void 0,...o,ref:c,onClick:he(o.onClick,x=>{x.currentTarget.focus(),d.current!=="mouse"&&b(x)}),onPointerDown:he(o.onPointerDown,x=>{d.current=x.pointerType;const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(b(x),x.preventDefault())}),onKeyDown:he(o.onKeyDown,x=>{const w=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(w&&x.key===" ")&&AU.includes(x.key)&&(b(),x.preventDefault())})})})});TN.displayName=PN;var RN="SelectValue",_N=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:s,placeholder:i="",...l}=e,c=Cs(RN,n),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,h=Be(t,c.onValueNodeChange);return en(()=>{u(d)},[u,d]),a.jsx(Se.span,{...l,ref:h,style:{pointerEvents:"none"},children:ZN(c.value)?a.jsx(a.Fragment,{children:i}):s})});_N.displayName=RN;var zU="SelectIcon",ON=f.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return a.jsx(Se.span,{"aria-hidden":!0,...o,ref:t,children:r||""})});ON.displayName=zU;var BU="SelectPortal",DN=e=>a.jsx(gi,{asChild:!0,...e});DN.displayName=BU;var ea="SelectContent",AN=f.forwardRef((e,t)=>{const n=Cs(ea,e.__scopeSelect),[r,o]=f.useState();if(en(()=>{o(new DocumentFragment)},[]),!n.open){const s=r;return s?ra.createPortal(a.jsx(MN,{scope:e.__scopeSelect,children:a.jsx(Fd.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),s):null}return a.jsx(LN,{...e,ref:t})});AN.displayName=ea;var Cr=10,[MN,Ss]=Si(ea),WU="SelectContentImpl",HU=cs("SelectContent.RemoveScroll"),LN=f.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:s,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:b,hideWhenDetached:x,avoidCollisions:w,...g}=e,v=Cs(ea,n),[y,k]=f.useState(null),[C,N]=f.useState(null),S=Be(t,Y=>k(Y)),[I,P]=f.useState(null),[E,_]=f.useState(null),j=zd(n),[L,D]=f.useState(!1),z=f.useRef(!1);f.useEffect(()=>{if(y)return jd(y)},[y]),Nd();const A=f.useCallback(Y=>{const[ne,...xe]=j().map(pe=>pe.ref.current),[le]=xe.slice(-1),se=document.activeElement;for(const pe of Y)if(pe===se||(pe==null||pe.scrollIntoView({block:"nearest"}),pe===ne&&C&&(C.scrollTop=0),pe===le&&C&&(C.scrollTop=C.scrollHeight),pe==null||pe.focus(),document.activeElement!==se))return},[j,C]),R=f.useCallback(()=>A([I,y]),[A,I,y]);f.useEffect(()=>{L&&R()},[L,R]);const{onOpenChange:T,triggerPointerDownPosRef:O}=v;f.useEffect(()=>{if(y){let Y={x:0,y:0};const ne=le=>{var se,pe;Y={x:Math.abs(Math.round(le.pageX)-(((se=O.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(le.pageY)-(((pe=O.current)==null?void 0:pe.y)??0))}},xe=le=>{Y.x<=10&&Y.y<=10?le.preventDefault():y.contains(le.target)||T(!1),document.removeEventListener("pointermove",ne),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",xe,{capture:!0})}}},[y,T,O]),f.useEffect(()=>{const Y=()=>T(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[T]);const[H,q]=eI(Y=>{const ne=j().filter(se=>!se.disabled),xe=ne.find(se=>se.ref.current===document.activeElement),le=tI(ne,Y,xe);le&&setTimeout(()=>le.ref.current.focus())}),Z=f.useCallback((Y,ne,xe)=>{const le=!z.current&&!xe;(v.value!==void 0&&v.value===ne||le)&&(P(Y),le&&(z.current=!0))},[v.value]),G=f.useCallback(()=>y==null?void 0:y.focus(),[y]),K=f.useCallback((Y,ne,xe)=>{const le=!z.current&&!xe;(v.value!==void 0&&v.value===ne||le)&&_(Y)},[v.value]),re=r==="popper"?Sm:$N,ie=re===Sm?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:b,hideWhenDetached:x,avoidCollisions:w}:{};return a.jsx(MN,{scope:n,content:y,viewport:C,onViewportChange:N,itemRefCallback:Z,selectedItem:I,onItemLeave:G,itemTextRefCallback:K,focusSelectedItem:R,selectedItemText:E,position:r,isPositioned:L,searchRef:H,children:a.jsx(Kl,{as:HU,allowPinchZoom:!0,children:a.jsx(ql,{asChild:!0,trapped:v.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:he(o,Y=>{var ne;(ne=v.trigger)==null||ne.focus({preventScroll:!0}),Y.preventDefault()}),children:a.jsx(oa,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:a.jsx(re,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Y=>Y.preventDefault(),...g,...ie,onPlaced:()=>D(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:he(g.onKeyDown,Y=>{const ne=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!ne&&Y.key.length===1&&q(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let le=j().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const se=Y.target,pe=le.indexOf(se);le=le.slice(pe+1)}setTimeout(()=>A(le)),Y.preventDefault()}})})})})})})});LN.displayName=WU;var VU="SelectItemAlignedPosition",$N=f.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,s=Cs(ea,n),i=Ss(ea,n),[l,c]=f.useState(null),[u,d]=f.useState(null),h=Be(t,S=>d(S)),m=zd(n),p=f.useRef(!1),b=f.useRef(!0),{viewport:x,selectedItem:w,selectedItemText:g,focusSelectedItem:v}=i,y=f.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&x&&w&&g){const S=s.trigger.getBoundingClientRect(),I=u.getBoundingClientRect(),P=s.valueNode.getBoundingClientRect(),E=g.getBoundingClientRect();if(s.dir!=="rtl"){const se=E.left-I.left,pe=P.left-se,ge=S.left-pe,We=S.width+ge,Xe=Math.max(We,I.width),Pe=window.innerWidth-Cr,ze=wm(pe,[Cr,Math.max(Cr,Pe-Xe)]);l.style.minWidth=We+"px",l.style.left=ze+"px"}else{const se=I.right-E.right,pe=window.innerWidth-P.right-se,ge=window.innerWidth-S.right-pe,We=S.width+ge,Xe=Math.max(We,I.width),Pe=window.innerWidth-Cr,ze=wm(pe,[Cr,Math.max(Cr,Pe-Xe)]);l.style.minWidth=We+"px",l.style.right=ze+"px"}const _=m(),j=window.innerHeight-Cr*2,L=x.scrollHeight,D=window.getComputedStyle(u),z=parseInt(D.borderTopWidth,10),A=parseInt(D.paddingTop,10),R=parseInt(D.borderBottomWidth,10),T=parseInt(D.paddingBottom,10),O=z+A+L+T+R,H=Math.min(w.offsetHeight*5,O),q=window.getComputedStyle(x),Z=parseInt(q.paddingTop,10),G=parseInt(q.paddingBottom,10),K=S.top+S.height/2-Cr,re=j-K,ie=w.offsetHeight/2,Y=w.offsetTop+ie,ne=z+A+Y,xe=O-ne;if(ne<=K){const se=_.length>0&&w===_[_.length-1].ref.current;l.style.bottom="0px";const pe=u.clientHeight-x.offsetTop-x.offsetHeight,ge=Math.max(re,ie+(se?G:0)+pe+R),We=ne+ge;l.style.height=We+"px"}else{const se=_.length>0&&w===_[0].ref.current;l.style.top="0px";const ge=Math.max(K,z+x.offsetTop+(se?Z:0)+ie)+xe;l.style.height=ge+"px",x.scrollTop=ne-K+x.offsetTop}l.style.margin=`${Cr}px 0`,l.style.minHeight=H+"px",l.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,s.trigger,s.valueNode,l,u,x,w,g,s.dir,r]);en(()=>y(),[y]);const[k,C]=f.useState();en(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const N=f.useCallback(S=>{S&&b.current===!0&&(y(),v==null||v(),b.current=!1)},[y,v]);return a.jsx(GU,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:a.jsx(Se.div,{...o,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});$N.displayName=VU;var qU="SelectPopperPosition",Sm=f.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Cr,...s}=e,i=Bd(n);return a.jsx(xd,{...i,...s,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sm.displayName=qU;var[GU,qg]=Si(ea,{}),Nm="SelectViewport",UN=f.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,s=Ss(Nm,n),i=qg(Nm,n),l=Be(t,s.onViewportChange),c=f.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Fd.Slot,{scope:n,children:a.jsx(Se.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:he(o.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const b=window.innerHeight-Cr*2,x=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),g=Math.max(x,w);if(g<b){const v=g+p,y=Math.min(b,v),k=v-y;h.style.height=y+"px",h.style.bottom==="0px"&&(d.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});UN.displayName=Nm;var FN="SelectGroup",[KU,YU]=Si(FN),QU=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=tr();return a.jsx(KU,{scope:n,id:o,children:a.jsx(Se.div,{role:"group","aria-labelledby":o,...r,ref:t})})});QU.displayName=FN;var zN="SelectLabel",BN=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=YU(zN,n);return a.jsx(Se.div,{id:o.id,...r,ref:t})});BN.displayName=zN;var Bu="SelectItem",[XU,WN]=Si(Bu),HN=f.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:s,...i}=e,l=Cs(Bu,n),c=Ss(Bu,n),u=l.value===r,[d,h]=f.useState(s??""),[m,p]=f.useState(!1),b=Be(t,v=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,v,r,o)}),x=tr(),w=f.useRef("touch"),g=()=>{o||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(XU,{scope:n,value:r,disabled:o,textId:x,isSelected:u,onItemTextChange:f.useCallback(v=>{h(y=>y||((v==null?void 0:v.textContent)??"").trim())},[]),children:a.jsx(Fd.ItemSlot,{scope:n,value:r,disabled:o,textValue:d,children:a.jsx(Se.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:b,onFocus:he(i.onFocus,()=>p(!0)),onBlur:he(i.onBlur,()=>p(!1)),onClick:he(i.onClick,()=>{w.current!=="mouse"&&g()}),onPointerUp:he(i.onPointerUp,()=>{w.current==="mouse"&&g()}),onPointerDown:he(i.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:he(i.onPointerMove,v=>{var y;w.current=v.pointerType,o?(y=c.onItemLeave)==null||y.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:he(i.onPointerLeave,v=>{var y;v.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:he(i.onKeyDown,v=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&v.key===" "||(MU.includes(v.key)&&g(),v.key===" "&&v.preventDefault())})})})})});HN.displayName=Bu;var Wi="SelectItemText",VN=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...s}=e,i=Cs(Wi,n),l=Ss(Wi,n),c=WN(Wi,n),u=FU(Wi,n),[d,h]=f.useState(null),m=Be(t,g=>h(g),c.onItemTextChange,g=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,g,c.value,c.disabled)}),p=d==null?void 0:d.textContent,b=f.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:x,onNativeOptionRemove:w}=u;return en(()=>(x(b),()=>w(b)),[x,w,b]),a.jsxs(a.Fragment,{children:[a.jsx(Se.span,{id:c.textId,...s,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?ra.createPortal(s.children,i.valueNode):null]})});VN.displayName=Wi;var qN="SelectItemIndicator",GN=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return WN(qN,n).isSelected?a.jsx(Se.span,{"aria-hidden":!0,...r,ref:t}):null});GN.displayName=qN;var Im="SelectScrollUpButton",KN=f.forwardRef((e,t)=>{const n=Ss(Im,e.__scopeSelect),r=qg(Im,e.__scopeSelect),[o,s]=f.useState(!1),i=Be(t,r.onScrollButtonChange);return en(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?a.jsx(QN,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});KN.displayName=Im;var jm="SelectScrollDownButton",YN=f.forwardRef((e,t)=>{const n=Ss(jm,e.__scopeSelect),r=qg(jm,e.__scopeSelect),[o,s]=f.useState(!1),i=Be(t,r.onScrollButtonChange);return en(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?a.jsx(QN,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});YN.displayName=jm;var QN=f.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,s=Ss("SelectScrollButton",n),i=f.useRef(null),l=zd(n),c=f.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),en(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(Se.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:he(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:he(o.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:he(o.onPointerLeave,()=>{c()})})}),JU="SelectSeparator",XN=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return a.jsx(Se.div,{"aria-hidden":!0,...r,ref:t})});XN.displayName=JU;var Em="SelectArrow",ZU=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Bd(n),s=Cs(Em,n),i=Ss(Em,n);return s.open&&i.position==="popper"?a.jsx(yd,{...o,...r,ref:t}):null});ZU.displayName=Em;var eF="SelectBubbleInput",JN=f.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const o=f.useRef(null),s=Be(r,o),i=jN(t);return f.useEffect(()=>{const l=o.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[i,t]),a.jsx(Se.select,{...n,style:{...Sb,...n.style},ref:s,defaultValue:t})});JN.displayName=eF;function ZN(e){return e===""||e===void 0}function eI(e){const t=qt(e),n=f.useRef(""),r=f.useRef(0),o=f.useCallback(i=>{const l=n.current+i;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,s]}function tI(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let i=tF(e,Math.max(s,0));o.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function tF(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var nF=EN,nI=TN,rF=_N,oF=ON,sF=DN,rI=AN,aF=UN,oI=BN,sI=HN,iF=VN,lF=GN,aI=KN,iI=YN,lI=XN;const cI=nF,uI=rF,Gg=f.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(nI,{ref:r,className:ke("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,a.jsx(oF,{asChild:!0,children:a.jsx(fd,{className:"h-4 w-4 opacity-50"})})]}));Gg.displayName=nI.displayName;const dI=f.forwardRef(({className:e,...t},n)=>a.jsx(aI,{ref:n,className:ke("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(DT,{className:"h-4 w-4"})}));dI.displayName=aI.displayName;const fI=f.forwardRef(({className:e,...t},n)=>a.jsx(iI,{ref:n,className:ke("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(fd,{className:"h-4 w-4"})}));fI.displayName=iI.displayName;const Kg=f.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>a.jsx(sF,{children:a.jsxs(rI,{ref:o,className:ke("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[a.jsx(dI,{}),a.jsx(aF,{className:ke("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(fI,{})]})}));Kg.displayName=rI.displayName;const cF=f.forwardRef(({className:e,...t},n)=>a.jsx(oI,{ref:n,className:ke("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));cF.displayName=oI.displayName;const Wu=f.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(sI,{ref:r,className:ke("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(lF,{children:a.jsx(Fn,{className:"h-4 w-4"})})}),a.jsx(iF,{children:t})]}));Wu.displayName=sI.displayName;const uF=f.forwardRef(({className:e,...t},n)=>a.jsx(lI,{ref:n,className:ke("-mx-1 my-1 h-px bg-muted",e),...t}));uF.displayName=lI.displayName;function Wd(){const e=navigator.userAgent,t=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,n=/Android/.test(e),r=/Safari/.test(e)&&!/Chrome/.test(e),o=/Chrome/.test(e),s=/Firefox/.test(e),i=/SamsungBrowser/.test(e),l=/Edg/.test(e);return{isIOS:t,isAndroid:n,isSafari:r,isChrome:o,isFirefox:s,isSamsungBrowser:i,isEdge:l,isMobile:t||n}}function dF(){return window.screen&&window.screen.orientation?window.screen.orientation.angle||0:typeof window.orientation<"u"?window.orientation:window.innerWidth>window.innerHeight?90:0}function hI(){return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?!0:window.location.protocol==="https:"||window.isSecureContext}function fF(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return console.log(" navigator.mediaDevices dj disponible"),!0;if(console.log(" Polyfill navigator.mediaDevices ncessaire"),navigator.mediaDevices||(navigator.mediaDevices={}),!navigator.mediaDevices.getUserMedia){const e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e?(navigator.mediaDevices.getUserMedia=function(t){return new Promise((n,r)=>{e.call(navigator,t,n,r)})},console.log(" Polyfill getUserMedia appliqu"),!0):(console.error(" getUserMedia non support par ce navigateur"),!1)}return navigator.mediaDevices.enumerateDevices||(navigator.mediaDevices.enumerateDevices=async function(){return console.warn(" enumerateDevices non support, retour d'une liste vide"),[]}),!0}function hF(){if(HTMLCanvasElement.prototype.toBlob){console.log(" canvas.toBlob dj disponible");return}console.log(" Polyfill canvas.toBlob ncessaire"),Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t="image/png",n=.92){const r=this;setTimeout(()=>{try{const o=r.toDataURL(t,n),s=atob(o.split(",")[1]),i=s.length,l=new Uint8Array(i);for(let c=0;c<i;c++)l[c]=s.charCodeAt(c);e(new Blob([l],{type:t||"image/png"}))}catch(o){console.error(" Erreur polyfill toBlob:",o),e(null)}})}}),console.log(" Polyfill canvas.toBlob appliqu")}function mF(e,t=1920,n=1440){const r=e.width,o=e.height;if(r<=t&&o<=n)return e;const s=Math.min(t/r,n/o),i=Math.floor(r*s),l=Math.floor(o*s),c=document.createElement("canvas");c.width=i,c.height=l;const u=c.getContext("2d");return u&&u.drawImage(e,0,0,i,l),c}function mI(){const e=[];console.log(" Initialisation des polyfills camra..."),hI()||e.push("HTTPS requis pour accder  la camra. Utilisez https:// au lieu de http://"),fF()||e.push("navigator.mediaDevices non support par ce navigateur"),hF();const t=Wd();return console.log(" Navigateur dtect:",t),e.length===0?console.log(" Tous les polyfills initialiss avec succs"):console.error(" Erreurs lors de l'initialisation des polyfills:",e),{success:e.length===0,errors:e}}async function pF(){try{if(console.log(" Demande d'autorisation camra..."),!hI())return{granted:!1,error:" HTTPS requis pour accder  la camra. Veuillez utiliser https:// au lieu de http://"};const e=mI();if(!e.success)return{granted:!1,error:e.errors.join(", "),needsPolyfill:!0};const t=Wd();let n;return t.isIOS?n={video:{facingMode:{exact:"environment"}}}:n={video:{facingMode:"environment",width:{ideal:ot.CAMERA_IDEAL_WIDTH},height:{ideal:ot.CAMERA_IDEAL_HEIGHT}}},console.log(" Contraintes camra:",n),(await navigator.mediaDevices.getUserMedia(n)).getTracks().forEach(o=>o.stop()),console.log(" Permissions camra accordes"),{granted:!0}}catch(e){console.error(" Erreur permissions camra:",e);let t="Impossible d'accder  la camra";const n=e;return n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t="Permission refuse. Veuillez autoriser l'accs  la camra dans les paramtres de votre navigateur.":n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t="Aucune camra dtecte sur cet appareil.":n.name==="NotReadableError"||n.name==="TrackStartError"?t="La camra est dj utilise par une autre application.":n.name==="OverconstrainedError"?t="Les paramtres de la camra ne sont pas supports par cet appareil.":n.name==="SecurityError"?t="Accs camra bloqu pour des raisons de scurit (HTTPS requis).":n.name==="TypeError"&&(t="API camra non supporte par ce navigateur. Veuillez mettre  jour votre navigateur."),{granted:!1,error:t}}}function gF(){const[e,t]=f.useState(null),[n,r]=f.useState(null),[o,s]=f.useState(!1),[i,l]=f.useState([]),[c,u]=f.useState(null),[d,h]=f.useState([]),m=f.useRef(null),p=f.useCallback((y,k="info")=>{const C=new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),N={timestamp:C,message:y,type:k};h(I=>{const P=[...I,N];return P.length>50&&P.shift(),P}),console.log(`[${C}] ${k==="error"?"":k==="success"?"":k==="warning"?"":""} ${y}`)},[]),b=f.useCallback(()=>{h([])},[]),x=f.useCallback(async()=>{try{p(" Recherche des camras disponibles...","info"),await navigator.mediaDevices.getUserMedia({video:!0}).then(C=>C.getTracks().forEach(N=>N.stop())).catch(()=>{});const k=(await navigator.mediaDevices.enumerateDevices()).filter(C=>C.kind==="videoinput").map(C=>({deviceId:C.deviceId,label:C.label||`Camra ${C.deviceId.substring(0,5)}`,kind:"videoinput"}));if(p(` ${k.length} camra(s) trouve(s)`,"success"),k.forEach((C,N)=>{p(`  ${N+1}. ${C.label}`,"info")}),l(k),!c&&k.length>0){let C=k.find(S=>S.label.toLowerCase().includes("back")||S.label.toLowerCase().includes("rear")||S.label.toLowerCase().includes("arrire")||S.label.toLowerCase().includes("environment"));!C&&k.length>1&&(C=k[k.length-1],p(" Slection de la dernire camra (probablement arrire)","info"));const N=C||k[0];u(N.deviceId),C&&(C.label.toLowerCase().includes("back")||C.label.toLowerCase().includes("rear")||C.label.toLowerCase().includes("arrire")||C.label.toLowerCase().includes("environment"))?p(` Camra ARRIRE slectionne: ${C.label}`,"success"):p(` Camra slectionne: ${N.label} (vrifier si c'est la bonne)`,"warning")}}catch(y){p(` Erreur rcupration camras: ${y}`,"error")}},[c,p]),w=f.useCallback(async()=>{try{s(!0),r(null),m.current&&(m.current.getTracks().forEach(S=>S.stop()),m.current=null),p(" Dmarrage de la camra...","info");const y=Wd();y.isIOS?y.isSafari?p(" Dtect: Safari iOS","info"):y.isChrome?(p(" Dtect: Chrome iOS","warning"),p(" Chrome iOS utilise WebKit (comme Safari)","warning")):p(" Dtect: iOS (autre navigateur)","info"):y.isAndroid?p(" Dtect: Android","info"):p(" Dtect: Desktop","info");let k;c?(p(` Utilisation deviceId: ${c}`,"info"),y.isIOS?k={video:{deviceId:{ideal:c}},audio:!1}:k={video:{deviceId:{exact:c},width:{ideal:ot.CAMERA_IDEAL_WIDTH},height:{ideal:ot.CAMERA_IDEAL_HEIGHT}},audio:!1}):(p(" Utilisation facingMode (pas de deviceId)","warning"),y.isIOS?k={video:{facingMode:{ideal:"environment"}},audio:!1}:k={video:{facingMode:{ideal:"environment"},width:{ideal:ot.CAMERA_IDEAL_WIDTH},height:{ideal:ot.CAMERA_IDEAL_HEIGHT}},audio:!1}),console.log(" Contraintes camra:",k,"Navigateur:",y);let C;try{C=await navigator.mediaDevices.getUserMedia(k)}catch(S){const I=S;if(y.isIOS&&I.name==="OverconstrainedError"){p(" Contraintes exact:environment trop strictes, essai fallback...","warning");try{const P={video:{facingMode:{ideal:"environment"}},audio:!1};p(" Tentative avec facingMode: ideal...","info"),C=await navigator.mediaDevices.getUserMedia(P),p(" Fallback russi avec ideal","success")}catch{p(" Tentative avec n'importe quelle camra...","warning");const E={video:!0,audio:!1};C=await navigator.mediaDevices.getUserMedia(E),p(" Camra dmarre (possiblement la camra AVANT)","warning")}}else if(I.name==="OverconstrainedError"){console.warn(" Contraintes trop strictes, retry avec contraintes minimales..."),p(" Retry avec contraintes minimales...","warning");const P={video:c?{deviceId:{ideal:c}}:{facingMode:ot.CAMERA_FACING_MODE},audio:!1};C=await navigator.mediaDevices.getUserMedia(P)}else throw y.isIOS&&(I.name==="NotAllowedError"||I.name==="PermissionDeniedError")&&(p(" Permission camra REFUSE par l'utilisateur","error"),p(" SOLUTION iOS :","error"),p("  1. Rglages > Safari > Camra","error"),p('  2. Slectionnez "Demander" ou "Autoriser"',"error"),p("  3. Rechargez la page","error")),S}m.current=C,t(C),r(null);const N=C.getVideoTracks();if(N.length>0){const S=N[0],I=S.getSettings(),P=S.label;p(" Camra dmarre avec succs","success"),p(` Camra active: ${P}`,"info"),I.facingMode&&(p(` Facing mode: ${I.facingMode}`,"info"),ot.CAMERA_FACING_MODE==="environment"&&I.facingMode==="user"?(p(" PROBLME CRITIQUE DTECT ","error"),p("","error"),p(" DEMAND : Camra ARRIRE (environment)","error"),p(` OBTENU : Camra AVANT (${I.facingMode})`,"error"),p("","error"),p(" CAUSE : Permission camra arrire NON accorde","error"),p("","error"),p(" SOLUTION IMMDIATE :","error"),p('  Cliquez sur "Forcer permission camra ARRIRE" ci-dessous',"error"),p("","error"),p(" SOLUTION PERMANENTE (iOS) :","error"),p("  1. Ouvrez Rglages iOS","error"),p("  2. Allez dans Safari > Camra","error"),p('  3. Slectionnez "Demander" ou "Autoriser"',"error"),p("  4. Rechargez cette page","error"),p("","error"),r(" Camra AVANT dtecte au lieu de la camra ARRIRE. Ouvrez le diagnostic  pour la solution.")):ot.CAMERA_FACING_MODE==="user"&&I.facingMode),I.width&&I.height&&p(` Rsolution: ${I.width}x${I.height}`,"info")}await x()}catch(y){const k=y;p(` Erreur: ${k.name||"Unknown"}`,"error"),p(`   Message: ${k.message}`,"error");let C="Impossible de dmarrer la camra";k.name==="NotAllowedError"||k.name==="PermissionDeniedError"?(C="Permission refuse. Veuillez autoriser l'accs  la camra.",p(" Vrifiez les permissions dans les paramtres du navigateur","error")):k.name==="NotFoundError"||k.name==="DevicesNotFoundError"?(C="Aucune camra dtecte.",p(" Vrifiez qu'une camra est connecte","error")):k.name==="NotReadableError"||k.name==="TrackStartError"?(C="La camra est dj utilise par une autre application.",p(" Fermez les autres apps utilisant la camra","error")):k.name==="OverconstrainedError"?(C="Camra non compatible avec les paramtres demands.",p(" Les contraintes sont trop strictes","error")):k.name==="SecurityError"&&(C="Accs camra bloqu (HTTPS requis).",p(" Utilisez HTTPS","error")),r(C),t(null)}finally{s(!1)}},[c,x,p]),g=f.useCallback(()=>{console.log(" Arrt de la camra"),m.current&&(m.current.getTracks().forEach(y=>{y.stop(),console.log(" Track arrt:",y.kind,y.label)}),m.current=null),t(null),r(null)},[]),v=f.useCallback(async y=>{console.log(" Changement de camra vers:",y),u(y),e&&(g(),await new Promise(k=>setTimeout(k,100)))},[e,g]);return f.useEffect(()=>()=>{m.current&&m.current.getTracks().forEach(y=>y.stop())},[]),{stream:e,error:n,isLoading:o,startCamera:w,stopCamera:g,availableCameras:i,selectedCameraId:c,switchCamera:v,refreshCameras:x,diagnosticLogs:d,clearDiagnosticLogs:b}}function vF(e){try{ot.BLUR_DETECTION_ENABLED;const t=e.getContext("2d");if(!t)return{isBlurry:!1,blurScore:0,stats:{error:"no_context"}};const r=t.getImageData(0,0,e.width,e.height).data,o=e.width,s=e.height,i=ot.BLUR_ANALYSIS_STEP,l=ot.BLUR_EDGE_MARGIN,c=ot.BLUR_THRESHOLD,u=ot.BLUR_MIN_VARIANCE,d=[];for(let N=0;N<r.length;N+=4){const S=r[N],I=r[N+1],P=r[N+2],E=.299*S+.587*I+.114*P;d.push(E)}let h=0,m=0,p=0;const b=[[0,-1,0],[-1,4,-1],[0,-1,0]],x=Math.floor(l/i),w=Math.floor((o-l)/i),g=Math.floor(l/i),v=Math.floor((s-l)/i);for(let N=g;N<v;N+=i)for(let S=x;S<w;S+=i){if(N<1||N>=s-1||S<1||S>=o-1)continue;let I=0;for(let P=-1;P<=1;P++)for(let E=-1;E<=1;E++){const _=(N+P)*o+(S+E);_>=0&&_<d.length&&(I+=d[_]*b[P+1][E+1])}I=Math.abs(I),h+=I*I,p=Math.max(p,I),m++}const y=m>0?Math.sqrt(h/m):0,k=y<c&&p<u,C={blurScore:parseFloat(y.toFixed(2)),maxLaplacian:parseFloat(p.toFixed(2)),pixelCount:m,threshold:c,minVariance:u,isBlurry:k,confidence:Math.min(100,Math.max(0,y/c*100))};return console.log(" Analyse de flou amliore:",C),{isBlurry:k,blurScore:y,stats:C}}catch(t){return console.warn(" Erreur lors de la dtection de flou:",t),{isBlurry:!1,blurScore:0,stats:{error:String(t)}}}}function xF(e,t){try{const n=e.getImageData(0,0,t.width,t.height),r=n.data;let o=0;for(let u=0;u<r.length;u+=4){const d=r[u],h=r[u+1],m=r[u+2];o+=(d+h+m)/3}const s=o/(r.length/4);let i=1;s<80?i=1.15:s>200&&(i=.95);const l=.7,c=1.05;for(let u=0;u<r.length;u+=4){let d=r[u],h=r[u+1],m=r[u+2];d=Math.min(255,d*i),h=Math.min(255,h*i),m=Math.min(255,m*i);const p=128;d=p+(d-p)*c,h=p+(h-p)*c,m=p+(m-p)*c;const b=1+l*.3;d=Math.min(255,Math.max(0,d*b-p*l*.2)),h=Math.min(255,Math.max(0,h*b-p*l*.2)),m=Math.min(255,Math.max(0,m*b-p*l*.2)),r[u]=Math.round(Math.min(255,Math.max(0,d))),r[u+1]=Math.round(Math.min(255,Math.max(0,h))),r[u+2]=Math.round(Math.min(255,Math.max(0,m)))}e.putImageData(n,0,0),console.log(" Amliorations appliques:",{avgBrightness:s.toFixed(1),exposureAdjustment:(i*100).toFixed(0)+"%",sharpenStrength:l,contrastStrength:c})}catch(n){console.warn(" Erreur lors de l'application des amliorations:",n)}}function yF(e){const[t,n]=f.useState(new Map),r=f.useCallback(async(l,c)=>new Promise((u,d)=>{try{console.log(" Dbut de capture pour rfrence:",c);const h=Wd(),m=document.createElement("canvas"),p=m.getContext("2d",{alpha:!1,willReadFrequently:!1});if(!p)throw new Error("Impossible de crer le contexte canvas");const b=l.videoWidth||1920,x=l.videoHeight||1440,w=dF(),g=w===90||w===-90||w===270;g?(m.width=x,m.height=b):(m.width=b,m.height=x),console.log(" Dimensions capture:",{width:b,height:x,deviceOrientation:w,canvasWidth:m.width,canvasHeight:m.height,browser:h.isIOS?"iOS":h.isAndroid?"Android":"Desktop"}),g&&(p.translate(m.width/2,m.height/2),w===90||w===-270?p.rotate(90*Math.PI/180):w===-90||w===270?p.rotate(-90*Math.PI/180):(w===180||w===-180)&&p.rotate(180*Math.PI/180),p.translate(-b/2,-x/2)),p.drawImage(l,0,0,b,x);const k=mF(m,3840,2880);console.log(" Dimensions optimises:",{original:`${b}x${x}`,optimized:`${k.width}x${k.height}`,reduction:Math.round((1-k.width*k.height/(b*x))*100)+"%"});const{isBlurry:C,blurScore:N,stats:S}=vF(k);xF(p,k),k.toBlob(async P=>{if(!P){d(new Error("Impossible de crer le blob"));return}try{console.log(" Taille du blob:",(P.size/1024/1024).toFixed(2),"MB"),P.size>15*1024*1024&&(console.warn(" Image trop volumineuse, compression supplmentaire..."),k.toBlob(async _=>{_&&(P=_,console.log(" Taille aprs compression:",(P.size/1024/1024).toFixed(2),"MB"))},"image/jpeg",.9));const E=new FileReader;E.onloadend=()=>{var L,D;const _=E.result,j={id:c,pieceId:e,referencePhotoId:c,blob:P,dataUrl:_,takenAt:new Date().toISOString(),meta:{width:k.width,height:k.height,isBlurry:C,blurScore:parseFloat(N.toFixed(2)),blurStats:S&&typeof S=="object"&&"maxLaplacian"in S?{maxLaplacian:S.maxLaplacian,pixelCount:S.pixelCount,threshold:S.threshold,minVariance:S.minVariance,confidence:S.confidence}:void 0}};console.log(" Photo capture avec succs:",{id:j.id,etapeID:c,size:(P.size/1024).toFixed(2)+" KB",dimensions:`${k.width}x${k.height}`,...S&&{" Blur Detection":{isBlurry:C,blurScore:parseFloat(N.toFixed(2)),confidence:`${((L=S.confidence)==null?void 0:L.toFixed(1))||0}%`,maxLaplacian:(D=S.maxLaplacian)==null?void 0:D.toFixed(2)}}}),n(z=>{const A=new Map(z);return A.set(c,j),A}),u(j)},E.onerror=()=>{d(new Error("Erreur lors de la conversion en Data URL"))},E.readAsDataURL(P)}catch(E){d(E)}},"image/jpeg",.98)}catch(h){console.error(" Erreur lors de la capture:",h),d(h)}}),[e]),o=f.useCallback(l=>{console.log(" Suppression photo pour rfrence:",l),n(c=>{const u=new Map(c),d=u.get(l);if(d){if(d.blob&&"stream"in d.blob)try{d.blob.stream().cancel()}catch{}u.delete(l),console.log(" Photo supprime")}return u})},[]),s=f.useCallback(()=>{console.log(" Suppression de toutes les photos captures"),t.forEach(l=>{if(l.blob&&"stream"in l.blob)try{l.blob.stream().cancel()}catch{}}),n(new Map),console.log(" Toutes les photos supprimes")},[t]),i=f.useCallback(l=>t.get(l)||null,[t]);return{capturedPhotos:t,capturePhoto:r,removePhoto:o,clearAllPhotos:s,getCapturedPhotoForReference:i}}class wF{constructor(){gn(this,"uploadQueue",new Map);gn(this,"uploadStatus",new Map);gn(this,"uploadListeners",new Set)}async queueUpload(t){var r;console.log(" Ajout  la queue d'upload:",{id:t.id,pieceId:t.pieceId,taskId:t.taskId,size:((r=t.originalBlob)==null?void 0:r.size)||"unknown"}),this.uploadQueue.set(t.id,t);const n={requestId:t.id,status:"pending",attempts:0,lastAttemptAt:new Date().toISOString()};this.uploadStatus.set(t.id,n),this.notifyListeners(n),this.processUpload(t.id)}async processUpload(t){var o;const n=this.uploadQueue.get(t),r=this.uploadStatus.get(t);if(!n||!r){console.error(" Upload request/status introuvable:",t);return}try{r.status="uploading",r.attempts++,r.lastAttemptAt=new Date().toISOString(),this.notifyListeners(r),console.log(`%c UPLOAD EN COURS (tentative ${r.attempts})`,"color: #22c55e; font-weight: bold; font-size: 14px;",{photoId:t,endpoint:ot.IMAGE_UPLOAD_URL,pieceId:n.pieceId,taskId:n.taskId});const s=await this.prepareUploadData(n),i=await this.sendUploadRequest(s);if(i.success)r.status="success",r.uploadedUrl=i.uploadedUrl,console.log("%c UPLOAD RUSSI !","color: #22c55e; font-weight: bold; font-size: 16px; background: #dcfce7; padding: 4px 8px; border-radius: 4px;",{photoId:t,uploadedUrl:i.uploadedUrl,pieceId:n.pieceId,taskId:n.taskId}),console.log("%c SAUVEGARDE IMMDIATE DCLENCHE","color: #ef4444; font-weight: bold; font-size: 16px; background: #fef2f2; padding: 4px 8px;",{photoId:t,url:((o=i.uploadedUrl)==null?void 0:o.substring(0,50))+"..."}),this.saveUploadedUrlImmediate(n,i.uploadedUrl),this.saveUploadedUrlToCheckIdImmediate(n,i.uploadedUrl);else throw new Error(i.error||"Erreur inconnue")}catch(s){if(console.error(`%c ERREUR UPLOAD (tentative ${r.attempts})`,"color: #ef4444; font-weight: bold; font-size: 14px; background: #fef2f2; padding: 4px 8px; border-radius: 4px;",{photoId:t,error:s.message,attempt:r.attempts,maxAttempts:ot.UPLOAD_RETRY_ATTEMPTS}),r.attempts<ot.UPLOAD_RETRY_ATTEMPTS){r.status="retrying",r.error=s instanceof Error?s.message:"Erreur inconnue",this.notifyListeners(r);const i=Math.pow(2,r.attempts)*1e3;console.log(`%c RETRY dans ${i}ms...`,"color: #f59e0b; font-weight: bold; font-size: 14px;",{photoId:t,delayMs:i,nextAttempt:r.attempts+1}),setTimeout(()=>{this.processUpload(t)},i)}else r.status="error",r.error=s instanceof Error?s.message:"Erreur inconnue",console.error(" Upload dfinitivement chou:",t)}this.notifyListeners(r)}async prepareUploadData(t){let n;if(t.imageData.startsWith("data:"))n=t.imageData.split(",")[1];else if(t.originalBlob)n=(await this.blobToDataURL(t.originalBlob)).split(",")[1];else throw new Error("Format d'image non support");const r={base64:n,filename:`photo_${t.id}.jpg`,contentType:"image/jpeg",pieceId:t.pieceId,taskId:t.taskId,referencePhotoId:t.referencePhotoId,...t.metadata&&t.metadata};return console.log(" Payload base64 prpar:",{requestId:t.id,base64Size:n.length,filename:r.filename,hasMetadata:!!t.metadata}),r}async sendUploadRequest(t){const n=new AbortController,r=setTimeout(()=>n.abort(),ot.UPLOAD_TIMEOUT);try{const o=await fetch(ot.IMAGE_UPLOAD_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),signal:n.signal});if(clearTimeout(r),!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const s=await o.json();return{success:!0,uploadedUrl:s.imgUrl||s.url||s.fileUrl}}catch(o){throw clearTimeout(r),o instanceof Error&&o.name==="AbortError"?new Error("Timeout de upload dpass"):o}}saveUploadedUrlImmediate(t,n){try{const r=`uploaded_image_${t.id}`,o={id:t.id,uploadedUrl:n,pieceId:t.pieceId,taskId:t.taskId,referencePhotoId:t.referencePhotoId,uploadedAt:new Date().toISOString(),metadata:t.metadata,savedImmediately:!0};localStorage.setItem(r,JSON.stringify(o)),console.log("%c URL SAUVE IMMDIATEMENT EN LOCAL","color: #22c55e; font-weight: bold; font-size: 14px; background: #dcfce7; padding: 4px 8px;",{id:t.id,url:n.substring(0,50)+"..."})}catch(r){console.error(" Erreur sauvegarde IMMDIATE locale:",r)}}saveUploadedUrlToCheckIdImmediate(t,n){setTimeout(async()=>{try{console.log("%c SAUVEGARDE CHECKID IMMDIATE DMARRE","color: #8b5cf6; font-weight: bold; font-size: 14px; background: #f3e8ff; padding: 4px 8px;",{imageId:t.id,uploadedUrl:(n==null?void 0:n.substring(0,50))+"..."}),await at.trackPhotoTaken({photoId:t.id,taskId:t.taskId||"",pieceId:t.pieceId,etapeId:t.etapeId,photoData:n,timestamp:new Date().toISOString(),validated:!1,retakeCount:0,metadata:{url:n,pieceId:t.pieceId,taskId:t.taskId,referencePhotoId:t.referencePhotoId,uploadedAt:new Date().toISOString(),savedImmediately:!0,flowType:t.flowType,...t.metadata}}),console.log("%c CHECKID SAUV IMMDIATEMENT !","color: #22c55e; font-weight: bold; font-size: 14px; background: #dcfce7; padding: 4px 8px;",{photoId:t.id})}catch(r){console.error(" CheckID: Erreur sauvegarde IMMDIATE:",r)}},0)}async saveUploadedUrl(t,n){try{const r=`uploaded_image_${t.id}`,o={id:t.id,uploadedUrl:n,pieceId:t.pieceId,taskId:t.taskId,referencePhotoId:t.referencePhotoId,uploadedAt:new Date().toISOString(),metadata:t.metadata};localStorage.setItem(r,JSON.stringify(o)),console.log(" URL sauvegarde en local:",{id:t.id,url:n})}catch(r){console.error(" Erreur sauvegarde URL locale:",r)}}async saveUploadedUrlToCheckId(t,n){try{console.log("%c AJOUT URL AU CHECKID","color: #8b5cf6; font-weight: bold; font-size: 14px; background: #f3e8ff; padding: 4px 8px; border-radius: 4px;",{imageId:t.id,pieceId:t.pieceId,taskId:t.taskId,uploadedUrl:(n==null?void 0:n.substring(0,50))+"..."}),await at.trackPhotoTaken({photoId:t.id,taskId:t.taskId||"",pieceId:t.pieceId,etapeId:t.etapeId,photoData:n,timestamp:new Date().toISOString(),validated:!1,retakeCount:0,metadata:{url:n,pieceId:t.pieceId,taskId:t.taskId,referencePhotoId:t.referencePhotoId,uploadedAt:new Date().toISOString(),source:"imageUploadService",flowType:t.flowType,...t.metadata}}),console.log("%c CHECKID SAUVEGARD !","color: #22c55e; font-weight: bold; font-size: 16px; background: #dcfce7; padding: 4px 8px; border-radius: 4px;",{photoId:t.id,success:!0})}catch(r){console.error(" CheckID: Erreur sauvegarde URL:",r)}}getUploadedUrl(t){try{const n=`uploaded_image_${t}`,r=localStorage.getItem(n);return r?JSON.parse(r).uploadedUrl:null}catch(n){return console.error(" Erreur rcupration URL locale:",n),null}}async getUploadedUrlsFromCheckId(t){var n,r;try{console.log(" CheckID: Rcupration URLs uploades:",t);const{checkSessionManager:o}=await Wt(async()=>{const{checkSessionManager:c}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:c}},void 0),s=await o.getCheckSession(t);if(!((r=(n=s==null?void 0:s.progress)==null?void 0:n.interactions)!=null&&r.photosTaken))return console.log(" CheckID: Pas de photos trouves"),{};const i={},{photosTaken:l}=s.progress.interactions;return Object.entries(l).forEach(([c,u])=>{const d=Array.isArray(u)?u[u.length-1]:u;d!=null&&d.url&&(i[c]=d.url)}),console.log(" CheckID: URLs rcupres:",{count:Object.keys(i).length,urls:i}),i}catch(o){return console.error(" CheckID: Erreur rcupration URLs:",o),{}}}async restoreUrlsFromCheckId(t){try{console.log(" CheckID: Restauration URLs vers localStorage");const n=await this.getUploadedUrlsFromCheckId(t);let r=0;Object.entries(n).forEach(([o,s])=>{const i=`uploaded_image_${o}`,l={uploadedUrl:s,uploadedAt:new Date().toISOString(),source:"CheckID_restore"};localStorage.setItem(i,JSON.stringify(l)),r++}),console.log(" CheckID: URLs restaures:",{restoredCount:r,totalAvailable:Object.keys(n).length})}catch(n){console.error(" CheckID: Erreur restauration URLs:",n)}}getUploadStatus(t){return this.uploadStatus.get(t)||null}onStatusChange(t){return this.uploadListeners.add(t),()=>{this.uploadListeners.delete(t)}}notifyListeners(t){this.uploadListeners.forEach(n=>{try{n(t)}catch(r){console.error(" Erreur dans listener upload:",r)}})}async blobToDataURL(t){return new Promise((n,r)=>{const o=new FileReader;o.onload=()=>n(o.result),o.onerror=r,o.readAsDataURL(t)})}cleanup(){const t=Date.now(),n=24*60*60*1e3;for(const[r,o]of this.uploadStatus.entries())t-new Date(o.lastAttemptAt).getTime()>n&&(o.status==="success"||o.status==="error")&&(this.uploadQueue.delete(r),this.uploadStatus.delete(r),console.log(" Cleanup upload ancien:",r))}}const Ds=new wF;setInterval(()=>{Ds.cleanup()},60*60*1e3);const bF=Object.freeze(Object.defineProperty({__proto__:null,imageUploadService:Ds},Symbol.toStringTag,{value:"Module"}));function Yg(e){const[t,n]=f.useState(new Map),r=f.useCallback(async(c,u)=>{const d={id:c.id,imageData:c.dataUrl,originalBlob:c.blob,pieceId:c.pieceId,taskId:u==null?void 0:u.taskId,etapeId:u==null?void 0:u.etapeId,flowType:u==null?void 0:u.flowType,referencePhotoId:c.referencePhotoId,metadata:{width:c.meta.width,height:c.meta.height,takenAt:c.takenAt,checkId:u==null?void 0:u.checkId,flowType:u==null?void 0:u.flowType}};n(h=>{const m=new Map(h);return m.set(c.id,{isUploading:!0,uploadedUrl:null,syncStatus:"syncing",error:null}),m}),await Ds.queueUpload(d),console.log("%c UPLOAD DCLENCH !","color: #22c55e; font-weight: bold; font-size: 16px; background: #dcfce7; padding: 4px 8px; border-radius: 4px;",{photoId:c.id,pieceId:c.pieceId,taskId:u==null?void 0:u.taskId,etapeId:u==null?void 0:u.etapeId,checkId:u==null?void 0:u.checkId})},[]),o=f.useCallback(c=>{const u=t.get(c);if(u)return u;const d=Ds.getUploadedUrl(c);return d?{isUploading:!1,uploadedUrl:d,syncStatus:"synced",error:null}:{isUploading:!1,uploadedUrl:null,syncStatus:"not_synced",error:null}},[t]),s=f.useCallback(async(c,u)=>{console.log(" Retry upload pour:",c.id),await r(c,u)},[r]),i=f.useCallback((c,u)=>{console.log(" getDisplayUrl: Recherche URL uploade:",{imageId:c,storageKey:`uploaded_image_${c}`,hasLocalStorageItem:!!localStorage.getItem(`uploaded_image_${c}`)});const d=Ds.getUploadedUrl(c);return console.log("%c getDisplayUrl DEBUG COMPLET","color: #ef4444; font-weight: bold; font-size: 14px;",{imageId:c,uploadedUrl:d||"NULL",uploadedUrlLength:(d==null?void 0:d.length)||0,fallbackDataUrl:u||"NULL",fallbackLength:(u==null?void 0:u.length)||0,willReturn:d?"UPLOADED_URL":"FALLBACK",finalResult:d||u}),d||u},[]),l=f.useCallback(()=>{const c=Array.from(t.values());return{total:c.length,syncing:c.filter(u=>u.syncStatus==="syncing").length,synced:c.filter(u=>u.syncStatus==="synced").length,errors:c.filter(u=>u.syncStatus==="error").length,notSynced:c.filter(u=>u.syncStatus==="not_synced").length}},[t]);return f.useEffect(()=>Ds.onStatusChange(u=>{n(d=>{const h=new Map(d),m=h.get(u.requestId)||{isUploading:!1,uploadedUrl:null,syncStatus:"not_synced",error:null};switch(u.status){case"pending":case"uploading":h.set(u.requestId,{...m,isUploading:!0,syncStatus:"syncing",error:null,progress:u.progress});break;case"success":h.set(u.requestId,{...m,isUploading:!1,uploadedUrl:u.uploadedUrl||null,syncStatus:"synced",error:null});break;case"error":h.set(u.requestId,{...m,isUploading:!1,syncStatus:"error",error:u.error||"Erreur inconnue"});break;case"retrying":h.set(u.requestId,{...m,isUploading:!0,syncStatus:"syncing",error:`Tentative ${u.attempts}/3...`});break}return h})}),[]),{uploadStates:t,uploadCapturedPhoto:r,getUploadState:o,retryUpload:s,getDisplayUrl:i,getUploadStats:l}}const kF=()=>{const[e,t]=f.useState(()=>n());function n(){var s;if((s=window.screen)!=null&&s.orientation)return window.screen.orientation.type.includes("landscape")?"landscape":"portrait";if(typeof window.orientation<"u"){const i=window.orientation;return i===90||i===-90?"landscape":"portrait"}return window.innerWidth>window.innerHeight?"landscape":"portrait"}f.useEffect(()=>{var i;const s=()=>{const l=n();console.log(" Changement d'orientation dtect:",l),t(l)};return(i=window.screen)!=null&&i.orientation&&window.screen.orientation.addEventListener("change",s),window.addEventListener("orientationchange",s),window.addEventListener("resize",s),()=>{var l;(l=window.screen)!=null&&l.orientation&&window.screen.orientation.removeEventListener("change",s),window.removeEventListener("orientationchange",s),window.removeEventListener("resize",s)}},[]);const r=f.useCallback(async s=>{var l,c;if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))try{if((c=(l=window.screen)==null?void 0:l.orientation)!=null&&c.lock){const u=s==="landscape"?"landscape":"portrait";await window.screen.orientation.lock(u)}}catch{}},[]),o=f.useCallback(async()=>{var s,i;try{(i=(s=window.screen)==null?void 0:s.orientation)!=null&&i.unlock&&(window.screen.orientation.unlock(),console.log(" Orientation dverrouille"))}catch(l){console.error(" Erreur lors du dverrouillage de l'orientation:",l)}},[]);return{currentOrientation:e,isPortrait:e==="portrait",isLandscape:e==="landscape",lockOrientation:r,unlockOrientation:o}},Pm=e=>{const[t,n]=f.useState(null);return f.useEffect(()=>{if(!e){n(null);return}const r=new Image;return r.onload=()=>{const o=r.naturalWidth>r.naturalHeight?"landscape":"portrait";console.log(" Orientation de l'image dtecte:",{url:e,width:r.naturalWidth,height:r.naturalHeight,orientation:o}),n(o)},r.onerror=()=>{console.error(" Erreur chargement image pour dtection orientation:",e),n(null)},r.src=e,()=>{r.onload=null,r.onerror=null}},[e]),t},CF=({isLandscapePhoto:e})=>e?a.jsxs("div",{className:"absolute top-20 left-0 right-0 z-30 pointer-events-none",children:[a.jsx("div",{className:"bg-black/80 backdrop-blur-sm mx-4 rounded-2xl p-4 border-2 border-primary/50",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative flex-shrink-0",children:[a.jsx("div",{className:"rotate-90 transition-all duration-1000",style:{animation:"pulse 2s ease-in-out infinite"},children:a.jsx(QT,{className:"w-12 h-12 text-primary",strokeWidth:2})}),a.jsx("div",{className:"absolute -top-2 -right-2",style:{animation:"spin 3s linear infinite"},children:a.jsx(GT,{className:"w-8 h-8 text-primary opacity-70",strokeWidth:2})})]}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("h3",{className:"text-white font-bold text-sm mb-1",children:" Tournez votre tlphone"}),a.jsx("p",{className:"text-white/80 text-xs",children:"Cette photo est en mode paysage. Tournez votre tlphone  90 pour mieux l'aligner."})]})]})}),a.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.8;
            transform: scale(1.05);
          }
        }

        @keyframes spin {
          0% {
            transform: rotate(0deg);
            opacity: 0.3;
          }
          50% {
            opacity: 0.6;
          }
          100% {
            transform: rotate(360deg);
            opacity: 0.3;
          }
        }
      `})]}):null,SF=()=>(f.useEffect(()=>{(async()=>{var o,s;try{(s=(o=window.screen)==null?void 0:o.orientation)!=null&&s.lock&&(await window.screen.orientation.lock("portrait"),console.log(" Orientation verrouille en portrait (Screen Orientation API)"))}catch(i){console.warn(" Screen Orientation API non disponible ou chec:",i)}})();const t=document.querySelector('meta[name="viewport"]'),n=(t==null?void 0:t.getAttribute("content"))||"";if(t){const o=n.includes("user-scalable")?n:`${n}, user-scalable=no`;t.setAttribute("content",o),console.log(" Meta viewport mis  jour pour bloquer la rotation")}const r=document.createElement("style");return r.id="lock-orientation-style",r.textContent=`
      @media screen and (orientation: landscape) {
        html {
          transform: rotate(-90deg);
          transform-origin: left top;
          width: 100vh;
          height: 100vw;
          overflow-x: hidden;
          position: absolute;
          top: 100%;
          left: 0;
        }
      }
    `,document.head.appendChild(r),console.log(" Style CSS ajout pour forcer l'orientation portrait"),()=>{var s,i;(i=(s=window.screen)==null?void 0:s.orientation)!=null&&i.unlock&&(window.screen.orientation.unlock(),console.log(" Orientation dverrouille")),t&&n&&(t.setAttribute("content",n),console.log(" Meta viewport restaur"));const o=document.getElementById("lock-orientation-style");o&&(o.remove(),console.log(" Style CSS supprim"))}},[]),null),Hu=()=>{const{user:e}=cr(),{parcours:t}=Sn(),[n,r]=f.useState(null),[o,s]=f.useState({});f.useEffect(()=>{(async()=>{if(!(!e||!t))try{const k=await Oe.checkExistingSessions(e.phone,t.id);if(k.hasExistingSession&&k.session){const C=k.session.checkId;r(C),at.setCurrentCheckId(C),console.log(" useInteractionTracking: CheckID initialis:",C),await i(C)}}catch(k){console.error(" useInteractionTracking: Erreur initialisation CheckID:",k)}})()},[e,t]);const i=f.useCallback(async y=>{var k;try{if(!await Oe.getCheckSession(y)||!((k=t==null?void 0:t.adaptedData)!=null&&k.roomsData))return;const N=Object.values(t.adaptedData.roomsData),S={};for(const I of N){const P=await p(I.id);P&&(S[I.id]=P)}s(S),console.log(" tats des pices chargs:",Object.keys(S).length)}catch(C){console.error(" Erreur chargement tats pices:",C)}},[t]),l=f.useCallback(async(y,k,C,N,S="validate",I)=>{await at.trackButtonClick({buttonId:y,pieceId:k,taskId:C,etapeId:N,actionType:S,timestamp:new Date().toISOString(),metadata:I}),await b(k)},[]),c=f.useCallback(async(y,k,C,N,S)=>{const I=at.generatePhotoId();await at.trackPhotoTaken({photoId:I,taskId:y,pieceId:k,etapeId:N,photoData:C,timestamp:new Date().toISOString(),validated:!1,retakeCount:0,metadata:S}),await b(k)},[]),u=f.useCallback(async(y,k,C,N,S,I)=>{await at.trackCheckboxChange({checkboxId:y,taskId:k,pieceId:C,etapeId:I||k,isChecked:N,checkedAt:N?new Date().toISOString():void 0,uncheckedAt:N?void 0:new Date().toISOString(),notes:S}),await b(C)},[]),d=f.useCallback(async(y,k,C,N,S,I,P=[])=>{const E=at.generateSignalementId();await at.trackSignalement({signalementId:E,pieceId:y,taskId:k,type:C,severity:N,title:S,description:I,photos:P,createdAt:new Date().toISOString(),status:"open"}),await b(y)},[]),h=f.useCallback(async(y,k,C)=>{await at.trackPieceStateChange({pieceId:y,status:k,completedAt:k==="completed"?new Date().toISOString():void 0,validatedAt:k==="validated"?new Date().toISOString():void 0,completionPercentage:C??0,totalInteractions:0,photosCount:0,checkboxesCount:0,signalementsCount:0}),await b(y)},[]),m=f.useCallback(async(y,k,C="user_click")=>{await at.trackNavigation(y,k,C)},[]),p=f.useCallback(async y=>{try{const k=await at.getPieceInteractionState(y);if(!k)return{status:"not_started",completionPercentage:0,hasPhotos:!1,photosCount:0,hasValidatedPhotos:!1,hasCheckboxes:!1,checkboxesCount:0,checkedCheckboxesCount:0,hasSignalements:!1,signalementsCount:0,openSignalementsCount:0,totalInteractions:0};const{pieceState:C,photos:N,checkboxes:S,signalements:I}=k;return{status:(C==null?void 0:C.status)||"not_started",completionPercentage:(C==null?void 0:C.completionPercentage)||0,hasPhotos:N.length>0,photosCount:N.length,hasValidatedPhotos:N.some(P=>P.validated),hasCheckboxes:S.length>0,checkboxesCount:S.length,checkedCheckboxesCount:S.filter(P=>P.isChecked).length,hasSignalements:I.length>0,signalementsCount:I.length,openSignalementsCount:I.filter(P=>P.status==="open").length,totalInteractions:(C==null?void 0:C.totalInteractions)||0,lastInteractionAt:(C==null?void 0:C.completedAt)||(C==null?void 0:C.validatedAt),photos:N,checkboxes:S,signalements:I}}catch(k){return console.error(" Erreur rcupration tat visuel pice:",k),null}},[]),b=f.useCallback(async y=>{const k=await p(y);k&&s(C=>({...C,[y]:k}))},[p]),x=f.useCallback(async(y,k)=>{var j,L;const C=await at.getPieceInteractionState(k);if(!C)return{taskId:y,isCompleted:!1,hasPhoto:!1,hasCheckbox:!1,hasSignalements:!1};const{photos:N,checkboxes:S,signalements:I}=C,P=N.filter(D=>D.taskId===y),E=S.filter(D=>D.taskId===y),_=I.filter(D=>D.taskId===y);return{taskId:y,isCompleted:E.some(D=>D.isChecked)||P.some(D=>D.validated),hasPhoto:P.length>0,photoValidated:P.length>0?P[0].validated:void 0,hasCheckbox:E.length>0,checkboxChecked:E.length>0?E[0].isChecked:void 0,hasSignalements:_.length>0,lastInteractionAt:((j=P[0])==null?void 0:j.timestamp)||((L=E[0])==null?void 0:L.checkedAt)}},[]);return{trackButtonClick:l,trackPhotoTaken:c,trackCheckboxChange:u,trackSignalement:d,trackNavigation:m,updatePieceStatus:h,getPieceVisualState:p,getTaskVisualState:x,refreshPieceVisualState:b,loadAllPieceStates:i,pieceStates:o,getPieceStateFromCache:y=>o[y],isTrackingEnabled:!!n,getCurrentCheckId:()=>n,generatePhotoId:()=>at.generatePhotoId(),generateSignalementId:()=>at.generateSignalementId()}};function pI({isOpen:e,onClose:t,referencePhotos:n,onPhotosCaptured:r,pieceName:o,pieceId:s,flowType:i}){var mt,zt,fn,nn;const[l,c]=f.useState(0),[u,d]=f.useState(0),[h,m]=f.useState(!1),[p,b]=f.useState(!1),[x,w]=f.useState(null),[g,v]=f.useState(null),[y,k]=f.useState(null),[C,N]=f.useState(!1),[S,I]=f.useState(!1),[P,E]=f.useState(!1),[_,j]=f.useState(null),[L,D]=f.useState(!1),[z,A]=f.useState({show:!1,score:0}),R=f.useRef(null),T=f.useRef(null),O=f.useRef(null),H=f.useRef([]),{lockOrientation:q,unlockOrientation:Z}=kF(),G=n[l],K=Pm((G==null?void 0:G.url)||void 0),re=K==="landscape";f.useEffect(()=>{G&&K&&console.log(" Photo actuelle:",{url:G.url,orientation:K,isLandscape:re,willRotate:re?"OUI (-90deg)":"NON"})},[G,K,re]);const{stream:ie,error:Y,isLoading:ne,startCamera:xe,stopCamera:le,availableCameras:se,selectedCameraId:pe,switchCamera:ge,refreshCameras:We,diagnosticLogs:Xe,clearDiagnosticLogs:Pe}=gF(),{capturedPhotos:ze,capturePhoto:we,removePhoto:be,getCapturedPhotoForReference:_e}=yF(s),{uploadCapturedPhoto:Ne}=Yg(),{currentCheckId:nt}=Kn(),{trackButtonClick:He}=Hu(),Ye=async()=>{try{const B=/iPhone|iPad|iPod/.test(navigator.userAgent);let ye;B?ye={video:{facingMode:{ideal:"environment"}},audio:!1}:ye={video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1440}},audio:!1};const Ze=await navigator.mediaDevices.getUserMedia(ye);R.current&&(R.current.srcObject=Ze,await new Promise(Ke=>{if(!R.current){Ke();return}R.current.onloadedmetadata=()=>Ke(),R.current.onerror=()=>Ke(),setTimeout(()=>Ke(),3e3)}),await R.current.play()),j(Ze)}catch(B){const ye=B instanceof Error?B.message:String(B);alert(`Erreur camra: ${ye}`)}};f.useEffect(()=>{const B=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);if(e&&B&&!_){const ye=setTimeout(()=>{Ye()},300);return()=>clearTimeout(ye)}},[e,_,Ye]),f.useEffect(()=>{const ye=setInterval(()=>{const{uploadCapturedPhoto:Ze}=require("@/hooks/useImageUpload"),Ke=require("@/services/imageUploadService").imageUploadService;setCapturedPhotos(ce=>{var F;const te=new Map(ce);let M=!1;for(const[W,X]of te.entries()){const ee=Ke.getUploadedUrl(X.id);ee&&ee!==X.dataUrl&&(console.log(" Mise  jour URL photo:",{photoId:X.id,oldUrl:(F=X.dataUrl)==null?void 0:F.substring(0,50),newUrl:ee.substring(0,50)}),M=!0,te.set(W,{...X,dataUrl:ee}))}return M?te:ce})},500);return()=>clearInterval(ye)},[]),f.useEffect(()=>{!e&&_&&(_.getTracks().forEach(B=>B.stop()),j(null))},[e,_]);const It=f.useCallback(B=>{B.preventDefault(),B.stopPropagation(),D(!0)},[]),xt=f.useCallback(B=>{B.preventDefault(),B.stopPropagation(),D(!1)},[]),Dt=f.useCallback(B=>{B.preventDefault(),B.stopPropagation()},[]),oe=f.useCallback(async B=>{B.preventDefault(),B.stopPropagation(),D(!1);const Ze=Array.from(B.dataTransfer.files).find(ce=>ce.type.startsWith("image/"));if(!Ze){alert("Veuillez dposer un fichier image");return}const Ke=new FileReader;Ke.onload=async ce=>{var F;const te=(F=ce.target)==null?void 0:F.result,M=n[l];M&&nt&&await we({base64Image:te,tacheId:M.tache_id,checkId:nt,flowType:i,pieceId:s})},Ke.readAsDataURL(Ze)},[l,n,nt,i,s,we]),me=f.useCallback(async B=>{var Ke;const ye=(Ke=B.target.files)==null?void 0:Ke[0];if(!ye)return;if(!ye.type.startsWith("image/")){alert("Veuillez slectionner un fichier image");return}const Ze=new FileReader;Ze.onload=async ce=>{var F;const te=(F=ce.target)==null?void 0:F.result,M=n[l];M&&nt&&await we({base64Image:te,tacheId:M.tache_id,checkId:nt,flowType:i,pieceId:s})},Ze.readAsDataURL(ye),B.target.value=""},[l,n,nt,i,s,we]),Ie=f.useCallback(()=>{var B;(B=O.current)==null||B.click()},[]);f.useEffect(()=>{_&&n.length>0&&u===0&&(console.log(" Activation automatique du calque fantme (opacit 30%)"),d(.3))},[_,n.length]),f.useEffect(()=>{if(T.current&&n[l]&&!p&&_){const B=n[l];console.log(" Mise  jour image fantme:",B.url),T.current.src=B.url,T.current.onload=()=>{console.log(" Image fantme charge")},T.current.onerror=()=>{console.error(" Erreur chargement image fantme:",B.url)}}},[l,n,p,_]),f.useEffect(()=>{e&&n.length>0&&_&&setTimeout(()=>{if(T.current){const B=n[0];console.log(" Chargement initial de l'image fantme:",B.url),T.current.src=B.url,T.current.onload=()=>{console.log(" Premire image fantme charge avec succs"),d(.5),console.log(" Activation automatique de l'opacit du calque: 0.5")},T.current.onerror=()=>{console.error(" Erreur chargement premire image fantme:",B.url)}}else console.warn(" ghostRef.current est null - l'lment n'est pas encore dans le DOM")},100)},[e,n,_]),f.useEffect(()=>{e?(console.log(" Rinitialisation du modal pour nouvelle session"),N(!1),b(!1),w(null),v(null),k(null),c(0),H.current=[]):(d(0),H.current=[])},[e]),f.useEffect(()=>{e?(console.log(" Verrouillage de l'orientation en mode portrait"),q("portrait").catch(B=>{console.warn(" Impossible de verrouiller l'orientation:",B)})):(console.log(" Dverrouillage de l'orientation"),Z().catch(B=>{console.warn(" Impossible de dverrouiller l'orientation:",B)}))},[e,q,Z]);const Ue=f.useCallback(()=>{for(let B=l+1;B<n.length;B++){const ye=n[B];if(!_e(ye.tache_id))return B}for(let B=0;B<l;B++){const ye=n[B];if(!_e(ye.tache_id))return B}return-1},[l,n,_e]),Ct=f.useCallback(()=>{console.log(" Fermeture modal avec photos captures:",{fromState:ze.size,fromRef:H.current.length}),N(!1);const B=H.current;r(B),H.current=[],t()},[t,r,ze]),Te=f.useCallback(async()=>{var Ze,Ke;if(!R.current||h)return;const B=n[l],ye=(B==null?void 0:B.tache_id)||`no_ref_${Date.now()}`;m(!0);try{console.log(" Capture en cours...",{currentRefIndex:l,tache_id:ye,hasReference:!!B,etapeID:B==null?void 0:B.etapeID,flowType:i||"unknown",isTodo:B==null?void 0:B.isTodo,todoTitle:B==null?void 0:B.todoTitle});const ce=await we(R.current,ye);if(!ce){console.error(" Aucune photo capture !");return}(Ze=ce.meta)!=null&&Ze.isBlurry&&(A({show:!0,score:ce.meta.blurScore||0}),setTimeout(()=>{A({show:!1,score:0})},3e3)),H.current.push(ce),console.log(" Photo capture et ajoute au ref local:",{id:ce.id,referenceId:ce.referencePhotoId,totalInRef:H.current.length,...((Ke=ce.meta)==null?void 0:Ke.isBlurry)&&{" FLOU DTECT":`Score: ${ce.meta.blurScore}`}}),console.log(" Dclenchement upload automatique...",{photoId:ce.id,taskId:ye,etapeID:B==null?void 0:B.etapeID,flowType:i||"unknown",isTodo:B==null?void 0:B.isTodo,todoTitle:B==null?void 0:B.todoTitle,hasReference:!!B}),await Ne(ce,{taskId:ye,etapeId:B==null?void 0:B.etapeID,flowType:i,checkId:nt||void 0,metadata:{isTodo:(B==null?void 0:B.isTodo)||!1,todoTitle:(B==null?void 0:B.todoTitle)||"",hasReference:!!B}}),R.current&&(R.current.style.filter="brightness(1.5)",setTimeout(()=>{R.current&&(R.current.style.filter="none")},200)),console.log(" Upload termin");const te=n.length,M=new Set;ze.forEach((W,X)=>{M.add(X)}),M.add(ye);const F=M.size;if(console.log(" tat aprs capture:",{total:te,captured:F,remaining:te-F,allCompleted:F>=te,capturedPhotoIds:Array.from(M)}),F>=te&&(te>0||F>0)){console.log("  TOUTES LES PHOTOS CAPTURES !"),console.log(` ${te>0?te:F} photo(s) capture(s) pour ${o}`),N(!0),console.log(' Sauvegarde des interactions "task_complete" pour persistance...');try{if(n.length===0)await He("photo-task-no-ref",s,"no-ref-photo","no-ref-photo","complete",{taskType:"photo_capture",flowType:i,pieceName:o,totalPhotos:0,noReferencePhotos:!0,autoCompleted:!0,completedAt:new Date().toISOString()});else for(const W of n)await He(`photo-task-${W.tache_id}`,s,W.tache_id,W.etapeID||W.tache_id,"complete",{taskType:"photo_capture",photoUrl:W.url,flowType:i,pieceName:o,totalPhotos:te,autoCompleted:!0,completedAt:new Date().toISOString()});console.log(" Toutes les interactions sauvegardes !")}catch(W){console.error(" Erreur sauvegarde interactions:",W)}setTimeout(()=>{console.log(" Fermeture automatique du plugin photo");const W=H.current;console.log(" Photos  transmettre au parent (depuis ref local):",{count:W.length,photoIds:W.map(X=>X.id),capturedPhotosMapSize:ze.size,comparison:{fromRef:W.length,fromState:ze.size}}),console.log(" Transmission des photos au parent:",W.length),r(W),N(!1),H.current=[],t()},1500)}else{const W=Ue();W!==-1?(console.log(` ${te-F} photo(s) restante(s), navigation vers photo ${W+1}/${te}`),setTimeout(()=>c(W),300)):(console.warn(" Aucune photo suivante mais completion non dtecte, fermeture force"),N(!0),setTimeout(()=>{const X=H.current;console.log(" Fermeture force avec photos:",X.length),r(X),N(!1),H.current=[],t()},1500))}}catch(ce){console.error(" Erreur capture:",ce)}finally{m(!1)}},[l,n,we,h,ze,Ue,_e,nt,i,Ne,s,o,He,r,t]),Ge=f.useCallback(B=>{console.log(" Suppression photo:",B),be(B)},[be]),it=f.useCallback(B=>{const ye=_e(B),Ze=n.find(Ke=>Ke.tache_id===B);ye&&Ze?(console.log(" Affichage comparaison pour:",{referenceId:B,capturedPhotoId:ye.id,referencePhotoUrl:Ze.url}),w(ye.dataUrl),v(Ze.url),k(B),b(!0)):console.error(" Photo capture ou rfrence introuvable pour:",B)},[_e,n]),Qe=f.useCallback(()=>{if(console.log(" Fermeture cran de comparaison"),b(!1),w(null),v(null),k(null),T.current&&n[l]){const B=n[l];console.log(" Rechargement image fantme aprs comparaison:",B.url),T.current.src=B.url}},[l,n]),Nn=f.useCallback(async()=>{if(!R.current)return;console.log(" Forage manuel du dmarrage vido...");const B=R.current;try{await B.play(),console.log(" Vido dmarre manuellement"),E(!0),setTimeout(()=>{console.log(" Dimensions vido aprs dmarrage manuel:",{videoWidth:B.videoWidth,videoHeight:B.videoHeight}),(B.videoWidth===0||B.videoHeight===0)&&(console.error(" PROBLME PERSISTANT : Dimensions = 0x0"),alert(` La camra est connecte mais ne produit pas d'image.

Solutions:
1. Fermez les autres apps utilisant la camra
2. Redmarrez Safari
3. Vrifiez Rglages > Safari > Camra`))},1e3)}catch(ye){console.error(" chec dmarrage manuel vido:",ye),alert(" Impossible de dmarrer la vido. Vrifiez les permissions camra dans Rglages > Safari > Camra")}},[]),[je,U]=f.useState(!1),$=f.useCallback(B=>{const ye=document.querySelector(".opacity-slider-track");if(!ye)return;const Ze=ye.getBoundingClientRect(),Ke=B-Ze.top,ce=Ze.height,te=Math.max(0,Math.min(1,1-Ke/ce));d(te),T.current&&(T.current.style.opacity=String(te))},[]),Ve=f.useCallback(B=>{B.preventDefault(),U(!0),$(B.clientY)},[$]),Q=f.useCallback(B=>{B.preventDefault(),B.stopPropagation(),U(!0),B.touches.length>0&&requestAnimationFrame(()=>{$(B.touches[0].clientY)})},[$]),lt=f.useCallback(B=>{var Ze;if(!je)return;B.preventDefault();const ye="touches"in B?(Ze=B.touches[0])==null?void 0:Ze.clientY:B.clientY;ye!==void 0&&requestAnimationFrame(()=>{$(ye)})},[je,$]),bt=f.useCallback(()=>{U(!1)},[]);f.useEffect(()=>{if(je){const B=ce=>lt(ce),ye=ce=>lt(ce),Ze=()=>bt(),Ke=()=>bt();return document.addEventListener("mousemove",B),document.addEventListener("touchmove",ye,{passive:!1}),document.addEventListener("mouseup",Ze),document.addEventListener("touchend",Ke),document.addEventListener("touchcancel",Ke),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("touchmove",ye),document.removeEventListener("mouseup",Ze),document.removeEventListener("touchend",Ke),document.removeEventListener("touchcancel",Ke)}}},[je,lt,bt]);const ae=n[l],Me=ae?_e(ae.tache_id):null,yt=Pm(g||void 0)==="landscape";return e?a.jsxs("div",{className:"fixed inset-0 z-50 bg-black",children:[a.jsx(SF,{}),a.jsx(CF,{isLandscapePhoto:re}),z.show&&a.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-40 animate-pulse",children:a.jsxs("div",{className:"bg-yellow-500/80 text-yellow-900 px-4 py-2 rounded-lg text-sm font-medium shadow-lg backdrop-blur-sm",children:[" Photo potentiellement floue (score: ",z.score.toFixed(1),")"]})}),a.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 flex items-center justify-between p-4 bg-gradient-to-b from-black/80 to-transparent",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:Ct,className:"h-10 w-10 rounded-full bg-black/60 text-white hover:bg-black/80",children:a.jsx(no,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold",children:o}),a.jsx("p",{className:"text-white/70 text-sm",children:n.length>0?`Photo ${l+1} sur ${n.length}`:"Prendre une photo"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(De,{variant:"outline",className:"bg-black/60 text-white border-white/30",children:n.length>0?`${Array.from(ze.values()).length}/${n.length} captures`:`${Array.from(ze.values()).length} photo${Array.from(ze.values()).length>1?"s":""}`}),se.length>1&&a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>{const ye=(se.findIndex(Ze=>Ze.deviceId===pe)+1)%se.length;ge(se[ye].deviceId)},className:"h-10 w-10 rounded-full bg-black/60 text-white hover:bg-black/80 border-2 border-white/30",title:"Changer de camra",children:a.jsx(Xc,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"relative w-full h-full overflow-hidden flex items-center justify-center bg-black",onDragEnter:It,onDragOver:Dt,onDragLeave:xt,onDrop:oe,children:[a.jsxs("div",{className:"relative",style:{width:"100%",height:"100%"},children:[a.jsx("video",{ref:R,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full bg-black",style:{display:_?"block":"none",objectFit:"cover"}}),!_&&a.jsx("div",{className:"absolute inset-0 w-full h-full bg-gray-900 flex flex-col items-center justify-center gap-4",children:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Dmarrage de la camra..."}),a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-gray-400 border-t-transparent"})]}):a.jsxs(a.Fragment,{children:[a.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:me,className:"hidden"}),a.jsxs("div",{className:`flex flex-col items-center justify-center gap-4 p-8 border-2 border-dashed rounded-lg transition-colors ${L?"border-primary bg-primary/10":"border-gray-600"}`,children:[a.jsx(Jb,{className:"h-16 w-16 text-gray-400"}),a.jsx("p",{className:"text-gray-300 text-lg font-medium",children:"Dposez une image ici"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"ou"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(fe,{onClick:Ie,className:"bg-primary hover:bg-primary/90 text-white font-bold py-2 px-6 rounded-lg",children:" Choisir un fichier"}),a.jsx(fe,{onClick:Ye,variant:"outline",className:"font-bold py-2 px-6 rounded-lg",children:" Utiliser la webcam"})]})]})]})}),ae&&_&&ae.overlay_enabled!==!1&&a.jsx("img",{ref:T,alt:"Rfrence",className:"pointer-events-none",style:{position:"absolute",top:0,left:0,width:re?"100vh":"100vw",height:re?"100vw":"100vh",minWidth:re?"100vh":"100vw",minHeight:re?"100vw":"100vh",opacity:u,mixBlendMode:"normal",objectFit:"cover",transformOrigin:re?"50vh 50vh":"center",transform:re?"rotate(-90deg)":"none"}})]}),ae&&ae.overlay_enabled!==!1&&a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 z-10",children:a.jsxs("div",{className:"flex flex-col items-center gap-2 bg-black/60 rounded-full p-3 backdrop-blur-sm",children:[a.jsx("span",{className:"text-white text-xs",children:""}),a.jsxs("div",{className:"opacity-slider-track w-6 h-32 bg-white/30 rounded-full relative cursor-grab active:cursor-grabbing touch-none select-none",onMouseDown:Ve,onTouchStart:Q,children:[a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white/50 rounded-full",style:{height:`${u*100}%`,transition:"none"}}),a.jsx("div",{className:`absolute w-5 h-5 bg-white rounded-full border-2 border-white shadow-lg ${je?"scale-125 shadow-2xl":"scale-100"}`,style:{left:"50%",top:`${(1-u)*100}%`,transform:`translate(-50%, -50%) scale(${je?1.25:1})`,transition:"none"}})]}),a.jsx("span",{className:"text-white text-xs",children:""})]})}),a.jsx("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 z-10",children:a.jsx(fe,{onClick:Te,disabled:h||!_,className:`h-20 w-20 rounded-full border-4 transition-all duration-200 ${Me?"bg-green-500 border-green-300 hover:bg-green-600":"bg-white border-white/50 hover:bg-gray-100"}`,children:h?a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-gray-600 border-t-transparent"}):Me?a.jsx(qT,{className:"h-8 w-8 text-white"}):a.jsx(kt,{className:"h-8 w-8 text-gray-800"})})}),(n.length>1||n.length===0&&ze.size>0)&&a.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10",children:a.jsx("div",{className:"flex gap-2 bg-black/60 rounded-full p-2 backdrop-blur-sm",children:n.length>0?n.map((B,ye)=>{var te;const Ze=ye===l,Ke=_e(B.tache_id),ce=((te=Ke==null?void 0:Ke.meta)==null?void 0:te.isBlurry)||!1;return a.jsxs("button",{onClick:()=>{Ke?it(B.tache_id):c(ye)},className:`relative w-12 h-12 rounded-lg overflow-hidden transition-all ${Ze?"border-2 border-white scale-110 shadow-lg":Ke?"border-2 border-green-400 shadow-md":"border-2 border-white/30 hover:border-white/60"}`,children:[a.jsx("img",{src:B.url,alt:`Rfrence ${ye+1}`,className:"w-full h-full object-cover"}),Ke&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/40 to-green-600/60 backdrop-blur-[1px] flex items-center justify-center",children:a.jsx("div",{className:"bg-white rounded-full w-7 h-7 flex items-center justify-center shadow-xl",children:a.jsx(dn,{className:"w-5 h-5 text-green-600",strokeWidth:2.5})})}),ce&&a.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500 text-yellow-900 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold shadow-md",title:"Photo potentiellement floue",children:""})]},B.tache_id)}):Array.from(ze.values()).map((B,ye)=>{var Ze;return a.jsxs("button",{onClick:()=>{var Ke,ce;console.log(" Affichage photo capture:",{id:B.id,dataUrlLength:(Ke=B.dataUrl)==null?void 0:Ke.length,dataUrlStart:(ce=B.dataUrl)==null?void 0:ce.substring(0,50),referencePhotoId:B.referencePhotoId}),w(B.dataUrl),v(null),k(B.referencePhotoId),b(!0)},className:"relative w-12 h-12 rounded-lg overflow-hidden transition-all border-2 border-green-400 shadow-md hover:scale-110",title:`Photo ${ye+1}`,children:[a.jsx("img",{src:B.dataUrl,alt:`Photo capture ${ye+1}`,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/40 to-green-600/60 backdrop-blur-[1px] flex items-center justify-center",children:a.jsx("div",{className:"bg-white rounded-full w-7 h-7 flex items-center justify-center shadow-xl",children:a.jsx(dn,{className:"w-5 h-5 text-green-600",strokeWidth:2.5})})}),((Ze=B.meta)==null?void 0:Ze.isBlurry)&&a.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500 text-yellow-900 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold shadow-md",title:"Photo potentiellement floue",children:""})]},B.id)})})}),ie&&!P&&!ne&&!Y&&a.jsx("div",{className:"absolute inset-0 bg-black/90 flex items-center justify-center z-30",children:a.jsxs("div",{className:"text-center text-white max-w-md mx-auto p-6",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h2",{className:"text-xl font-bold mb-3",children:"Camra dtecte"}),a.jsxs("p",{className:"text-white/80 mb-6",children:["La camra est connecte mais la preview n'apparat pas.",a.jsx("br",{}),"Appuyez sur le bouton ci-dessous pour dmarrer."]}),a.jsx(fe,{onClick:Nn,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-6 text-lg",size:"lg",children:" Dmarrer la camra"}),a.jsxs("div",{className:"mt-6 text-sm text-white/60 space-y-2",children:[a.jsx("p",{children:" Si la preview reste noire aprs avoir appuy :"}),a.jsxs("ul",{className:"text-left space-y-1",children:[a.jsx("li",{children:" Fermez les autres apps utilisant la camra"}),a.jsx("li",{children:" Vrifiez Rglages > Safari > Camra"}),a.jsx("li",{children:" Redmarrez Safari si ncessaire"})]})]})]})}),(ne||Y)&&a.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-30",children:a.jsxs("div",{className:"text-center text-white",children:[ne&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-white border-t-transparent mx-auto mb-4"}),a.jsx("p",{children:"Dmarrage de la camra..."})]}),Y&&a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("p",{className:"text-lg mb-2",children:"Erreur camra"}),a.jsx("p",{className:"text-sm text-white/70 mb-6",children:Y}),se.length>1&&a.jsxs("div",{className:"mb-4 space-y-2",children:[a.jsx("p",{className:"text-sm text-white/80",children:"Essayez une autre camra :"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(cI,{value:pe||"",onValueChange:ge,children:[a.jsx(Gg,{className:"bg-white/10 border-white/20 text-white",children:a.jsx(uI,{placeholder:"Choisir une camra"})}),a.jsx(Kg,{children:se.map(B=>a.jsx(Wu,{value:B.deviceId,children:B.label},B.deviceId))})]}),a.jsx(fe,{onClick:We,variant:"outline",size:"sm",className:"text-white border-white/20 bg-white/10",children:a.jsx(Xc,{className:"h-3 w-3"})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx(fe,{onClick:async()=>{console.log(" Demande d'autorisation camra via bouton");const B=await pF();if(B.granted)console.log(" Permissions accordes, redmarrage camra..."),await We(),await xe();else{console.log(" Permissions refuses:",B.error);let ye;B.needsPolyfill?ye=` ${B.error}

 Solutions recommandes :

1. Mettez  jour votre navigateur vers la dernire version
2. Utilisez un navigateur rcent :
    Chrome (version 53+)
    Firefox (version 36+)
    Safari (version 11+)
    Edge (version 12+)
3. Si vous utilisez un navigateur d'entreprise, contactez votre support IT
4. En dernier recours, utilisez l'upload de fichier comme alternative`:ye=` ${B.error}

 Instructions dtailles :

1. Regardez l'icne  ou  dans la barre d'adresse
2. Cliquez dessus et slectionnez "Autoriser"
3. Ou allez dans les paramtres du navigateur > Confidentialit > Camra
4. Autorisez ce site  accder  votre camra
5. Rechargez la page si ncessaire`,alert(ye)}},className:"bg-blue-600 hover:bg-blue-700 text-white border-0 px-6 py-2 font-medium",disabled:ne,children:ne?" Demande en cours...":" Autoriser l'accs camra"})}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsxs(fe,{onClick:xe,variant:"outline",className:"text-white border-white bg-white/10 hover:bg-white/20",children:[a.jsx(kt,{className:"h-4 w-4 mr-1"}),"Ressayer"]}),a.jsxs(fe,{onClick:We,variant:"outline",className:"text-white border-white/20 bg-white/5 hover:bg-white/10",children:[a.jsx(Xc,{className:"h-4 w-4 mr-1"}),"Actualiser"]}),a.jsxs(fe,{onClick:()=>{le(),t(),setTimeout(()=>{window.location.reload()},100)},variant:"ghost",size:"sm",className:"text-white/70 hover:text-white hover:bg-white/10",children:[a.jsx(YT,{className:"h-4 w-4 mr-1"}),"Redmarrer le plugin"]})]}),a.jsxs("div",{className:"text-xs text-white/60 space-y-1",children:[a.jsxs("div",{children:[" Camras dtectes: ",se.length]}),pe&&a.jsxs("div",{children:[" Slectionne: ",((mt=se.find(B=>B.deviceId===pe))==null?void 0:mt.label)||"Inconnue"]})]}),a.jsxs("div",{className:"text-xs text-white/70 mt-4 text-left",children:[a.jsx("p",{className:"font-medium mb-2",children:" Comment rsoudre :"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"bg-white/10 rounded p-2",children:[a.jsx("p",{className:"font-medium text-white/90 mb-1",children:" Permissions camra :"}),a.jsxs("ul",{className:"space-y-1",children:[a.jsx("li",{children:` Cliquez sur "Autoriser l'accs camra" ci-dessus`}),a.jsx("li",{children:" Ou cliquez sur l'icne / dans la barre d'adresse"}),a.jsx("li",{children:' Slectionnez "Autoriser" pour la camra'})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white/90 mb-1",children:" Autres solutions :"}),a.jsxs("ul",{className:"space-y-1",children:[a.jsx("li",{children:" Fermez les autres applications utilisant la camra"}),a.jsx("li",{children:" Essayez une autre camra si disponible"}),a.jsx("li",{children:" Rechargez la page si le problme persiste"}),a.jsx("li",{children:" Vrifiez que vous tes sur HTTPS (scuris)"})]})]})]})]})]})]})]})})]}),C&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-900/95 to-black/95 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs("div",{className:"text-center text-white max-w-md px-6",children:[a.jsxs("div",{className:"relative mb-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"w-32 h-32 bg-green-500/20 rounded-full animate-ping"})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"text-8xl mb-2",children:""}),a.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 rounded-full p-3 shadow-xl animate-bounce",children:a.jsx(dn,{className:"w-8 h-8 text-white",strokeWidth:3})})]})]}),a.jsx("h2",{className:"text-3xl font-bold mb-3 bg-gradient-to-r from-green-300 to-green-100 bg-clip-text text-transparent",children:"C'est termin !"}),a.jsx("p",{className:"text-xl text-white/90 mb-2",children:n.length>0?`${n.length} photo${n.length>1?"s":""} capture${n.length>1?"s":""} `:`${Array.from(ze.values()).length} photo${Array.from(ze.values()).length>1?"s":""} capture${Array.from(ze.values()).length>1?"s":""} `}),a.jsxs("p",{className:"text-base text-white/60 mb-6",children:["pour ",o]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full animate-pulse",style:{width:"100%"}})})}),a.jsxs("div",{className:"flex items-center justify-center gap-3 text-white/70",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white/30 border-t-white"}),a.jsx("p",{className:"text-sm",children:"Fermeture automatique..."})]})]})}),p&&x&&a.jsxs("div",{className:"absolute inset-0 bg-black z-40",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 flex items-center justify-between p-4 bg-gradient-to-b from-black/80 to-transparent",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:Qe,className:"h-10 w-10 rounded-full bg-black/60 text-white hover:bg-black/80",children:a.jsx(no,{className:"h-5 w-5"})}),a.jsx("div",{children:a.jsxs("h2",{className:"text-white font-semibold",children:[o," - Comparaison"]})})]})}),a.jsx("div",{className:"h-full pt-20 pb-24 px-4",children:a.jsxs("div",{className:`grid ${g?"grid-cols-1 md:grid-cols-2":"grid-cols-1"} gap-4 h-full`,children:[g&&a.jsxs("div",{className:"bg-gray-900 rounded-2xl overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-700",children:a.jsx("h3",{className:"text-white font-semibold text-center",children:" Rfrence"})}),a.jsx("div",{className:"flex-1 relative flex items-center justify-center bg-black w-full h-full",children:a.jsx("img",{src:g,alt:"Rfrence",className:"w-full h-full object-contain",style:{transform:yt?"rotate(-90deg)":"none",transformOrigin:"center center"}})})]}),a.jsxs("div",{className:"bg-gray-900 rounded-2xl overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-700",children:a.jsx("h3",{className:"text-white font-semibold text-center",children:" Photo capture"})}),a.jsx("div",{className:"flex-1 relative flex items-center justify-center bg-black w-full h-full p-4",children:a.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:a.jsxs("div",{className:"relative border-4 border-green-500 rounded-3xl overflow-hidden shadow-2xl",style:{maxWidth:"100%",maxHeight:"100%"},children:[a.jsx("img",{src:x,alt:"Photo capture",className:"w-full h-full object-contain",onLoad:()=>{console.log(" Photo capture charge avec succs")},onError:B=>{console.error(" Erreur chargement photo capture:",{src:x==null?void 0:x.substring(0,100),error:B})}}),a.jsx("div",{className:"absolute top-4 left-4 bg-black/60 rounded-full p-2 backdrop-blur-sm",children:a.jsx(kt,{className:"w-6 h-6 text-white"})}),x&&y&&_e(y)&&a.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/60 text-white px-3 py-2 rounded-lg backdrop-blur-sm flex items-center gap-2 text-sm font-medium",children:[a.jsx("span",{children:""}),a.jsx("span",{children:new Date(((zt=_e(y))==null?void 0:zt.timestamp)||Date.now()).toLocaleString("fr-FR")})]}),x&&y&&((nn=(fn=_e(y))==null?void 0:fn.meta)==null?void 0:nn.isBlurry)&&a.jsxs("div",{className:"absolute top-4 right-4 bg-yellow-500 text-yellow-900 px-3 py-1.5 rounded-full flex items-center gap-2 font-semibold text-sm shadow-lg",title:"Photo potentiellement floue",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{children:"Photo floue"})]})]})})})]})]})}),a.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-50",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(fe,{onClick:Qe,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white",children:"Garder cette photo"}),a.jsx(fe,{onClick:()=>{if(y){console.log(" Reprise de la photo:",y);const B=n.findIndex(ye=>ye.tache_id===y);B!==-1?(console.log(" Positionnement sur la photo  reprendre:",{tache_id:y,index:B,photoNumber:B+1}),Ge(y),c(B),Qe(),console.log(" Prt  reprendre la photo")):console.error(" Photo de rfrence introuvable pour:",y)}else console.error(" Aucun comparisonReferenceId disponible")},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Reprendre la photo"})]})})]}),S&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-50 bg-black/95 border-t border-gray-700 max-h-[50vh] overflow-y-auto",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-white font-bold text-lg",children:" Diagnostic iPhone"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(fe,{size:"sm",variant:"ghost",onClick:Pe,className:"text-white hover:bg-white/10",children:""}),a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>{const B=Xe.map(ye=>`[${ye.timestamp}] ${ye.message}`).join(`
`);navigator.clipboard.writeText(B),alert(" Logs copis dans le presse-papier !")},className:"text-white hover:bg-white/10",children:""}),a.jsx(fe,{size:"sm",variant:"ghost",onClick:()=>I(!1),className:"text-white hover:bg-white/10",children:a.jsx(no,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"mb-4 bg-gray-800 rounded p-3 space-y-2 text-xs",children:[a.jsx("h4",{className:"font-bold text-white",children:" tat actuel"}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{children:["Stream: ",a.jsx("span",{className:ie?"text-green-400":"text-red-400",children:ie?" Connect":" Dconnect"})]}),a.jsxs("div",{children:["Vido playing: ",a.jsx("span",{className:P?"text-green-400":"text-red-400",children:P?" En lecture":" Arrte"})]}),ie&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Tracks: ",ie.getVideoTracks().length," vido"]}),ie.getVideoTracks().map((B,ye)=>a.jsxs("div",{className:"ml-2 text-gray-400",children:[" ",B.label,a.jsx("br",{}),"tat: ",B.readyState,", Enabled: ",B.enabled?"Oui":"Non"]},ye))]}),R.current&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Dimensions: ",R.current.videoWidth,"x",R.current.videoHeight]}),a.jsxs("div",{children:["Ready state: ",R.current.readyState]})]})]})]}),ie&&!P&&a.jsxs("div",{className:"mb-3",children:[a.jsx(fe,{onClick:Nn,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:" FORCER DMARRAGE VIDO"}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:" Si l'cran reste noir, cliquez ici pour forcer le dmarrage de la preview"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(fe,{onClick:async()=>{try{le(),await new Promise(ye=>setTimeout(ye,500)),(await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"}}})).getTracks().forEach(ye=>ye.stop()),await new Promise(ye=>setTimeout(ye,300)),xe()}catch(B){const ye=B;console.error(" Erreur forage camra:",B),alert(` ${ye.name||"Error"}: ${ye.message||"Unknown error"}

Si vous voyez "Permission denied", allez dans:
Rglages > Safari > Camra > Autoriser`)}},className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:" Forcer permission camra ARRIRE"}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:" Si la camra avant fonctionne mais pas l'arrire, utilisez ce bouton pour forcer iOS  demander la permission"})]}),a.jsx("div",{className:"space-y-1 font-mono text-xs",children:Xe.length===0?a.jsx("p",{className:"text-gray-400",children:"Aucun log pour le moment..."}):Xe.map((B,ye)=>a.jsxs("div",{className:`p-2 rounded ${B.type==="error"?"bg-red-900/30 text-red-200":B.type==="success"?"bg-green-900/30 text-green-200":B.type==="warning"?"bg-yellow-900/30 text-yellow-200":"bg-gray-800 text-gray-300"}`,children:[a.jsxs("span",{className:"text-gray-500",children:["[",B.timestamp,"]"]})," ",B.message]},ye))})]})})]}):null}function Qg({isOpen:e,onClose:t,imageUrl:n,imageTitle:r="Photo de rfrence"}){const[o,s]=f.useState(1),[i,l]=f.useState({x:0,y:0}),[c,u]=f.useState(!1),[d,h]=f.useState({x:0,y:0}),m=f.useRef(null),p=f.useRef(null),b=f.useRef(0);f.useEffect(()=>{e&&(s(1),l({x:0,y:0}))},[e]);const x=()=>{s(_=>Math.min(_+.5,5))},w=()=>{s(_=>Math.max(_-.5,1)),o<=1.5&&l({x:0,y:0})},g=()=>{s(1),l({x:0,y:0})},v=()=>{const _=Date.now(),j=_-b.current;j<300&&j>0&&(o>1?g():s(2.5)),b.current=_},y=_=>{if(_.touches.length===2){const j=E(_.touches);p.current=j}else _.touches.length===1&&o>1&&(u(!0),h({x:_.touches[0].clientX-i.x,y:_.touches[0].clientY-i.y}))},k=_=>{if(_.touches.length===2&&p.current!==null){_.preventDefault();const j=E(_.touches),L=j/p.current,D=Math.max(1,Math.min(5,o*L));s(D),p.current=j}else _.touches.length===1&&c&&o>1&&(_.preventDefault(),l({x:_.touches[0].clientX-d.x,y:_.touches[0].clientY-d.y}))},C=()=>{p.current=null,u(!1)},N=_=>{o>1&&(u(!0),h({x:_.clientX-i.x,y:_.clientY-i.y}))},S=_=>{c&&o>1&&l({x:_.clientX-d.x,y:_.clientY-d.y})},I=()=>{u(!1)},P=_=>{_.preventDefault();const j=_.deltaY>0?-.2:.2,L=Math.max(1,Math.min(5,o+j));s(L),L<=1&&l({x:0,y:0})},E=_=>{const j=_[0].clientX-_[1].clientX,L=_[0].clientY-_[1].clientY;return Math.sqrt(j*j+L*L)};return a.jsx(Gn,{open:e,onOpenChange:t,children:a.jsxs(On,{className:"max-w-[95vw] max-h-[95vh] p-0 bg-black/95 border-none overflow-hidden",onInteractOutside:_=>{t()},children:[a.jsxs(sr,{className:"sr-only",children:[a.jsx(ar,{children:r}),a.jsx(kg,{children:"Utilisez le pinch-to-zoom ou les boutons pour zoomer sur la photo"})]}),a.jsx("div",{className:"absolute top-4 right-4 z-20 flex flex-col gap-2",children:a.jsx(fe,{variant:"ghost",size:"icon",onClick:t,className:"h-12 w-12 rounded-full bg-red-600 hover:bg-red-700 text-white shadow-lg transition-all duration-200",children:a.jsx(no,{className:"h-6 w-6"})})}),a.jsxs("div",{className:"absolute top-4 left-4 z-20 flex flex-col gap-2",children:[a.jsx(fe,{variant:"secondary",size:"icon",onClick:x,disabled:o>=5,className:"bg-black/70 hover:bg-black/90 text-white rounded-full",children:a.jsx(va,{className:"h-5 w-5"})}),a.jsx(fe,{variant:"secondary",size:"icon",onClick:w,disabled:o<=1,className:"bg-black/70 hover:bg-black/90 text-white rounded-full",children:a.jsx(ZT,{className:"h-5 w-5"})}),o>1&&a.jsx(fe,{variant:"secondary",size:"icon",onClick:g,className:"bg-black/70 hover:bg-black/90 text-white rounded-full",children:a.jsx(HT,{className:"h-4 w-4"})})]}),o>1&&a.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-20 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[Math.round(o*100),"%"]}),a.jsx("div",{ref:m,className:"relative w-full h-[95vh] flex items-center justify-center overflow-hidden cursor-move",onTouchStart:y,onTouchMove:k,onTouchEnd:C,onMouseDown:N,onMouseMove:S,onMouseUp:I,onMouseLeave:I,onWheel:P,onClick:v,children:a.jsx("img",{src:n,alt:r,className:"max-w-full max-h-full object-contain select-none pointer-events-none",style:{transform:`translate(${i.x}px, ${i.y}px) scale(${o})`,transition:c?"none":"transform 0.2s ease-out",touchAction:"none"},draggable:!1,onLoad:()=>console.log(" Image charge dans modal zoom"),onError:_=>{console.error(" Erreur chargement image modal zoom:",_.currentTarget.src)}})}),a.jsxs("div",{className:"absolute bottom-4 right-4 z-20 bg-black/70 text-white px-3 py-2 rounded-lg text-xs max-w-[200px]",children:[a.jsx("p",{children:" Pincement pour zoomer"}),a.jsx("p",{children:" Double-tap pour zoomer"}),a.jsx("p",{children:" Glisser pour dplacer"})]})]})})}const My=({src:e,alt:t,className:n="",onClick:r})=>{const[o,s]=f.useState(!0),[i,l]=f.useState(!1),[c,u]=f.useState(!1),d=V.useRef(null),h=V.useRef(null);f.useEffect(()=>{const b=new IntersectionObserver(([x])=>{x.isIntersecting&&(u(!0),b.unobserve(x.target))},{rootMargin:"50px"});return h.current&&b.observe(h.current),()=>{h.current&&b.unobserve(h.current)}},[]);const m=()=>{s(!1),l(!1)},p=()=>{s(!1),l(!0),console.error("Erreur chargement image:",e)};return a.jsxs("div",{ref:h,className:`relative bg-muted overflow-hidden ${n}`,onClick:r,children:[o&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-muted via-muted-foreground/10 to-muted animate-pulse flex items-center justify-center",children:a.jsx(Xb,{className:"h-6 w-6 text-muted-foreground animate-spin"})}),c&&!i&&a.jsx("img",{ref:d,src:e,alt:t,loading:"lazy",className:`w-full h-full object-cover transition-opacity duration-300 ${o?"opacity-0":"opacity-100"}`,onLoad:m,onError:p}),i&&a.jsx("div",{className:"absolute inset-0 bg-muted flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-xs text-muted-foreground",children:"Erreur chargement"})})})]})},NF=ps("",{variants:{variant:{"page-title":"text-lg sm:text-xl font-semibold text-foreground leading-tight","page-subtitle":"text-xs sm:text-sm text-muted-foreground leading-snug","section-title":"text-base sm:text-lg font-semibold text-foreground leading-tight","section-subtitle":"text-sm sm:text-base font-medium text-foreground leading-snug",body:"text-xs sm:text-sm text-foreground leading-snug","body-secondary":"text-xs sm:text-sm text-muted-foreground leading-snug",caption:"text-xs text-muted-foreground leading-snug","card-title":"text-sm sm:text-base font-semibold text-foreground leading-tight","card-description":"text-xs sm:text-sm text-muted-foreground leading-snug",status:"text-xs font-medium leading-none",metadata:"text-xs text-muted-foreground leading-snug"},align:{left:"text-left",center:"text-center",right:"text-right"}},defaultVariants:{variant:"body",align:"left"}}),gt=f.forwardRef(({className:e,variant:t,align:n,as:r="p",...o},s)=>a.jsx(r,{className:ke(NF({variant:t,align:n}),e),ref:s,...o}));gt.displayName="Typography";const gI=f.createContext(void 0),IF=({children:e})=>{const{rooms:t}=Sn(),[n,r]=f.useState({currentStep:{pieceId:"",taskIndex:0,stepNumber:1,totalSteps:0},isCompleted:!1,completedSteps:[],completedTasks:{},takenPhotos:{},flowSequence:[]});f.useEffect(()=>{if(t.length===0)return;const p=t.reduce((b,x)=>{var w;return b+(((w=x.tasks)==null?void 0:w.length)||0)},0);if(p>0&&p!==n.flowSequence.length){const b=[];let x=1;t.forEach(g=>{var y;const v=((y=g.tasks)==null?void 0:y.length)||0;for(let k=0;k<v;k++)b.push({pieceId:g.id,taskIndex:k,stepNumber:x++,totalSteps:0})});const w=b.length;b.forEach(g=>{g.totalSteps=w}),console.log(" CheckoutFlow: Initialisation avec les pices du parcours:",{roomsCount:t.length,totalSteps:w,firstStep:b[0],flowSequence:b}),r(g=>({...g,flowSequence:b,currentStep:b[0]||g.currentStep,isCompleted:!1}))}},[t,n.flowSequence.length]);const o=()=>{r(p=>{const b=p.flowSequence.findIndex(x=>x.pieceId===p.currentStep.pieceId&&x.taskIndex===p.currentStep.taskIndex);return b<p.flowSequence.length-1?{...p,currentStep:p.flowSequence[b+1]}:{...p,isCompleted:!0}})},s=p=>{r(b=>({...b,completedSteps:[...b.completedSteps,p],completedTasks:{...b.completedTasks,[p]:!0}}))},i=(p,b=0)=>{r(x=>{const w=x.flowSequence.findIndex(g=>g.pieceId===p&&g.taskIndex===b);return w!==-1?{...x,currentStep:x.flowSequence[w]}:x})},l=(p,b)=>{const x=b.find(w=>w.id===p);return x!=null&&x.tasks?x.tasks.every(w=>n.completedTasks[w.id]):!1},c=(p,b)=>{const x=b.find(g=>g.id===p);return x!=null&&x.tasks?{completed:x.tasks.filter(g=>n.completedTasks[g.id]).length,total:x.tasks.length}:{completed:0,total:0}},u=p=>{r(b=>{const x=b.currentStep.pieceId;if(l(x,p)){const w=b.flowSequence.findIndex(g=>g.pieceId===b.currentStep.pieceId&&g.taskIndex===b.currentStep.taskIndex);if(w<b.flowSequence.length-1)return{...b,currentStep:b.flowSequence[w+1]};if(b.flowSequence.every(v=>{var C;const y=p.find(N=>N.id===v.pieceId),k=(C=y==null?void 0:y.tasks)==null?void 0:C[v.taskIndex];return k?b.completedTasks[k.id]:!1}))return{...b,isCompleted:!0,endTime:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}}return b})},d=()=>{r(p=>({...p,startTime:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}))},h=(p,b)=>{r(x=>({...x,takenPhotos:{...x.takenPhotos,[p]:b}}))},m=()=>{r(p=>({currentStep:p.flowSequence[0]||{pieceId:"",taskIndex:0,stepNumber:1,totalSteps:0},isCompleted:!1,completedSteps:[],completedTasks:{},takenPhotos:{},startTime:void 0,endTime:void 0,flowSequence:p.flowSequence}))};return a.jsx(gI.Provider,{value:{flowState:n,nextStep:o,completeStep:s,resetFlow:m,jumpToPiece:i,isPieceCompleted:l,getPieceProgress:c,checkAutoAdvancement:u,startCheckout:d,addTakenPhotos:h},children:e})},Hd=()=>{const e=f.useContext(gI);if(e===void 0)throw new Error("useCheckoutFlow must be used within a CheckoutFlowProvider");return e},vI=f.createContext(void 0),Jf={currentStep:{pieceId:"",taskIndex:0,stepNumber:1,totalSteps:0},completedTasks:{},takenPhotos:{},isCompleted:!1,flowSequence:[]},jF=({children:e})=>{const t=Ot(),[n,r]=f.useState(Jf),{rooms:o}=Sn(),{currentCheckId:s}=Kn(),i=t.pathname.includes("checkin"),l=f.useRef(!1),c=f.useCallback(async(y,k)=>{if(!s){console.log(" CheckinFlow: Pas de CheckID, skip sauvegarde progression");return}try{await Oe.updateSessionProgress(s,{currentPieceId:y,currentTaskIndex:k,interactions:{}}),console.log(" CheckinFlow: Progression sauvegarde:",{pieceId:y,taskIndex:k,checkId:s})}catch(C){console.error(" CheckinFlow: Erreur sauvegarde progression:",C)}},[s]);f.useEffect(()=>{(async()=>{var k,C;if(i){if(l.current){console.log(" CheckinFlow: Progression dj charge, skip");return}if(!s){console.log(" CheckinFlow: Pas de CheckID, skip chargement progression");return}if(n.flowSequence.length===0){console.log(" CheckinFlow: Squence vide, skip chargement progression");return}try{console.log(" CheckinFlow: Tentative de chargement progression pour checkId:",s);const N=await Oe.getCheckSession(s);if(N!=null&&N.progress){console.log(" CheckinFlow: Progression trouve:",N.progress);const S={};if((k=N.progress.interactions)!=null&&k.pieceStates&&Object.entries(N.progress.interactions.pieceStates).forEach(([I,P])=>{if(P.status==="completed"||P.status==="validated"){const E=o.find(_=>_.id===I);E!=null&&E.tasks&&E.tasks.forEach(_=>{S[_.id]=!0})}}),(C=N.progress.interactions)!=null&&C.buttonClicks&&Object.entries(N.progress.interactions.buttonClicks).forEach(([I,P])=>{if(P.some(E=>{var _;return((_=E.metadata)==null?void 0:_.validationMode)==="validated"})){const E=I.replace("validate_","");S[E]=!0}}),console.log(" CheckinFlow: Tches compltes restaures:",Object.keys(S).length),N.progress.currentPieceId&&N.progress.currentTaskIndex!==void 0){const I=n.flowSequence.findIndex(P=>P.pieceId===N.progress.currentPieceId);if(I>=0){const P=n.flowSequence[I];console.log(" CheckinFlow: Position restaure:",P),r(E=>({...E,currentStep:P,completedTasks:S})),l.current=!0}else console.warn(" CheckinFlow: tape non trouve dans la squence:",N.progress.currentPieceId)}N.isFlowCompleted&&console.log(" CheckinFlow: Session marque complte mais pas d'auto-completion aprs F5")}else console.log(" CheckinFlow: Pas de progression sauvegarde pour ce checkId")}catch(N){console.error(" CheckinFlow: Erreur chargement progression:",N)}}})()},[s,n.flowSequence.length,o,i]),f.useEffect(()=>{if(i&&o.length>0&&n.flowSequence.length===0){const y=o.map((k,C)=>({pieceId:k.id,taskIndex:0,stepNumber:C+1,totalSteps:o.length}));console.log(" CheckinFlow: Initialisation avec les pices du parcours:",{roomsCount:o.length,flowSequence:y}),r(k=>({...k,flowSequence:y,currentStep:y[0]||k.currentStep,isCompleted:!1}))}},[o.length,n.flowSequence.length,i]);const v={flowState:n,nextStep:()=>{r(y=>{const k=y.flowSequence.findIndex(C=>C.stepNumber===y.currentStep.stepNumber);if(k<y.flowSequence.length-1){const C=y.flowSequence[k+1];return c(C.pieceId,C.taskIndex),{...y,currentStep:C}}return s&&Oe.completeCheckSession(s),{...y,isCompleted:!0}})},completeStep:y=>{r(k=>({...k,completedTasks:{...k.completedTasks,[y]:!0}}))},jumpToPiece:(y,k=0)=>{r(C=>{let N=C.flowSequence.find(S=>S.pieceId===y&&S.taskIndex===k);if(!N){const S=C.flowSequence.find(I=>I.pieceId===y);S&&(N={...S,taskIndex:k},console.log(" CheckinFlow: Cration tape temporaire pour navigation:",{pieceId:y,taskIndex:k}))}return N?(c(y,k),{...C,currentStep:N,isCompleted:!1}):(console.warn(" CheckinFlow: Impossible de trouver la pice:",y),C)})},isPieceCompleted:(y,k)=>k?k.every(C=>n.completedTasks[C.id]):!1,checkAutoAdvancement:async y=>{var k,C;try{if(!s){console.warn(" CheckinFlow: Pas de CheckID actif pour vrifier l'avancement");return}const N=await Oe.getCheckSession(s),S=((C=(k=N==null?void 0:N.progress)==null?void 0:k.interactions)==null?void 0:C.pieceStates)||{},I=y.every(P=>{const E=S[P.id];return(E==null?void 0:E.status)==="validated"||(E==null?void 0:E.status)==="completed"});console.log(" CheckinFlow checkAutoAdvancement:",{allPiecesValidated:I,piecesCount:y.length,validatedPiecesCount:y.filter(P=>{const E=S[P.id];return(E==null?void 0:E.status)==="validated"||(E==null?void 0:E.status)==="completed"}).length,pieceStatesKeys:Object.keys(S)}),I&&(console.log(" CheckinFlow: Toutes les pices valides, marquage isCompleted = true"),r(P=>({...P,isCompleted:!0})))}catch(N){console.error(" CheckinFlow: Erreur vrification avancement:",N)}},addTakenPhotos:(y,k)=>{r(C=>({...C,takenPhotos:{...C.takenPhotos,[y]:k}}))},getTakenPhotos:y=>n.takenPhotos[y]||[],startCheckin:()=>{r(Jf)},resetFlow:()=>{r(Jf)},saveProgressToCheckId:c};return a.jsx(vI.Provider,{value:v,children:e})},Xg=()=>{const e=f.useContext(vI);if(!e)throw new Error("useCheckinFlow must be used within a CheckinFlowProvider");return e};function Ba(e,t,n,r){var c;if(!r||!r.tasks||r.tasks.length===0)return!1;const o=r.tasks[0];if(!o)return!1;if(t[o.id])return!0;const s=n.get(o.id)||[],l=(((c=r.photoReferences)==null?void 0:c.checkin)||[]).length;return l===0?!1:s.length>=l}function Ly(e,t,n){return e.every(r=>Ba(r.id,t,n,r))}function $y(e,t,n){for(const r of e)if(!Ba(r.id,t,n,r))return r;return null}function xI({pieces:e,currentPieceId:t,onPieceSelected:n,onSelectorOpened:r,signalements:o=0,currentTasks:s=[],currentTaskIndex:i=0,completedTasks:l={},onTaskSelected:c,capturedPhotos:u=new Map}){const[d,h]=f.useState(!1),m=e.find(I=>I.id===t);e.findIndex(I=>I.id===t);const b=Ot().pathname.includes("checkin"),x=Hd(),w=Xg(),g=b?w:x,{isPieceCompleted:v}=g,y=f.useMemo(()=>{const I={};return e.forEach(P=>{var E;(E=P.tasks)==null||E.forEach(_=>{_.completed&&(I[_.id]=!0)})}),I},[e]),k=(I,P)=>{if(b){const E=P.find(j=>j.id===I);return E!=null&&E.tasks?{completed:E.tasks.filter(j=>w.flowState.completedTasks[j.id]).length,total:E.tasks.length}:{completed:0,total:1}}else return x.getPieceProgress(I,P)},C=I=>b?Ba(I.id,w.flowState.completedTasks,u,I):!1,N=I=>{typeof window<"u"&&window.analytics&&window.analytics.track("piece_selected_from_selector",{piece_id:I}),n(I),h(!1)},S=()=>{typeof window<"u"&&window.analytics&&window.analytics.track("piece_selector_opened"),r==null||r()};return a.jsxs(zg,{open:d,onOpenChange:h,children:[a.jsx(yU,{asChild:!0,children:a.jsx(fe,{variant:"ghost",className:"group h-auto px-3 sm:px-4 py-2.5 sm:py-3 text-sm font-medium text-foreground hover:text-primary transition-all duration-300 hover:scale-[1.02] bg-white/60 backdrop-blur-sm border border-white/40 rounded-lg shadow-card hover:shadow-elegant focus:ring-2 focus:ring-primary/20 max-w-[calc(100vw-180px)] w-auto",onClick:S,children:a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 overflow-hidden",children:[a.jsx(gt,{variant:"section-subtitle",className:"font-semibold truncate max-w-[100px] xs:max-w-[120px] sm:max-w-[180px] md:max-w-[220px] lg:max-w-[280px]",children:(m==null?void 0:m.nom)||"Pice"}),a.jsx(fd,{className:"h-4 w-4 flex-shrink-0 transition-transform duration-300 group-hover:rotate-180"})]})})}),a.jsxs(Bg,{className:"max-w-md mx-auto bg-white border-t border-gray-200",children:[a.jsx(Wg,{className:"text-center border-b border-gray-200",children:a.jsx(Hg,{children:"Slectionner une pice"})}),a.jsx("div",{className:"px-6 pb-6 space-y-4 max-h-[80vh] overflow-y-auto",children:a.jsx("div",{className:"space-y-4",children:e.map((I,P)=>{const E=v(I.id,e),j=k(I.id,e).completed>0,L=I.id===t,D=I.tasks||[];return b?(D.length>0&&(y!=null&&y[D[0].id]),a.jsx(fe,{variant:"ghost",className:`w-full justify-start h-auto min-h-0 p-4 rounded-2xl transition-all duration-200 ${L?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-gray-100 hover:bg-gray-200 text-foreground"}`,onClick:()=>{if(b&&c&&D.length>0){const A=D.findIndex(T=>!(y!=null&&y[T.id])),R=A>=0?A:0;c(I.id,R),h(!1)}else N(I.id)},children:a.jsxs("div",{className:"flex items-center gap-3 w-full",children:[!C(I)&&!E&&a.jsx("div",{className:"flex-shrink-0",children:j?a.jsx(AT,{className:"w-5 h-5"}):a.jsx(Zh,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex-1 text-left min-w-0",children:a.jsx("div",{className:"font-bold text-base break-words whitespace-normal",children:I.nom})}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx(De,{className:`text-xs ${C(I)||E?"bg-success/20 text-success border-success/30":j?"bg-primary/20 text-primary border-primary/30":"bg-gray-200 text-gray-600 border-gray-300"}`,children:C(I)||E?"Valide":j?"En cours":" faire"})})]})},I.id)):a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"px-4 py-2",children:a.jsxs("div",{className:"font-bold text-base text-foreground break-words whitespace-normal",children:[I.nom," :"]})}),a.jsx("div",{className:"space-y-2 ml-4",children:D.map((A,R)=>{const T=(y==null?void 0:y[A.id])||!1,O=L&&R===i;return a.jsx(fe,{variant:"ghost",className:`w-full justify-start h-auto min-h-0 p-3 rounded-xl transition-all duration-200 ${T?"bg-success/20 text-success hover:bg-success/30 border border-success/30":O?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-gray-100 hover:bg-gray-200 text-foreground"}`,onClick:()=>{I.id!==t&&n(I.id),c&&c(I.id,R),h(!1)},children:a.jsxs("div",{className:"flex items-center gap-3 w-full",children:[a.jsx("div",{className:"flex-shrink-0",children:T?a.jsx(Fn,{className:"w-4 h-4"}):O?a.jsx(Fn,{className:"w-4 h-4"}):a.jsx(Zh,{className:"w-4 h-4"})}),a.jsx("div",{className:"flex-1 text-left min-w-0",children:a.jsx("div",{className:"font-medium text-sm break-words whitespace-normal",children:A.label})}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx(De,{className:`text-xs ${T?"bg-success/20 text-success border-success/30":O?"bg-primary/20 text-primary border-primary/30":"bg-gray-200 text-gray-600 border-gray-300"}`,children:T?"Termine":O?"En cours":" faire"})})]})},A.id)})})]},I.id)})})})]})]})}var Vd="Checkbox",[EF]=kn(Vd),[PF,Jg]=EF(Vd);function TF(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:o,disabled:s,form:i,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[m,p]=xr({prop:n,defaultProp:o??!1,onChange:c,caller:Vd}),[b,x]=f.useState(null),[w,g]=f.useState(null),v=f.useRef(!1),y=b?!!i||!!b.closest("form"):!0,k={checked:m,disabled:s,setChecked:p,control:b,setControl:x,name:l,form:i,value:d,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:as(o)?!1:o,isFormControl:y,bubbleInput:w,setBubbleInput:g};return a.jsx(PF,{scope:t,...k,children:RF(h)?h(k):r})}var yI="CheckboxTrigger",wI=f.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},o)=>{const{control:s,value:i,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:b}=Jg(yI,e),x=Be(o,d),w=f.useRef(c);return f.useEffect(()=>{const g=s==null?void 0:s.form;if(g){const v=()=>h(w.current);return g.addEventListener("reset",v),()=>g.removeEventListener("reset",v)}},[s,h]),a.jsx(Se.button,{type:"button",role:"checkbox","aria-checked":as(c)?"mixed":c,"aria-required":u,"data-state":NI(c),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:x,onKeyDown:he(t,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:he(n,g=>{h(v=>as(v)?!0:!v),b&&p&&(m.current=g.isPropagationStopped(),m.current||g.stopPropagation())})})});wI.displayName=yI;var Zg=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:s,required:i,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return a.jsx(TF,{__scopeCheckbox:n,checked:o,defaultChecked:s,disabled:l,required:i,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:m})=>a.jsxs(a.Fragment,{children:[a.jsx(wI,{...h,ref:t,__scopeCheckbox:n}),m&&a.jsx(SI,{__scopeCheckbox:n})]})})});Zg.displayName=Vd;var bI="CheckboxIndicator",kI=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,s=Jg(bI,n);return a.jsx(tn,{present:r||as(s.checked)||s.checked===!0,children:a.jsx(Se.span,{"data-state":NI(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});kI.displayName=bI;var CI="CheckboxBubbleInput",SI=f.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:s,defaultChecked:i,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:m,setBubbleInput:p}=Jg(CI,e),b=Be(n,p),x=jN(s),w=kk(r);f.useEffect(()=>{const v=m;if(!v)return;const y=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(y,"checked").set,N=!o.current;if(x!==s&&C){const S=new Event("click",{bubbles:N});v.indeterminate=as(s),C.call(v,as(s)?!1:s),v.dispatchEvent(S)}},[m,x,s,o]);const g=f.useRef(as(s)?!1:s);return a.jsx(Se.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??g.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:b,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});SI.displayName=CI;function RF(e){return typeof e=="function"}function as(e){return e==="indeterminate"}function NI(e){return as(e)?"indeterminate":e?"checked":"unchecked"}const II=f.forwardRef(({className:e,...t},n)=>a.jsx(Zg,{ref:n,className:ke("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:a.jsx(kI,{className:ke("flex items-center justify-center text-current"),children:a.jsx(Fn,{className:"h-4 w-4"})})}));II.displayName=Zg.displayName;function _F({task:e,taskIndex:t,totalTasks:n,onTaskComplete:r,onTakePhoto:o}){const[s,i]=f.useState(e.completed||!1);f.useEffect(()=>{i(e.completed||!1)},[e.completed]);const l=h=>{i(h),r(e.id,h)},u=(()=>{switch(e.type){case"photo_required":return KT;case"checkbox":return XT;case"photo_optional":return kt;case"photo_multiple":return FT;default:return kt}})(),d=()=>{e.type==="checkbox"&&!s&&(i(!0),r(e.id,!0))};return a.jsx($e,{className:`transition-all duration-200 cursor-pointer ${s?"bg-primary/5 border-primary/20":"bg-background border-border hover:shadow-md hover:border-primary/20"}`,onClick:d,children:a.jsx(tt,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-md flex items-center justify-center mt-0.5 ${s?"bg-primary text-primary-foreground":"bg-primary/10 text-primary"}`,children:s?a.jsx(Fn,{className:"w-4 h-4"}):a.jsx(u,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h3",{className:`font-medium text-base leading-tight ${s?"text-muted-foreground line-through":"text-foreground"}`,children:e.label.replace(/||/,"").trim()}),e.type==="checkbox"&&a.jsx(II,{checked:s,onCheckedChange:l,className:"mt-0.5",onClick:h=>h.stopPropagation()})]}),e.description&&a.jsx("p",{className:`text-sm leading-relaxed ${s?"text-muted-foreground/70":"text-muted-foreground"}`,children:e.description})]})]})})})}var qd="Tabs",[OF]=kn(qd,[Id]),jI=Id(),[DF,ev]=OF(qd),EI=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:s,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=bi(l),[h,m]=xr({prop:r,onChange:o,defaultProp:s??"",caller:qd});return a.jsx(DF,{scope:n,baseId:tr(),value:h,onValueChange:m,orientation:i,dir:d,activationMode:c,children:a.jsx(Se.div,{dir:d,"data-orientation":i,...u,ref:t})})});EI.displayName=qd;var PI="TabsList",TI=f.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,s=ev(PI,n),i=jI(n);return a.jsx(fC,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:r,children:a.jsx(Se.div,{role:"tablist","aria-orientation":s.orientation,...o,ref:t})})});TI.displayName=PI;var RI="TabsTrigger",_I=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...s}=e,i=ev(RI,n),l=jI(n),c=AI(i.baseId,r),u=MI(i.baseId,r),d=r===i.value;return a.jsx(hC,{asChild:!0,...l,focusable:!o,active:d,children:a.jsx(Se.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:c,...s,ref:t,onMouseDown:he(e.onMouseDown,h=>{!o&&h.button===0&&h.ctrlKey===!1?i.onValueChange(r):h.preventDefault()}),onKeyDown:he(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(r)}),onFocus:he(e.onFocus,()=>{const h=i.activationMode!=="manual";!d&&!o&&h&&i.onValueChange(r)})})})});_I.displayName=RI;var OI="TabsContent",DI=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:s,...i}=e,l=ev(OI,n),c=AI(l.baseId,r),u=MI(l.baseId,r),d=r===l.value,h=f.useRef(d);return f.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(tn,{present:o||d,children:({present:m})=>a.jsx(Se.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&s})})});DI.displayName=OI;function AI(e,t){return`${e}-trigger-${t}`}function MI(e,t){return`${e}-content-${t}`}var AF=EI,LI=TI,$I=_I,UI=DI;const MF=AF,FI=f.forwardRef(({className:e,...t},n)=>a.jsx(LI,{ref:n,className:ke("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));FI.displayName=LI.displayName;const Tm=f.forwardRef(({className:e,...t},n)=>a.jsx($I,{ref:n,className:ke("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Tm.displayName=$I.displayName;const Rm=f.forwardRef(({className:e,...t},n)=>a.jsx(UI,{ref:n,className:ke("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Rm.displayName=UI.displayName;const LF="Left",$F="Right",UF="Up",FF="Down",Ta={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},_m={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Uy="mousemove",Fy="mouseup",zF="touchend",BF="touchmove",WF="touchstart";function HF(e,t,n,r){return e>t?n>0?$F:LF:r>0?FF:UF}function zy(e,t){if(t===0)return e;const n=Math.PI/180*t,r=e[0]*Math.cos(n)+e[1]*Math.sin(n),o=e[1]*Math.cos(n)-e[0]*Math.sin(n);return[r,o]}function VF(e,t){const n=d=>{const h="touches"in d;h&&d.touches.length>1||e((m,p)=>{p.trackMouse&&!h&&(document.addEventListener(Uy,r),document.addEventListener(Fy,i));const{clientX:b,clientY:x}=h?d.touches[0]:d,w=zy([b,x],p.rotationAngle);return p.onTouchStartOrOnMouseDown&&p.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},m),_m),{initial:w.slice(),xy:w,start:d.timeStamp||0})})},r=d=>{e((h,m)=>{const p="touches"in d;if(p&&d.touches.length>1)return h;if(d.timeStamp-h.start>m.swipeDuration)return h.swiping?Object.assign(Object.assign({},h),{swiping:!1}):h;const{clientX:b,clientY:x}=p?d.touches[0]:d,[w,g]=zy([b,x],m.rotationAngle),v=w-h.xy[0],y=g-h.xy[1],k=Math.abs(v),C=Math.abs(y),N=(d.timeStamp||0)-h.start,S=Math.sqrt(k*k+C*C)/(N||1),I=[v/(N||1),y/(N||1)],P=HF(k,C,v,y),E=typeof m.delta=="number"?m.delta:m.delta[P.toLowerCase()]||Ta.delta;if(k<E&&C<E&&!h.swiping)return h;const _={absX:k,absY:C,deltaX:v,deltaY:y,dir:P,event:d,first:h.first,initial:h.initial,velocity:S,vxvy:I};_.first&&m.onSwipeStart&&m.onSwipeStart(_),m.onSwiping&&m.onSwiping(_);let j=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${P}`])&&(j=!0),j&&m.preventScrollOnSwipe&&m.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},h),{first:!1,eventData:_,swiping:!0})})},o=d=>{e((h,m)=>{let p;if(h.swiping&&h.eventData){if(d.timeStamp-h.start<m.swipeDuration){p=Object.assign(Object.assign({},h.eventData),{event:d}),m.onSwiped&&m.onSwiped(p);const b=m[`onSwiped${p.dir}`];b&&b(p)}}else m.onTap&&m.onTap({event:d});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},h),_m),{eventData:p})})},s=()=>{document.removeEventListener(Uy,r),document.removeEventListener(Fy,i)},i=d=>{s(),o(d)},l=(d,h)=>{let m=()=>{};if(d&&d.addEventListener){const p=Object.assign(Object.assign({},Ta.touchEventOptions),h.touchEventOptions),b=[[WF,n,p],[BF,r,Object.assign(Object.assign({},p),h.preventScrollOnSwipe?{passive:!1}:{})],[zF,o,p]];b.forEach(([x,w,g])=>d.addEventListener(x,w,g)),m=()=>b.forEach(([x,w])=>d.removeEventListener(x,w))}return m},u={ref:d=>{d!==null&&e((h,m)=>{if(h.el===d)return h;const p={};return h.el&&h.el!==d&&h.cleanUpTouch&&(h.cleanUpTouch(),p.cleanUpTouch=void 0),m.trackTouch&&d&&(p.cleanUpTouch=l(d,m)),Object.assign(Object.assign(Object.assign({},h),{el:d}),p)})}};return t.trackMouse&&(u.onMouseDown=n),[u,l]}function qF(e,t,n,r){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})}function GF(e){const{trackMouse:t}=e,n=f.useRef(Object.assign({},_m)),r=f.useRef(Object.assign({},Ta)),o=f.useRef(Object.assign({},r.current));o.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Ta),e);let s;for(s in Ta)r.current[s]===void 0&&(r.current[s]=Ta[s]);const[i,l]=f.useMemo(()=>VF(c=>n.current=c(n.current,r.current),{trackMouse:t}),[t]);return n.current=qF(n.current,r.current,o.current,l),i}function Vu({photos:e,className:t=""}){const[n,r]=f.useState(!1),[o,s]=f.useState(0),[i,l]=f.useState(!1),c=f.useMemo(()=>e.filter(w=>w&&w.url),[e]),u=c[o],h=Pm(u==null?void 0:u.url)==="landscape",m=f.useCallback(()=>{l(!0),s(w=>(w+1)%c.length),setTimeout(()=>l(!1),300)},[c.length]),p=f.useCallback(()=>{l(!0),s(w=>(w-1+c.length)%c.length),setTimeout(()=>l(!1),300)},[c.length]),b=f.useCallback(w=>{s(w),r(!0)},[]),x=GF({onSwipedLeft:m,onSwipedRight:p,trackMouse:!0,delta:60,preventScrollOnSwipe:!0,trackTouch:!0});return c.length===0?null:a.jsxs("div",{className:`w-full ${t}`,children:[a.jsx("div",{className:"space-y-4",children:c.map((w,g)=>a.jsx("div",{className:"w-full",children:a.jsx("img",{src:w.url,alt:`Photo de rfrence ${g+1}`,className:"w-full aspect-[4/3] object-cover rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>b(g),draggable:!1})},g))}),a.jsx(Gn,{open:n,onOpenChange:r,children:a.jsx(On,{className:"max-w-4xl w-full p-0 bg-black/95 border-0",hideCloseButton:!0,children:a.jsxs("div",{className:"relative",...x,children:[c.length>1&&a.jsxs(a.Fragment,{children:[a.jsx(fe,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/20 hover:bg-black/40 text-white border-0 h-10 w-10 p-0",onClick:p,children:a.jsx(Gb,{className:"h-5 w-5"})}),a.jsx(fe,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/20 hover:bg-black/40 text-white border-0 h-10 w-10 p-0",onClick:m,children:a.jsx(Zn,{className:"h-5 w-5"})}),a.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/60 backdrop-blur-sm px-3 py-1 rounded-full text-white text-sm font-medium",children:[o+1," / ",c.length]})]}),a.jsx("img",{src:c[o]?c[o].url:c[0].url,alt:`Photo de rfrence agrandie ${o+1}`,className:"w-full h-auto max-h-[80vh] object-contain select-none transition-all duration-300 ease-out",draggable:!1,style:{transform:h?"rotate(-90deg)":"none",transformOrigin:"center center",maxWidth:h?"100vh":"100%",maxHeight:h?"100vw":"100%",opacity:i?.7:1,transition:"opacity 300ms ease-out, transform 300ms ease-out"}},`zoomed-${o}`)]})})})]})}const KF=ps("fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-gradient-to-t from-background/95 via-background/90 to-transparent backdrop-blur-xl border-t border-white/20 shadow-floating animate-slide-up",{variants:{variant:{default:"p-4 space-y-3",compact:"p-3 space-y-2",padded:"p-6 space-y-4"},safeArea:{true:"pb-safe",false:""}},defaultVariants:{variant:"default",safeArea:!0}}),Gd=f.forwardRef(({className:e,variant:t,safeArea:n,primaryAction:r,secondaryAction:o,bottomText:s,children:i,...l},c)=>a.jsx("div",{ref:c,className:ke(KF({variant:t,safeArea:n}),e),...l,children:i||a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[o&&r?a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(fe,{variant:o.variant||"outline",size:"touch-friendly",onClick:o.onClick,className:"flex-1",children:[a.jsx("span",{className:"sm:hidden",children:o.shortLabel||o.label}),a.jsx("span",{className:"hidden sm:inline",children:o.label})]}),a.jsxs(fe,{variant:r.variant||"cta",size:"cta",onClick:r.onClick,disabled:r.disabled,className:"flex-1",children:[r.icon&&a.jsx("span",{className:"mr-2",children:r.icon}),a.jsx("span",{className:"sm:hidden",children:r.shortLabel||r.label}),a.jsx("span",{className:"hidden sm:inline",children:r.label})]})]}):r?a.jsxs(fe,{variant:r.variant||"cta",size:"cta",onClick:r.onClick,disabled:r.disabled,className:"w-full",children:[r.icon&&a.jsx("span",{className:"mr-2",children:r.icon}),a.jsx("span",{className:"sm:hidden",children:r.shortLabel||r.label}),a.jsx("span",{className:"hidden sm:inline",children:r.label})]}):null,o&&!r&&a.jsxs(fe,{variant:o.variant||"outline",size:"touch-friendly",onClick:o.onClick,className:"w-full",children:[a.jsx("span",{className:"sm:hidden",children:o.shortLabel||o.label}),a.jsx("span",{className:"hidden sm:inline",children:o.label})]})]}),s&&a.jsx("div",{className:"text-center pt-3 mt-3 border-t border-border/50",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.label==="Signaler un problme"&&s.onClick?a.jsx(Ci,{onClick:s.onClick,variant:"outline",size:"md"}):s.onClick?a.jsx("button",{onClick:s.onClick,className:"text-sm font-medium text-foreground/70 hover:text-foreground hover:bg-accent/60 transition-all duration-300 px-4 py-2 rounded-lg hover:scale-105 active:scale-95",children:s.label}):a.jsx("p",{className:"text-sm text-muted-foreground",children:s.label}),s.badge]})})]})}));Gd.displayName="CTASection";const zI=({task:e,taskIndex:t,totalTasks:n,onValidatePiece:r,onRetakePhotos:o,onTakePhoto:s,onReportProblem:i,cleaningInfo:l="Vrifiez l'tat d'entre de cette pice et documentez tout problme existant.",roomInfo:c="Contrlez l'tat gnral de la pice  l'arrive du voyageur.",travelerNote:u,cleanerNote:d,infoEntrance:h,validationMode:m,signalements:p=[],isSignalementsOpen:b=!1,onSignalementsOpenChange:x=()=>{},capturedPhotos:w=[],isCheckoutMode:g=!1,hideBottomActions:v=!1})=>{var z,A;const[y,k]=f.useState(""),[C,N]=f.useState(!1),[S,I]=f.useState(""),[P,E]=f.useState("Photo de rfrence"),{getDisplayUrl:_}=Yg();if(console.log(" RoomTaskCard: Informations de pice:",{taskId:e==null?void 0:e.id,taskLabel:e==null?void 0:e.label,cleaningInfo:(l==null?void 0:l.substring(0,50))+"...",roomInfo:(c==null?void 0:c.substring(0,50))+"...",hasCleaningInfo:!!l&&l!=="Vrifiez l'tat d'entre de cette pice et documentez tout problme existant.",hasRoomInfo:!!c&&c!=="Contrlez l'tat gnral de la pice  l'arrive du voyageur."}),console.log(" RoomTaskCard: Rendu avec photos captures:",{taskId:e==null?void 0:e.id,taskLabel:e==null?void 0:e.label,capturedPhotosCount:(w==null?void 0:w.length)||0,capturedPhotos:(w==null?void 0:w.map(R=>{var T,O,H,q;return{id:R.id,dataUrlType:(T=R.dataUrl)!=null&&T.startsWith("data:")?"base64":(O=R.dataUrl)!=null&&O.startsWith("http")?"url":"invalid",dataUrlLength:((H=R.dataUrl)==null?void 0:H.length)||0,dataUrlValue:((q=R.dataUrl)==null?void 0:q.substring(0,50))+"...",takenAt:R.takenAt}}))||[]}),w&&w.length>0){const R=w[0];console.log(" RoomTaskCard: PREMIRE PHOTO DTAILLE:",{id:R.id,dataUrl:R.dataUrl,dataUrlLength:((z=R.dataUrl)==null?void 0:z.length)||0,dataUrlStart:(A=R.dataUrl)==null?void 0:A.substring(0,100),takenAt:R.takenAt,pieceId:R.pieceId,referencePhotoId:R.referencePhotoId})}const j=R=>{k(T=>T===R?"":R)},L=u||l||"Vrifiez l'tat d'entre de cette pice et documentez tout problme existant.",D=g?d||c||e.description||"Contrlez l'tat gnral de la pice  l'arrive du voyageur.":h||c||e.description||"Contrlez l'tat gnral de la pice  l'arrive du voyageur.";return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"animate-fade-in",children:a.jsxs(MF,{value:y,className:"w-full",children:[a.jsxs(FI,{className:"grid w-full grid-cols-2 bg-white/40 backdrop-blur-sm border border-white/20 p-0.5 h-8",children:[a.jsxs(Tm,{value:"cleaning",className:"text-xs font-medium transition-all duration-300 data-[state=active]:bg-white/80 data-[state=active]:text-primary hover:bg-white/30 flex items-center gap-1",onClick:()=>j("cleaning"),children:[a.jsx(OT,{className:"h-3 w-3"}),"Info mnage"]}),a.jsxs(Tm,{value:"room",className:"text-xs font-medium transition-all duration-300 data-[state=active]:bg-white/80 data-[state=active]:text-primary hover:bg-white/30 flex items-center gap-1",onClick:()=>j("room"),children:[a.jsx(oo,{className:"h-3 w-3"}),"Info pice"]})]}),a.jsx(Rm,{value:"cleaning",className:"mt-3 animate-fade-in",children:a.jsx($e,{variant:"glass",className:"bg-white/70",children:a.jsx(tt,{className:"p-3",children:a.jsx(gt,{variant:"body-secondary",className:"leading-relaxed",children:L})})})}),a.jsx(Rm,{value:"room",className:"mt-3 animate-fade-in",children:a.jsx($e,{variant:"glass",className:"bg-white/70",children:a.jsx(tt,{className:"p-3",children:a.jsx(gt,{variant:"body-secondary",className:"leading-relaxed",children:D})})})})]})}),a.jsx($e,{variant:"glass",className:"bg-white/80 animate-fade-in",children:a.jsxs(tt,{className:"pt-4 space-y-4",children:[e.label&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(gt,{variant:"body",className:"font-semibold text-lg",children:e.label}),e.description&&a.jsx($e,{variant:"outline",className:"bg-purple-50 border-purple-200",children:a.jsx(tt,{className:"p-3",children:a.jsx(gt,{variant:"body",className:"text-purple-700",children:e.description})})})]}),!e.label&&e.description&&a.jsx($e,{variant:"outline",className:"bg-purple-50 border-purple-200",children:a.jsx(tt,{className:"p-3",children:a.jsx(gt,{variant:"body",className:"text-purple-700",children:e.description})})}),e.hint&&a.jsx($e,{variant:"outline",className:"bg-blue-50 border-blue-200",children:a.jsx(tt,{className:"p-3",children:a.jsxs(gt,{variant:"body",className:"text-blue-700",children:[a.jsx("strong",{children:"Astuce :"})," ",e.hint]})})}),e.type==="photo_multiple"&&e.total_photos_required&&a.jsx($e,{variant:"glass",className:"bg-white/50",children:a.jsxs(tt,{className:"p-3 space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("div",{className:"flex items-center gap-3 p-3 bg-gradient-subtle rounded-lg border border-white/30 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:a.jsx(kt,{className:"w-4 h-4 text-white"})}),a.jsx(gt,{variant:"body",className:"font-medium text-foreground",children:"Vrifier l'tat de la pice"})]})})}),a.jsx("div",{className:"space-y-2",children:a.jsx(Vu,{photos:e.photo_references||[],className:"animate-fade-in"})})]})}),(e.type==="photo_validation"||e.type==="reference_photos")&&a.jsx($e,{variant:"glass",className:"bg-blue-50/50 border-blue-200/50",children:a.jsxs(tt,{className:"p-4 space-y-4",children:[a.jsx("div",{className:"text-center space-y-2",children:a.jsx("p",{className:"text-sm text-blue-700 font-medium",children:g?"Prendre des photos similaires  celles ci-dessous":"La pice est-elle conforme aux photos ci-dessous ?"})}),a.jsx("div",{className:"space-y-4",children:a.jsx("div",{className:"space-y-3",children:!e.photo_references||e.photo_references.length===0?a.jsx("div",{className:"text-gray-600 text-sm",children:" Aucune photo de rfrence pour cette tche"}):a.jsx("div",{className:"space-y-4",children:e.photo_references.map((R,T)=>{const O=(w==null?void 0:w.find(H=>H.referencePhotoId===R.tache_id))||(w==null?void 0:w[T]);return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"relative cursor-pointer hover:opacity-90 transition-opacity group",onClick:()=>{I(R.url),E(`Photo de rfrence ${T+1}`),N(!0)},children:[a.jsx("img",{src:R.url,alt:`Photo de rfrence ${T+1}`,className:"w-full aspect-[4/3] object-cover rounded-lg border border-gray-200"}),a.jsxs("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-sm px-2 py-1 rounded",children:["Rfrence ",T+1]}),a.jsx("div",{className:"absolute top-2 right-2 bg-black/60 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(va,{className:"h-4 w-4"})})]}),O?a.jsxs("div",{className:"relative ml-4 border-l-4 border-green-500 pl-3",children:[(()=>{const H=_(O.id,O.dataUrl);return!H||H===""?a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-100 rounded-lg border-2 border-green-500 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx(kt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Photo en cours d'upload..."}),a.jsxs("p",{className:"text-xs opacity-75",children:["ID: ",O.id.substring(0,8)]})]})}):a.jsxs("div",{className:"relative cursor-pointer hover:opacity-90 transition-opacity group",onClick:()=>{I(H),E(`Photo capture ${T+1}`),N(!0)},children:[a.jsx("img",{src:H,alt:`Photo capture ${T+1}`,className:"w-full aspect-[4/3] object-cover rounded-lg border-2 border-green-500",onLoad:()=>{console.log(" Photo charge:",{id:O.id.substring(0,12),isUploadedUrl:H!==O.dataUrl})},onError:q=>{console.error(" Erreur chargement photo:",{id:O.id.substring(0,12),hasOriginalUrl:!!O.dataUrl,displayUrl:H==null?void 0:H.substring(0,30)})}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-lg pointer-events-none"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black/60 text-white p-2 sm:p-2.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(va,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})})(),a.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[" ",new Date(O.takenAt).toLocaleString()]})]}):w&&w.length>0?a.jsx("div",{className:"ml-4 border-l-4 border-gray-300 pl-3",children:a.jsx("div",{className:"text-sm text-gray-500 italic",children:"Aucune nouvelle photo pour cette rfrence"})}):null]},R.tache_id||T)})})})})]})}),(e.type==="photo_optional"||e.type==="photo_required")&&e.photo_reference&&a.jsxs("div",{className:"space-y-3",children:[e.label&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(gt,{variant:"body",className:"font-semibold text-lg",children:e.label}),e.description&&a.jsx(gt,{variant:"body-secondary",className:"text-muted-foreground leading-relaxed",children:e.description})]}),e.photo_reference.overlay_enabled!==!1&&a.jsxs(a.Fragment,{children:[a.jsx(gt,{variant:"body",className:"text-xs text-muted-foreground",children:"Photo de rfrence :"}),a.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>{I(e.photo_reference.url),E(e.label||"Photo de rfrence"),N(!0)},children:[a.jsx("img",{src:e.photo_reference.url,alt:"Photo de rfrence",className:"w-full aspect-[4/3] object-cover rounded-xl border border-white/30 shadow-card hover:shadow-floating transition-all duration-300"}),a.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-xl pointer-events-none"}),a.jsx("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur-sm rounded-full p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(va,{className:"h-4 w-4 text-white"})})]})]}),w&&w.length>0&&w[0]&&a.jsxs("div",{className:"space-y-2 ml-0 sm:ml-4 border-l-4 border-green-500 pl-0 sm:pl-3 animate-slide-up",children:[a.jsxs("div",{className:"group relative aspect-[4/3] bg-gradient-subtle rounded-2xl overflow-hidden shadow-floating border-2 border-green-500 hover:shadow-glow transition-all duration-500 cursor-pointer",onClick:()=>{I(w[0].dataUrl),E("Photo capture"),N(!0)},children:[a.jsx("img",{src:w[0].dataUrl,alt:"Photo prise",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:R=>{console.error(" Erreur chargement photo capture:",w[0].id)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-2xl pointer-events-none"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black/60 text-white p-2 sm:p-2.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(va,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),a.jsxs("div",{className:"text-xs text-green-600",children:[" ",new Date(w[0].takenAt).toLocaleString()]})]})]}),(e.type==="photo_optional"||e.type==="photo_required")&&!e.photo_reference&&w&&w.length>0&&a.jsx($e,{variant:"glass",className:"bg-green-50/50 border-green-200/50",children:a.jsxs(tt,{className:"p-4 space-y-4",children:[a.jsx("div",{className:"text-center space-y-2",children:a.jsx("p",{className:"text-sm text-green-700 font-medium",children:" Photos captures"})}),a.jsx("div",{className:"space-y-3",children:w.map((R,T)=>{const O=_(R.id,R.dataUrl);return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"relative cursor-pointer hover:opacity-90 transition-opacity group",onClick:()=>{I(O),E(`Photo capture ${T+1}`),N(!0)},children:[a.jsx("img",{src:O,alt:`Photo capture ${T+1}`,className:"w-full aspect-[4/3] object-cover rounded-lg border-2 border-green-500",onLoad:()=>{console.log(" Photo capture charge:",{id:R.id.substring(0,12),isUploadedUrl:O!==R.dataUrl})},onError:H=>{console.error(" Erreur chargement photo capture:",{id:R.id.substring(0,12),hasOriginalUrl:!!R.dataUrl,displayUrl:O==null?void 0:O.substring(0,30)})}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-lg pointer-events-none"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black/60 text-white p-2 sm:p-2.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(va,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),a.jsxs("div",{className:"text-xs text-green-600",children:[" ",new Date(R.takenAt).toLocaleString()]})]},R.id||T)})})]})})]})}),!v&&a.jsx("div",{className:"bg-background",children:a.jsx(Gd,{className:"!bg-background border-t border-border shadow-card !backdrop-blur-0",primaryAction:g?e.completed&&w&&w.length>0?{label:(()=>{let R=0;return e.photo_references&&e.photo_references.length>0?R=e.photo_references.length:e.photo_reference&&(R=1),R>1?" Photos valides":" Photo valide"})(),shortLabel:" Valid",onClick:()=>{},variant:"cta",disabled:!0}:w&&w.length>0?{label:(()=>{let R=0;return e.photo_references&&e.photo_references.length>0?R=e.photo_references.length:e.photo_reference&&(R=1),R>1?" Valider ces photos obligatoires":" Valider cette photo obligatoire"})(),shortLabel:" Valider",onClick:()=>r==null?void 0:r(e.id),variant:"cta"}:{label:(()=>{let R=0;return e.photo_references&&e.photo_references.length>0?R=e.photo_references.length:e.photo_reference&&(R=1),R>1?" Prendre photos obligatoires":" Prendre photo obligatoire"})(),shortLabel:" Prendre",onClick:()=>{var R;return(R=o||s)==null?void 0:R(e.id)},variant:"cta",icon:a.jsx(kt,{className:"h-4 w-4"})}:w&&w.length>0?{label:" Valider ces photos",shortLabel:" Valider",onClick:()=>r==null?void 0:r(e.id),variant:"cta"}:m==="validated"||m==="photos_retaken"?{label:m==="validated"?" Pice valide":" Photos valides",shortLabel:" Valid",onClick:()=>{},variant:"cta",disabled:!0}:e.completed?{label:" Valid",shortLabel:" Valid",onClick:()=>{},variant:"cta",disabled:!0}:{label:"Pice conforme",shortLabel:" Conforme",onClick:()=>{var R;return(R=r||s)==null?void 0:R(e.id)},variant:"cta"},secondaryAction:g?w&&w.length>0?{label:(()=>{let R=0;return e.photo_references&&e.photo_references.length>0?R=e.photo_references.length:e.photo_reference&&(R=1),R>1?" Reprendre les photos":" Reprendre la photo"})(),shortLabel:" Reprendre",onClick:()=>o==null?void 0:o(e.id),variant:"outline"}:void 0:e.completed?{label:" Reprendre",shortLabel:" Reprendre",onClick:()=>o==null?void 0:o(e.id),variant:"outline"}:w&&w.length>0?{label:" Reprendre encore",shortLabel:" Reprendre",onClick:()=>o==null?void 0:o(e.id),variant:"outline"}:!e.completed&&m!=="validated"&&m!=="photos_retaken"?{label:(()=>{let R=0;return e.photo_references&&e.photo_references.length>0?R=e.photo_references.length:e.photo_reference&&(R=1),R>1?"Prendre photos":"Prendre photo"})(),shortLabel:" Reprendre",onClick:()=>{var R;return(R=o||s)==null?void 0:R(e.id)},variant:"outline"}:void 0,bottomText:i?{label:"Signaler un problme",onClick:i,badge:p.length>0&&a.jsxs(Du,{open:b,onOpenChange:x,children:[a.jsx(Au,{asChild:!0,children:a.jsx("button",{children:a.jsxs(De,{variant:"destructive",className:"h-auto w-auto px-2 py-1 flex items-center justify-center text-xs font-bold bg-red-500 hover:bg-red-600 transition-colors animate-pulse rounded-full",children:[" : ",p.length]})})}),a.jsx(jl,{className:"w-80 p-0",align:"end",children:a.jsxs($e,{className:"border-0 shadow-none",children:[a.jsx(Lt,{className:"pb-2",children:a.jsxs($t,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(_n,{className:"h-4 w-4 text-red-500"}),"Signalements en cours (",p.length,")"]})}),a.jsx(tt,{className:"space-y-2",children:p.map(R=>a.jsx("div",{className:"p-2 bg-red-50 rounded-lg border-l-2 border-red-200",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-red-800 truncate",children:R.titre}),a.jsx("p",{className:"text-xs text-red-600 mt-1 line-clamp-2",children:R.commentaire}),a.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Origine: ",R.origine]})]}),R.priorite&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx(_n,{className:"h-3 w-3 text-red-600"})})]})},R.id))})]})})]})}:void 0})}),a.jsx(Qg,{isOpen:C,onClose:()=>{N(!1),I("")},imageUrl:S,imageTitle:P})]})};function YF(e,t){var I,P,E,_;const{currentCheckId:n}=Kn(),[r,o]=f.useState(e);console.log(" useCheckoutFlowManager - Ordre des initialPieces:",e.map((j,L)=>({index:L,nom:j.nom,ordre:j.ordre,id:j.id})));const[s,i]=f.useState(((I=e[0])==null?void 0:I.id)||""),[l,c]=f.useState(0),[u,d]=f.useState(!1);console.log(" useCheckoutFlowManager - Pice slectionne au dmarrage:",{currentPieceId:(P=e[0])==null?void 0:P.id,nom:(E=e[0])==null?void 0:E.nom,ordre:(_=e[0])==null?void 0:_.ordre}),f.useEffect(()=>{(async()=>{var R,T,O,H,q,Z;if(e.length===0||!(r.length!==e.length||r.reduce((G,K)=>{var re;return G+(((re=K.tasks)==null?void 0:re.length)||0)},0)!==e.reduce((G,K)=>{var re;return G+(((re=K.tasks)==null?void 0:re.length)||0)},0)))return;const D=new Map;if(r.forEach(G=>{var K;(K=G.tasks)==null||K.forEach(re=>{re.completed&&D.set(re.id,!0)})}),n)try{const G=await Oe.getCheckSession(n);if(G&&t&&G.parcoursId!==t){console.warn(" ParcoursId mismatch! Session:",G.parcoursId,"vs Actuel:",t),console.warn(" Ignorer les donnes de l'ancien parcours pour viter la contamination");return}const K=(T=(R=G==null?void 0:G.progress)==null?void 0:R.interactions)==null?void 0:T.checkboxStates;K?(console.log(" Restauration checkboxStates - Cls trouves:",Object.keys(K)),Object.entries(K).forEach(([Y,ne])=>{const xe=typeof ne=="boolean"?ne:(ne==null?void 0:ne.isChecked)||!1;if(console.log(" Analyse checkbox:",{checkboxId:Y,isChecked:xe,checkboxData:typeof ne=="object"?ne:"boolean"}),xe){let le=Y;Y.startsWith("checkbox_")?le=Y.replace("checkbox_",""):Y.includes("_")?ne!=null&&ne.taskId&&(le=ne.taskId):le=Y,console.log(" Tche marque comme complte:",le),D.set(le,!0)}}),console.log(" Restauration checkboxStates:",D.size,"tches compltes depuis IndexedDB pour parcours:",t,{checkboxStates:Object.keys(K),completedTasks:Array.from(D.keys())})):console.warn(" Aucun tat de checkbox trouv dans IndexedDB");const re=(H=(O=G==null?void 0:G.progress)==null?void 0:O.interactions)==null?void 0:H.photosTaken;re&&(console.log(" Restauration photosTaken - Cls trouves:",Object.keys(re)),Object.entries(re).forEach(([Y,ne])=>{if(Array.isArray(ne)&&ne.length>0){const xe=ne[0];let le=(xe==null?void 0:xe.taskId)||(xe==null?void 0:xe.etapeId);if(!le){const se=Y.split("_");se.length>=2&&(le=se[1])}le&&(console.log(" Tche photo marque comme complte:",le),D.set(le,!0))}}),console.log(" Restauration photosTaken:",D.size,"tches compltes au total"));const ie=(Z=(q=G==null?void 0:G.progress)==null?void 0:q.interactions)==null?void 0:Z.buttonClicks;ie&&(console.log(" Restauration buttonClicks - Cls trouves:",Object.keys(ie)),Object.entries(ie).forEach(([Y,ne])=>{if(Array.isArray(ne)&&ne.length>0){const xe=ne[0];let le=(xe==null?void 0:xe.taskId)||(xe==null?void 0:xe.etapeId);if(!le){const se=Y.split("_");se.length>=2&&(le=se[1])}le&&(xe==null?void 0:xe.actionType)==="complete"&&(console.log(" Tche button-click marque comme complte:",le),D.set(le,!0))}}),console.log(" Restauration buttonClicks:",D.size,"tches compltes au total"))}catch(G){console.error(" Erreur chargement tats depuis IndexedDB:",G)}const z=e.map(G=>{var K;return{...G,tasks:(K=G.tasks)==null?void 0:K.map(re=>{const ie=D.has(re.id);return ie&&console.log(" Tche restaure comme complte:",{taskId:re.id,label:re.label,piece:G.nom}),{...re,completed:ie?!0:re.completed||!1}})}}),A=z.reduce((G,K)=>{var re;return G+(((re=K.tasks)==null?void 0:re.filter(ie=>ie.completed).length)||0)},0);A>0&&console.log(" Restauration complte:",A,"tches marques comme compltes"),o(z)})()},[e,r.length,n]),f.useEffect(()=>{(async()=>{var L,D;if(n)try{const z=await Oe.getCheckSession(n);if(z&&t&&z.parcoursId!==t){console.warn(" ParcoursId mismatch dans loadProgressFromCheckId!"),console.warn(" Session:",z.parcoursId,"vs Actuel:",t),console.warn(" Ignorer la progression de l'ancien parcours");return}if(z!=null&&z.progress){const A=(L=z.progress.interactions)==null?void 0:L.checkboxStates;if(A){const q=new Set;Object.entries(A).forEach(([Z,G])=>{if(typeof G=="boolean"?G:(G==null?void 0:G.isChecked)||!1){const re=Z.replace("checkbox_","");q.add(re)}}),q.size>0&&o(Z=>Z.map(K=>{var re;return{...K,tasks:(re=K.tasks)==null?void 0:re.map(ie=>q.has(ie.id)?{...ie,completed:!0}:ie)}}))}const R=z.progress.currentPieceId,T=z.progress.currentTaskIndex;console.log(" Restauration position utilisateur:",{savedPieceId:R,savedTaskIndex:T,hasSavedPosition:!!(R&&T!==void 0)});const O=r.find(q=>q.id===R),H=(D=O==null?void 0:O.tasks)==null?void 0:D[T];if(R&&T!==void 0&&O&&H)console.log(" Restauration position sauvegarde:",{pieceId:R,taskIndex:T,taskName:H.title}),i(R),c(T);else{console.log(" Position sauvegarde invalide, recherche premire tche incomplte");const Z=(G=>{var re,ie;for(const Y of G)if((((re=Y.tasks)==null?void 0:re.filter(xe=>!xe.completed))||[]).length>0){const xe=((ie=Y.tasks)==null?void 0:ie.findIndex(le=>!le.completed))||0;return{pieceId:Y.id,taskIndex:xe>=0?xe:0}}const K=G[0];return{pieceId:(K==null?void 0:K.id)||"",taskIndex:0}})(r);console.log(" Position optimale trouve:",Z),i(Z.pieceId),c(Z.taskIndex)}}}catch(z){console.error(" Erreur chargement progression:",z)}})()},[n]),f.useEffect(()=>{var D;if(r.length===0||!n)return;const j=r.find(z=>z.id===s),L=(D=j==null?void 0:j.tasks)==null?void 0:D[l];if(!s||!j||!L){console.log(" Position actuelle invalide, recherche premire tche disponible:",{currentPieceId:s,hasPiece:!!j,hasTask:!!L,piecesCount:r.length});const A=(()=>{var T,O;for(const H of r){if(!H.tasks||H.tasks.length===0)continue;const q=H.tasks.findIndex(Z=>!Z.completed);if(q>=0)return{pieceId:H.id,taskIndex:q,taskName:H.tasks[q].nom||"Tche sans nom"}}const R=r[0];return{pieceId:(R==null?void 0:R.id)||"",taskIndex:0,taskName:((O=(T=R==null?void 0:R.tasks)==null?void 0:T[0])==null?void 0:O.nom)||"Tche sans nom"}})();console.log(" Slection automatique de la tche:",A),i(A.pieceId),c(A.taskIndex),h(A.pieceId,A.taskIndex)}else console.log(" Position actuelle valide:",{pieceId:s,taskIndex:l,taskName:L.nom||"Tche sans nom"})},[r,s,l,n]);const h=f.useCallback(async(j,L)=>{if(n)try{await Oe.updateSessionProgress(n,{currentPieceId:j,currentTaskIndex:L,interactions:{}}),console.log(" Progression sauvegarde:",{pieceId:j,taskIndex:L})}catch(D){console.error(" Erreur sauvegarde progression:",D)}},[n]),m=f.useCallback(()=>{const j=r.find(L=>L.id===s);if(!j)return null;for(let L=0;L<j.tasks.length;L++)if(!j.tasks[L].completed)return{pieceId:s,taskIndex:L};return null},[r,s]),p=f.useCallback(()=>{for(const j of r)if(j.tasks.some(D=>!D.completed)){for(let D=0;D<j.tasks.length;D++)if(!j.tasks[D].completed)return{pieceId:j.id,taskIndex:D}}return null},[r]),b=f.useCallback(()=>{const j=m();if(j)c(j.taskIndex),h(s,j.taskIndex),console.log(" goToNextTask: Tche suivante dans la mme pice:",{pieceId:s,taskIndex:j.taskIndex});else{const L=p();L?(i(L.pieceId),c(L.taskIndex),h(L.pieceId,L.taskIndex),console.log(" goToNextTask: Navigation vers pice non complte:",{pieceId:L.pieceId,taskIndex:L.taskIndex})):(console.log(" goToNextTask: Toutes les tches sont compltes"),d(!0),n&&Oe.completeCheckSession(n))}},[m,p,h,s,l,n]),x=f.useCallback(()=>{if(l>0){const j=l-1;c(j),h(s,j)}else{const j=r.findIndex(L=>L.id===s);if(j>0){const L=r[j-1],D=L.tasks.length-1;i(L.id),c(D),h(L.id,D)}}},[r,s,l,h]),w=f.useCallback((j,L=0)=>{i(j),c(L),h(j,L)},[h]),g=f.useCallback(()=>{o(j=>j.map(L=>L.id===s?{...L,tasks:L.tasks.map((D,z)=>z===l?{...D,completed:!0}:D)}:L))},[s,l]),v=f.useCallback(j=>{const L=r.find(D=>D.id===j);return L?L.tasks.every(D=>D.completed):!1},[r]),y=f.useCallback(j=>{const L=r.find(A=>A.id===j);if(!L)return{completed:0,total:0};const D=L.tasks.filter(A=>A.completed).length,z=L.tasks.length;return{completed:D,total:z}},[r]),k=r.reduce((j,L)=>{const{completed:D,total:z}=y(L.id);return j+(z>0?D/z*100:0)},0)/r.length,C=f.useCallback(()=>r.find(j=>j.id===s),[r,s]),N=f.useCallback(()=>{const j=C();if(j)return j.tasks[l]},[C,l]),S=f.useCallback(j=>{console.log(" useCheckoutFlowManager: Restauration tches compltes:",Array.from(j)),o(L=>{const D=L.map(z=>{var A;return{...z,tasks:(A=z.tasks)==null?void 0:A.map(R=>j.has(R.id)?{...R,completed:!0}:R)}});return console.log(" useCheckoutFlowManager: Tches restaures dans state:",{totalCompleted:j.size,piecesUpdated:D.filter(z=>{var A;return(A=z.tasks)==null?void 0:A.some(R=>R.completed)}).length}),D})},[]);return{currentPieceId:s,currentTaskIndex:l,pieces:r,isFlowCompleted:u,totalProgress:k,goToNextTask:b,goToPreviousTask:x,jumpToPiece:w,completeCurrentTask:g,isPieceCompleted:v,getPieceProgress:y,getCurrentPiece:C,getCurrentTask:N,restoreCompletedTasks:S,saveProgressToCheckId:h}}const BI=()=>{const{currentCheckId:e,isCheckIdActive:t}=Kn(),n=f.useCallback(async(c,u,d,h="validate",m)=>{if(!t){console.warn(" useAutoSaveCheckId: Pas de CheckID actif, skip save button");return}console.log(" AutoSave: Bouton cliqu ->",{currentCheckId:e,buttonId:c,pieceId:u,taskId:d,actionType:h});try{const p=d||c;await at.trackButtonClick({buttonId:c,pieceId:u,taskId:d,etapeId:p,actionType:h,timestamp:new Date().toISOString(),metadata:{...m,checkId:e,autoSaved:!0,etapeId:p}}),console.log(" AutoSave: Bouton sauvegard dans CheckID")}catch(p){console.error(" AutoSave: Erreur save bouton:",p)}},[e,t]),r=f.useCallback(async(c,u,d,h)=>{if(console.log("%c SAUVEGARDE PHOTO - DBUT","color: #ffffff; font-weight: bold; font-size: 16px; background: #8b5cf6; padding: 6px 12px;",{isCheckIdActive:t,currentCheckId:e||"MANQUANT",taskId:c,pieceId:u,photoDataLength:(d==null?void 0:d.length)||0,photoDataPreview:(d==null?void 0:d.substring(0,50))||"VIDE",metadata:h,timestamp:new Date().toLocaleString()}),!t){console.error("%c SAUVEGARDE PHOTO - CHEC","color: #ffffff; font-weight: bold; background: #ef4444; padding: 4px 8px;","Pas de CheckID actif");return}try{let m=c;if(h!=null&&h.etapeId&&typeof h.etapeId=="string")m=h.etapeId;else if(c&&c.includes("_")){const b=c.split("_"),x=b[b.length-1];/^\d+x\d+$/.test(x)&&(m=x)}const p=at.generatePhotoId();console.log(" Prparation donnes photo:",{photoId:p,taskId:c,pieceId:u,"metadata.etapeId":h==null?void 0:h.etapeId,extractedEtapeId:m,photoDataSize:d.length,hasMetadata:!!h}),await at.trackPhotoTaken({photoId:p,taskId:c,pieceId:u,etapeId:m,photoData:d,timestamp:new Date().toISOString(),validated:!1,retakeCount:0,metadata:{...h,etapeId:m,checkId:e,autoSaved:!0}}),console.log("%c SAUVEGARDE PHOTO - SUCCS","color: #ffffff; font-weight: bold; font-size: 14px; background: #10b981; padding: 4px 8px;",{photoId:p,checkId:e,taskId:c,pieceId:u}),setTimeout(async()=>{var b,x,w,g,v,y,k,C;try{const{checkSessionManager:N}=await Wt(async()=>{const{checkSessionManager:P}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:P}},void 0),S=await N.getCheckSession(e),I=(w=(x=(b=S==null?void 0:S.progress)==null?void 0:b.interactions)==null?void 0:x.photosTaken)==null?void 0:w[p];console.log("%c VRIFICATION INDEXEDDB POST-SAUVEGARDE","color: #ffffff; font-weight: bold; background: #f59e0b; padding: 4px 8px;",{photoId:p,photoTrouve:!!I,totalPhotos:(v=(g=S==null?void 0:S.progress)==null?void 0:g.interactions)!=null&&v.photosTaken?Object.keys(S.progress.interactions.photosTaken).length:0,photoData:I?{hasPhotoData:!!((y=I[0])!=null&&y.photoData),dataLength:((C=(k=I[0])==null?void 0:k.photoData)==null?void 0:C.length)||0}:"NON TROUVE"})}catch(N){console.error(" Erreur vrification IndexedDB:",N)}},500)}catch(m){console.error("%c SAUVEGARDE PHOTO - ERREUR CRITIQUE","color: #ffffff; font-weight: bold; font-size: 16px; background: #dc2626; padding: 8px 16px;",{error:m instanceof Error?m.message:String(m),stack:m instanceof Error?m.stack:void 0})}},[e,t]),o=f.useCallback(async(c,u,d,h,m)=>{if(!t){console.warn(" useAutoSaveCheckId: Pas de CheckID actif, skip save checkbox");return}console.log(" AutoSave: Checkbox change ->",{currentCheckId:e,checkboxId:c,taskId:u,pieceId:d,isChecked:h});try{await at.trackCheckboxChange({checkboxId:c,taskId:u,pieceId:d,isChecked:h,checkedAt:h?new Date().toISOString():void 0,uncheckedAt:h?void 0:new Date().toISOString(),notes:m}),console.log(" AutoSave: Checkbox sauvegarde dans CheckID")}catch(p){console.error(" AutoSave: Erreur save checkbox:",p)}},[e,t]),s=f.useCallback(async(c,u,d,h,m,p,b=[])=>{if(!t){console.warn(" useAutoSaveCheckId: Pas de CheckID actif, skip save signalement");return}console.log(" AutoSave: Signalement cr ->",{currentCheckId:e,pieceId:c,type:d,severity:h,title:m});try{await at.trackSignalement({signalementId:at.generateSignalementId(),pieceId:c,taskId:u,type:d,severity:h,title:m,description:p,photos:b,createdAt:new Date().toISOString(),status:"open"}),console.log(" AutoSave: Signalement sauvegard dans CheckID")}catch(x){console.error(" AutoSave: Erreur save signalement:",x)}},[e,t]),i=f.useCallback(async(c,u,d="user_click")=>{if(!t){console.warn(" useAutoSaveCheckId: Pas de CheckID actif, skip save navigation");return}console.log(" AutoSave: Navigation ->",{currentCheckId:e,from:c,to:u,trigger:d});try{await at.trackNavigation(c,u,d),console.log(" AutoSave: Navigation sauvegarde dans CheckID")}catch(h){console.error(" AutoSave: Erreur save navigation:",h)}},[e,t]),l=f.useCallback(async(c,u,d)=>{if(!t){console.warn(" useAutoSaveCheckId: Pas de CheckID actif, skip save piece status");return}console.log(" AutoSave: tat pice chang ->",{currentCheckId:e,pieceId:c,status:u,completionPercentage:d});try{await at.trackPieceStateChange({pieceId:c,status:u,completedAt:u==="completed"?new Date().toISOString():void 0,validatedAt:u==="validated"?new Date().toISOString():void 0,completionPercentage:d??0,totalInteractions:0,photosCount:0,checkboxesCount:0,signalementsCount:0}),console.log(" AutoSave: tat pice sauvegard dans CheckID")}catch(h){console.error(" AutoSave: Erreur save tat pice:",h)}},[e,t]);return{isCheckIdActive:t,currentCheckId:e,saveButtonClick:n,savePhotoTaken:r,saveCheckboxChange:o,saveSignalement:s,saveNavigation:i,savePieceStatusChange:l}},Kd=e=>{const t=new Map;e.forEach(o=>{o.origine!=="HISTORIQUE"&&t.set(o.id,o)});const n=new Map;return e.filter(o=>{if(o.rapportRef){if(n.has(o.rapportRef))return!1;n.set(o.rapportRef,o)}return!(o.origine==="HISTORIQUE"&&t.has(o.id))})},WI=e=>{const t=new Map;e.forEach(o=>{o.origine!=="HISTORIQUE"&&t.set(o.id,o)});const n=new Map;let r=0;return e.forEach(o=>{if(o.rapportRef){if(n.has(o.rapportRef))return;n.set(o.rapportRef,o)}o.origine==="HISTORIQUE"&&t.has(o.id)||r++}),r},HI=({roomName:e="Chambre",photoNumber:t=1,totalPhotos:n=2,roomInfo:r="Indiquez les informations  connatre sur cette pice : lments  manipuler avec prcaution, particularits, ventuels dfauts dj prsents",cleaningInfo:o="Indiquez les informations indispensables : produits recommands ou  proscrire, zones fragiles, particularits (bois brut, marbre).",referencePhoto:s="/src/assets/reference-photo.jpg",pieces:i,currentPieceId:l,currentTaskIndex:c,onPieceSelected:u})=>{var Ke,ce,te;const[d,h]=f.useState(!1),[m,p]=f.useState(!1),[b,x]=f.useState(!1),[w,g]=f.useState(null),[v,y]=f.useState(!1),[k,C]=f.useState(!1),[N,S]=f.useState(""),[I,P]=f.useState(!1),[E,_]=f.useState(!1),[j,L]=f.useState(new Map),[D,z]=f.useState(null),[A,R]=f.useState(192),[T,O]=f.useState(!0),H=Cn();f.useRef(new Set);const q=f.useRef(null);f.useRef(!1),f.useRef(null);const{user:Z,logout:G}=cr(),{openReportModal:K}=ks(),{getSignalementsByRoom:re,getPendingSignalements:ie}=To(),{rooms:Y,forceCheckoutMode:ne,getApiSignalementsByRoom:xe}=Sn(),{currentParcours:le}=xs(),{currentCheckId:se,isCheckIdActive:pe,setActiveCheckId:ge}=Kn(),We=Ot(),Xe=bs(),Pe=Pt.extractUrlParams(We.search),ze=Pe.parcoursId,we=Pe.checkId;ys(we);const{parcours:be}=ws(ze,"checkout"),_e=f.useMemo(()=>se||(we?(console.log(" CheckOut: CheckID rcupr depuis URL comme fallback:",we),we):null),[se,we]);f.useLayoutEffect(()=>{(async()=>{_e&&!se&&(console.log(" CheckOut: Activation automatique du CheckID depuis URL (AVANT rendu):",_e),await ge(_e))})()},[_e,se,ge]);const Ne=se||_e;f.useEffect(()=>{Ne&&at.setCurrentCheckId(Ne)},[Ne]);const{saveButtonClick:nt,savePhotoTaken:He,saveCheckboxChange:Ye}=BI(),{uploadCapturedPhoto:It,getDisplayUrl:xt}=Yg(),{updatePieceStatus:Dt}=Hu(),oe=f.useRef(window.location.href);f.useEffect(()=>{const F=setInterval(()=>{const W=window.location.href;W!==oe.current&&(console.log(" CHECKOUT URL CHANGED DETECTED:",{from:oe.current,to:W,hasCheckId:W.includes("checkid"),hasParcoursId:W.includes("parcours"),timestamp:new Date().toISOString()}),oe.current=W)},100);return()=>clearInterval(F)},[]);const Ue=[...(Ke=be==null?void 0:be.adaptedData)!=null&&Ke.roomsData?Object.values(be.adaptedData.roomsData):Y].sort((M,F)=>M.ordre-F.ordre).map(M=>{var F,W;return{id:M.id,nom:M.nom,ordre:M.ordre||1,roomInfo:M.roomInfo||"",cleaningInfo:M.cleaningInfo||"",photoReferences:M.photoReferences||{checkin:[],checkout:[]},status:"VIDE",tasks_total:((F=M.tasks)==null?void 0:F.length)||0,tasks_done:0,photos_required:((W=M.tasks)==null?void 0:W.reduce((X,ee)=>X+(ee.total_photos_required||0),0))||0,photos_done:0,tasks:M.tasks||[]}});console.log(" CheckOut - Ordre des defaultPieces AVANT useCheckoutFlowManager:",Ue.map((M,F)=>({index:F,nom:M.nom,ordre:M.ordre,id:M.id,isPremiere:F===0?" SERA SLECTIONNE":""})));const Te=YF(i||Ue,le==null?void 0:le.id),{currentPieceId:Ge,currentTaskIndex:it,pieces:Qe,isFlowCompleted:Nn,totalProgress:je}=Te,U=Te.getCurrentPiece(),$=Te.getCurrentTask();sC([Ge,it]);const[Ve,Q]=f.useState(!1);f.useEffect(()=>{Ve||(console.log(" CheckOut: Forage du mode checkout"),ne(),Q(!0))},[ne,Ve]),f.useEffect(()=>{(async()=>{if(Ne)try{const{interactionTracker:F}=await Wt(async()=>{const{interactionTracker:W}=await Promise.resolve().then(()=>Tl);return{interactionTracker:W}},void 0);await F.trackPagePath("/checkout"),console.log(" CheckOut: Chemin de page sauvegard dans session")}catch(F){console.error(" CheckOut: Erreur sauvegarde chemin de page:",F)}})()},[Ne]),f.useEffect(()=>{(async()=>{var F,W,X,ee,ue,ve,Ae;if(console.log("%c CHECKOUT RESTAURATION - DBUT","color: #ffffff; font-weight: bold; font-size: 18px; background: #3b82f6; padding: 8px 16px; border-radius: 4px;",{effectiveCheckId:Ne,isCheckIdActive:pe,hasActiveCheckId:!!Ne,timestamp:new Date().toLocaleString()}),!Ne||!pe){console.error("%c CHECKOUT RESTAURATION - CHEC CONDITIONS","color: #ffffff; font-weight: bold; font-size: 14px; background: #ef4444; padding: 6px 12px;",{effectiveCheckId:Ne||"MANQUANT",isCheckIdActive:pe,raison:Ne?"CheckID non actif":"Pas de CheckID"});return}try{console.log(" Lecture session depuis IndexedDB...",Ne);const Re=await Oe.getCheckSession(Ne);console.log("%c SESSION RCUPRE","color: #ffffff; font-weight: bold; background: #8b5cf6; padding: 4px 8px;",{existe:!!Re,status:Re==null?void 0:Re.status,hasProgress:!!(Re!=null&&Re.progress),hasInteractions:!!((F=Re==null?void 0:Re.progress)!=null&&F.interactions)});const Rt=ze;if(Re&&Rt&&Re.parcoursId!==Rt){console.error("%c PARCOURS ID MISMATCH DTECT!","color: #ffffff; font-weight: bold; font-size: 16px; background: #dc2626; padding: 8px 16px;",{sessionParcoursId:Re.parcoursId,urlParcoursId:Rt,checkId:Ne}),await ge(null),localStorage.removeItem("activeCheckId"),ht.error("Session incompatible avec ce parcours. Veuillez recommencer.",{duration:5e3});return}if(!((W=Re==null?void 0:Re.progress)!=null&&W.interactions))return;const{imageUploadService:wr}=await Wt(async()=>{const{imageUploadService:ct}=await Promise.resolve().then(()=>bF);return{imageUploadService:ct}},void 0);await wr.restoreUrlsFromCheckId(Ne);const{buttonClicks:nv,photosTaken:Yn,checkboxStates:rv}=Re.progress.interactions;console.log("%c CONTENU INTERACTIONS INDEXEDDB","color: #ffffff; font-weight: bold; background: #059669; padding: 4px 8px;",{buttonClicks:nv?Object.keys(nv).length:0,photosTaken:Yn?Object.keys(Yn).length:0,checkboxStates:rv?Object.keys(rv).length:0,photoIds:Yn?Object.keys(Yn):[],photosDetail:Yn?JSON.stringify(Yn,null,2).substring(0,500):"AUCUNE"}),console.log(" CheckOut: Restauration des checkboxes gre par useCheckoutFlowManager"),console.log(" CheckOut: tat actuel des pices:",{totalPieces:Te.pieces.length,completedTasks:Te.pieces.reduce((ct,Gt)=>{var st;return ct+(((st=Gt.tasks)==null?void 0:st.filter(ut=>ut.completed).length)||0)},0),totalTasks:Te.pieces.reduce((ct,Gt)=>{var st;return ct+(((st=Gt.tasks)==null?void 0:st.length)||0)},0)}),console.log(" CheckOut: Restoration de TOUTES les photos de la session...");const wt=new Map;console.log("%c RECHERCHE PHOTOS LOCALSTORAGE (TOUTES)","color: #22c55e; font-weight: bold; font-size: 16px; background: #dcfce7; padding: 4px 8px;",{sessionCheckId:Ne,totalLocalStorageKeys:Object.keys(localStorage).filter(ct=>ct.startsWith("uploaded_image_")).length});const ov=Object.keys(localStorage).filter(ct=>ct.startsWith("uploaded_image_"));ov.forEach(ct=>{var Gt;try{const st=JSON.parse(localStorage.getItem(ct)||"{}");if(st.checkId&&st.checkId!==Ne){console.warn(" Photo ignore (checkId diffrent):",{photoCheckId:st.checkId,currentCheckId:Ne,photoId:st.id});return}if(st.id&&st.pieceId&&st.taskId&&st.uploadedUrl){const ut={id:st.id,pieceId:st.pieceId,referencePhotoId:st.referencePhotoId||"",blob:null,dataUrl:st.uploadedUrl,takenAt:((Gt=st.metadata)==null?void 0:Gt.takenAt)||st.uploadedAt||new Date().toISOString(),meta:{width:1920,height:1440}},rn=st.taskId.includes("_")&&st.taskId.split("_").pop()||st.taskId;wt.has(st.taskId)||wt.set(st.taskId,[]),wt.get(st.taskId).push(ut),wt.has(rn)||wt.set(rn,[]),wt.get(rn).push(ut)}}catch(st){console.warn(" Erreur parsing photo localStorage:",ct,st)}}),console.log(` ${wt.size} tches avec photos restaures depuis localStorage, total: ${Array.from(wt.values()).reduce((ct,Gt)=>ct+Gt.length,0)} photos`),console.log("%c TAPE 2: Analyse photos IndexedDB","color: #ffffff; font-weight: bold; background: #f59e0b; padding: 4px 8px;",{totalPhotoIds:Yn?Object.keys(Yn).length:0,photoIds:Yn?Object.keys(Yn):[]});for(const[ct,Gt]of Object.entries(Yn||{})){const st=Array.isArray(Gt)?Gt:[Gt];console.log(` Analyse photoId (cl): ${ct}, entries: ${st.length}`,{isTaskId:!ct.includes("_")||ct.split("_").length===1,photoId:ct});for(const ut of st){if(console.log(" Photo data:",{photoId:ct,type:typeof ut,isString:typeof ut=="string",hasPhotoData:ut!=null&&ut.photoData?"OUI":"NON",hasUrl:ut!=null&&ut.url?"OUI":"NON",hasTaskId:ut!=null&&ut.taskId?"OUI":"NON",hasPieceId:ut!=null&&ut.pieceId?"OUI":"NON",preview:JSON.stringify(ut).substring(0,200)}),typeof ut=="string"){const rn=wr.getUploadedUrl(ut);if(rn){let on=Ge||"",Ro=`reference-photos-${Ge}`;try{const co=localStorage.getItem(`uploaded_image_${ut}`);if(co){const Br=JSON.parse(co);Br.pieceId&&(on=Br.pieceId,Ro=Br.taskId||`reference-photos-${Br.pieceId}`)}}catch(co){console.warn(" Impossible de rcuprer mtadonnes:",co)}const Ni={id:ut,pieceId:on,referencePhotoId:"",blob:null,dataUrl:rn,takenAt:new Date().toISOString(),meta:{width:1920,height:1440}},zr=`${on}_${Ro}`;wt.has(zr)||wt.set(zr,[]),wt.get(zr).push(Ni),wt.has(Ro)||wt.set(Ro,[]),wt.get(Ro).push(Ni)}continue}if(!ct.includes("_")||ct.split("_").length===1){const rn=ct;if(Array.isArray(Gt)&&Gt.length>0){for(const on of Gt)if(on&&typeof on=="object"){const Ro=wr.getUploadedUrl(on.photoId||ct),zr=xt(on.photoId||ct,"")||Ro||on.url||on.dataUrl||"";if(zr){const co={id:on.photoId||ct,pieceId:((X=on.metadata)==null?void 0:X.pieceId)||"",referencePhotoId:((ee=on.metadata)==null?void 0:ee.referencePhotoId)||"",blob:null,dataUrl:zr,takenAt:on.timestamp||new Date().toISOString(),meta:((ue=on.metadata)==null?void 0:ue.meta)||{width:1920,height:1440}};wt.has(rn)||wt.set(rn,[]),wt.get(rn).push(co),console.log(" Photo restaure avec taskId:",{taskId:rn,photoId:on.photoId,hasUrl:!!zr})}}}}if((ve=ut==null?void 0:ut.metadata)!=null&&ve.taskId){const rn=ut.metadata.taskId,on=wr.getUploadedUrl(ct),Ni=xt(ct,"")||on||ut.url||"",zr={id:ct,pieceId:ut.metadata.pieceId||"",referencePhotoId:ut.metadata.referencePhotoId||"",blob:null,dataUrl:Ni,takenAt:ut.timestamp||new Date().toISOString(),meta:((Ae=ut.metadata)==null?void 0:Ae.meta)||{width:1920,height:1440}},co=rn.split("_");let Br=rn;co.length>=2&&(Br=co[1]),wt.has(rn)||wt.set(rn,[]),wt.get(rn).push(zr),Br!==rn&&(wt.has(Br)||wt.set(Br,[]),wt.get(Br).push(zr))}}}wt.size>0?(console.log("%c APPLICATION PHOTOS AU STATE REACT","color: #ffffff; font-weight: bold; font-size: 16px; background: #10b981; padding: 6px 12px;",{tasksWithPhotos:Array.from(wt.keys()),totalPhotos:Array.from(wt.values()).reduce((ct,Gt)=>ct+Gt.length,0),photosParTache:Array.from(wt.entries()).map(([ct,Gt])=>({taskId:ct,count:Gt.length,photoIds:Gt.map(st=>st.id)}))}),L(wt),console.log(" setCapturedPhotosData() appel avec succs")):console.error("%c AUCUNE PHOTO  RESTAURER","color: #ffffff; font-weight: bold; background: #ef4444; padding: 4px 8px;",{localStoragePhotos:ov.length,indexedDBPhotos:Yn?Object.keys(Yn).length:0,raison:"Vrifier la sauvegarde des photos"}),console.log(" CheckOut: Restauration des tches gre par useCheckoutFlowManager")}catch(Re){console.error("%c ERREUR CRITIQUE RESTAURATION","color: #ffffff; font-weight: bold; font-size: 16px; background: #dc2626; padding: 8px 16px;",{error:Re instanceof Error?Re.message:String(Re),stack:Re instanceof Error?Re.stack:void 0,checkId:Ne})}finally{console.log("%c CHECKOUT RESTAURATION - FIN","color: #ffffff; font-weight: bold; font-size: 18px; background: #3b82f6; padding: 8px 16px; border-radius: 4px;",{timestamp:new Date().toLocaleString()})}})()},[Ne,pe]),f.useEffect(()=>{(async()=>{if(O(!0),Ne){await new Promise(W=>setTimeout(W,800));const F=await Oe.getCheckSession(Ne);if(console.log(" CheckOut: Vrification session:",{checkId:Ne,status:F==null?void 0:F.status,rapportID:F==null?void 0:F.rapportID,isTerminated:(F==null?void 0:F.status)==="terminated"}),F&&F.status==="terminated"){console.warn(" CheckOut: Session termine, redirection vers checkout-home"),ht.error("Ce parcours est dj termin. Consultez votre rapport."),await new Promise(W=>setTimeout(W,1e3)),Xe("/checkout-home");return}}O(!1)})()},[Ne,H]),f.useEffect(()=>{const M=()=>{L(W=>{const X=new Map(W);let ee=!1;for(const[ue,ve]of X.entries()){const Ae=ve.map(Re=>{const Rt=Ds.getUploadedUrl(Re.id);return Rt&&Rt!==Re.dataUrl?(ee=!0,{...Re,dataUrl:Rt}):Re});JSON.stringify(Ae)!==JSON.stringify(ve)&&X.set(ue,Ae)}return ee?X:W})};M();const F=setInterval(M,5e3);return()=>clearInterval(F)},[xt]),f.useEffect(()=>{const M=()=>{if(q.current){const ve=q.current.offsetHeight+16;Math.abs(ve-A)>5&&R(ve)}};M();const F=setTimeout(M,100),W=()=>M();window.addEventListener("resize",W);const X=new MutationObserver(M);return q.current&&X.observe(q.current,{childList:!0,subtree:!0,attributes:!0}),()=>{clearTimeout(F),window.removeEventListener("resize",W),X.disconnect()}},[A,U,$]),f.useEffect(()=>{if(l&&Y.length>0){const M=Y.find(X=>X.id===l),F=(M==null?void 0:M.tasks)||[];console.log(" Donnes de la pice slectionne:",{pieceId:l,roomData:M,tasksCount:F.length});const W=F.filter(X=>X.type==="photo_multiple"||X.type==="photo_optional"||X.photo_references||X.photo_reference);console.log(" Tches avec photos de rfrence:",W),W.forEach(X=>{var ee,ue;console.log(` Tche ${X.id}:`,{type:X.type,label:X.label,photoReferences:((ee=X.photo_references)==null?void 0:ee.length)||0,photoReference:X.photo_reference?"oui":"non",urls:((ue=X.photo_references)==null?void 0:ue.map(ve=>ve.url))||(X.photo_reference?[X.photo_reference.url]:[])})})}},[l,Y]);const lt=f.useMemo(()=>{if(!(U!=null&&U.nom)||!(U!=null&&U.id))return[];const M=re(U.nom),F=xe(U.id),W=new Map;M.forEach(ee=>W.set(ee.id,ee)),F.forEach(ee=>{W.has(ee.id)||W.set(ee.id,ee)});const X=Array.from(W.values());return console.log(" Signalements pour la pice:",{pieceName:U.nom,pieceId:U.id,userSignalementsCount:M.length,apiSignalementsCount:F.length,totalCount:X.length,signalements:X.map(ee=>({id:ee.id,titre:ee.titre,origine:ee.origine,priorite:ee.priorite}))}),Kd(X)},[U==null?void 0:U.nom,U==null?void 0:U.id,re,xe]),bt=async(M,F)=>{if(console.log(" handleTaskComplete appel:",{taskId:M,completed:F,pieceId:U==null?void 0:U.id}),F){const W=$==null?void 0:$.type,ee=["photo_required","photo_optional","photo_multiple","photo_validation","reference_photos"].includes(W||"");try{W==="checkbox"?(console.log(" Sauvegarde checkbox task:",{taskId:M,pieceId:U==null?void 0:U.id,taskType:W}),await at.trackCheckboxChange({checkboxId:M,taskId:M,pieceId:(U==null?void 0:U.id)||"",etapeId:($==null?void 0:$.etapeID)||M,isChecked:!0,checkedAt:new Date().toISOString()}),console.log(" Checkbox task sauvegarde dans checkboxStates:",{taskId:M,pieceId:U==null?void 0:U.id,pieceName:U==null?void 0:U.nom})):ee?console.log(" Tche photo complte - tracking gr par photo_taken:",{taskId:M,taskType:W,pieceId:U==null?void 0:U.id,etapeId:$==null?void 0:$.etapeID}):(console.log(" Sauvegarde button-click task:",{buttonId:M,taskId:M,pieceId:U==null?void 0:U.id,taskType:W,etapeId:$==null?void 0:$.etapeID}),await at.trackButtonClick({buttonId:M,pieceId:(U==null?void 0:U.id)||"",taskId:M,etapeId:($==null?void 0:$.etapeID)||M,actionType:"complete",timestamp:new Date().toISOString(),metadata:{page:"checkout",taskType:W||"unknown",pieceName:(U==null?void 0:U.nom)||"",completed:!0,checkId:se}}),console.log(" Button-click task sauvegarde dans buttonClicks:",M))}catch(ue){console.error(" Erreur sauvegarde task completion:",ue)}Te.completeCurrentTask()}else{const W=$==null?void 0:$.type;try{W==="checkbox"?(await at.trackCheckboxChange({checkboxId:`checkbox_${M}`,taskId:M,pieceId:(U==null?void 0:U.id)||"",etapeId:($==null?void 0:$.etapeID)||M,isChecked:!1,uncheckedAt:new Date().toISOString()}),console.log(" Checkbox task retire de checkboxStates:",M)):console.log(" Uncomplete pour button-click task non implment:",M)}catch(X){console.error(" Erreur sauvegarde uncomplete:",X)}}},ae=async M=>{var ve,Ae,Re;console.log(" CheckOut: handleTakePhoto appel pour tche:",M),console.log(" CheckOut: tat actuel pour photo:",{taskId:M,syncedCurrentTask:!!$,currentPiece:!!U,isPhotoCaptureOpen:I,photoReferences:((ve=$==null?void 0:$.photo_references)==null?void 0:ve.length)||0});try{await nt(`photo_intent_${M}`,(U==null?void 0:U.id)||"",it,"photo_intent",{page:"checkout",taskType:($==null?void 0:$.type)||"unknown",pieceName:(U==null?void 0:U.nom)||"",timestamp:new Date().toISOString()}),console.log(" CheckOut: Intention photo sauvegarde dans CheckID:",M)}catch(Rt){console.error(" CheckOut: Erreur sauvegarde intention photo:",Rt)}const F=Qe.find(Rt=>Rt.tasks.some(wr=>wr.id===M));if(F){const Rt=F.tasks.findIndex(wr=>wr.id===M);console.log(" Navigation vers:",{pieceId:F.id,taskIndex:Rt}),Te.jumpToPiece(F.id,Rt)}const W=(Ae=U==null?void 0:U.tasks)==null?void 0:Ae.find(Rt=>Rt.id===M),X=(W==null?void 0:W.photo_references)&&W.photo_references.length>0,ee=W==null?void 0:W.photo_reference,ue=(W==null?void 0:W.type)&&["photo_required","photo_optional","photo_multiple","photo_validation","reference_photos"].includes(W.type);console.log(" CheckOut: Vrification photo rfrences:",{currentTask:!!W,hasPhotoReferences:X,hasSinglePhotoReference:!!ee,isPhotoTask:ue,photoReferencesLength:((Re=W==null?void 0:W.photo_references)==null?void 0:Re.length)||0,taskType:W==null?void 0:W.type}),X||ee||ue?(console.log(` Ouverture du modal photo pour ${U==null?void 0:U.nom}`,{taskId:M,pieceId:U==null?void 0:U.id,photosCount:X?W.photo_references.length:1,isTodoWithPhoto:!!ee,isPhotoTaskWithoutRef:ue&&!X&&!ee}),P(!0)):(console.warn(" Aucune photo de rfrence trouve pour cette tche"),alert("Aucune photo de rfrence disponible pour cette pice."))},Me=()=>{K(U==null?void 0:U.nom)},Je=async()=>{console.log(" CheckOut: Navigation retour - Dbut sauvegarde complte");const M=We.pathname;if(!M.includes("/checkout")){console.error(" CheckOut: handleGoBack appel depuis une page non-CheckOut:",M),console.error("    Ceci indique un problme de contexte ou de routing");return}console.log(" CheckOut: Validation contexte OK - Navigation depuis CheckOut vers CheckOut-Home");try{await Te.saveProgressToCheckId(Ge,it),console.log(" CheckOut: Progression sauvegarde avant navigation Home:",{pieceId:Ge,taskIndex:it,pieceName:U==null?void 0:U.nom})}catch(ee){console.error(" CheckOut: Erreur sauvegarde progression:",ee)}try{if(j.size>0){console.log(" CheckOut: Sauvegarde tat photos avant navigation:",{totalPhotos:Array.from(j.values()).flat().length,piecesWithPhotos:j.size});for(const[ee,ue]of j.entries())for(const ve of ue)try{await He(ve.taskId,ee,ve.dataUrl,{url:ve.dataUrl,timestamp:ve.timestamp,metadata:ve.metadata})}catch(Ae){console.error(" CheckOut: Erreur sauvegarde photo:",Ae)}}}catch(ee){console.error(" CheckOut: Erreur sauvegarde photos:",ee)}try{const ee=Te.pieces.reduce((ve,Ae)=>{var Re;return ve+(((Re=Ae.tasks)==null?void 0:Re.filter(Rt=>Rt.completed).length)||0)},0),ue=Te.pieces.reduce((ve,Ae)=>{var Re;return ve+(((Re=Ae.tasks)==null?void 0:Re.length)||0)},0);console.log(" CheckOut: tat des tches avant navigation:",{completedTasks:ee,totalTasks:ue,progressPercentage:Te.totalProgress})}catch(ee){console.error(" CheckOut: Erreur calcul tat tches:",ee)}try{await nt("checkout_go_back",(U==null?void 0:U.id)||"",it,"navigation_back",{page:"checkout",fromPiece:U==null?void 0:U.nom,fromPieceId:Ge,fromTaskIndex:it,totalPhotos:Array.from(j.values()).flat().length,completedTasks:Te.pieces.reduce((ee,ue)=>{var ve;return ee+(((ve=ue.tasks)==null?void 0:ve.filter(Ae=>Ae.completed).length)||0)},0),totalTasks:Te.pieces.reduce((ee,ue)=>{var ve;return ee+(((ve=ue.tasks)==null?void 0:ve.length)||0)},0),progressPercentage:Te.totalProgress,timestamp:new Date().toISOString(),navigationContext:"home_button_click"}),console.log(" CheckOut: Action retour sauvegarde dans CheckID avec contexte complet")}catch(ee){console.error(" CheckOut: Erreur sauvegarde action retour:",ee)}try{const{interactionTracker:ee}=await Wt(async()=>{const{interactionTracker:ue}=await Promise.resolve().then(()=>Tl);return{interactionTracker:ue}},void 0);await ee.trackPagePath("/checkout-home"),console.log(" CheckOut: Chemin de navigation sauvegard")}catch(ee){console.error(" CheckOut: Erreur sauvegarde chemin:",ee)}const F=we||Ne,W=ze;if(!F){console.warn(" CheckOut: Aucun checkId trouv pour la navigation - Tentative de rcupration");const ee=localStorage.getItem("activeCheckId");ee&&console.log(" CheckOut: CheckId rcupr depuis localStorage:",ee)}console.log(" CheckOut: Navigation vers /checkout-home avec prservation complte:",{checkId:F,parcours:W,fromPage:"/checkout",preservedState:{pieceId:Ge,taskIndex:it,photosCount:Array.from(j.values()).flat().length,progressPercentage:Te.totalProgress}});const X="/checkout-home";console.log(" CheckOut: Navigation finale confirme vers:",X),console.log("    Depuis CheckOut (/checkout) vers CheckOut Home (/checkout-home)"),Xe(X)},yt=f.useRef(!1),mt=f.useRef(!1),zt=f.useRef(!1);f.useEffect(()=>{const M=Te.getCurrentTask();if(!M)return;const F=M.completed;if(F&&!mt.current&&!yt.current&&!zt.current){console.log(" CheckOut: Tche complte dtecte, navigation automatique...",{taskId:M.id,taskName:M.nom}),yt.current=!0,mt.current=!0;const W=setTimeout(()=>{console.log(" CheckOut: Appel goToNextTask() aprs compltude..."),Te.goToNextTask(),yt.current=!1},50);return()=>clearTimeout(W)}else F||(mt.current=!1)},[Te.pieces,Te.currentPieceId,Te.currentTaskIndex]);const fn=M=>{if(u){u(M);return}typeof window<"u"&&window.analytics&&window.analytics.track("piece_opened",{piece_id:M}),Te.jumpToPiece(M)},nn=async M=>{var F;if(console.log(" CheckOut: Photos captures reues:",M.length),$&&M.length>0){const W=Ge,X=$==null?void 0:$.id;console.log(" CheckOut: Stockage photos avec IDs uniques:",{pieceId:W,taskId:X,photosCount:M.length,pieceName:U==null?void 0:U.nom,photoIds:M.map(ue=>ue.id)});const ee=X||`${W}_${M[0].id}`;L(ue=>{const ve=new Map(ue);return ve.set(ee,M),console.log(" CheckOut: Photos stockes avec cl de groupe:",{groupKey:ee,photosCount:M.length}),ve});try{console.log(" CheckOut: Dmarrage upload automatique...");const ue=$==null?void 0:$.id;for(let ve=0;ve<M.length;ve++){const Ae=M[ve],Re=Ae.id;console.log(" CheckOut: Upload photo avec etapeID spcifique:",{photoId:Ae.id,etapeId:Re,photoIndex:ve,taskId:ue}),await It(Ae,{taskId:ue||"",checkId:se||void 0,pieceId:W,etapeId:Re,taskIndex:it}),await He(ue||"",W||"",Ae.dataUrl,{photoId:Ae.id||`photo_${Date.now()}`,etapeId:Re,photoIndex:ve,taskIndex:it,metadata:Ae.metadata,timestamp:new Date().toISOString(),page:"checkout",pieceName:(U==null?void 0:U.nom)||""})}console.log(" CheckOut: Photos uploades et sauvegardes dans CheckID:",{photosCount:M.length,taskId:ue}),ue&&M.length>0&&(await Ye(ue,ue,W||"",!0,`${M.length} photo(s) prise(s)`),console.log(" CheckOut: Tche photo marque comme complte:",{taskId:ue,photosCount:M.length,pieceId:W}))}catch(ue){console.error(" CheckOut: Erreur upload/sauvegarde photos:",ue)}}if(P(!1),z("photos_retaken"),M.length>0&&$){const W=((F=$.photo_references)==null?void 0:F.length)||($.photo_reference?1:0);console.log(" CheckOut: Vrification photos captures:",{capturedCount:M.length,requiredCount:W,allPhotosCaptured:M.length>=W}),M.length>=W?(await bt($.id,!0),console.log(" Tche photos de rfrence marque comme complte"),Te.completeCurrentTask()):console.log(" CheckOut: Pas toutes les photos captures, pas de validation automatique")}},B=async M=>{if(console.log(" handleValidatePiece appel pour taskId:",M),zt.current=!1,Te.completeCurrentTask(),z("validated"),U!=null&&U.id)try{await Dt(U.id,"validated",100)}catch(F){console.error(" Erreur mise  jour tat pice:",F)}try{const F=($==null?void 0:$.id)||M;F&&(await Ye(F,F,(U==null?void 0:U.id)||"",!0,"Tche valide"),console.log(" CheckOut: Validation de tche sauvegarde dans IndexedDB:",{taskId:F,pieceId:U==null?void 0:U.id,pieceName:U==null?void 0:U.nom,timestamp:new Date().toISOString()}))}catch(F){console.error(" CheckOut: Erreur sauvegarde validation tche:",F)}},ye=M=>{var ue,ve,Ae;console.log(` Reprise des photos: ${M}`);const F=($==null?void 0:$.id)===M?$:(ue=U==null?void 0:U.tasks)==null?void 0:ue.find(Re=>Re.id===M),W=(F==null?void 0:F.photo_references)&&F.photo_references.length>0,X=F==null?void 0:F.photo_reference,ee=(F==null?void 0:F.type)&&["photo_required","photo_optional","photo_multiple","photo_validation","reference_photos"].includes(F.type);console.log(" CheckOut: Vrification photo rfrences:",{currentTask:!!F,usedSyncedTask:($==null?void 0:$.id)===M,hasPhotoReferences:W,hasSinglePhotoReference:!!X,isPhotoTask:ee,photoReferencesLength:((ve=F==null?void 0:F.photo_references)==null?void 0:ve.length)||0,taskType:F==null?void 0:F.type,taskId:M}),W||X||ee?(console.log(` Ouverture du modal photo pour ${U==null?void 0:U.nom}`,{taskId:M,pieceId:U==null?void 0:U.id,photosCount:W?F.photo_references.length:1,isTodoWithPhoto:!!X,isPhotoTaskWithoutRef:ee&&!W&&!X}),P(!0)):(console.warn(" Aucune photo de rfrence trouve pour cette tche"),console.error(" Debug info:",{syncedCurrentTask:$?{id:$.id,type:$.type,hasPhotoReferences:!!$.photo_references,hasPhotoReference:!!$.photo_reference}:"null",currentPieceTasks:((Ae=U==null?void 0:U.tasks)==null?void 0:Ae.length)||0}),alert("Aucune photo de rfrence disponible pour cette pice."))},Ze=()=>{console.log(" Modal photo ferm sans capture"),P(!1)};return T?a.jsx("div",{className:"min-h-screen bg-gradient-subtle max-w-md mx-auto flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Vrification du parcours..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-subtle max-w-md mx-auto relative",children:[a.jsxs("div",{className:"sticky top-0 z-50 bg-glass-bg/95 backdrop-blur-xl border-b border-white/20 shadow-elegant",children:[a.jsxs("div",{className:"flex items-center justify-between py-2 px-4 bg-background",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:Je,className:"hover:bg-white/20 transition-all duration-300 hover:scale-105",children:a.jsx(oo,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1 flex justify-center px-4 relative",children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(xI,{pieces:Te.pieces,currentPieceId:Ge,onPieceSelected:fn,signalements:ie().length,currentTasks:U==null?void 0:U.checkoutTasks,currentTaskIndex:it,completedTasks:(()=>{const M={};return Te.pieces.forEach(F=>{var W;(W=F.tasks)==null||W.forEach(X=>{X.completed&&(M[X.id]=!0)})}),M})(),onTaskSelected:(M,F)=>{console.log(" CheckOut: Navigation vers tche depuis PieceSelector",{pieceId:M,taskIndex:F}),zt.current=!0,Te.jumpToPiece(M,F)},customGetPieceProgress:async M=>{const F=await Te.getPieceProgress(M);return console.log(" CheckOut: customGetPieceProgress depuis CheckID Database pour",M,F),F}})})}),a.jsxs("div",{className:"flex items-center gap-2",children:[$&&a.jsxs(De,{variant:"outline",className:"text-xs bg-primary/10 border-primary/20 text-primary animate-scale-in",children:["tape ",it+1,"/",((ce=U==null?void 0:U.tasks)==null?void 0:ce.length)||0]}),a.jsx("div",{className:"transition-transform duration-300 hover:scale-105",children:a.jsx(ua,{user:Z,size:"sm",onClick:()=>p(!0)})})]})]}),a.jsx("div",{className:"px-4 pb-3 bg-background",children:a.jsx("div",{className:"flex items-center justify-center gap-2 text-sm flex-nowrap",children:a.jsx("div",{className:"flex items-center gap-2"})})})]}),a.jsxs("div",{className:"p-6 space-y-6 py-2",style:{paddingBottom:`${A}px`},children:[$?(()=>{var M,F,W,X;return console.log(" CheckOut: Passage de donnes  RoomTaskCard:",{pieceId:U==null?void 0:U.id,pieceNom:U==null?void 0:U.nom,cleaningInfo:((M=U==null?void 0:U.cleaningInfo)==null?void 0:M.substring(0,50))+"...",roomInfo:((F=U==null?void 0:U.roomInfo)==null?void 0:F.substring(0,50))+"...",hasCleaningInfo:!!(U!=null&&U.cleaningInfo),hasRoomInfo:!!(U!=null&&U.roomInfo)}),["photo_multiple","photo_required","photo_optional","photo_validation","reference_photos"].includes($.type)?a.jsx(zI,{task:$,taskIndex:it,totalTasks:((W=U==null?void 0:U.tasks)==null?void 0:W.length)||0,onValidatePiece:B,onRetakePhotos:ye,capturedPhotos:(()=>{let ee=j.get($.id)||[];if(ee.length===0){const ue=`${Ge}_${$.id}`;ee=j.get(ue)||[]}return console.log(" CheckOut: Recherche photos pour tche:",{taskId:$.id,taskCompleted:$.completed,photosCount:ee.length,hasUrls:ee.filter(ue=>ue.dataUrl&&ue.dataUrl!=="").length}),ee.length>0&&console.log(" CheckOut: Photos trouves pour tche:",{taskId:$.id,photosCount:ee.length,hasUrls:ee.filter(ue=>ue.dataUrl&&ue.dataUrl!=="").length}),ee.length>0&&ee.some(ue=>!ue.dataUrl||ue.dataUrl==="")&&console.log(" CheckOut: Photos sans URLs dtectes:",{taskId:$.id,photosWithoutUrls:ee.filter(ue=>!ue.dataUrl||ue.dataUrl==="").length,totalPhotos:ee.length}),ee})(),onReportProblem:Me,cleaningInfo:U==null?void 0:U.cleaningInfo,roomInfo:U==null?void 0:U.roomInfo,travelerNote:U==null?void 0:U.travelerNote,cleanerNote:U==null?void 0:U.cleanerNote,infoEntrance:U==null?void 0:U.infoEntrance,validationMode:D,signalements:lt,isSignalementsOpen:E,onSignalementsOpenChange:_,isCheckoutMode:!0,hideBottomActions:!0}):a.jsx(_F,{task:$,taskIndex:it,totalTasks:((X=U==null?void 0:U.tasks)==null?void 0:X.length)||0,onTaskComplete:bt,onTakePhoto:ae})})():a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Aucune tche disponible pour cette pice"})}),($==null?void 0:$.type)==="photo_multiple"&&$.isCompleted&&a.jsxs("div",{className:"mt-6 space-y-3",children:[a.jsx("h5",{className:"font-medium text-foreground",children:" Photos captures"}),a.jsxs("div",{className:"space-y-4 animate-slide-up",children:[a.jsxs("div",{className:"text-center py-4",children:[a.jsxs("h3",{className:`text-lg font-semibold mb-2 ${$.isCompleted?"text-green-600":"text-foreground"}`,children:[$.isCompleted?" ":" ",$.label]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:$.isCompleted?"Toutes les photos ont t captures avec succs !":$.description}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsxs(De,{variant:"outline",children:["tape ",it+1,"/",((te=U==null?void 0:U.tasks)==null?void 0:te.length)||0]}),$.isCompleted&&a.jsx(De,{variant:"outline",className:"bg-green-100 text-green-800 border-green-300",children:"Valid"})]})]}),$.photo_references&&$.photo_references.length>0&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:$.photo_references.map((M,F)=>a.jsxs("div",{className:`group relative aspect-[4/3] rounded-2xl overflow-hidden shadow-floating transition-all duration-500 ${$.isCompleted?"border-2 border-green-400 bg-green-50":"bg-gradient-subtle border border-white/30 hover:shadow-glow"}`,children:[a.jsx(My,{src:M.url,alt:`Photo de rfrence ${F+1}`,className:`aspect-[4/3] group-hover:scale-105 transition-transform duration-500 ${$.isCompleted?"opacity-90":""}`,onClick:()=>{S(M.url),C(!0)}}),$.isCompleted&&a.jsx("div",{className:"absolute inset-0 bg-green-500/20 flex items-center justify-center",children:a.jsx("div",{className:"bg-green-500 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg",children:a.jsx(dn,{className:"w-6 h-6"})})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:`absolute bottom-2 left-2 text-white text-xs px-2 py-1 rounded ${$.isCompleted?"bg-green-600/80":"bg-black/50"}`,children:[$.isCompleted?" ":"",F+1,"/",$.photo_references.length]})]},`${M.tache_id}-${F}`))})]})]}),(()=>{var F;return $!=null&&$.photo_reference&&console.log(" Tche avec photo_reference:",{taskId:$.id,hasPhotoReference:!!$.photo_reference,hasPhotoReferences:!!$.photo_references,photoReferencesLength:((F=$.photo_references)==null?void 0:F.length)||0,taskType:$.type}),["photo_multiple","photo_required","photo_optional","photo_validation","reference_photos"].includes(($==null?void 0:$.type)||"")?(console.log(" Photo de rfrence dj affiche par RoomTaskCard, skip"),null):!($!=null&&$.photo_reference)||$.photo_references&&$.photo_references.length>0?null:a.jsxs("div",{className:"space-y-4 animate-slide-up",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Photo de rfrence"})}),a.jsxs("div",{className:"group relative aspect-[4/3] bg-gradient-subtle rounded-2xl overflow-hidden shadow-floating border border-white/30 hover:shadow-glow transition-all duration-500",children:[a.jsx(My,{src:$.photo_reference.url,alt:"Photo de rfrence",className:"aspect-[4/3] group-hover:scale-105 transition-transform duration-500",onClick:()=>{S($.photo_reference.url),C(!0)}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(()=>{const W=Ge,X=$.id,ee=`${W}_${X}`,ue=j.get(ee),ve=ue==null?void 0:ue[0];return console.log(" Recherche photo capture:",{uniqueTaskKey:ee,found:!!ve,totalKeys:Array.from(j.keys())}),ve?a.jsxs("div",{className:"space-y-2 ml-4 border-l-4 border-green-500 pl-3",children:[a.jsx("div",{className:"text-sm text-green-700 font-medium",children:" Nouvelle photo prise"}),a.jsxs("div",{className:"group relative aspect-[4/3] bg-gradient-subtle rounded-2xl overflow-hidden shadow-floating border-2 border-green-500 hover:shadow-glow transition-all duration-500",children:[a.jsx("img",{src:ve.dataUrl,alt:"Photo prise",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:Ae=>{console.error(" Erreur chargement photo capture:",ve.id)}}),a.jsx("div",{className:"absolute top-2 right-2 bg-green-600/90 backdrop-blur-sm text-white px-2 py-1 rounded-md text-xs font-medium",children:" Photo prise"})]}),a.jsxs("div",{className:"text-xs text-green-600",children:[" ",new Date(ve.takenAt).toLocaleString()]})]}):null})()]})})(),($==null?void 0:$.type)==="photo_multiple"&&($==null?void 0:$.photo_references)&&$.photo_references.length>0&&a.jsxs("div",{className:"space-y-4 animate-slide-up",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Photos de rfrence"})}),a.jsx(Vu,{photos:$.photo_references}),(()=>{const M=Ge,F=$.id,W=`${M}_${F}`,X=j.get(W);return console.log(" Recherche photos captures (multiple):",{uniqueTaskKey:W,found:(X==null?void 0:X.length)||0,totalKeys:Array.from(j.keys())}),!X||X.length===0?null:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h5",{className:"font-medium text-foreground text-sm",children:["Vos photos (",X.length,")"]}),$.photo_references.map((ee,ue)=>{const ve=X.find(Ae=>Ae.referencePhotoId===ee.tache_id)||X[ue];return ve?a.jsxs("div",{className:"ml-4 border-l-4 border-green-500 pl-3",children:[a.jsxs("div",{className:"text-sm text-green-700 font-medium mb-2",children:[" Photo ",ue+1," prise"]}),a.jsxs("div",{className:"group relative aspect-[4/3] bg-gradient-subtle rounded-2xl overflow-hidden shadow-floating border-2 border-green-500 hover:shadow-glow transition-all duration-500",children:[a.jsx("img",{src:ve.dataUrl,alt:`Photo capture ${ue+1}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:Ae=>{console.error(" Erreur chargement photo capture:",ve.id)}}),a.jsxs("div",{className:"absolute top-2 right-2 bg-green-600/90 backdrop-blur-sm text-white px-2 py-1 rounded-md text-xs font-medium",children:[" Photo ",ue+1]})]}),a.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[" ",new Date(ve.takenAt).toLocaleString()]})]},ee.tache_id||ue):null})]})})()]})]}),a.jsxs("div",{ref:q,className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-background border-t border-border shadow-floating p-3 pb-3 space-y-2 safe-area-inset-bottom animate-slide-up",children:[(()=>{var X,ee;const M=U,F=((X=M==null?void 0:M.checkoutTasks)==null?void 0:X.filter(ue=>!ue.isCompleted))||[],W=((ee=M==null?void 0:M.checkoutTasks)==null?void 0:ee.filter(ue=>ue.isCompleted))||[];return F.length>0&&W.length>0?a.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex items-center gap-2 text-amber-800",children:[a.jsx(_n,{className:"h-4 w-4"}),a.jsxs("span",{className:"text-sm font-medium",children:["Il reste ",F.length," tche",F.length>1?"s":"","  terminer dans cette pice"]})]})}):null})(),a.jsxs("div",{className:"flex flex-col gap-3",children:[(()=>{const M=Te.pieces.reduce((X,ee)=>{var ue;return X+(((ue=ee.tasks)==null?void 0:ue.length)||0)},0),F=Te.pieces.reduce((X,ee)=>{var ue;return X+(((ue=ee.tasks)==null?void 0:ue.filter(ve=>ve.completed).length)||0)},0),W=F===M&&M>0;return console.log(" CheckOut: Vrification tches compltes:",{totalTasks:M,completedTasks:F,allTasksCompleted:W,pieces:Te.pieces.map(X=>{var ee,ue,ve;return{nom:X.nom,totalTasksInPiece:(ee=X.tasks)==null?void 0:ee.length,completedTasksInPiece:(ue=X.tasks)==null?void 0:ue.filter(Ae=>Ae.completed).length,tasks:(ve=X.tasks)==null?void 0:ve.map(Ae=>({label:Ae.label,completed:Ae.completed}))}})}),W?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-center animate-slide-up",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[a.jsx(dn,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"font-semibold text-green-800",children:"Toutes les tches sont termines !"})]}),a.jsx("p",{className:"text-sm text-green-700",children:"Passons aux questions de sortie"})]}),a.jsxs(fe,{variant:"cta",onClick:()=>{console.log(" Navigation vers les questions de sortie"),Xe("/exit-questions")},className:"w-full",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 mr-2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a.jsx("path",{d:"M12 17h.01"})]}),"Rpondre aux questions"]})]}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-row gap-2",children:[(($==null?void 0:$.type)==="photo_required"||($==null?void 0:$.type)==="photo_multiple"||($==null?void 0:$.type)==="photo_validation"||($==null?void 0:$.type)==="reference_photos")&&a.jsxs(a.Fragment,{children:[(()=>{const X=j.get($.id),ee=j.get(`${Ge}_${$.id}`);return((X==null?void 0:X.length)||0)>0||((ee==null?void 0:ee.length)||0)>0})()&&a.jsxs(fe,{variant:"outline",onClick:()=>ye($.id),className:"flex-1 text-sm",children:[a.jsx("span",{className:"hidden xs:inline",children:(()=>{let X=0;return $.photo_references&&$.photo_references.length>0?X=$.photo_references.length:$.photo_reference&&(X=1),X>1?" Reprendre les photos":" Reprendre la photo"})()}),a.jsx("span",{className:"xs:hidden",children:" Reprendre"})]}),(()=>{const X=j.get($.id),ee=j.get(`${Ge}_${$.id}`);return((X==null?void 0:X.length)||0)>0||((ee==null?void 0:ee.length)||0)>0?a.jsxs(fe,{variant:"cta",onClick:()=>B($.id),className:"flex-1 text-sm",children:[a.jsx("span",{className:"hidden xs:inline",children:(()=>{let ve=0;return $.photo_references&&$.photo_references.length>0?ve=$.photo_references.length:$.photo_reference&&(ve=1),ve>1?"Valider ces photos":"Valider cette photo"})()}),a.jsx("span",{className:"xs:hidden",children:"Valider"})]}):a.jsx(fe,{variant:"cta",onClick:()=>ae($.id),className:"flex-1 w-full sm:w-auto text-sm sm:text-base",children:(()=>{var Re;let ve=0;return $.photo_references&&$.photo_references.length>0?ve=$.photo_references.length:$.photo_reference&&(ve=1),console.log(" Photo count for button text:",{taskId:$.id,photoReferencesLength:(Re=$.photo_references)==null?void 0:Re.length,hasPhotoReference:!!$.photo_reference,photoCount:ve,willShowPlural:ve>1,taskType:$==null?void 0:$.type}),($==null?void 0:$.type)==="reference_photos"?"Prendre photos similaires":ve>1?"Prendre photos pour valider la tche":"Prendre photo pour valider la tche"})()})})()]}),($==null?void 0:$.type)==="checkbox"&&a.jsxs(fe,{variant:"cta",onClick:()=>bt($.id,!0),disabled:$.isCompleted,className:`flex-1 ${$.isCompleted?"bg-gradient-primary hover:bg-gradient-primary/90 shadow-elegant":""}`,children:[a.jsx(dn,{className:"h-4 w-4 mr-2"}),$.isCompleted?" Tche valide":"Valider tche"]})]})})})(),a.jsxs("div",{className:"flex items-center justify-center gap-4",children:[a.jsx(Ci,{onClick:Me,variant:"outline",size:"sm"}),lt.length>0&&a.jsxs(Du,{open:E,onOpenChange:_,children:[a.jsx(Au,{asChild:!0,children:a.jsx("button",{children:a.jsxs(De,{variant:"destructive",className:"h-auto w-auto px-2 py-1 flex items-center justify-center text-xs font-bold bg-red-500 hover:bg-red-600 transition-colors animate-pulse rounded-full",children:[" : ",lt.length]})})}),a.jsx(jl,{className:"w-80 p-0",align:"end",children:a.jsxs($e,{className:"border-0 shadow-none",children:[a.jsx(Lt,{className:"pb-2",children:a.jsxs($t,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(_n,{className:"h-4 w-4 text-red-500"}),"Signalements en cours (",lt.length,")"]})}),a.jsx(tt,{className:"space-y-2",children:lt.map(M=>a.jsx("div",{className:"p-2 bg-red-50 rounded-lg border-l-2 border-red-200",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-red-800 truncate",children:M.piece}),a.jsx("p",{className:"text-xs text-red-600 mt-1 line-clamp-2",children:M.commentaire}),a.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Origine: ",M.origine]})]}),M.priorite&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx(_n,{className:"h-3 w-3 text-red-600"})})]})},M.id))})]})})]})]})]})]}),a.jsx(ki,{isOpen:m,onClose:()=>p(!1),onLogout:()=>{},onOpenHelp:()=>{p(!1),x(!0)}}),a.jsx(Vg,{isOpen:b,onClose:()=>x(!1)}),a.jsx(Qg,{isOpen:k,onClose:()=>{C(!1),S(""),g(null)},imageUrl:N,imageTitle:`Photo de rfrence - ${(U==null?void 0:U.nom)||"Pice"}`}),I&&$&&a.jsx(pI,{isOpen:I,onClose:Ze,referencePhotos:$.photo_references||($.photo_reference?[$.photo_reference]:[]),onPhotosCaptured:nn,pieceName:(U==null?void 0:U.nom)||"Pice",pieceId:(U==null?void 0:U.id)||"",flowType:"checkout"})]})};class QF{async generateEnrichedAPIFormat(){var t,n,r,o,s;try{console.log(" Gnration du format API enrichi..."),console.log(" tape 1/6: Collecte des donnes de base...");const i=await this.collectDebugData();if(console.log(" Donnes de base collectes:",{hasParcoursInfo:!!i.parcoursInfo,parcoursId:(t=i.parcoursInfo)==null?void 0:t.id,parcoursName:(n=i.parcoursInfo)==null?void 0:n.name,roomsCount:i.rooms.length,checkId:i.checkId,userType:i.userType}),!i.parcoursInfo)return console.error(" ERREUR: Pas de donnes de parcours disponibles pour le format API"),console.error(" baseData:",i),null;console.log(" tape 2/6: Import des services...");const{checkSessionManager:l}=await Wt(async()=>{const{checkSessionManager:v}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:v}},void 0),{parcoursManager:c}=await Wt(async()=>{const{parcoursManager:v}=await Promise.resolve().then(()=>Ey);return{parcoursManager:v}},void 0),u=c.getCurrentParcours(),d=u==null?void 0:u.rawData;console.log(" Services imports, parcours actuel:",!!u);const h=i.userType==="CLIENT"?"checkin":"checkout";console.log(" FlowType dtermin:",h),console.log(" tape 3/6: Rcupration des interactions...");let m=null;if(i.checkId)try{const v=await l.getCheckSession(i.checkId);m=(r=v==null?void 0:v.progress)==null?void 0:r.interactions,console.log(" Interactions rcupres:",!!m)}catch(v){console.warn(" Impossible de rcuprer les interactions:",v)}else console.warn(" Pas de checkId disponible");console.log(" tape 4/6: Collecte des interactions utilisateur...");const p=await this.collectUserInteractions(i.checkId);console.log(" Interactions collectes:",{hasButtons:!!p.buttons,hasPhotos:!!p.uploadedPhotos,hasCheckboxes:!!p.checkboxes,hasCheckSession:!!p.checkSession}),console.log(" tape 5/6: Collecte des signalements...");const b=await this.collectSignalements();console.log(" Signalements collects:",b.length),console.log(" tape 5.5/6: Collecte des questions de sortie...");const x=await this.collectExitQuestions(i.checkId);console.log(" Questions de sortie collectes:",x.length),console.log(" tape 6/6: Construction des donnes utilisateur...");const w=this.buildUserCriticalData(p,b,i.appState.uploadedImages||{},(o=i.progress)==null?void 0:o.checkinData,(s=i.progress)==null?void 0:s.checkoutData);console.log(" Donnes utilisateur construites:",{boutons:w.boutons.length,photos:w.photos.length,checkboxes:w.checkboxes.length,signalements:w.signalements.length,commentaires:w.commentaires.length,exitQuestions:x.length});const g={parcourID:i.parcoursInfo.id,parcoursName:i.parcoursInfo.name,parcoursType:i.parcoursInfo.type,logementID:i.parcoursInfo.id,logementName:i.parcoursInfo.logement,takePicture:i.parcoursInfo.takePicture,session:{checkId:i.checkId,userId:i.userId,userType:i.userType,timestamp:i.timestamp,flowType:h},pieces:i.rooms.map((v,y)=>({pieceID:v.id,nom:v.nom,ordre:y+1})),stats:this.calculateStats(w,i,x.length),...this.buildCheckinCheckoutData(i,w),exitQuestions:x.length>0?x:void 0};return console.log(" Format API STRUCTUR gnr (CHECKIN/CHECKOUT):",{pieces:g.pieces.length,photosCheckin:g.stats.photosCheckin,photosCheckout:g.stats.photosCheckout,hasCheckin:!!g.checkin,hasCheckout:!!g.checkout,signalements:g.stats.signalementsTotal,exitQuestions:x.length}),g}catch(i){return console.error(" ERREUR CRITIQUE gnration format API enrichi:",i),console.error(" Stack trace:",i instanceof Error?i.stack:"N/A"),null}}enrichRoomData(t,n,r,o,s,i,l,c){const d=((n==null?void 0:n.piece)||[]).find(w=>w.pieceID===t.id),h=[];r!=null&&r.photosTaken&&Object.entries(r.photosTaken).forEach(([w,g])=>{const v=Array.isArray(g)?g[0]:g;(v==null?void 0:v.pieceId)===t.id&&h.push({photoId:w,etapeType:this.determinePhotoType(v,s),url:v.url||o[w]||"",timestamp:v.timestamp||new Date().toISOString(),metadata:{...v.metadata,source:"checkid"}})}),l!=null&&l.takenPhotos&&Object.entries(l.takenPhotos).forEach(([w,g])=>{(Array.isArray(g)?g:[g]).forEach((y,k)=>{((y==null?void 0:y.pieceId)===t.id||w.includes(t.id))&&h.push({photoId:`checkin_${w}_${k}`,etapeType:"checkin",url:y.url||o[w]||"",timestamp:y.timestamp||new Date().toISOString(),metadata:{...y,source:"checkin_cache"}})})}),c!=null&&c.takenPhotos&&Object.entries(c.takenPhotos).forEach(([w,g])=>{(Array.isArray(g)?g:[g]).forEach((y,k)=>{((y==null?void 0:y.pieceId)===t.id||w.includes(t.id))&&h.push({photoId:`checkout_${w}_${k}`,etapeType:"checkout",url:y.url||o[w]||"",timestamp:y.timestamp||new Date().toISOString(),metadata:{...y,source:"checkout_cache"}})})}),Object.entries(o).forEach(([w,g])=>{h.some(v=>v.url===g)||h.push({photoId:w,etapeType:s==="CLIENT"?"checkin":"checkout",url:g,timestamp:new Date().toISOString(),metadata:{source:"uploaded_images"}})}),console.log(` Photos collectes pour ${t.nom}:`,{total:h.length,checkin:h.filter(w=>w.etapeType==="checkin").length,checkout:h.filter(w=>w.etapeType==="checkout").length,task:h.filter(w=>w.etapeType==="task").length});const m=[];d!=null&&d.travelerNote&&m.push({type:"traveler",contenu:d.travelerNote,timestamp:new Date().toISOString(),userId:i}),d!=null&&d.cleanerNote&&m.push({type:"cleaner",contenu:d.cleanerNote,timestamp:new Date().toISOString(),userId:i});const b=((d==null?void 0:d.etapes)||[]).map(w=>{var k;const v=((k=t.tasks.find(C=>{var N;return C.id.includes((N=w.todoTitle)==null?void 0:N.toLowerCase().replace(/\s+/g,"-"))}))==null?void 0:k.completed)||!1,y=h.find(C=>{const N=C.metadata,S=N==null?void 0:N.taskId,I=w.todoTitle;return S==null?void 0:S.includes(I==null?void 0:I.toLowerCase().replace(/\s+/g,"-"))});return{...w,executed:v||!!y,executedAt:(y==null?void 0:y.timestamp)||void 0,photoTaken:y?{url:y.url,timestamp:y.timestamp}:void 0,userResponse:v?"Complt":void 0}}),x=[];return r!=null&&r.signalements&&Object.entries(r.signalements).forEach(([w,g])=>{const v=g;v.pieceId===t.id&&x.push({id:w,titre:v.titre||"Signalement",description:v.description||"",priorite:v.priorite||!1,status:v.status||"A_TRAITER",createdAt:v.createdAt||new Date().toISOString(),photos:v.photos||[]})}),{logementID:(d==null?void 0:d.logementID)||t.id,pieceID:t.id,nom:t.nom,travelerNote:d==null?void 0:d.travelerNote,cleanerNote:d==null?void 0:d.cleanerNote,infoEntrance:d==null?void 0:d.infoEntrance,photosPrises:h,commentairesRepondus:m,etapes:b,signalements:x}}calculateStats(t,n,r=0){var i,l;const o=t.photos.filter(c=>c.type==="etat_entree").length,s=t.photos.filter(c=>c.type==="etat_sortie").length;return{totalPieces:n.rooms.length,photosCheckin:o,photosCheckout:s,validationsCheckin:(i=n.progress)!=null&&i.checkinData?Object.keys(n.progress.checkinData.completedTasks||{}).length:0,validationsCheckout:(l=n.progress)!=null&&l.checkoutData?Object.keys(n.progress.checkoutData.completedTasks||{}).length:0,signalementsTotal:t.signalements.length,exitQuestionsTotal:r}}buildCheckinCheckoutData(t,n){var o,s;const r={};return(o=t.progress)!=null&&o.checkinData&&(r.checkin={completed:t.progress.checkinData.isCompleted,completedAt:t.progress.checkinData.isCompleted?new Date().toISOString():void 0,pieceResults:t.rooms.map(i=>this.buildCheckinPieceResult(i,t.progress.checkinData,n))}),(s=t.progress)!=null&&s.checkoutData&&(r.checkout={completed:t.progress.checkoutData.isCompleted,completedAt:t.progress.checkoutData.isCompleted?new Date().toISOString():void 0,pieceResults:t.rooms.map(i=>this.buildCheckoutPieceResult(i,t.progress.checkoutData,n))}),r}buildPieceEtapes(t,n,r){const o=[];return console.log(` Construction des tapes pour pice ${t} (${r}):`,{boutons:n.boutons.length,checkboxes:n.checkboxes.length,photos:n.photos.length}),n.boutons.filter(s=>s.pieceId===t).forEach(s=>{o.push({etape_id:s.taskId||s.buttonId,type:"button_click",etape_type:r,status:"completed",timestamp:s.timestamp,action:s.actionType||"complete",is_todo:!1,todo_title:"",comment:"",photos_attached:[],metadata:s.metadata||{}})}),n.checkboxes.filter(s=>s.pieceId===t).forEach(s=>{o.push({etape_id:s.taskId||s.etapeId,type:"button_click",etape_type:r,status:s.isChecked?"completed":"pending",timestamp:s.checkedAt||s.timestamp||new Date().toISOString(),is_todo:!1,todo_title:"",action:"complete",comment:"",photos_attached:[]})}),n.photos.filter(s=>s.pieceId===t).forEach(s=>{const i=s.url||"",l=i.startsWith("http://")||i.startsWith("https://"),c=i.startsWith("data:image");o.push({etape_id:s.taskId||s.photoId,type:"photo_taken",etape_type:r,status:"completed",timestamp:s.timestamp,photo_id:s.photoId,photo_url:l?i:"",photo_base64:c?i:"",validated:s.validated||!1,retake_count:s.retakeCount||0,is_todo:!1,todo_title:""})}),o.sort((s,i)=>{const l=new Date(s.timestamp).getTime(),c=new Date(i.timestamp).getTime();return l-c}),console.log(` ${o.length} tapes construites pour pice ${t}:`,{buttonClicks:o.filter(s=>s.type==="button_click").length,checkboxes:o.filter(s=>s.type==="checkbox").length,photos:o.filter(s=>s.type==="photo_taken").length}),o}buildCheckinPieceResult(t,n,r){var u,d;const o=t.id,s=(u=r.etatInitial)==null?void 0:u[o],i=r.photos.filter(h=>h.pieceId===o&&h.type==="etat_entree");s!=null&&s.photoUrls&&s.photoUrls.forEach((h,m)=>{i.push({photoId:`etat_initial_${o}_${m}`,url:h,timestamp:s.timestamp,type:"etat_general",validated:!0,metadata:{source:"etat_initial"}})});const l=r.boutons.filter(h=>h.pieceId===o);console.log(` Filtrage signalements pour pice ${o}:`,{totalSignalements:r.signalements.length,signalements:r.signalements.map(h=>({id:h.id,roomId:h.roomId,pieceId:h.pieceId,piece:h.piece,titre:h.titre}))});const c=r.signalements.filter(h=>{const m=h.pieceId===o||h.roomId===o;return console.log(` Signalement ${h.id}: pieceId=${h.pieceId}, roomId=${h.roomId}, match=${m}`),m});return console.log(` Checkin ${o}:`,{etatInitial:(s==null?void 0:s.etat)||"non dfini",hasComment:!!(s!=null&&s.comment),photosEtatInitial:(s==null?void 0:s.photosCount)||0,photosTotal:i.length,signalementsCount:c.length}),{pieceID:o,etapes:this.buildPieceEtapes(o,r,"checkin"),validations:{etatGeneral:s?s.etat==="correct":l.some(h=>h.userResponse==="OK"),propreteOK:s?s.etat==="correct":!c.some(h=>h.type==="issue"),equipementsOK:!0,dommagesDetectes:s?s.etat==="deplorable":c.some(h=>h.type==="damage")},photos:i.map(h=>({photoId:h.photoId,url:h.url,timestamp:h.timestamp,type:h.type==="etat_entree"?"etat_general":"detail_probleme",validated:h.validated})),checks:r.checkboxes.filter(h=>h.pieceId===o).map(h=>({checkId:h.checkboxId,taskName:h.taskId,checked:h.isChecked,checkedAt:h.checkedAt,notes:h.notes})),signalements:c.map(h=>({signalementId:h.signalementId,titre:h.titre,description:h.description,severity:h.severity,photos:h.photos,createdAt:h.createdAt})),notes:(s==null?void 0:s.comment)||((d=r.commentaires.find(h=>h.pieceId===o))==null?void 0:d.contenu),completedAt:(s==null?void 0:s.timestamp)||new Date().toISOString()}}buildCheckoutPieceResult(t,n,r){var i;const o=t.id,s=r.photos.filter(l=>l.pieceId===o&&l.type==="etat_sortie");return{pieceID:o,etapes:this.buildPieceEtapes(o,r,"checkout"),validations:{menageEffectue:n.completedTasks[`menage_${o}`]||!1,etatFinal:!0,equipementsVerifies:n.completedTasks[`equipement_${o}`]||!1,problemesResolus:!r.signalements.some(l=>l.pieceId===o)},photos:s.map(l=>({photoId:l.photoId,url:l.url,timestamp:l.timestamp,type:"etat_final",validated:l.validated})),tasks:Object.entries(n.completedTasks||{}).filter(([l])=>l.includes(o)).map(([l,c])=>({taskId:l,taskName:l,completed:c,completedAt:c?new Date().toISOString():void 0,verified:c,photos:s.map(u=>u.url)})),signalements:r.signalements.filter(l=>l.pieceId===o).map(l=>({signalementId:l.signalementId,titre:l.titre,action:l.status==="resolved"?"resolu":"nouveau",photos:l.photos,timestamp:l.createdAt})),notes:(i=r.commentaires.find(l=>l.pieceId===o))==null?void 0:i.contenu,completedAt:n.isCompleted?new Date().toISOString():void 0}}async collectUserInteractions(t){var n,r,o,s,i,l,c,u,d,h;try{console.log(" Collecte des VRAIES interactions utilisateur...");const m={},p={},b=Object.keys(localStorage);if(console.log(" DIAGNOSTIC localStorage:",{totalKeys:b.length,allKeys:b,uploadedImageKeys:b.filter(x=>x.startsWith("uploaded_image_"))}),Object.keys(localStorage).forEach(x=>{if(x.startsWith("uploaded_image_"))try{const w=JSON.parse(localStorage.getItem(x)||"{}"),g=x.replace("uploaded_image_","");p[g]={...w,id:g,source:"uploaded_image"},console.log(" Photo trouve:",{id:g,key:x,hasUrl:!!w.url,hasUploadedUrl:!!w.uploadedUrl,pieceId:w.pieceId,fullData:w})}catch(w){console.warn(" Erreur parsing photo:",x,w)}}),console.log(" RSUM photos collectes:",{totalFound:Object.keys(p).length,photoIds:Object.keys(p),firstPhotoSample:Object.values(p)[0]}),m.uploadedPhotos=p,t)try{const{checkSessionManager:x}=await Wt(async()=>{const{checkSessionManager:g}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:g}},void 0),w=await x.getCheckSession(t);if(w!=null&&w.progress){m.checkSession=w.progress,console.log(" DIAGNOSTIC checkSession:",{hasProgress:!!w.progress,hasInteractions:!!w.progress.interactions,hasButtonClicks:!!((n=w.progress.interactions)!=null&&n.buttonClicks),buttonClicksCount:Object.keys(((r=w.progress.interactions)==null?void 0:r.buttonClicks)||{}).length,hasCheckboxStates:!!((o=w.progress.interactions)!=null&&o.checkboxStates),checkboxStatesCount:Object.keys(((s=w.progress.interactions)==null?void 0:s.checkboxStates)||{}).length,hasTasksCompleted:!!((i=w.progress.interactions)!=null&&i.tasksCompleted),hasNotes:!!((l=w.progress.interactions)!=null&&l.notes),fullSession:w.progress}),(c=w.progress.interactions)!=null&&c.buttonClicks&&(m.buttons=w.progress.interactions.buttonClicks,console.log(" ButtonClicks collects depuis IndexedDB:",Object.keys(m.buttons).length)),(u=w.progress.interactions)!=null&&u.checkboxStates&&(m.checkboxes=w.progress.interactions.checkboxStates,console.log(" CheckboxStates collects depuis IndexedDB:",Object.keys(m.checkboxes).length));const g={};(d=w.progress.interactions)!=null&&d.buttonClicks&&Object.entries(w.progress.interactions.buttonClicks).forEach(([v,y])=>{var k,C,N,S,I,P,E,_,j,L;if(v.includes("etat-initial-")){const D=v.match(/etat-initial-(.+)-(correct|deplorable)/);if(D){const[,z,A]=D;g[z]||(g[z]={}),g[z]={pieceId:z,etat:A,timestamp:Array.isArray(y)?(k=y[0])==null?void 0:k.timestamp:y==null?void 0:y.timestamp,comment:Array.isArray(y)?(N=(C=y[0])==null?void 0:C.metadata)==null?void 0:N.comment:(S=y==null?void 0:y.metadata)==null?void 0:S.comment,photosCount:Array.isArray(y)?(P=(I=y[0])==null?void 0:I.metadata)==null?void 0:P.photosCount:(E=y==null?void 0:y.metadata)==null?void 0:E.photosCount,photoUrls:Array.isArray(y)?(j=(_=y[0])==null?void 0:_.metadata)==null?void 0:j.photoUrls:(L=y==null?void 0:y.metadata)==null?void 0:L.photoUrls},console.log(" tat initial trouv:",{pieceId:z,etat:A,hasComment:!!g[z].comment,photosCount:g[z].photosCount||0})}}}),m.etatInitial=g,console.log(" Session trouve:",{hasInteractions:!!w.progress.interactions,tasksCompleted:Object.keys(((h=w.progress.interactions)==null?void 0:h.tasksCompleted)||{}).length,etatsInitiaux:Object.keys(g).length})}}catch(x){console.warn(" Impossible de rcuprer session:",x)}try{Object.keys(localStorage).forEach(x=>{if(x.includes("signalement")||x.includes("problem"))try{const w=JSON.parse(localStorage.getItem(x)||"{}");m[x]=w}catch{console.warn("Impossible de parser signalement:",x)}})}catch(x){console.warn("Erreur signalements:",x)}return console.log(" VRAIES interactions collectes:",{photosUploadees:Object.keys(p).length,hasCheckSession:!!m.checkSession,totalKeys:Object.keys(m).length}),m}catch(m){return console.warn(" Erreur collecte interactions:",m),{}}}async collectSignalements(){var t,n;try{const r=[],{checkSessionManager:o}=await Wt(async()=>{const{checkSessionManager:c}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:c}},void 0),s=o.getStoredSessions();console.log(" collectSignalements: Sessions trouves:",s.length);const i=s.find(c=>c.status==="active"||!c.isFlowCompleted);if(console.log(" collectSignalements: Session active:",i?i.checkId:"AUCUNE"),(n=(t=i==null?void 0:i.progress)==null?void 0:t.interactions)!=null&&n.signalements){const c=i.progress.interactions.signalements;console.log(" Signalements depuis session CheckID:",Object.keys(c).length),console.log(" Signalements bruts:",c),Object.entries(c).forEach(([u,d])=>{var m,p,b,x,w,g,v;const h={id:d.signalementId||u,roomId:d.pieceId||d.roomId,piece:((m=d.metadata)==null?void 0:m.piece)||d.pieceName||"",titre:d.title||d.titre||"",commentaire:d.description||d.commentaire||"",imgUrl:((p=d.photos)==null?void 0:p[0])||((b=d.metadata)==null?void 0:b.imgUrl),imgBase64:(x=d.metadata)==null?void 0:x.imgBase64,flowType:((w=d.metadata)==null?void 0:w.flowType)||"checkin",origine:((g=d.metadata)==null?void 0:g.origine)||"CLIENT",status:d.status==="resolved"?"RESOLU":"A_TRAITER",priorite:d.severity==="high"||d.severity==="critical",created_at:d.createdAt||new Date().toISOString(),updated_at:d.updatedAt||new Date().toISOString(),rapportRef:((v=d.metadata)==null?void 0:v.rapportRef)||d.rapportRef};console.log(" Signalement converti:",h),r.push(h)})}else console.warn(" collectSignalements: Pas de signalements dans la session active");const l=localStorage.getItem("signalements");if(l){const c=JSON.parse(l);console.log(" Signalements depuis localStorage:",c.length),Array.isArray(c)&&r.push(...c)}return console.log(" Total signalements collects:",r.length,r),r}catch(r){return console.error(" Erreur collecte signalements:",r),[]}}async collectExitQuestions(t){var n,r;try{console.log(" collectExitQuestions: Dbut collecte...");const o=[];if(!t)return console.warn(" collectExitQuestions: Pas de checkId disponible"),[];const{checkSessionManager:s}=await Wt(async()=>{const{checkSessionManager:c}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:c}},void 0),i=await s.getCheckSession(t);if(!((r=(n=i==null?void 0:i.progress)==null?void 0:n.interactions)!=null&&r.exitQuestions))return console.log(" collectExitQuestions: Pas de questions de sortie dans la session"),[];const l=i.progress.interactions.exitQuestions;return console.log(" Questions de sortie trouves:",Object.keys(l).length),Object.entries(l).forEach(([c,u])=>{o.push({questionId:u.questionID||c,questionContent:u.questionContent||"",questionType:u.questionType||"text",checked:u.checked!==void 0?u.checked:void 0,textResponse:u.textResponse||void 0,hasImage:u.hasImage||!1,imageBase64:u.imageBase64||void 0,imageUrl:u.imageUrl||void 0,imagePhotoId:u.imagePhotoId||void 0,timestamp:u.timestamp||new Date().toISOString(),updatedAt:u.updatedAt||void 0})}),console.log(" collectExitQuestions: Questions collectes:",o.length),o}catch(o){return console.error(" Erreur collecte exit questions:",o),[]}}buildUserCriticalData(t,n,r,o,s){var p;const i=[];t.buttons&&Object.values(t.buttons).forEach(b=>{i.push({buttonId:b.buttonId||"unknown",pieceId:b.pieceId||"unknown",taskId:b.taskId,actionType:b.actionType||"validate",timestamp:b.timestamp||new Date().toISOString(),userResponse:b.validated?"OK":"MAUVAIS"})});const l=[];t.uploadedPhotos&&Object.entries(t.uploadedPhotos).forEach(([b,x])=>{l.push({photoId:b,pieceId:x.pieceId||"unknown",taskId:x.taskId||"photo_upload",url:x.url||"",timestamp:x.timestamp||x.uploadedAt||new Date().toISOString(),type:x.userType==="CLIENT"?"etat_entree":"etat_sortie",validated:!!x.url,retakeCount:0,metadata:{source:"uploaded_photos",originalId:b,userType:x.userType}}),console.log(" Photo ajoute:",{id:b,piece:x.pieceId,hasUrl:!!x.url,type:x.userType==="CLIENT"?"etat_entree":"etat_sortie"})}),o!=null&&o.takenPhotos&&Object.entries(o.takenPhotos).forEach(([b,x])=>{(Array.isArray(x)?x:[x]).forEach((g,v)=>{l.push({photoId:`checkin_${b}_${v}`,pieceId:b,taskId:"checkin_etat",url:g.url||"",timestamp:g.timestamp||new Date().toISOString(),type:"etat_entree",validated:!0,retakeCount:0,metadata:{source:"checkin_data"}})})}),Object.entries(r).forEach(([b,x])=>{l.some(w=>w.photoId===b)||l.push({photoId:b,pieceId:"unknown",taskId:"fallback_upload",url:x,timestamp:new Date().toISOString(),type:"etat_entree",validated:!0,retakeCount:0,metadata:{source:"fallback_uploaded_images"}})});const c=[];t.checkboxes&&Object.values(t.checkboxes).forEach(b=>{c.push({checkboxId:b.checkboxId||"unknown",taskId:b.taskId||"unknown",pieceId:b.pieceId||"unknown",isChecked:b.isChecked||!1,checkedAt:b.checkedAt,notes:b.notes,userValidation:b.isChecked?"OK":"NON_VERIFIE"})});const u=n.map(b=>({signalementId:b.id||"unknown",pieceId:b.roomId||b.piece||"unknown",type:"issue",severity:b.priorite?"high":"medium",titre:b.titre||"",description:b.commentaire||b.description||"",photos:b.imgUrl?[b.imgUrl]:[],createdAt:b.created_at||new Date().toISOString(),status:b.status==="RESOLU"?"resolved":"open",userComment:b.commentaire||b.description})),d=[];if((p=t.checkSession)!=null&&p.interactions){const b=t.checkSession.interactions;b.notes&&Object.entries(b.notes).forEach(([x,w])=>{d.push({id:`comment_${x}`,pieceId:x,type:"note_generale",contenu:typeof w=="string"?w:w.content||w.text||"",timestamp:w.timestamp||new Date().toISOString(),source:"check_session"})}),b.tasksCompleted&&Object.entries(b.tasksCompleted).forEach(([x,w])=>{typeof w=="object"&&w.comment&&d.push({id:`task_comment_${x}`,pieceId:w.pieceId||"unknown",taskId:x,type:"observation",contenu:w.comment,timestamp:w.timestamp||new Date().toISOString(),source:"task_completed"})})}console.log(" Commentaires collects:",d.length);const h=[];let m={};return t.etatInitial&&(m=t.etatInitial),console.log(" RSUM donnes critiques construites:",{boutons:i.length,photos:l.length,checkboxes:c.length,signalements:u.length,commentaires:d.length,etatsInitiaux:Object.keys(m).length,photosDetails:l.map(b=>({id:b.photoId,piece:b.pieceId,url:!!b.url}))}),{boutons:i,photos:l,checkboxes:c,signalements:u,commentaires:d,etatsPieces:h,etatInitial:m}}buildRoomUserData(t,n,r,o){const s=t.id,i=r.photos.filter(b=>b.pieceId===s).length,l=r.checkboxes.filter(b=>b.pieceId===s).length,c=r.signalements.filter(b=>b.pieceId===s).length;let u="NON_VERIFIE";const d=r.boutons.filter(b=>b.pieceId===s&&b.actionType==="validate");d.length>0&&(u=d.some(b=>b.userResponse==="MAUVAIS")?"PROBLEME":"OK");const m=((n==null?void 0:n.piece)||[]).find(b=>b.pieceID===s),p=((m==null?void 0:m.etapes)||[]).map(b=>{var x,w;return{pieceID:b.pieceID,todoTitle:b.todoTitle,isTodo:b.isTodo,validatedByUser:d.length>0,userResponse:u==="OK"?"OK":u==="PROBLEME"?"PROBLEME":"NON_FAIT",userNotes:(x=r.commentaires.find(g=>g.pieceId===s))==null?void 0:x.contenu,userPhotos:r.photos.filter(g=>g.pieceId===s).map(g=>g.url),validatedAt:(w=d[0])==null?void 0:w.timestamp}});return{logementID:(n==null?void 0:n.logementID)||"unknown",pieceID:s,nom:t.nom,etatUtilisateur:u,photosUtilisateur:i,checkboxesUtilisateur:l,signalementsUtilisateur:c,etapes:p}}determinePhotoType(t,n){const r=t.metadata;return r!=null&&r.flowType?r.flowType:t.taskId?"task":n==="CLIENT"?"checkin":"checkout"}getCheckIdFromUrl(){try{return new URLSearchParams(window.location.search).get("checkid")}catch(t){return console.warn(" Erreur lecture checkId URL:",t),null}}getParcoursIdFromUrl(){try{return new URLSearchParams(window.location.search).get("parcours")}catch(t){return console.warn(" Erreur lecture parcours URL:",t),null}}async simulateCheckinData(){try{if(console.log(" === SIMULATION DE DONNES CHECKIN ==="),!(this.getCheckIdFromUrl()||localStorage.getItem("activeCheckId"))){console.warn(" Aucun CheckID pour simulation");return}const{interactionTracker:n}=await Wt(async()=>{const{interactionTracker:r}=await Promise.resolve().then(()=>Tl);return{interactionTracker:r}},void 0);await n.trackButtonClick({buttonId:"etat-initial-chambre-deplorable",pieceId:"chambre",taskId:"etat-initial",actionType:"validate",timestamp:new Date().toISOString(),metadata:{page:"etat-initial",comment:"Simulation: Problme dtect dans la chambre",photosCount:1,photoUrls:["https://example.com/photo1.jpg"]}}),await n.trackPhotoTaken({photoId:"sim_photo_"+Date.now(),taskId:"etat-general-chambre",pieceId:"chambre",photoData:"data:image/jpeg;base64,simulation...",timestamp:new Date().toISOString(),validated:!0,retakeCount:0,metadata:{simulation:!0,type:"etat_entree"}}),await n.trackSignalement({signalementId:"sim_sig_"+Date.now(),pieceId:"chambre",type:"damage",severity:"medium",title:"Simulation: Tache sur moquette",description:"Tache importante dtecte lors du checkin",photos:[],createdAt:new Date().toISOString(),status:"open",metadata:{simulation:!0}}),console.log(" Donnes de simulation cres !"),console.log(" Maintenant vous pouvez tester les webhooks avec des donnes")}catch(t){console.error(" Erreur simulation:",t)}}async displayStoredCheckinData(){try{console.log(" === DIAGNOSTIC COMPLET DES DONNES STOCKES (REPRISE) ===");const t=JSON.parse(localStorage.getItem("userInfo")||"{}"),n=this.getParcoursIdFromUrl();if(console.log(" Utilisateur:",t),console.log(" Parcours ID:",n),!t.phone||!n){console.warn(" Donnes utilisateur ou parcours manquantes"),console.log(" userData:",t),console.log(" parcoursId:",n);return}const{checkSessionManager:r}=await Wt(async()=>{const{checkSessionManager:c}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:c}},void 0),o=await r.checkExistingSessions(t.phone,n);console.log(" === VRIFICATION SESSIONS EXISTANTES ===",{hasExistingSession:o.hasExistingSession,hasCompletedSession:o.hasCompletedSession,activeSession:!!o.session,completedSession:!!o.completedSession});const s=o.session||o.completedSession;if(!s){console.warn(" Aucune session trouve (ni active ni complte)"),console.log(" Crez d'abord un parcours en passant par le checkin/checkout");return}console.log(" === SESSION COMPLTE ===",{checkId:s.checkId,userId:s.userId,parcoursId:s.parcoursId,flowType:s.flowType,status:s.status,isCompleted:s.isFlowCompleted,createdAt:s.createdAt,lastActiveAt:s.lastActiveAt,completedAt:s.completedAt}),console.log(" === INTERACTIONS GRANULAIRES (REPRISE) ===");const i=s.progress.interactions;console.log(" CLICS BOUTONS:",{total:Object.keys(i.buttonClicks||{}).length,dtails:i.buttonClicks}),console.log(" PHOTOS PRISES:",{total:Object.keys(i.photosTaken||{}).length,dtails:i.photosTaken}),console.log(" CHECKBOXES:",{total:Object.keys(i.checkboxStates||{}).length,dtails:i.checkboxStates}),console.log(" SIGNALEMENTS:",{total:Object.keys(i.signalements||{}).length,dtails:i.signalements}),console.log(" TATS PICES:",{total:Object.keys(i.pieceStates||{}).length,dtails:i.pieceStates}),console.log(" === STATISTIQUES ===",s.progress.statistics),console.log(" === NAVIGATION ===",{piceActuelle:s.progress.currentPieceId,indexTche:s.progress.currentTaskIndex,navigation:s.progress.interactions.navigation}),console.log(" === LOCALSTORAGE IMAGES (VRIFICATION) ===");const l=Object.keys(localStorage).filter(c=>c.startsWith("uploaded_image_"));console.log(" Images uploades:",{total:l.length,cls:l}),l.slice(0,3).forEach(c=>{var u;try{const d=JSON.parse(localStorage.getItem(c)||"{}");console.log(` ${c}:`,{id:d.id,uploadedUrl:((u=d.uploadedUrl)==null?void 0:u.substring(0,50))+"...",pieceId:d.pieceId,hasDataUrl:!!d.dataUrl,uploadedAt:d.uploadedAt})}catch(d){console.warn(` Erreur parsing ${c}:`,d)}}),console.log(" === DONNES LEGACY ==="),console.log("completedTasks:",s.progress.completedTasks),console.log("completedSteps:",s.progress.completedSteps),console.log("takenPhotos:",s.progress.takenPhotos),console.log(" === FIN DIAGNOSTIC (REPRISE) ==="),console.log(" Cette session peut tre utilise pour les webhooks !")}catch(t){console.error(" Erreur diagnostic donnes:",t)}}async sendUnifiedWebhook(t){var n,r,o,s,i,l,c;try{console.log(" Collecte des donnes COMPLTES (CHECKIN + CHECKOUT) pour webhook unifi..."),console.log(" Utilisation de la logique de transformation de database-admin.html");const{generateUnifiedWebhookData:u}=await Wt(async()=>{const{generateUnifiedWebhookData:y}=await import("./webhookDataGenerator-ClGh914C.js");return{generateUnifiedWebhookData:y}},[]),{checkSessionManager:d}=await Wt(async()=>{const{checkSessionManager:y}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:y}},void 0);let m=new URLSearchParams(window.location.search).get("checkid");if(m||(m=localStorage.getItem("activeCheckId")),!m)return console.error(" Aucun checkID actif trouv"),{success:!1,timestamp:new Date().toISOString(),error:"Aucun checkID actif trouv"};const p=await d.getCheckSession(m);if(!p)return console.error(" Session introuvable pour checkID:",m),{success:!1,timestamp:new Date().toISOString(),error:"Session introuvable"};const b=await u(p,m);console.log(" DONNES COMPLTES collectes:",{checkID:b.checkID,parcours_id:b.parcours_id,totalPieces:b.stats.total_pieces,totalPhotos:b.stats.total_photos,hasCheckin:!!b.checkin,checkinPieces:((n=b.checkin)==null?void 0:n.pieces.length)||0,signalements:b.stats.total_signalements,exitQuestions:b.stats.total_exit_questions}),console.log(" ========== PAYLOAD JSON COMPLET ==========");const x=y=>{if(y==null)return y;if(typeof y=="string")return y.startsWith("data:image")||y.length>100&&/^[A-Za-z0-9+/=]+$/.test(y)?y.substring(0,50)+"... [TRONQU - "+y.length+" caractres]":y;if(Array.isArray(y))return y.map(k=>x(k));if(typeof y=="object"){const k={};for(const C in y)C==="photo_base64"||C==="img_base64"||C==="photoBase64"||C==="dataUrl"?y[C]&&typeof y[C]=="string"?k[C]=y[C].substring(0,50)+"... [BASE64 TRONQU - "+y[C].length+" caractres]":k[C]=y[C]:k[C]=x(y[C]);return k}return y},w=x(b);console.log(JSON.stringify(w,null,2)),console.log(" ========== FIN PAYLOAD JSON =========="),console.log(" Structure dtaille du payload:",{webhook_version:b.webhook_version,schema:b.schema,checkID:b.checkID,parcours_id:b.parcours_id,agent:b.agent,parcours:b.parcours,checkin_pieces_count:((o=(r=b.checkin)==null?void 0:r.pieces)==null?void 0:o.length)||0,checkin_first_piece:((i=(s=b.checkin)==null?void 0:s.pieces)==null?void 0:i[0])||null,checkout:b.checkout,signalements_count:((l=b.signalements)==null?void 0:l.length)||0,exit_questions_count:((c=b.exit_questions)==null?void 0:c.length)||0,stats:b.stats});const g=t||ot.WEBHOOK_UNIFIED_URL;console.log(" URL webhook UNIFI:",g);const v=await this.sendToWebhookEndpoint(b,g,"UNIFI (CHECKIN + CHECKOUT)");return console.log(" Rsultat webhook UNIFI:",v),v}catch(u){return console.error(" Erreur webhook UNIFI:",u),{success:!1,timestamp:new Date().toISOString(),error:u instanceof Error?u.message:"Erreur inconnue"}}}async sendCheckinWebhook(){var t,n;try{console.log(" Collecte des donnes CHECKIN pour webhook...");const r=await this.collectDebugData(),o=await this.generateCheckinWebhookFormat(r);if(!o)return console.error(" Impossible de gnrer les donnes checkin"),{success:!1,timestamp:new Date().toISOString(),error:"Impossible de gnrer les donnes checkin"};console.log(" DONNES CHECKIN collectes:",{parcourID:o.parcourID,parcoursType:o.parcoursType,checkinCompleted:(t=o.checkin)==null?void 0:t.completed,piecesChecked:((n=o.checkin)==null?void 0:n.pieceResults.length)||0,photosCheckin:o.stats.photosCheckin});const s=await this.sendToCheckinWebhook(o);return console.log(" Rsultat webhook CHECKIN:",s),s}catch(r){return console.error(" Erreur webhook checkin:",r),{success:!1,timestamp:new Date().toISOString(),error:r instanceof Error?r.message:"Erreur inconnue"}}}async sendCheckoutWebhook(){var t,n;try{console.log(" Collecte des donnes CHECKOUT pour webhook...");const r=await this.collectDebugData(),o=await this.generateCheckoutWebhookFormat(r);if(!o)return console.error(" Impossible de gnrer les donnes checkout"),{success:!1,timestamp:new Date().toISOString(),error:"Impossible de gnrer les donnes checkout"};console.log(" DONNES CHECKOUT collectes:",{parcourID:o.parcourID,checkoutCompleted:(t=o.checkout)==null?void 0:t.completed,piecesCompleted:((n=o.checkout)==null?void 0:n.pieceResults.length)||0,photosCheckout:o.stats.photosCheckout});const s=await this.sendToCheckoutWebhook(o);return console.log(" Rsultat webhook CHECKOUT:",s),s}catch(r){return console.error(" Erreur webhook checkout:",r),{success:!1,timestamp:new Date().toISOString(),error:r instanceof Error?r.message:"Erreur inconnue"}}}async sendDebugPayload(){try{console.log(" Collecte des DONNES CRITIQUES pour debug...");const t=await this.collectDebugData(),n=await this.generateEnrichedAPIFormat();if(!n)return console.error(" Impossible de gnrer les donnes enrichies - arrt de l'envoi"),{success:!1,timestamp:new Date().toISOString(),error:"Impossible de gnrer les donnes critiques utilisateur"};console.log(" FORMAT STRUCTUR collect:",{pieces:n.pieces.length,photosCheckin:n.stats.photosCheckin,photosCheckout:n.stats.photosCheckout,hasCheckin:!!n.checkin,hasCheckout:!!n.checkout,signalements:n.stats.signalementsTotal});const r=await this.sendToDebugEndpoint(n);return console.log(" Rsultat envoi DONNES CRITIQUES:",r),r}catch(t){return console.error(" Erreur envoi donnes critiques:",t),{success:!1,timestamp:new Date().toISOString(),error:t instanceof Error?t.message:"Erreur inconnue"}}}async collectDebugData(){var b,x,w,g;console.log(" Dbut collecte des donnes de debug...");const{checkSessionManager:t}=await Wt(async()=>{const{checkSessionManager:v}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:v}},void 0),{parcoursManager:n}=await Wt(async()=>{const{parcoursManager:v}=await Promise.resolve().then(()=>Ey);return{parcoursManager:v}},void 0);let r=null;try{const v=localStorage.getItem("userInfo");r=v?JSON.parse(v):null,console.log(" Utilisateur rcupr:",r)}catch(v){console.warn(" Impossible de rcuprer utilisateur depuis localStorage:",v)}let o=null;try{o=new URLSearchParams(window.location.search).get("parcours"),console.log(" Parcours ID depuis URL:",o)}catch(v){console.warn(" Impossible de rcuprer parcours depuis URL:",v)}let s=null;try{if(s=new URLSearchParams(window.location.search).get("checkid"),s||(s=localStorage.getItem("activeCheckId")),!s&&window.location.pathname.includes("database-admin.html")){const k=t.getStoredSessions().find(C=>C.status==="active"||!C.isFlowCompleted);k&&(s=k.checkId,console.log(" CheckID rcupr depuis session active:",s))}console.log(" CheckID rcupr:",s)}catch(v){console.warn(" Impossible de rcuprer CheckID:",v)}let i=null,l=[];if(s)try{console.log(" Tentative de rcupration du parcours depuis CheckID:",s);const v=await t.getCheckSession(s);if(v!=null&&v.parcoursInfo&&(i=v.parcoursInfo,o=v.parcoursInfo.id,console.log(" Parcours rcupr depuis CheckID:",{id:i.id,name:i.name,type:i.type}),o))try{console.log(" Chargement du parcours depuis IndexedDB:",o);const y=indexedDB.open("parcoursDB",1);await new Promise((k,C)=>{y.onsuccess=async N=>{const S=N.target.result,E=S.transaction(["parcours"],"readonly").objectStore("parcours").get(o);E.onsuccess=()=>{const _=E.result;_!=null&&_.pieces&&(l=_.pieces.map(j=>({id:j.id,nom:j.nom,ordre:j.ordre,tasks:j.etapes||[]})),console.log(" Rooms charges depuis IndexedDB:",l.length)),S.close(),k()},E.onerror=()=>{console.warn(" Erreur lecture IndexedDB"),S.close(),C(E.error)}},y.onerror=()=>{console.warn(" Erreur ouverture IndexedDB"),C(y.error)}})}catch(y){console.warn(" Impossible de charger les rooms depuis IndexedDB:",y);try{await n.loadParcours(o);const k=n.getCurrentParcours();k&&(l=Object.values(k.adaptedData.roomsData).map(C=>C),console.log(" Rooms charges depuis ParcoursManager (fallback):",l.length))}catch(k){console.warn(" Impossible de charger depuis ParcoursManager:",k)}}}catch(v){console.warn(" Impossible de rcuprer parcours depuis CheckID:",v)}if(!i)try{const v=n.getCurrentParcours();if(v)i=v.adaptedData.parcoursInfo,l=Object.values(v.adaptedData.roomsData).map(y=>y),console.log(" Donnes parcours rcupres depuis ParcoursManager:",{parcoursInfo:i,roomsCount:l.length});else if(o){console.log(" Tentative de chargement du parcours:",o),await n.loadParcours(o);const y=n.getCurrentParcours();y&&(i=y.adaptedData.parcoursInfo,l=Object.values(y.adaptedData.roomsData).map(k=>k),console.log(" Parcours charg avec succs:",{parcoursInfo:i,roomsCount:l.length}))}}catch(v){if(console.warn(" Impossible de rcuprer parcours depuis ParcoursManager:",v),o)try{const y=`parcours_${o}`,k=localStorage.getItem(y);if(k){const C=JSON.parse(k);i=C.parcoursInfo,l=C.rooms||[],console.log(" Donnes parcours depuis cache:",{parcoursInfo:i,roomsCount:l.length})}}catch(y){console.warn(" Impossible de rcuprer parcours depuis cache:",y)}}let c=null,u=null,d=null;if(s)try{const v=await t.getCheckSession(s);c=(v==null?void 0:v.progress)||null,console.log(" Progrs rcupr depuis CheckID:",c?"Donnes prsentes":"Aucune donne")}catch(v){console.warn(" Impossible de rcuprer progrs depuis CheckID:",v)}if(o)try{const{parcoursCache:v}=await Wt(async()=>{const{parcoursCache:C}=await Promise.resolve().then(()=>L5);return{parcoursCache:C}},void 0);await v.hasCheckinProgress(o)&&(u=await v.getCheckinProgress(o),console.log(" Donnes CHECKIN rcupres:",{completed:u==null?void 0:u.isFlowCompleted,photosCount:Object.keys((u==null?void 0:u.takenPhotos)||{}).length,tasksCount:Object.keys((u==null?void 0:u.completedTasks)||{}).length})),await v.hasCheckoutProgress(o)&&(d=await v.getCheckoutProgress(o),console.log(" Donnes CHECKOUT rcupres:",{completed:d==null?void 0:d.isFlowCompleted,photosCount:Object.keys((d==null?void 0:d.takenPhotos)||{}).length,tasksCount:Object.keys((d==null?void 0:d.completedTasks)||{}).length}))}catch(v){console.warn(" Impossible de rcuprer progrs depuis parcoursCache:",v)}else console.log(" Pas de CheckID ni parcoursId, pas de progrs rcuprable");const h={};try{Object.keys(localStorage).forEach(v=>{if(v.startsWith("uploaded_image_"))try{const y=JSON.parse(localStorage.getItem(v)||"{}");if(y.uploadedUrl){const k=v.replace("uploaded_image_","");h[k]=y.uploadedUrl}}catch{}}),console.log(" Images uploades rcupres:",Object.keys(h).length)}catch(v){console.warn(" Impossible de rcuprer images uploades:",v)}const m={localStorage:{},sessionStorage:{},indexedDBKeys:[]};try{Object.keys(localStorage).forEach(v=>{if(v.includes("parcours")||v.includes("checkid")||v.includes("uploaded")||v.includes("user"))try{m.localStorage[v]=JSON.parse(localStorage.getItem(v)||"null")}catch{m.localStorage[v]=localStorage.getItem(v)}})}catch{console.warn(" Impossible de rcuprer localStorage")}try{Object.keys(sessionStorage).forEach(v=>{if(v.includes("parcours")||v.includes("checkid"))try{m.sessionStorage[v]=JSON.parse(sessionStorage.getItem(v)||"null")}catch{m.sessionStorage[v]=sessionStorage.getItem(v)}})}catch{console.warn(" Impossible de rcuprer sessionStorage")}const p={checkId:s||void 0,userId:(r==null?void 0:r.phone)||(r==null?void 0:r.id)||"unknown",userType:(r==null?void 0:r.type)||"AGENT",timestamp:new Date().toISOString(),parcoursInfo:i?{id:o||"unknown",name:i.name||"unknown",type:i.type||"unknown",logement:i.logement||"unknown",takePicture:i.takePicture||"unknown"}:null,rooms:l.map(v=>({id:v.id||"unknown",nom:v.nom||"unknown",tasks:(v.tasks||[]).map(y=>({id:y.id||"unknown",label:y.label||"unknown",type:y.type||"unknown",completed:y.completed||!1,description:y.description})),photoReferences:v.photoReferences,cleaningInfo:v.cleaningInfo,roomInfo:v.roomInfo})),progress:c||u||d?{completedTasks:(c==null?void 0:c.completedTasks)||0,totalTasks:(c==null?void 0:c.totalTasks)||0,interactions:c==null?void 0:c.interactions,photosTaken:(b=c==null?void 0:c.interactions)==null?void 0:b.photosTaken,tasksCompleted:(x=c==null?void 0:c.interactions)==null?void 0:x.tasksCompleted,checkinData:u?{isCompleted:u.isFlowCompleted,currentPieceId:u.currentPieceId,completedTasks:u.completedTasks,takenPhotos:u.takenPhotos}:void 0,checkoutData:d?{isCompleted:d.isFlowCompleted,currentPieceId:d.currentPieceId,completedTasks:d.completedTasks,takenPhotos:d.takenPhotos}:void 0}:void 0,appState:{currentUrl:window.location.href,flowState:window.__flowState||null,hasProgress:((c==null?void 0:c.completedTasks)||0)>0||Object.keys(h).length>0,uploadedImages:h},rawData:m};return console.log(" Payload de debug final collect:",{hasUser:!!r,userId:p.userId,userType:p.userType,hasParcoursInfo:!!p.parcoursInfo,parcoursId:(w=p.parcoursInfo)==null?void 0:w.id,parcoursName:(g=p.parcoursInfo)==null?void 0:g.name,roomsCount:p.rooms.length,hasProgress:!!p.progress,checkId:p.checkId,totalKeys:Object.keys(m.localStorage).length,uploadedImagesCount:Object.keys(h).length}),p}async generateCheckinWebhookFormat(t){try{const n=await this.generateEnrichedAPIFormat();return n?{...n,session:{...n.session,flowType:"checkin"},checkout:void 0}:null}catch(n){return console.error(" Erreur gnration format checkin:",n),null}}async generateCheckoutWebhookFormat(t){try{const n=await this.generateEnrichedAPIFormat();return n?{...n,session:{...n.session,flowType:"checkout"},checkin:void 0}:null}catch(n){return console.error(" Erreur gnration format checkout:",n),null}}async sendToUnifiedWebhook(t,n){const r=n||ot.WEBHOOK_UNIFIED_URL;return console.log(" URL webhook UNIFI (envoi final SANS /initialize):",r),this.sendToWebhookEndpoint(t,r,"UNIFI (CHECKIN + CHECKOUT)")}async sendToCheckinWebhook(t){return this.sendToWebhookEndpoint(t,ot.CHECKIN_WEBHOOK_URL,"CHECKIN")}async sendToCheckoutWebhook(t){return this.sendToWebhookEndpoint(t,ot.CHECKOUT_WEBHOOK_URL,"CHECKOUT")}async sendToWebhookEndpoint(t,n,r){var i,l,c,u,d,h,m,p,b,x,w,g,v,y,k,C,N,S,I;const o=new AbortController,s=setTimeout(()=>o.abort(),3e4);try{console.log(` Envoi ${r} vers webhook:`,n);const P="webhook_version"in t;console.log(` Format dtect: ${P?"NOUVEAU (webhookDataGenerator)":"ANCIEN (enriched)"}`),P&&console.log(" Payload NOUVEAU format:",{webhook_version:t.webhook_version,schema:t.schema,checkID:t.checkID,parcours_id:t.parcours_id,totalPieces:((i=t.stats)==null?void 0:i.total_pieces)||0,totalPhotos:((l=t.stats)==null?void 0:l.total_photos)||0,hasCheckin:!!t.checkin,checkinPieces:((u=(c=t.checkin)==null?void 0:c.pieces)==null?void 0:u.length)||0}),console.log(` Contenu ${r}:`,P?{checkID:t.checkID,parcours_id:t.parcours_id,totalPieces:((d=t.stats)==null?void 0:d.total_pieces)||0,totalPhotos:((h=t.stats)==null?void 0:h.total_photos)||0,hasCheckinData:!!t.checkin,hasCheckoutData:!!t.checkout,checkinPieces:((p=(m=t.checkin)==null?void 0:m.pieces)==null?void 0:p.length)||0,checkoutPieces:((x=(b=t.checkout)==null?void 0:b.pieces)==null?void 0:x.length)||0}:{parcourID:t.parcourID,parcoursType:t.parcoursType,totalPieces:((w=t.stats)==null?void 0:w.totalPieces)||0,photosCheckin:((g=t.stats)==null?void 0:g.photosCheckin)||0,photosCheckout:((v=t.stats)==null?void 0:v.photosCheckout)||0,hasCheckinData:!!t.checkin,hasCheckoutData:!!t.checkout,checkinPieces:((k=(y=t.checkin)==null?void 0:y.pieceResults)==null?void 0:k.length)||0,checkoutPieces:((N=(C=t.checkout)==null?void 0:C.pieceResults)==null?void 0:N.length)||0});const E=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),signal:o.signal});if(clearTimeout(s),!E.ok)throw new Error(`HTTP ${E.status}: ${E.statusText}`);const _=await E.json();console.log(` ${r} envoy avec succs !`,_);let j;(I=(S=_==null?void 0:_.response)==null?void 0:S.rapportID)!=null&&I._id&&(j=_.response.rapportID._id,console.log(" Rapport ID rcupr depuis Bubble:",j));const L=P?"unified_v2":"enriched";return{success:!0,debugId:_.debugId||_.id||"unknown",timestamp:new Date().toISOString(),payloadType:L,rapportID:j}}catch(P){return clearTimeout(s),P instanceof Error&&P.name==="AbortError"?(console.error(` Timeout webhook ${r}`),{success:!1,timestamp:new Date().toISOString(),error:`Timeout webhook ${r} (30s)`}):(console.error(` Erreur webhook ${r}:`,P),{success:!1,timestamp:new Date().toISOString(),error:P instanceof Error?P.message:"Erreur inconnue"})}}async sendToDebugEndpoint(t){var o,s;const n=new AbortController,r=setTimeout(()=>n.abort(),3e4);try{console.log(" Envoi FORMAT STRUCTUR (CHECKIN/CHECKOUT) vers endpoint debug:",ot.DEBUG_URL),console.log(" Contenu FORMAT STRUCTUR:",{parcourID:t.parcourID,parcoursType:t.parcoursType,totalPieces:t.stats.totalPieces,photosCheckin:t.stats.photosCheckin,photosCheckout:t.stats.photosCheckout,hasCheckinData:!!t.checkin,hasCheckoutData:!!t.checkout,checkinPieces:((o=t.checkin)==null?void 0:o.pieceResults.length)||0,checkoutPieces:((s=t.checkout)==null?void 0:s.pieceResults.length)||0,signalements:t.stats.signalementsTotal});const i=await fetch(ot.DEBUG_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),signal:n.signal});if(clearTimeout(r),!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const l=await i.json();return console.log(" DONNES CRITIQUES ENRICHIES envoyes avec succs !",l),{success:!0,debugId:l.debugId||l.id||"unknown",timestamp:new Date().toISOString(),payloadType:"enriched"}}catch(i){throw clearTimeout(r),i instanceof Error&&i.name==="AbortError"?new Error("Timeout de debug dpass"):i}}async generatePayloadSummary(t){const n=await this.generateEnrichedAPIFormat(t);return n?this.generateEnrichedSummary(n):"Impossible de gnrer les donnes critiques utilisateur"}generateBasicSummary(t){var r,o;return[` RAPPORT DE DEBUG - ${t.timestamp}`,"",` Utilisateur: ${t.userType} (ID: ${t.userId})`,` CheckID: ${t.checkId||"Non dfini"}`,""," Parcours:",t.parcoursInfo?[`  - ID: ${t.parcoursInfo.id}`,`  - Nom: ${t.parcoursInfo.name}`,`  - Type: ${t.parcoursInfo.type}`,`  - Logement: ${t.parcoursInfo.logement}`,`  - Mode photo: ${t.parcoursInfo.takePicture}`].join(`
`):"  - Aucun parcours dfini","",` Pices: ${t.rooms.length}`,...t.rooms.map(s=>`  - ${s.nom} (${s.tasks.length} tches, ${s.tasks.filter(i=>i.completed).length} compltes)`),""," Progrs:",t.progress?[`  - Tches: ${t.progress.completedTasks}/${t.progress.totalTasks}`,`  - Photos prises: ${Object.keys(t.progress.photosTaken||{}).length}`,t.progress.checkinData?`  -  CHECKIN: ${t.progress.checkinData.isCompleted?"Termin":"En cours"} (${Object.keys(t.progress.checkinData.takenPhotos).length} photos)`:"",t.progress.checkoutData?`  -  CHECKOUT: ${t.progress.checkoutData.isCompleted?"Termin":"En cours"} (${Object.keys(t.progress.checkoutData.takenPhotos).length} photos)`:""].filter(Boolean).join(`
`):"  - Aucun progrs enregistr",""," tat app:",`  - URL: ${t.appState.currentUrl}`,`  - A du progrs: ${t.appState.hasProgress?"Oui":"Non"}`,`  - Images uploades: ${Object.keys(t.appState.uploadedImages||{}).length}`,""," Donnes raw:",`  - localStorage: ${Object.keys(((r=t.rawData)==null?void 0:r.localStorage)||{}).length} cls`,`  - sessionStorage: ${Object.keys(((o=t.rawData)==null?void 0:o.sessionStorage)||{}).length} cls`].join(`
`)}generateEnrichedSummary(t){const n=[` FORMAT STRUCTUR CHECKIN/CHECKOUT - ${t.session.timestamp}`,"",` Parcours: ${t.parcoursName} (${t.parcoursType})`,` Logement: ${t.logementName}`,` Session: ${t.session.userType} - ${t.session.flowType.toUpperCase()}`,""," STATISTIQUES GLOBALES:",`  -  Total pices: ${t.stats.totalPieces}`,`  -  Photos checkin: ${t.stats.photosCheckin}`,`  -  Photos checkout: ${t.stats.photosCheckout}`,`  -  Validations checkin: ${t.stats.validationsCheckin}`,`  -  Validations checkout: ${t.stats.validationsCheckout}`,`  -  Signalements: ${t.stats.signalementsTotal}`,""," PICES:",...t.pieces.map(r=>`  - ${r.nom} (${r.pieceID})`),""];return t.checkin&&(n.push(` CHECKIN: ${t.checkin.completed?"TERMIN":"EN COURS"}`),n.push(`  - Pices traites: ${t.checkin.pieceResults.length}`),t.checkin.pieceResults.slice(0,3).forEach(r=>{var o;n.push(`   ${(o=t.pieces.find(s=>s.pieceID===r.pieceID))==null?void 0:o.nom}:`),n.push(`     tat gnral: ${r.validations.etatGeneral?"OK":"PROBLME"}`),n.push(`     Photos: ${r.photos.length}`),n.push(`     Checks: ${r.checks.filter(s=>s.checked).length}/${r.checks.length}`),n.push(`     Signalements: ${r.signalements.length}`)}),t.checkin.pieceResults.length>3&&n.push(`  ... et ${t.checkin.pieceResults.length-3} autres pices`),n.push("")),t.checkout&&(n.push(` CHECKOUT: ${t.checkout.completed?"TERMIN":"EN COURS"}`),n.push(`  - Pices traites: ${t.checkout.pieceResults.length}`),t.checkout.pieceResults.slice(0,3).forEach(r=>{var o;n.push(`   ${(o=t.pieces.find(s=>s.pieceID===r.pieceID))==null?void 0:o.nom}:`),n.push(`     Mnage effectu: ${r.validations.menageEffectue?"OUI":"NON"}`),n.push(`     tat final: ${r.validations.etatFinal?"OK":"PROBLME"}`),n.push(`     Photos: ${r.photos.length}`),n.push(`     Tches: ${r.tasks.filter(s=>s.completed).length}/${r.tasks.length}`)}),t.checkout.pieceResults.length>3&&n.push(`  ... et ${t.checkout.pieceResults.length-3} autres pices`),n.push("")),n.join(`
`)}}const VI=new QF,XF=Object.freeze(Object.defineProperty({__proto__:null,debugService:VI},Symbol.toStringTag,{value:"Module"})),qI=({roomName:e="Chambre",photoNumber:t=1,totalPhotos:n=2,roomInfo:r="Vrifiez l'tat d'entre de cette pice et documentez tout problme existant.",cleaningInfo:o="Contrlez l'tat gnral de la pice  l'arrive du voyageur.",referencePhoto:s="/src/assets/reference-photo.jpg",pieces:i,currentPieceId:l,currentTaskIndex:c,onPieceSelected:u})=>{var Ze,Ke;const[d,h]=f.useState(!1),[m,p]=f.useState(!1),[b,x]=f.useState(!1),[w,g]=f.useState("current"),[v,y]=f.useState(!1),[k,C]=f.useState(""),[N,S]=f.useState(!1),[I,P]=f.useState(null),[E,_]=f.useState(!1),[j,L]=f.useState(new Map),[D,z]=f.useState(!1),[A,R]=f.useState(!0),[T,O]=f.useState(!1),H=Cn(),q=Ot(),Z=bs();f.useRef(new Set);const G=Pt.extractUrlParams(q.search),K=G.parcoursId,re=G.checkId;ys(re),ws(K,"checkin");const{user:ie,logout:Y}=cr(),{flowState:ne,nextStep:xe,completeStep:le,jumpToPiece:se,isPieceCompleted:pe,checkAutoAdvancement:ge,addTakenPhotos:We,getTakenPhotos:Xe,saveProgressToCheckId:Pe}=Xg(),{openReportModal:ze}=ks(),{getSignalementsByRoom:we,getPendingSignalements:be}=To(),{rooms:_e,currentParcours:Ne,getApiSignalementsByRoom:nt}=Sn(),{startCheckout:He}=Hd(),{currentCheckId:Ye,isCheckIdActive:It,setActiveCheckId:xt}=Kn(),{trackButtonClick:Dt}=Hu();sC([ne.currentStep.pieceId,ne.currentStep.taskIndex]);const oe=f.useMemo(()=>Ye||(re?(console.log(" CheckIn: CheckID rcupr depuis URL comme fallback:",re),re):null),[Ye,re]);f.useLayoutEffect(()=>{(async()=>{oe&&!Ye&&(console.log(" CheckIn: Activation automatique du CheckID depuis URL (AVANT rendu):",oe),await xt(oe))})()},[oe,Ye,xt]);const me=Ye||oe;f.useEffect(()=>{(async()=>{if(R(!0),me){await new Promise(M=>setTimeout(M,800));const te=await Oe.getCheckSession(me);if(console.log(" CheckIn: Vrification session:",{checkId:me,status:te==null?void 0:te.status,rapportID:te==null?void 0:te.rapportID,isTerminated:(te==null?void 0:te.status)==="terminated"}),te&&te.status==="terminated"){console.warn(" CheckIn: Session termine, redirection vers checkout-home"),ht.error("Ce parcours est dj termin. Consultez votre rapport."),await new Promise(M=>setTimeout(M,1e3)),Z("/checkout-home");return}}R(!1)})()},[me,H]),f.useEffect(()=>{me?(console.log(" CheckIn: Synchronisation interactionTracker avec checkId:",me),at.setCurrentCheckId(me)):console.warn(" CheckIn: Aucun checkId effectif, interactionTracker non synchronis")},[me]);const{saveButtonClick:Ie,savePhotoTaken:Ue}=BI(),{updatePieceStatus:Ct}=Hu(),[Te,Ge]=f.useState(!1);f.useEffect(()=>{_e.length>0&&!Te&&(console.log(" Initialisation CheckIn UNIQUE:",{globalRoomsCount:_e.length,userType:ie==null?void 0:ie.type,currentParcoursId:Ne==null?void 0:Ne.id}),Ge(!0))},[_e.length,Te]),f.useEffect(()=>{(async()=>{if(me)try{const{interactionTracker:te}=await Wt(async()=>{const{interactionTracker:M}=await Promise.resolve().then(()=>Tl);return{interactionTracker:M}},void 0);await te.trackPagePath("/checkin"),console.log(" CheckIn: Chemin de page sauvegard dans session")}catch(te){console.error(" CheckIn: Erreur sauvegarde chemin de page:",te)}})()},[me]);const it=f.useMemo(()=>{if(_e.length===0)return[];const te=[..._e].sort((M,F)=>M.ordre-F.ordre).map(M=>{const W=(M.tasks||[]).filter(X=>!X.isTodo);return{id:M.id,nom:M.nom,ordre:M.ordre||1,roomInfo:M.roomInfo||"",cleaningInfo:M.cleaningInfo||"",photoReferences:M.photoReferences||{checkin:[],checkout:[]},status:"VIDE",tasks_total:W.length,tasks_done:0,photos_required:W.reduce((X,ee)=>X+(ee.total_photos_required||0),0)||0,photos_done:0,tasks:W}});return console.log(" CheckIn - Ordre des defaultPieces:",te.map((M,F)=>({index:F,nom:M.nom,ordre:M.ordre,id:M.id,isPremiere:F===0?" SERA SLECTIONNE":""}))),te},[_e]),Qe=i||it;f.useEffect(()=>{(async()=>{if(!me||!It){console.log(" CheckIn: Pas de CheckID actif, skip restauration");return}try{const te=await Oe.getCheckSession(me);if(!(te!=null&&te.progress)){console.log(" CheckIn: Pas de progression sauvegarde");return}console.log(" CheckIn: Restauration tat depuis CheckID");const{buttonClicks:M,photosTaken:F,checkboxStates:W}=te.progress.interactions||{};if(M&&console.log(" CheckIn: Restauration button clicks:",Object.keys(M).length),F&&Object.keys(F).length>0){console.log(" CheckIn: Restauration de TOUTES les photos depuis IndexedDB...",Object.keys(F).length,"photos");const X=new Map;Object.entries(F).forEach(([ue,ve])=>{Array.isArray(ve)&&ve.length>0&&ve.forEach(Ae=>{const Re=Ae.taskId;if(!Re){console.warn(` Photo ${ue} sans taskId, skip`);return}const Rt={tache_id:Re,etapeID:Ae.etapeId||ue,url:Ae.photoData||Ae.url||Ae.dataUrl||"",expected_orientation:"portrait",overlay_enabled:!1},wr=X.get(Re)||[];wr.push(Rt),X.set(Re,wr)})});const ee=new Map;X.forEach((ue,ve)=>{We(ve,ue);const Ae=ue.map(Rt=>({id:Rt.etapeID||ve,pieceId:"",referencePhotoId:Rt.etapeID||"",blob:null,dataUrl:Rt.url||"",takenAt:new Date().toISOString(),meta:{width:1920,height:1440}})),Re=ve.includes("_")&&ve.split("_").pop()||ve;ee.set(ve,Ae),ee.set(Re,Ae),console.log(` Photo restaure pour taskId ${ve} (aussi index comme ${Re}):`,Ae.length,"photos")}),L(ee),console.log(` TOTAL: ${X.size} tches avec ${Array.from(X.values()).reduce((ue,ve)=>ue+ve.length,0)} photos restaures dans flowState ET capturedPhotosData`)}else console.log(" CheckIn: Aucune photo sauvegarde dans IndexedDB");if(W){console.log(" CheckIn: Restauration checkboxes:",Object.keys(W).length);const X=new Set;Object.entries(W).forEach(([ee,ue])=>{if(typeof ue=="boolean"?ue:(ue==null?void 0:ue.isChecked)||!1){const Ae=ee.replace("checkbox_","");X.add(Ae),le(Ae)}}),console.log(` CheckIn: ${X.size} tches restaures depuis checkboxes`)}}catch(te){console.error(" CheckIn: Erreur chargement tat:",te)}})()},[me,It]);const Nn=f.useMemo(()=>{const ce=Qe.every(te=>{var M;return(M=te.tasks)==null?void 0:M.every(F=>ne.completedTasks[F.id])});return ce&&console.log(" CheckIn: TOUTES les tches sont compltes!",{piecesCount:Qe.length,completedTasksCount:Object.keys(ne.completedTasks).filter(te=>ne.completedTasks[te]).length,totalTasksCount:Qe.reduce((te,M)=>{var F;return te+(((F=M.tasks)==null?void 0:F.length)||0)},0)}),ce},[Qe,ne.completedTasks]);f.useEffect(()=>{if(console.log(" CheckIn useEffect: Vrification auto-redirect",{allTasksCompleted:Nn,flowStateIsCompleted:ne.isCompleted,shouldAutoRedirect:T,shouldTrigger:Nn||ne.isCompleted}),Nn||ne.isCompleted){const ce=setTimeout(async()=>{var M,F;console.log(" CheckIn useEffect: Flow complt, vrification transition");const te=((M=Ne==null?void 0:Ne.rawData)==null?void 0:M.takePicture)==="checkInAndCheckOut";if(console.log(" CheckIn useEffect: Conditions transition:",{takePicture:(F=Ne==null?void 0:Ne.rawData)==null?void 0:F.takePicture,shouldTransitionToCheckout:te,allTasksCompleted:Nn,flowStateIsCompleted:ne.isCompleted}),me)try{const W=await Oe.getCheckSession(me);W&&(await Oe.saveCheckSession({...W,progress:{...W.progress,etatInitialCompleted:!0,etatInitialCompletedAt:new Date().toISOString(),...te&&{checkinCompleted:!0,checkinCompletedAt:new Date().toISOString()}}}),console.log(" CheckIn useEffect: Session mise  jour"))}catch(W){console.error(" CheckIn useEffect: Erreur sauvegarde session:",W)}te?(console.log(" CheckIn useEffect: Transition automatique vers checkout-home"),He(),Z("/checkout-home")):(console.log(" CheckIn useEffect: Navigation vers checkin-home"),Z("/checkin-home"))},1500);return()=>clearTimeout(ce)}},[Nn,ne.isCompleted,Z,Ne,me,He]);const U=Qe.map(ce=>{if(!ce.tasks)return ce;const te=ce.tasks.filter(F=>ne.completedTasks[F.id]),M=te.filter(F=>F.type==="photo_required"||F.type==="photo_optional");return{...ce,tasks_done:te.length,photos_done:M.length,status:te.length===ce.tasks.length?"VALIDEE":te.length>0?"INCOMPLETE":"VIDE"}}),$=l||ne.currentStep.pieceId,Ve=c!==void 0?c:ne.currentStep.taskIndex,Q=U.find(ce=>ce.id===$);U.findIndex(ce=>ce.id===$),U.length;const lt=f.useMemo(()=>{if(!Q)return[];const ce=we(Q.nom),te=nt(Q.id),M=new Map;return ce.forEach(F=>M.set(F.id,F)),te.forEach(F=>{M.has(F.id)||M.set(F.id,F)}),Kd(Array.from(M.values()))},[Q,we,nt]),bt=be().length,ae=(Ze=Q==null?void 0:Q.tasks)!=null&&Ze[Ve]?{...Q.tasks[Ve],completed:ne.completedTasks[Q.tasks[Ve].id]||!1}:void 0,Me=((Ke=Q==null?void 0:Q.tasks)==null?void 0:Ke.length)||0;ne.currentStep.stepNumber,ne.currentStep.totalSteps,f.useEffect(()=>{ae!=null&&ae.completed||P(null)},[ae==null?void 0:ae.id,ae==null?void 0:ae.completed]);const Je=async ce=>{console.log(` Voyageur valide la pice: ${ce}`),P("validated");try{await Dt(`${ce}_validate`,(Q==null?void 0:Q.id)||"",ce,ce,"validate",{page:"checkin",action:"piece_validation",pieceName:(Q==null?void 0:Q.nom)||"",validationMode:"validated",timestamp:new Date().toISOString()}),console.log(" CheckIn: Validation pice sauvegarde dans CheckID avec etapeID:",ce)}catch(F){console.error(" CheckIn: Erreur sauvegarde validation:",F)}if(le(ce),Q!=null&&Q.id)try{await Ct(Q.id,"validated",100),console.log(" CheckIn: tat pice mis  jour:",Q.id)}catch(F){console.error(" CheckIn: Erreur mise  jour tat pice:",F)}const te={...ne.completedTasks,[ce]:!0},M=Ly(Qe,te,j);console.log(" CheckIn: Vrification aprs validation:",{allPiecesValidated:M,piecesCount:Qe.length,validatedCount:Qe.filter(F=>Ba(F.id,te,j,F)).length}),setTimeout(async()=>{if(M)await ge(Qe),O(!0),console.log(" CheckIn: Toutes les pices valides, le useEffect va grer la transition");else{const F=$y(Qe,te,j);F?(console.log(" CheckIn: Redirection vers la prochaine pice non-valide:",F.nom),se(F.id,0)):(console.log(" CheckIn: Toutes les pices sont valides (fallback), nextStep()"),xe())}},1e3)},yt=ce=>{var X,ee;console.log(` Voyageur reprend les photos: ${ce}`);const te=(X=Q==null?void 0:Q.tasks)==null?void 0:X.find(ue=>ue.id===ce),M=(te==null?void 0:te.photo_references)&&te.photo_references.length>0,F=te==null?void 0:te.photo_reference,W=(te==null?void 0:te.type)&&["photo_required","photo_optional","photo_multiple","photo_validation","reference_photos"].includes(te.type);console.log(" CheckIn: Vrification photo rfrences:",{currentTask:!!te,hasPhotoReferences:M,hasSinglePhotoReference:!!F,isPhotoTask:W,photoReferencesLength:((ee=te==null?void 0:te.photo_references)==null?void 0:ee.length)||0,taskType:te==null?void 0:te.type}),M||F||W?(console.log(` Ouverture du modal photo pour ${Q==null?void 0:Q.nom}`,{taskId:ce,pieceId:Q==null?void 0:Q.id,photosCount:M?te.photo_references.length:1,isTodoWithPhoto:!!F,isPhotoTaskWithoutRef:W&&!M&&!F}),_(!0)):(console.warn(" Aucune photo de rfrence trouve pour cette tche"),alert("Aucune photo de rfrence disponible pour cette pice."))},mt=async ce=>{if(console.log(" Photos captures par le voyageur:",ce),ae&&ce.length>0){const te=ae.id,M=ne.currentPieceId||"";console.log(` Stockage de ${ce.length} photos pour la tche ${te}`),L(F=>{const W=new Map(F);return W.set(te,ce),console.log(" Photos stockes dans state:",Array.from(W.keys())),W}),console.log(" Sauvegarde des photos dans IndexedDB...");for(const F of ce)try{await Ue(te,M,F.dataUrl,{photoId:F.id,etapeId:F.etapeID,timestamp:new Date().toISOString()}),console.log(` Photo ${F.id} sauvegarde dans IndexedDB`)}catch(W){console.error(` Erreur sauvegarde photo ${F.id}:`,W)}console.log(" Toutes les photos sauvegardes dans IndexedDB")}if(_(!1),P("photos_retaken"),ae){le(ae.id);const te=new Map(j);te.set(ae.id,ce);const M=Qe.find(W=>W.id===ne.currentPieceId);if(M&&Ba(M.id,{...ne.completedTasks,[ae.id]:!0},te,M)){console.log(" CheckIn: Toutes les photos prises, auto-validation de la pice");try{await Ct(M.id,"validated",100),console.log(" CheckIn: tat pice mis  jour aprs photos:",M.id)}catch(W){console.error(" CheckIn: Erreur mise  jour tat pice:",W)}}const F=Ly(Qe,ne.completedTasks,te);console.log(" CheckIn: Vrification aprs photos:",{allPiecesValidatedAfterPhotos:F,piecesCount:Qe.length,validatedCount:Qe.filter(W=>Ba(W.id,ne.completedTasks,te,W)).length}),setTimeout(async()=>{if(F)await ge(Qe),O(!0),console.log(" CheckIn: Toutes les pices valides aprs photos, le useEffect va grer la transition");else{const W=$y(Qe,ne.completedTasks,te);W?(console.log(" CheckIn: Redirection vers la prochaine pice non-valide aprs photos:",W.nom),se(W.id,0)):(console.log(" CheckIn: Toutes les pices sont valides aprs photos (fallback), nextStep()"),xe())}},1e3)}},zt=()=>{console.log(" Modal photo ferm sans capture"),_(!1)},fn=()=>{ze(Q==null?void 0:Q.nom)},nn=async()=>{console.log(" CheckIn: Navigation retour - Dbut sauvegarde complte");const ce=q.pathname;if(!ce.includes("/checkin")){console.error(" CheckIn: handleGoBack appel depuis une page non-CheckIn:",ce),console.error("    Ceci indique un problme de contexte ou de routing");return}console.log(" CheckIn: Validation contexte OK - Navigation depuis CheckIn vers CheckIn-Home");try{await Pe($,Ve),console.log(" CheckIn: Progression sauvegarde avant navigation Home:",{pieceId:$,taskIndex:Ve,pieceName:Q==null?void 0:Q.nom})}catch(W){console.error(" CheckIn: Erreur sauvegarde progression:",W)}try{if(j.size>0){console.log(" CheckIn: Sauvegarde tat photos avant navigation:",{totalPhotos:Array.from(j.values()).flat().length,piecesWithPhotos:j.size});for(const[W,X]of j.entries())for(const ee of X)try{await Ue(ee.taskId,W,ee.dataUrl,{url:ee.dataUrl,timestamp:ee.timestamp,metadata:ee.metadata})}catch(ue){console.error(" CheckIn: Erreur sauvegarde photo:",ue)}}}catch(W){console.error(" CheckIn: Erreur sauvegarde photos:",W)}try{await Ie("checkin_go_back",(Q==null?void 0:Q.id)||"",Ve,"navigation_back",{page:"checkin",fromPiece:Q==null?void 0:Q.nom,fromPieceId:$,fromTaskIndex:Ve,totalPhotos:Array.from(j.values()).flat().length,completedTasks:Object.keys(ne.completedTasks||{}).length,timestamp:new Date().toISOString(),navigationContext:"home_button_click"}),console.log(" CheckIn: Action retour sauvegarde dans CheckID avec contexte complet")}catch(W){console.error(" CheckIn: Erreur sauvegarde action retour:",W)}try{const{interactionTracker:W}=await Wt(async()=>{const{interactionTracker:X}=await Promise.resolve().then(()=>Tl);return{interactionTracker:X}},void 0);await W.trackPagePath("/checkin-home"),console.log(" CheckIn: Chemin de navigation sauvegard")}catch(W){console.error(" CheckIn: Erreur sauvegarde chemin:",W)}const te=re||me,M=K;if(!te){console.warn(" CheckIn: Aucun checkId trouv pour la navigation - Tentative de rcupration");const W=localStorage.getItem("activeCheckId");W&&console.log(" CheckIn: CheckId rcupr depuis localStorage:",W)}console.log(" CheckIn: Navigation vers /checkin-home avec prservation complte:",{checkId:te,parcours:M,fromPage:"/checkin",preservedState:{pieceId:$,taskIndex:Ve,photosCount:Array.from(j.values()).flat().length}});const F="/checkin-home";console.log(" CheckIn: Navigation finale confirme vers:",F),console.log("    Depuis CheckIn (/checkin) vers CheckIn Home (/checkin-home)"),Z(F)},B=ce=>{if(u){u(ce);return}typeof window<"u"&&window.analytics&&window.analytics.track("piece_opened",{piece_id:ce});const te=U.find(W=>W.id===ce);if(!(te!=null&&te.tasks)){console.log(`No tasks found for piece: ${ce}`);return}const M=te.tasks.findIndex(W=>!ne.completedTasks[W.id]),F=M>=0?M:0;O(!1),se(ce,F)},ye=async()=>{if(!D){z(!0);try{console.log(" Envoi des donnes de checkin...");const ce=await VI.sendCheckinWebhook();ce.success?(ht.success(" Checkin envoy avec succs !"),console.log(" Checkin envoy:",ce),setTimeout(()=>{Z("/checkin-home")},2e3)):(ht.error(` Erreur envoi checkin: ${ce.error}`),console.error(" Erreur checkin:",ce))}catch(ce){console.error(" Erreur envoi checkin:",ce),ht.error(" Erreur lors de l'envoi du checkin")}finally{z(!1)}}};return A?a.jsx("div",{className:"min-h-screen bg-gradient-subtle max-w-md mx-auto flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Vrification du parcours..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-subtle max-w-md mx-auto relative",children:[a.jsx("div",{className:"sticky top-0 z-50 bg-glass-bg/95 backdrop-blur-xl border-b border-white/20 shadow-elegant",children:a.jsxs("div",{className:"flex items-center justify-between py-1 px-3 bg-background",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:nn,className:"hover:bg-white/20 transition-all duration-300 hover:scale-105 h-8 w-8 p-0",children:a.jsx(oo,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1 flex items-center justify-center gap-2 px-2",children:a.jsx(xI,{pieces:U,currentPieceId:$,onPieceSelected:B,signalements:bt,currentTasks:Q==null?void 0:Q.tasks,currentTaskIndex:Ve,completedTasks:ne.completedTasks,onTaskSelected:(ce,te)=>{console.log(" CheckIn: onTaskSelected appel",{pieceId:ce,taskIndex:te}),O(!1),se(ce,te)},capturedPhotos:j})}),a.jsx("div",{className:"flex items-center",children:a.jsx("div",{className:"transition-transform duration-300 hover:scale-105",children:a.jsx(ua,{user:ie,size:"sm",onClick:()=>p(!0)})})})]})}),a.jsx("div",{className:"flex-1 px-3 py-4 space-y-4 pb-24",children:a.jsxs("div",{className:"space-y-4",children:[ae&&(()=>{var ce,te;return console.log(" CheckIn: Passage de donnes  RoomTaskCard:",{pieceId:Q==null?void 0:Q.id,pieceNom:Q==null?void 0:Q.nom,cleaningInfo:((ce=Q==null?void 0:Q.cleaningInfo)==null?void 0:ce.substring(0,50))+"...",roomInfo:((te=Q==null?void 0:Q.roomInfo)==null?void 0:te.substring(0,50))+"...",hasCleaningInfo:!!(Q!=null&&Q.cleaningInfo),hasRoomInfo:!!(Q!=null&&Q.roomInfo)}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(zI,{task:ae,taskIndex:Ve,totalTasks:Me,onValidatePiece:Je,onRetakePhotos:yt,capturedPhotos:j.get(ae.id)||[],onReportProblem:fn,cleaningInfo:Q==null?void 0:Q.cleaningInfo,roomInfo:Q==null?void 0:Q.roomInfo,travelerNote:Q==null?void 0:Q.travelerNote,cleanerNote:Q==null?void 0:Q.cleanerNote,infoEntrance:Q==null?void 0:Q.infoEntrance,validationMode:I,signalements:lt,isSignalementsOpen:N,onSignalementsOpenChange:S,isCheckoutMode:!1}),ae.completed&&I==="validated"&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 animate-slide-up",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dn,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"font-medium text-green-800",children:"Pice valide"})]})}),ae.completed&&Xe(ae.id).length>0&&a.jsxs("div",{className:"space-y-3 animate-slide-up",children:[ae.photo_reference&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"font-medium text-foreground text-sm",children:"Vos photos (1)"}),a.jsx(Vu,{photos:Xe(ae.id)})]}),(ae==null?void 0:ae.type)==="photo_multiple"&&(ae==null?void 0:ae.photo_references)&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h5",{className:"font-medium text-foreground text-sm",children:["Vos photos (",Xe(ae.id).length,")"]}),a.jsx(Vu,{photos:Xe(ae.id)})]})]})]})})(),!ae&&a.jsx($e,{className:"bg-white/10 border-white/20 backdrop-blur-sm",children:a.jsxs(tt,{className:"p-6 text-center",children:[a.jsx(dn,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Contrle d'entre termin !"}),a.jsx("p",{className:"text-muted-foreground mb-6",children:"Toutes les vrifications d'entre ont t effectues avec succs."}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(fe,{onClick:ye,disabled:D,className:"w-full h-12 font-medium text-base rounded-xl transition-all duration-300",style:{backgroundColor:"#16a34a"},children:D?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Envoi en cours..."})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(kt,{className:"h-5 w-5"}),a.jsx("span",{children:" Envoyer le rapport de checkin"})]})}),ot.IS_DEV]})]})})]})}),a.jsx(ki,{isOpen:m,onClose:()=>p(!1),onLogout:()=>{}}),a.jsx(Vg,{isOpen:b,onClose:()=>x(!1)}),E&&ae&&a.jsx(pI,{isOpen:E,onClose:zt,referencePhotos:ae.photo_references||(ae.photo_reference?[ae.photo_reference]:[]),onPhotosCaptured:mt,pieceName:(Q==null?void 0:Q.nom)||"Pice",pieceId:(Q==null?void 0:Q.id)||"",flowType:"checkin"}),a.jsx(Qg,{isOpen:v,onClose:()=>{y(!1),C("")},imageUrl:k,imageTitle:`Photo de rfrence - ${(Q==null?void 0:Q.nom)||"Pice"}`})]})},GI=({isReady:e,onClick:t,className:n,progress:r=0})=>a.jsxs("button",{onClick:t,disabled:!e,className:ke("group relative w-full h-10 px-4 rounded-lg font-medium text-sm","transition-all duration-500 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2","overflow-hidden","shadow-md",e&&["bg-gradient-to-br from-[#5C6BC0] via-[#7E57C2] to-[#AB47BC]","text-white","hover:shadow-2xl hover:shadow-purple-500/30","hover:scale-[1.03]","active:scale-[0.97]","cursor-pointer","border border-white/20"],!e&&["bg-gradient-to-r from-muted via-muted/80 to-muted","text-muted-foreground","cursor-not-allowed","border border-border/50"],n),children:[e&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})}),a.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-pink-400/20 to-purple-400/20 blur-xl"})}),a.jsx("div",{className:"absolute top-2 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:a.jsx(Nx,{className:"h-3 w-3 text-yellow-300 animate-pulse"})}),a.jsx("div",{className:"absolute bottom-2 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 delay-100",children:a.jsx(Nx,{className:"h-3 w-3 text-yellow-300 animate-pulse"})})]}),!e&&a.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/10 to-transparent"}),!e&&a.jsx("div",{className:"absolute inset-0 animate-pulse-slow bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5"}),a.jsx("div",{className:"relative flex items-center justify-center gap-3",children:e?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsx(zl,{className:"h-4 w-4 transition-all duration-300 group-hover:scale-110 group-hover:rotate-3"}),a.jsx("div",{className:"absolute inset-0 bg-white/30 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10"})]}),a.jsx("span",{className:"font-semibold tracking-wide",children:"Voir mon rapport IA"}),a.jsx("svg",{className:"h-4 w-4 transition-transform duration-300 group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}):a.jsxs(a.Fragment,{children:[a.jsx(si,{className:"h-4 w-4 animate-spin-slow"}),a.jsxs("span",{className:"font-medium text-sm",children:["Rapport IA en cours... ",r,"%"]})]})}),!e&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-primary/20 overflow-hidden rounded-b-xl",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-primary/40 via-primary/60 to-primary/40 transition-all duration-500 ease-out",style:{width:`${r}%`}})}),e&&a.jsxs("div",{className:"absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[a.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500 opacity-30 blur-lg animate-pulse-slow"}),a.jsx("div",{className:"absolute inset-0 rounded-xl border border-primary opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]});class JF{async checkRapportStatus(t){var n,r;try{const o=new URL(ot.CHECK_RAPPORT_URL);o.searchParams.set("checkid",t),console.log(" Vrification statut rapport:",{checkId:t,url:o.toString()});const s=await fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"omit",cache:"no-store"});if(!s.ok)return console.error(" Erreur lors de la vrification du rapport:",s.status),null;const i=await s.json();return console.log(" Rponse complte de l'API:",JSON.stringify(i,null,2)),i.status==="success"&&((n=i.response)!=null&&n.rapport)?(console.log(" Statut rapport rcupr:",{avance:i.response.rapport.avance,avanceRapport:i.response.rapport.avanceRapport,isRapportReady:i.response.rapport.avanceRapport==="Termin",rapportKeys:Object.keys(i.response.rapport)}),i.response.rapport):(console.warn(" Rponse inattendue de l'API rapport:",{status:i.status,hasResponse:!!i.response,hasRapport:!!((r=i.response)!=null&&r.rapport),fullData:i}),null)}catch(o){return console.error(" Erreur lors de la vrification du rapport:",o),null}}async isRapportReady(t){var o,s,i;const n=await this.checkRapportStatus(t),r=(n==null?void 0:n.avanceRapport)==="Termin";return console.log(" isRapportReady - Dtails:",{checkId:t,avanceRapport:n==null?void 0:n.avanceRapport,avanceRapportType:typeof(n==null?void 0:n.avanceRapport),avanceRapportLength:(o=n==null?void 0:n.avanceRapport)==null?void 0:o.length,avanceRapportCharCodes:(s=n==null?void 0:n.avanceRapport)==null?void 0:s.split("").map(l=>l.charCodeAt(0)),expectedValue:"Termin",expectedCharCodes:"Termin".split("").map(l=>l.charCodeAt(0)),isReady:r,strictEquality:(n==null?void 0:n.avanceRapport)==="Termin",trimmedEquality:((i=n==null?void 0:n.avanceRapport)==null?void 0:i.trim())==="Termin"}),r}}const KI=new JF,YI=()=>{var Y,ne,xe,le;Cn();const e=Ot(),t=bs(),{user:n}=cr(),{rooms:r,currentParcours:o,apiSignalements:s,info:i}=Sn(),{flowState:l,startCheckout:c,resetFlow:u}=Hd(),{openReportModal:d}=ks(),{getPendingSignalements:h}=To(),{currentCheckId:m}=Kn(),[p,b]=f.useState(!1),x=()=>(i==null?void 0:i.type)==="Voyageur"?"Etat des lieux d'entre":"Contrle de l'tat initial du logement",w=()=>(i==null?void 0:i.type)==="Voyageur"?"tat des lieux de sortie":"Validation du mnage",g=Pt.extractUrlParams(e.search),v=g.parcoursId,y=g.checkId;ys(y),ws(v,"checkout");const[k,C]=f.useState(null),[N,S]=f.useState(!1),[I,P]=f.useState(0),[E,_]=f.useState(!1),[j,L]=f.useState(null);f.useEffect(()=>{const se=async()=>{var ge,We,Xe,Pe,ze,we;if(m){await new Promise(_e=>setTimeout(_e,500));const be=await Oe.getCheckSession(m);if(be)if(C(be),_(be.status==="terminated"),console.log(" Session charge:",{status:be.status,rapportID:be.rapportID,isTerminated:be.status==="terminated",etatInitialCompleted:(ge=be.progress)==null?void 0:ge.etatInitialCompleted,etatInitialCompletedAt:(We=be.progress)==null?void 0:We.etatInitialCompletedAt}),n!=null&&n.id&&be.parcoursId&&!((Xe=be.progress)!=null&&Xe.etatInitialCompleted)){const Ne=(await Oe.getUserSessions(n.id)).find(nt=>{var He;return nt.parcoursId===be.parcoursId&&nt.flowType==="checkin"&&((He=nt.progress)==null?void 0:He.etatInitialCompleted)===!0});Ne&&(L(Ne),console.log(" Session check-in spare trouve:",{checkId:Ne.checkId,createdAt:Ne.createdAt,etatInitialCompletedAt:(Pe=Ne.progress)==null?void 0:Pe.etatInitialCompletedAt}))}else(ze=be.progress)!=null&&ze.etatInitialCompleted&&(L(be),console.log(" tat initial dans la session checkout actuelle:",{checkId:be.checkId,createdAt:be.createdAt,etatInitialCompletedAt:(we=be.progress)==null?void 0:we.etatInitialCompletedAt}))}};se();const pe=()=>{document.hidden||(console.log(" Page visible, rechargement de la session..."),se())};return document.addEventListener("visibilitychange",pe),()=>{document.removeEventListener("visibilitychange",pe)}},[m,n==null?void 0:n.id]),f.useEffect(()=>{const se=(k==null?void 0:k.status)==="terminated"&&(k==null?void 0:k.rapportID);if(console.log(" CheckoutHome: Conditions de polling:",{checkSessionStatus:k==null?void 0:k.status,rapportID:k==null?void 0:k.rapportID,flowStateCompleted:l==null?void 0:l.isCompleted,shouldPoll:se,isRapportReady:N,currentCheckId:m}),!se||N){console.log(" CheckoutHome: Polling non dmarr:",{reason:se?"Rapport dj prt":"Conditions non remplies"});return}console.log(" CheckoutHome: Dmarrage du polling pour vrifier le statut du rapport"),P(10);let pe=0;const ge=async()=>{if(!m){console.warn(" CheckoutHome: currentCheckId manquant pour la vrification du rapport");return}pe++,console.log(" CheckoutHome: Vrification du statut du rapport pour checkId:",m,`(tentative ${pe})`);const Xe=await KI.isRapportReady(m);if(console.log(" CheckoutHome: Rsultat de la vrification:",{ready:Xe,pollCount:pe}),Xe)console.log(" CheckoutHome: Rapport IA termin et prt  tre consult"),P(100),S(!0);else{const Pe=Math.min(10+pe*7,80);P(Pe),console.log(" CheckoutHome: Progression mise  jour:",{newProgress:Pe,pollCount:pe})}};ge();const We=setInterval(ge,3e3);return()=>{console.log(" CheckoutHome: Arrt du polling du statut du rapport"),clearInterval(We)}},[k==null?void 0:k.status,k==null?void 0:k.rapportID,m,N]);const D=o!=null&&o.rawData?di(o.rawData):di(null),z=((Y=o==null?void 0:o.rawData)==null?void 0:Y.logementName)||"Logement",A=((ne=o==null?void 0:o.rawData)==null?void 0:ne.takePicture)||"",R=(n==null?void 0:n.type)==="AGENT"||(n==null?void 0:n.type)==="GESTIONNAIRE"?"Mnage en cours":(n==null?void 0:n.type)==="CLIENT"?A==="checkOutOnly"?"tat des lieux de sortie":A==="checkInOnly"?"Check-in en cours":"Sjour en cours":"Parcours en cours",T=()=>{if((n==null?void 0:n.type)==="AGENT"||(n==null?void 0:n.type)==="GESTIONNAIRE"){if(A==="checkOutOnly")return"Validation du mnage";if(A==="checkInOnly")return"Contrle de l'tat initial et validation du mnage";if(A==="checkInAndCheckOut")return"Contrle de l'tat initial et validation du mnage"}switch(A){case"checkInOnly":return"Photos  l'entre uniquement";case"checkOutOnly":return"Photos  la sortie uniquement";case"both":return"Photos  l'entre et  la sortie";default:return""}},O=async()=>{var se,pe,ge,We,Xe,Pe,ze,we,be,_e,Ne,nt;if(console.log(" CheckoutHome: Dmarrage du checkout avec prservation des paramtres"),console.log("    currentCheckId:",m),console.log("    URL actuelle:",window.location.href),c(),m)try{const He=await Oe.getCheckSession(m);if(He&&r.length>0){const It=[...r].sort((oe,me)=>oe.ordre-me.ordre)[0];console.log(" CheckoutHome: Rinitialisation position  la premire pice:",{firstRoomId:It==null?void 0:It.id,firstRoomName:It==null?void 0:It.nom,ordre:It==null?void 0:It.ordre});const xt=((pe=(se=He.progress)==null?void 0:se.interactions)==null?void 0:pe.checkboxStates)&&Object.keys(He.progress.interactions.checkboxStates).length>0||((We=(ge=He.progress)==null?void 0:ge.interactions)==null?void 0:We.photosTaken)&&Object.keys(He.progress.interactions.photosTaken).length>0||((Pe=(Xe=He.progress)==null?void 0:Xe.interactions)==null?void 0:Pe.buttonClicks)&&Object.keys(He.progress.interactions.buttonClicks).length>0;console.log(" CheckoutHome: Vrification interactions existantes:",{hasExistingInteractions:xt,checkboxStates:Object.keys(((we=(ze=He.progress)==null?void 0:ze.interactions)==null?void 0:we.checkboxStates)||{}).length,photosTaken:Object.keys(((_e=(be=He.progress)==null?void 0:be.interactions)==null?void 0:_e.photosTaken)||{}).length,buttonClicks:Object.keys(((nt=(Ne=He.progress)==null?void 0:Ne.interactions)==null?void 0:nt.buttonClicks)||{}).length});const Dt={...He.progress,currentPieceId:It==null?void 0:It.id,currentTaskIndex:0};xt?console.log(" CheckoutHome: Prservation des interactions existantes (reprise du checkout)"):(Dt.interactions={photosTaken:{},checkboxStates:{},buttonClicks:{}},console.log(" CheckoutHome: Rinitialisation des interactions (nouveau checkout)")),await Oe.saveCheckSession({...He,progress:Dt})}}catch(He){console.error(" CheckoutHome: Erreur rinitialisation position:",He)}t("/checkout"),console.log(" CheckoutHome: Navigation vers /checkout avec paramtres prservs")},H=()=>{d()},q=h(),Z=s.filter(se=>se.status==="A_TRAITER"),G=f.useMemo(()=>WI([...q,...Z]),[q,s]),K=()=>{const se=!!l.startTime;return console.log(" CheckoutHome hasCheckoutProgress:",{flowStateStartTime:l.startTime,hasStarted:se,result:se}),se},re=()=>{const se=(n==null?void 0:n.type)==="AGENT"||(n==null?void 0:n.type)==="GESTIONNAIRE";if(l.isCompleted)return se?" Mnage termin":" tat des lieux de sortie termin";if(se)return"Finaliser mon mnage";{const pe=K();return console.log(" CheckoutHome getCheckoutButtonText:",{hasProgress:pe,buttonText:pe?"Faire mon tat des lieux de sortie":"Commencer mon tat des lieux de sortie"}),pe?"Faire mon tat des lieux de sortie":"Commencer mon tat des lieux de sortie"}},ie=()=>{if(k!=null&&k.rapportID&&N){const pe=`https://app.checkeasy.co/${ot.BUBBLE_ENV}/rapport/${k.rapportID}`;console.log(" Ouverture du rapport:",pe),window.open(pe,"_blank")}else N||ht.info("Le rapport IA est en cours de gnration, veuillez patienter...")};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx("div",{className:"bg-background px-3 sm:px-4 py-2.5 sm:py-3",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"flex items-start justify-between mb-3 sm:mb-4 gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(gt,{variant:"page-title",children:R}),a.jsx(gt,{variant:"page-subtitle",className:"truncate",children:(D==null?void 0:D.address)||z}),T()&&a.jsx(gt,{variant:"caption",children:T()})]}),a.jsx("div",{className:"flex-shrink-0 hover:scale-105 transition-transform duration-300",children:a.jsx(ua,{user:n,size:"sm",onClick:()=>b(!0)})})]})})}),a.jsxs("div",{className:"max-w-md mx-auto px-3 sm:px-4 space-y-2.5 sm:space-y-3",children:[(A==="checkInAndCheckOut"||(k==null?void 0:k.completedAt))&&a.jsxs("div",{className:"space-y-2 py-2 animate-fade-in",children:[A==="checkInAndCheckOut"&&a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 border border-green-300 flex items-center justify-center flex-shrink-0",children:a.jsx(oi,{className:"h-3.5 w-3.5 text-green-600"})}),(k==null?void 0:k.completedAt)&&a.jsx("div",{className:"w-0.5 h-6 bg-green-200 my-1"})]}),a.jsxs("div",{className:"pb-2",children:[a.jsx("p",{className:"text-xs font-medium text-foreground",children:x()}),a.jsx("p",{className:"text-xs text-muted-foreground",children:j?a.jsxs(a.Fragment,{children:[new Date(((xe=j.progress)==null?void 0:xe.etatInitialCompletedAt)||j.createdAt).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})," - ",new Date(((le=j.progress)==null?void 0:le.etatInitialCompletedAt)||j.createdAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})]}):a.jsxs(a.Fragment,{children:["Heure prvue: ",D.checkIn]})})]})]}),(k==null?void 0:k.completedAt)&&a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex flex-col items-center",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 border border-green-300 flex items-center justify-center flex-shrink-0",children:a.jsx(oi,{className:"h-3.5 w-3.5 text-green-600"})})}),a.jsxs("div",{className:"pb-2",children:[a.jsx("p",{className:"text-xs font-medium text-foreground",children:w()}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[new Date(k.completedAt).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})," - ",new Date(k.completedAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})]})]})]})]}),a.jsxs(Gn,{children:[a.jsx(Js,{asChild:!0,children:a.jsx($e,{variant:"elevated",className:"cursor-pointer group animate-fade-in",children:a.jsxs(Lt,{className:"py-3",children:[a.jsxs($t,{className:"text-sm flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(oo,{className:"h-4 w-4 text-primary"}),"Informations utiles"]}),a.jsx(Zn,{className:"h-4 w-4 text-muted-foreground group-hover:translate-x-1 transition-transform duration-300"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[D.visibleSections.includes("adresse")&&a.jsxs(De,{variant:"outline",className:"text-xs flex items-center gap-1.5 justify-start",children:[a.jsx(La,{className:"h-3 w-3"}),"Adresse"]}),D.visibleSections.includes("wifi")&&a.jsxs(De,{variant:"outline",className:"text-xs flex items-center gap-1.5 justify-start",children:[a.jsx(hd,{className:"h-3 w-3"}),"WiFi"]}),D.visibleSections.includes("parking")&&a.jsxs(De,{variant:"outline",className:"text-xs flex items-center gap-1.5 justify-start",children:[a.jsx(dd,{className:"h-3 w-3"}),"Se garer"]}),D.visibleSections.includes("checkin-checkout")&&a.jsxs(De,{variant:"outline",className:"text-xs flex items-center gap-1.5 justify-start",children:[a.jsx(sa,{className:"h-3 w-3"}),"Check-in/out"]})]})]})})}),a.jsxs(On,{className:"max-w-sm max-h-[80vh] overflow-y-auto",children:[a.jsx(sr,{children:a.jsx(ar,{children:"Informations utiles"})}),a.jsx(jg,{propertyData:D})]})]}),a.jsx($g,{flowType:"checkout",children:a.jsx($e,{className:"border border-border/50 cursor-pointer hover:bg-muted/50 transition-colors",children:a.jsx(Lt,{className:"py-3",children:a.jsxs($t,{className:"text-sm flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(kt,{className:"h-4 w-4 text-primary"}),"Voir les pices"]}),a.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]})})})}),a.jsx(Ug,{flowType:"checkout",children:a.jsx($e,{className:"border border-border/50 cursor-pointer hover:bg-muted/50 transition-colors",children:a.jsx(Lt,{className:"py-3",children:a.jsxs($t,{className:"text-sm flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(si,{className:"h-4 w-4 text-primary"}),"Consigne pour le mnage"]}),a.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]})})})}),G>0&&a.jsx($e,{className:"border border-border/50 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>t("/signalements-a-traiter"),children:a.jsx(Lt,{className:"py-3",children:a.jsxs($t,{className:"text-sm flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_n,{className:"h-4 w-4 text-orange-500"}),"Signalements en cours",a.jsx(De,{variant:"destructive",className:"ml-2 text-xs",children:G})]}),a.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]})})}),a.jsx("div",{className:"h-32"})]}),E&&(k!=null&&k.rapportID)?a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-gradient-to-t from-background/95 via-background/90 to-transparent backdrop-blur-xl border-t border-white/20 shadow-floating animate-slide-up p-4 space-y-3 pb-safe",children:[a.jsx(GI,{isReady:N,onClick:ie,progress:I}),a.jsx("div",{className:"flex justify-center",children:a.jsx(Ci,{onClick:H,variant:"outline",size:"md"})})]}):a.jsx(Gd,{primaryAction:{label:re(),onClick:l.isCompleted?()=>{}:O,variant:l.isCompleted?"default":"cta",disabled:l.isCompleted&&!E},bottomText:{label:"Signaler un problme",onClick:H}}),a.jsx(ki,{isOpen:p,onClose:()=>b(!1),onLogout:()=>{}})]})},QI=()=>{var q,Z;Cn();const e=Ot(),t=bs(),{user:n}=cr(),{rooms:r,currentParcours:o,apiSignalements:s}=Sn(),{flowState:i,startCheckout:l,resetFlow:c}=Hd(),{flowState:u}=Xg(),{flowState:d}=lN(),{openReportModal:h}=ks(),{getPendingSignalements:m}=To(),{currentCheckId:p}=Kn(),[b,x]=f.useState(!1),[w,g]=f.useState(null),[v,y]=f.useState(!1),[k,C]=f.useState(0),N=Pt.extractUrlParams(e.search),S=N.parcoursId,I=N.checkId;ys(I),ws(S,"checkin"),f.useEffect(()=>{const G=async()=>{if(p){await new Promise(ie=>setTimeout(ie,500));const re=await Oe.getCheckSession(p);console.log(" CheckinHome: Session charge:",{checkId:p,status:re==null?void 0:re.status,rapportID:re==null?void 0:re.rapportID,isTerminated:(re==null?void 0:re.status)==="terminated"}),g(re)}};G();const K=()=>{document.visibilityState==="visible"&&(console.log(" CheckinHome: Page visible, rechargement session..."),G())};return document.addEventListener("visibilitychange",K),()=>document.removeEventListener("visibilitychange",K)},[p]),f.useEffect(()=>{const G=(w==null?void 0:w.status)==="terminated"&&(w==null?void 0:w.rapportID);if(console.log(" CheckinHome: Conditions de polling:",{checkSessionStatus:w==null?void 0:w.status,rapportID:w==null?void 0:w.rapportID,shouldPoll:G,isRapportReady:v,currentCheckId:p}),!G||v){console.log(" CheckinHome: Polling non dmarr:",{reason:G?"Rapport dj prt":"Conditions non remplies"});return}console.log(" CheckinHome: Dmarrage du polling pour vrifier le statut du rapport"),C(10);let K=0;const re=async()=>{if(!p){console.warn(" CheckinHome: currentCheckId manquant pour la vrification du rapport");return}K++,console.log(" CheckinHome: Vrification du statut du rapport pour checkId:",p,`(tentative ${K})`);const Y=await KI.isRapportReady(p);if(console.log(" CheckinHome: Rsultat de la vrification:",{ready:Y,pollCount:K}),Y)console.log(" CheckinHome: Rapport IA termin et prt  tre consult"),C(100),y(!0);else{const ne=Math.min(10+K*7,80);C(ne),console.log(" CheckinHome: Progression mise  jour:",{newProgress:ne,pollCount:K})}};re();const ie=setInterval(re,3e3);return()=>{console.log(" CheckinHome: Arrt du polling du statut du rapport"),clearInterval(ie)}},[w==null?void 0:w.status,w==null?void 0:w.rapportID,p,v]);const P=()=>{if(w!=null&&w.rapportID&&v){const K=`https://app.checkeasy.co/${ot.BUBBLE_ENV}/rapport/${w.rapportID}`;console.log(" Ouverture du rapport:",K),window.open(K,"_blank")}else v||ht.info("Le rapport IA est en cours de gnration, veuillez patienter...")},E=o!=null&&o.rawData?di(o.rawData):di(null),_=((q=o==null?void 0:o.rawData)==null?void 0:q.logementName)||"Logement",j=((Z=o==null?void 0:o.rawData)==null?void 0:Z.takePicture)||"",L=(n==null?void 0:n.type)==="AGENT"||(n==null?void 0:n.type)==="GESTIONNAIRE"?"Mnage en cours":(n==null?void 0:n.type)==="CLIENT"?j==="checkOutOnly"?"tat des lieux de sortie":j==="checkInOnly"?"Check-in en cours":"Sjour en cours":"Parcours en cours",D=()=>{if((n==null?void 0:n.type)==="AGENT"||(n==null?void 0:n.type)==="GESTIONNAIRE"){if(j==="checkOutOnly")return"Validation du mnage";if(j==="checkInOnly")return"Contrle de l'tat initial et validation du mnage";if(j==="checkInAndCheckOut")return"Contrle de l'tat initial et validation du mnage"}switch(j){case"checkInOnly":return"Photos  l'entre uniquement";case"checkOutOnly":return"Photos  la sortie uniquement";case"both":return"Photos  l'entre et  la sortie";default:return""}},z=()=>{h()},R=(()=>{var pe,ge;const G=n==null?void 0:n.type,K=o==null?void 0:o.rawData;if((w==null?void 0:w.status)==="terminated"&&(w!=null&&w.rapportID))return console.log(" CheckinHome: Session termine, affichage bouton rapport"),{label:v?" Voir mon rapport":" Rapport en cours...",action:P,icon:v?a.jsx(zl,{className:"h-4 w-4"}):a.jsx(Xb,{className:"h-4 w-4 animate-spin"}),disabled:!v};const re=((pe=w==null?void 0:w.progress)==null?void 0:pe.checkinCompleted)||((ge=w==null?void 0:w.progress)==null?void 0:ge.etatInitialCompleted),ie=(u==null?void 0:u.isCompleted)||(d==null?void 0:d.checkinCompleted)||re,Y=(i==null?void 0:i.isCompleted)||(d==null?void 0:d.checkoutCompleted);if(console.log(" CheckinHome: tat des flows:",{userType:G,takePicture:K==null?void 0:K.takePicture,isCheckinCompleted:ie,isCheckoutCompleted:Y,checkinFlowState:u==null?void 0:u.isCompleted,appFlowState:d==null?void 0:d.checkinCompleted,isCheckinCompletedFromSession:re,sessionStatus:w==null?void 0:w.status}),!K||!G)return{label:"Continuer mon tat des lieux",action:()=>t("/checkin"),icon:a.jsx(kt,{className:"h-4 w-4"})};const ne=G==="AGENT",xe=G==="GESTIONNAIRE",le=G==="CLIENT",se=K.takePicture==="checkInAndCheckOut";return ie&&se&&!Y?{label:le?"Commencer mon tat des lieux de sortie":"Commencer le contrle de sortie",action:()=>{console.log(" CheckinHome: CheckIn termin, navigation vers CheckOut"),l(),t("/checkout")}}:(ne||xe)&&se&&!ie?{label:"Commencer mon mnage",action:()=>t("/etat-initial"),icon:a.jsx(MT,{className:"h-4 w-4"})}:(ne||xe)&&K.takePicture==="checkOutOnly"?{label:"Finaliser mon mnage",action:async()=>{if(console.log(" CheckinHome: Finaliser mon mnage - Rinitialisation position premire pice"),l(),p)try{const We=await Oe.getCheckSession(p);if(We&&r.length>0){const Pe=[...r].sort((ze,we)=>ze.ordre-we.ordre)[0];console.log(" CheckinHome: Rinitialisation position:",{firstRoomId:Pe==null?void 0:Pe.id,firstRoomName:Pe==null?void 0:Pe.nom,ordre:Pe==null?void 0:Pe.ordre}),await Oe.saveCheckSession({...We,progress:{...We.progress,currentPieceId:Pe==null?void 0:Pe.id,currentTaskIndex:0}})}}catch(We){console.error(" CheckinHome: Erreur rinitialisation position:",We)}t("/checkout")},icon:a.jsx(ga,{className:"h-4 w-4"})}:le&&se&&!ie?{label:"Continuer mon tat des lieux d'entre",action:()=>t("/checkin"),icon:a.jsx(kt,{className:"h-4 w-4"})}:le&&K.takePicture==="checkInOnly"?{label:"Continuer mon check-in",action:()=>t("/checkin"),icon:a.jsx(kt,{className:"h-4 w-4"})}:le&&K.takePicture==="checkOutOnly"?{label:"Faire mon check out",action:()=>{l(),t("/checkout")},icon:a.jsx(ga,{className:"h-4 w-4"})}:{label:"Continuer mon tat des lieux",action:()=>t("/checkin"),icon:a.jsx(kt,{className:"h-4 w-4"})}})(),T=m(),O=s.filter(G=>G.status==="A_TRAITER"),H=f.useMemo(()=>WI([...T,...O]),[T,s]);return a.jsxs("div",{className:"min-h-screen bg-gradient-subtle max-w-md mx-auto",children:[a.jsx("div",{className:"bg-background px-3 sm:px-4 py-2.5 sm:py-3",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"flex items-start justify-between mb-3 sm:mb-4 gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(gt,{variant:"page-title",children:L}),a.jsx(gt,{variant:"page-subtitle",className:"truncate",children:(E==null?void 0:E.address)||_}),D()&&a.jsx(gt,{variant:"caption",children:D()})]}),a.jsx("div",{className:"flex-shrink-0 hover:scale-105 transition-transform duration-300",children:a.jsx(ua,{user:n,size:"sm",onClick:()=>x(!0)})})]})})}),a.jsxs("div",{className:"max-w-md mx-auto px-3 sm:px-4 space-y-2.5 sm:space-y-3",children:[((u==null?void 0:u.isCompleted)||(d==null?void 0:d.checkinCompleted))&&a.jsx($e,{variant:"glass",className:"border-green-200 bg-green-50/80 animate-fade-in",children:a.jsx(tt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(oi,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx(gt,{variant:"card-title",className:"text-green-800",children:"Check d'entre effectu"}),a.jsx("div",{className:"flex items-center gap-4 mt-1",children:a.jsx(gt,{variant:"caption",className:"text-green-600",children:w!=null&&w.createdAt?a.jsxs(a.Fragment,{children:["Heure d'arrive: ",new Date(w.createdAt).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]}):a.jsxs(a.Fragment,{children:["Heure d'arrive prvue: ",E.checkIn]})})})]})]})})}),a.jsxs(Gn,{children:[a.jsx(Js,{asChild:!0,children:a.jsx($e,{variant:"elevated",className:"cursor-pointer group animate-fade-in",children:a.jsxs(tt,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(gt,{variant:"card-title",className:"flex items-center gap-2 text-sm sm:text-sm",children:[a.jsx(oo,{className:"h-4 w-4 text-primary"}),"Informations utiles"]}),a.jsx(ga,{className:"h-4 w-4 text-muted-foreground group-hover:translate-x-1 transition-transform duration-300"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[E.visibleSections.includes("wifi")&&a.jsxs(De,{variant:"outline",className:"text-xs",children:[a.jsx(hd,{className:"h-3 w-3 mr-1"}),"WiFi"]}),E.visibleSections.includes("parking")&&a.jsxs(De,{variant:"outline",className:"text-xs",children:[a.jsx(dd,{className:"h-3 w-3 mr-1"}),"Parking"]}),E.visibleSections.includes("access")&&a.jsxs(De,{variant:"outline",className:"text-xs",children:[a.jsx(Op,{className:"h-3 w-3 mr-1"}),"Accs"]}),E.visibleSections.includes("checkin-checkout")&&a.jsxs(De,{variant:"outline",className:"text-xs",children:[a.jsx(sa,{className:"h-3 w-3 mr-1"}),"Horaires"]})]})]})})}),a.jsxs(On,{className:"max-w-sm max-h-[80vh] overflow-y-auto",children:[a.jsx(sr,{children:a.jsx(ar,{children:"Informations utiles"})}),a.jsx(jg,{propertyData:E})]})]}),a.jsx($g,{flowType:"checkin",children:a.jsx($e,{className:"border border-border/50 rounded-xl overflow-hidden bg-card cursor-pointer hover:bg-muted/50 transition-colors",children:a.jsx(tt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx(kt,{className:"h-4 w-4 text-primary"}),"Voir les pices"]}),a.jsx(ga,{className:"h-4 w-4 text-muted-foreground"})]})})})}),a.jsx(Ug,{flowType:"checkin",children:a.jsx($e,{className:"border border-border/50 rounded-xl overflow-hidden bg-card cursor-pointer hover:bg-muted/50 transition-colors",children:a.jsx(tt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx(si,{className:"h-4 w-4 text-primary"}),"Consigne pour le mnage"]}),a.jsx(ga,{className:"h-4 w-4 text-muted-foreground"})]})})})}),H>0&&a.jsx($e,{className:"border border-border/50 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>t("/signalements-a-traiter"),children:a.jsx(Lt,{className:"py-3",children:a.jsxs($t,{className:"text-sm flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_n,{className:"h-4 w-4 text-orange-500"}),"Signalements en cours",a.jsx(De,{variant:"destructive",className:"ml-2 text-xs",children:H})]}),a.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]})})}),a.jsx("div",{className:"h-32"})]}),(w==null?void 0:w.status)==="terminated"&&(w!=null&&w.rapportID)?a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-gradient-to-t from-background/95 via-background/90 to-transparent backdrop-blur-xl border-t border-white/20 shadow-floating animate-slide-up p-4 space-y-3 pb-safe",children:[a.jsx(GI,{isReady:v,onClick:P,progress:k}),a.jsx("div",{className:"flex justify-center",children:a.jsx(Ci,{onClick:z,variant:"outline",size:"md"})})]}):a.jsx(Gd,{primaryAction:{label:R.label,onClick:()=>{var G;console.log(" CheckinHome: Navigation CTA dynamique:",{label:R.label,checkId:p,userType:n==null?void 0:n.type,takePicture:(G=o==null?void 0:o.rawData)==null?void 0:G.takePicture}),R.action()},icon:R.icon,disabled:R.disabled},bottomText:{label:"Signaler un problme",onClick:z}}),a.jsx(ki,{isOpen:b,onClose:()=>x(!1),onLogout:()=>{}})]})},ic=f.forwardRef(({className:e,...t},n)=>a.jsx("textarea",{className:ke("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));ic.displayName="Textarea";const By="/assets/chambre-reference-2-Y9ogow8L.jpg",Wy="/assets/chambre-reference-3-hd5q8PyB.jpg",ZF="/assets/chambre-reference-new-Bbbdf_KV.jpg",Hy="/assets/salon-reference-D35SBCkT.jpg",Vy="/assets/salon-reference-2-Dejm-2jV.jpg",Zf="/assets/cuisine-reference-B3Ka30Mc.jpg",tv={chambre:{id:"chambre",nom:"Chambre",ordre:1,roomInfo:"Chambre principale avec lit double, placards intgrs et salle de bain attenante. Vrifier l'tat des draps, des serviettes et l'ordre gnral de la pice. Attention aux objets personnels qui pourraient avoir t oublis.",cleaningInfo:"Aspirer sol et tapis. Changer les draps et taies d'oreiller. Nettoyer surfaces (tables de chevet, commodes). Vrifier placards et tiroirs. Arer la pice. Contrler l'clairage et climatisation.",photoReferences:{checkin:[{tache_id:"photos-etat-entree-chambre",url:Wy,expected_orientation:"paysage",overlay_enabled:!0},{tache_id:"photos-etat-entree-chambre",url:By,expected_orientation:"portrait",overlay_enabled:!0},{tache_id:"photos-etat-entree-chambre",url:ZF,expected_orientation:"paysage",overlay_enabled:!0}],checkout:[{tache_id:"changer-draps",url:Wy,expected_orientation:"paysage",overlay_enabled:!0},{tache_id:"nettoyer-surfaces",url:By,expected_orientation:"portrait",overlay_enabled:!0}]}},salon:{id:"salon",nom:"Salon",ordre:2,roomInfo:"Salon spacieux avec canap en cuir et tlvision. Attention aux tlcommandes et objets de valeur sur la table basse. Plantes  arroser si sjour > 7 jours. Vrifier le fonctionnement des quipements lectroniques.",cleaningInfo:"Aspirateur sur tapis et moquette uniquement. Produit spcial cuir pour le canap. viter l'eau sur les appareils lectroniques. Dpoussirage dlicat des tagres. Nettoyer crans avec produit adapt.",photoReferences:{checkin:[{tache_id:"photos-etat-entree-salon",url:Hy,expected_orientation:"portrait",overlay_enabled:!0},{tache_id:"photos-etat-entree-salon",url:Vy,expected_orientation:"paysage",overlay_enabled:!0}],checkout:[{tache_id:"aspirer-salon",url:Hy,expected_orientation:"portrait",overlay_enabled:!0},{tache_id:"nettoyer-canape",url:Vy,expected_orientation:"paysage",overlay_enabled:!0}]}},cuisine:{id:"cuisine",nom:"Cuisine",ordre:3,roomInfo:"Cuisine quipe avec lectromnager intgr. Vrifier la propret du four et du rfrigrateur. Robinetterie sensible aux calcaires. Plan de travail en granit ncessitant des produits spcifiques.",cleaningInfo:"Produits anti-calcaire obligatoires pour robinetterie. Dgraissant pour la hotte aspirante. viter l'eau sur les prises lectriques. Nettoyer l'intrieur du micro-ondes et du rfrigrateur. Produit spcial granit pour le plan de travail.",photoReferences:{checkin:[{tache_id:"photo-etat-entree-cuisine",url:Zf,expected_orientation:"portrait",overlay_enabled:!0}],single:{tache_id:"photo-etat-entree-cuisine",url:Zf,expected_orientation:"portrait",overlay_enabled:!0},checkout:[{tache_id:"nettoyer-electromenager",url:Zf,expected_orientation:"portrait",overlay_enabled:!0}]}}},qy=(e,t)=>{const n=tv[e];if(!n)return[];switch(t){case"checkin":return e6(n);case"checkout":return t6(n);default:return[]}},e6=e=>{const t=[];switch(e.id){case"chambre":t.push({id:"photos-etat-entree-chambre",piece_id:e.id,ordre:1,type:"photo_multiple",label:" Photos tat d'entre - Chambre",description:"Prendre 3 photos de l'tat de la chambre  l'entre pour documenter l'tat initial.",completed:!1,total_photos_required:3,photos_done:0,photo_references:e.photoReferences.checkin});break;case"salon":t.push({id:"photos-etat-entree-salon",piece_id:e.id,ordre:1,type:"photo_multiple",label:" Photos tat d'entre - Salon",description:"Prendre 2 photos similaires aux photos de rfrence du salon pour documenter l'amnagement.",completed:!1,total_photos_required:2,photos_done:0,photo_references:e.photoReferences.checkin});break;case"cuisine":t.push({id:"photo-etat-entree-cuisine",piece_id:e.id,ordre:1,type:"photo_optional",label:" Photo tat d'entre - Cuisine",description:"Prendre 1 photo similaire  la photo de rfrence de la cuisine pour vrifier l'amnagement.",completed:!1,total_photos_required:1,photos_done:0,photo_reference:e.photoReferences.single});break}return t},t6=e=>{var n;const t=[];switch(e.id){case"chambre":t.push({id:"changer-draps",piece_id:e.id,ordre:1,type:"photo_required",label:"Changer draps & taies",description:"Parure propre, tire au carr.",completed:!1,total_photos_required:1,photos_done:0,photo_reference:(n=e.photoReferences.checkout)==null?void 0:n[0]},{id:"aspirer-sous-lit",piece_id:e.id,ordre:2,type:"checkbox",label:" Aspirer sous lit & meubles",description:"Aucune boule de poussire.",completed:!1},{id:"photos-chambre-similaires",piece_id:e.id,ordre:3,type:"photo_multiple",label:" Prendre les photos similaires",description:"Prendre 3 photos de la chambre sous diffrents angles une fois termine.",completed:!1,total_photos_required:3,photos_done:0,photo_references:e.photoReferences.checkin});break;case"salon":t.push({id:"photos-salon-similaires",piece_id:e.id,ordre:1,type:"photo_multiple",label:" Prendre les photos similaires",description:"Prendre 2 photos du salon sous diffrents angles.",completed:!1,total_photos_required:2,photos_done:0,photo_references:e.photoReferences.checkin});break;case"cuisine":t.push({id:"photo-cuisine",piece_id:e.id,ordre:1,type:"photo_optional",label:"Prendre une photo similaire",description:"Photo de contrle de la cuisine.",completed:!1,total_photos_required:1,photos_done:0,photo_reference:e.photoReferences.single});break}return t},n6=e=>tv[e],r6=()=>Object.values(tv).sort((e,t)=>e.ordre-t.ordre),o6=e=>{const t=f.useMemo(()=>r6(),[]),n=f.useMemo(()=>t.map(s=>{const i=qy(s.id,e),l=i.reduce((c,u)=>c+(u.total_photos_required||0),0);return{...s,status:"VIDE",tasks_total:i.length,tasks_done:0,photos_required:l,photos_done:0,tasks:i}}),[t,e]);return{rooms:t,pieces:n,getRoom:s=>n6(s),getRoomTasks:s=>qy(s,e)}},XI=()=>{var D;const e=Cn(),t=Ot(),n=bs(),{rooms:r}=o6("checkin"),{rooms:o}=Sn(),{addSignalement:s}=To(),{user:i}=cr(),l=Pt.extractUrlParams(t.search),c=l.parcoursId,u=l.checkId;ys(u),ws(c,"checkout");const d=o&&o.length>0?o:r,[h,m]=f.useState({}),[p,b]=f.useState(null),[x,w]=f.useState([]),[g,v]=f.useState(""),y=f.useRef(null),k=f.useRef(null),C=z=>new Promise((A,R)=>{const T=new FileReader;T.onloadend=()=>{const O=T.result,H=O.includes(",")?O.split(",")[1]:O;A(H)},T.onerror=R,T.readAsDataURL(z)}),N=(z,A)=>{if(A==="deplorable"){b(z),w([]),v("");return}m(R=>({...R,[z]:{id:z,state:A,photos:[],comment:""}}))},S=()=>{p&&(m(z=>({...z,[p]:{id:p,state:"deplorable",photos:x,comment:g}})),b(null),w([]),v(""))},I=z=>{if(z.target.files){const A=Array.from(z.target.files);w(R=>[...R,...A])}},P=z=>{w(A=>A.filter((R,T)=>T!==z))},E=()=>{var z;(z=y.current)==null||z.click()},_=()=>{var z;(z=k.current)==null||z.click()},j=d.every(z=>{const A=h[z.id];return!(!(A!=null&&A.state)||A.state==="deplorable"&&A.photos.length===0)}),L=async()=>{if(!j){const H=d.filter(Z=>{var G;return!((G=h[Z.id])!=null&&G.state)}),q=d.filter(Z=>{var G,K,re;return((G=h[Z.id])==null?void 0:G.state)==="deplorable"&&(!((K=h[Z.id])!=null&&K.photos)||((re=h[Z.id])==null?void 0:re.photos.length)===0)});if(H.length>0){ht.error("Veuillez indiquer l'tat de toutes les pices avant de continuer");return}if(q.length>0){ht.error("Au moins une photo est requise pour chaque pice avec un problme signal");return}}const A=Object.values(h).filter(H=>H.state==="deplorable");if(A.length>0&&i){console.log(" EtatInitial: Envoi des signalements dplorable  Bubble:",A.length);for(const H of A)try{const q=d.find(K=>K.id===H.id);if(!q)continue;let Z,G;if(H.photos.length>0){const K=H.photos[0];Z=await C(K),G=URL.createObjectURL(K)}s({roomId:H.id,piece:q.nom,etapeId:void 0,titre:`Problme signal - ${q.nom}`,commentaire:H.comment||"Problme constat lors du contrle initial",imgUrl:G,imgBase64:Z,flowType:"checkin",origine:i.type,status:"A_TRAITER",priorite:!0,typeSignalement:"Check in mnage"}),console.log(" EtatInitial: Signalement cr pour",q.nom)}catch(q){console.error(" EtatInitial: Erreur cration signalement:",q)}ht.success(`tat initial enregistr. ${A.length} pice(s) avec problme(s) signale(s).`)}else ht.success("tat initial enregistr. Toutes les pices sont en tat correct.");const T=Pt.extractUrlParams(t.search).checkId;if(T)try{const{checkSessionManager:H}=await Wt(async()=>{const{checkSessionManager:Z}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:Z}},void 0),q=await H.getCheckSession(T);q&&(await H.saveCheckSession({...q,progress:{...q.progress,etatInitialCompleted:!0,etatInitialCompletedAt:new Date().toISOString()}}),console.log(" EtatInitial: tat initial marqu comme complt dans la session"))}catch(H){console.error(" EtatInitial: Erreur sauvegarde tat initial:",H)}const O="/checkout-home";console.log(" EtatInitial: Navigation vers checkout-home aprs tat initial:",O),n(O)};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-2xl",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"mb-4 -ml-2",children:[a.jsx(xl,{className:"w-4 h-4 mr-2"}),"Retour"]}),a.jsx(gt,{variant:"page-title",as:"h1",className:"mb-2",children:"Contrle de l'tat initial de votre logement"}),a.jsx(gt,{variant:"page-subtitle",children:"Veuillez indiquer l'tat dans lequel le logement a t laiss par le voyageur avant de commencer le mnage."})]}),a.jsx("div",{className:"space-y-4 pb-24",children:d.map(z=>{const A=h[z.id];return a.jsx($e,{variant:"default",padding:"default",className:"transition-all duration-200",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{children:a.jsx(gt,{variant:"card-title",children:z.nom})}),a.jsxs("div",{className:"flex gap-2 w-full",children:[a.jsxs(fe,{variant:(A==null?void 0:A.state)==="correct"?"default":"outline",size:"sm",onClick:()=>N(z.id,"correct"),className:"flex-1 flex items-center justify-center gap-1",children:[a.jsx(dn,{className:"w-4 h-4"}),"tat correct"]}),a.jsxs(fe,{variant:(A==null?void 0:A.state)==="deplorable"?"destructive":"outline",size:"sm",onClick:()=>N(z.id,"deplorable"),className:"flex-1 flex items-center justify-center gap-1",children:[a.jsx(_n,{className:"w-4 h-4"}),"Signaler problme"]})]}),(A==null?void 0:A.state)==="deplorable"&&a.jsx("div",{className:"pt-4 border-t border-border",children:a.jsxs("div",{className:"flex gap-4",children:[A.photos.length>0&&a.jsxs("div",{className:"flex-shrink-0",children:[a.jsxs(gt,{variant:"body",className:"font-medium mb-2",children:["Photos (",A.photos.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 gap-2 w-24",children:A.photos.slice(0,4).map((R,T)=>a.jsx("img",{src:URL.createObjectURL(R),alt:`Photo ${T+1}`,className:"w-12 h-12 object-cover rounded border"},T))}),A.photos.length>4&&a.jsxs(gt,{variant:"body",className:"text-xs text-muted-foreground mt-1",children:["+",A.photos.length-4," autres"]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(gt,{variant:"body",className:"font-medium",children:"Commentaire"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>{b(z.id),w(A.photos),v(A.comment)},className:"text-xs h-6 px-2",children:"Modifier"})]}),A.comment?a.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-950/30 dark:to-red-950/30 border border-orange-200 dark:border-orange-800 rounded-lg text-sm leading-relaxed",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(_n,{className:"w-4 h-4 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-orange-900 dark:text-orange-100",children:A.comment})]})}):a.jsx("div",{className:"p-3 bg-muted/30 border border-dashed border-muted-foreground/30 rounded-lg text-sm text-muted-foreground italic",children:"Aucun commentaire ajout"})]})]})})]})},z.id)})})]}),a.jsx(Gn,{open:p!==null,onOpenChange:()=>b(null),children:a.jsxs(On,{className:"max-w-lg",children:[a.jsx(sr,{children:a.jsxs(ar,{children:["Signaler un problme - ",p?(D=d.find(z=>z.id===p))==null?void 0:D.nom:""]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(gt,{variant:"body",className:"font-medium mb-2",children:"Photos requises *"}),a.jsx("input",{ref:y,type:"file",multiple:!0,accept:"image/*",capture:"environment",onChange:I,className:"hidden"}),a.jsx("input",{ref:k,type:"file",multiple:!0,accept:"image/*",onChange:I,className:"hidden"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[a.jsxs(fe,{type:"button",variant:"outline",onClick:E,className:"flex items-center justify-center gap-2 h-12",children:[a.jsx(kt,{className:"w-5 h-5"}),a.jsx("span",{children:"Prendre une photo"})]}),a.jsxs(fe,{type:"button",variant:"outline",onClick:_,className:"flex items-center justify-center gap-2 h-12",children:[a.jsx(Jb,{className:"w-5 h-5"}),a.jsx("span",{children:"Choisir galerie"})]})]}),x.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:x.map((z,A)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:URL.createObjectURL(z),alt:`Photo ${A+1}`,className:"w-full h-20 object-cover rounded border"}),a.jsx("button",{onClick:()=>P(A),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(no,{className:"w-3 h-3"})})]},A))})]}),a.jsxs("div",{children:[a.jsx(gt,{variant:"body",className:"font-medium mb-2",children:"Commentaire (recommand)"}),a.jsx(ic,{value:g,onChange:z=>v(z.target.value),placeholder:"Dcrivez le problme constat...",className:"resize-none",rows:3})]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx(fe,{variant:"outline",onClick:()=>b(null),className:"flex-1",children:"Annuler"}),a.jsx(fe,{onClick:S,disabled:x.length===0,className:"flex-1",children:"Valider"})]})]})]})}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 max-w-2xl mx-auto bg-background/90 backdrop-blur-sm border-t border-border/30 shadow-[0_-2px_12px_-2px_rgba(0,0,0,0.08)] px-4 py-3 pb-4",children:a.jsx(fe,{onClick:L,disabled:!j,className:"w-full h-12 font-medium text-base rounded-xl transition-all duration-300",style:{backgroundColor:"#9C27B0"},children:"Valider et commencer le mnage"})})]})},s6=({question:e,response:t,onChange:n})=>{const[r,o]=f.useState(!1),s=V.useRef(null);V.useEffect(()=>{console.log(" ExitQuestionItem: Question reue:",{questionID:e.questionID,questionType:e.questionType,questionContent:e.questionContent,imageRequired:e.imageRequired})},[e]);const i=m=>{const p={questionID:e.questionID,questionContent:e.questionContent,questionType:e.questionType,checked:m,hasImage:(t==null?void 0:t.hasImage)||!1,imageBase64:t==null?void 0:t.imageBase64,imageUrl:t==null?void 0:t.imageUrl,imagePhotoId:t==null?void 0:t.imagePhotoId,timestamp:(t==null?void 0:t.timestamp)||new Date().toISOString(),updatedAt:new Date().toISOString()};n(p)},l=m=>{const p={questionID:e.questionID,questionContent:e.questionContent,questionType:e.questionType,textResponse:m,hasImage:(t==null?void 0:t.hasImage)||!1,imageBase64:t==null?void 0:t.imageBase64,imageUrl:t==null?void 0:t.imageUrl,imagePhotoId:t==null?void 0:t.imagePhotoId,timestamp:(t==null?void 0:t.timestamp)||new Date().toISOString(),updatedAt:new Date().toISOString()};n(p)},c=()=>{var m;console.log(" ExitQuestionItem: Ouverture slecteur fichier pour question:",e.questionID),(m=s.current)==null||m.click()},u=async m=>{var b;const p=(b=m.target.files)==null?void 0:b[0];if(!p){console.log(" Aucun fichier slectionn");return}console.log(" ExitQuestionItem: Fichier slectionn:",{name:p.name,size:p.size,type:p.type}),o(!0);try{const x=await new Promise((y,k)=>{const C=new FileReader;C.onloadend=()=>{const N=C.result,S=N.includes(",")?N.split(",")[1]:N;y(S)},C.onerror=k,C.readAsDataURL(p)}),w=at.generatePhotoId(),g=URL.createObjectURL(p);console.log(" Image convertie en base64:",{photoId:w,size:x.length,preview:x.substring(0,50)+"..."});const v={questionID:e.questionID,questionContent:e.questionContent,questionType:e.questionType,checked:t==null?void 0:t.checked,textResponse:t==null?void 0:t.textResponse,hasImage:!0,imageBase64:x,imageUrl:g,imagePhotoId:w,timestamp:(t==null?void 0:t.timestamp)||new Date().toISOString(),updatedAt:new Date().toISOString()};n(v)}catch(x){console.error(" ExitQuestionItem: Erreur conversion base64:",x)}finally{o(!1),s.current&&(s.current.value="")}},d=m=>{const p=m==null?void 0:m.toLowerCase().trim();return p==="yes"||p==="oui"||p==="true"},h=()=>{switch(console.log(" ExitQuestionItem: Rendu question type:",e.questionType),e.questionType){case"boolean":return a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:e.questionContent}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(fe,{onClick:()=>i(!0),variant:(t==null?void 0:t.checked)===!0?"default":"outline",className:`flex-1 h-9 text-sm font-medium transition-all duration-300 ${(t==null?void 0:t.checked)===!0?"bg-green-600 hover:bg-green-700 text-white hover:scale-[1.02] active:scale-[0.98]":"hover:bg-green-50 hover:border-green-300 hover:scale-[1.02] active:scale-[0.98]"}`,children:[(t==null?void 0:t.checked)===!0&&a.jsx(Fn,{className:"w-3 h-3 mr-1"}),"Oui"]}),a.jsxs(fe,{onClick:()=>i(!1),variant:(t==null?void 0:t.checked)===!1?"default":"outline",className:`flex-1 h-9 text-sm font-medium transition-all duration-300 ${(t==null?void 0:t.checked)===!1?"bg-red-600 hover:bg-red-700 text-white hover:scale-[1.02] active:scale-[0.98]":"hover:bg-red-50 hover:border-red-300 hover:scale-[1.02] active:scale-[0.98]"}`,children:[(t==null?void 0:t.checked)===!1&&a.jsx(Fn,{className:"w-3 h-3 mr-1"}),"Non"]})]}),d(e.imageRequired)&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{onClick:c,disabled:r,variant:t!=null&&t.hasImage?"outline":"default",className:"w-full h-9 gap-2 text-sm font-medium",children:[a.jsx(kt,{className:"w-3 h-3"}),r?"Traitement...":t!=null&&t.hasImage?" Photo prise - Changer":"Prendre une photo"]}),(t==null?void 0:t.hasImage)&&t.imageUrl&&a.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-green-500 shadow-card",children:[a.jsx("img",{src:t.imageUrl,alt:"Photo capture",className:"w-full h-48 object-cover"}),a.jsxs("div",{className:"absolute top-2 right-2 bg-green-500 text-white rounded-full px-3 py-1 text-xs font-semibold flex items-center gap-1 shadow-lg",children:[a.jsx(Fn,{className:"w-3 h-3"}),"Photo enregistre"]})]})]})]});case"text":return a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:e.questionContent}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(ic,{value:(t==null?void 0:t.textResponse)||"",onChange:m=>l(m.target.value),placeholder:"Saisissez votre rponse...",className:"min-h-[80px] resize-none text-sm"}),!d(e.imageRequired)&&a.jsx("div",{className:"flex justify-end",children:a.jsxs(fe,{onClick:c,disabled:r,variant:"ghost",size:"sm",className:"h-7 px-2 text-xs text-muted-foreground hover:text-foreground hover:bg-muted/50 gap-1",title:"Ajouter une image (optionnel)",children:[a.jsx(UT,{className:"w-3 h-3"}),r?"Traitement...":t!=null&&t.hasImage?" Image":"Ajouter image"]})})]}),!d(e.imageRequired)&&(t==null?void 0:t.hasImage)&&t.imageUrl&&a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-muted-foreground/30 shadow-sm",children:[a.jsx("img",{src:t.imageUrl,alt:"Image ajoute",className:"w-full h-32 object-cover"}),a.jsxs("div",{className:"absolute top-1 right-1 bg-primary/80 text-white rounded-full px-2 py-0.5 text-xs font-semibold flex items-center gap-1 shadow-md",children:[a.jsx(Fn,{className:"w-2.5 h-2.5"}),"Image"]})]}),d(e.imageRequired)&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{onClick:c,disabled:r,variant:t!=null&&t.hasImage?"outline":"default",className:"w-full h-9 gap-2 text-sm font-medium",children:[a.jsx(kt,{className:"w-3 h-3"}),r?"Traitement...":t!=null&&t.hasImage?" Photo prise - Changer":"Prendre une photo"]}),(t==null?void 0:t.hasImage)&&t.imageUrl&&a.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-green-500 shadow-card",children:[a.jsx("img",{src:t.imageUrl,alt:"Photo capture",className:"w-full h-48 object-cover"}),a.jsxs("div",{className:"absolute top-2 right-2 bg-green-500 text-white rounded-full px-3 py-1 text-xs font-semibold flex items-center gap-1 shadow-lg",children:[a.jsx(Fn,{className:"w-3 h-3"}),"Photo enregistre"]})]})]})]});case"image":return a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:e.questionContent}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(fe,{onClick:c,disabled:r,variant:t!=null&&t.hasImage?"outline":"default",className:"w-full h-9 gap-2 text-sm font-medium",children:[a.jsx(kt,{className:"w-3 h-3"}),r?"Traitement...":t!=null&&t.hasImage?" Photo prise - Changer":"Prendre une photo"]}),(t==null?void 0:t.hasImage)&&t.imageUrl&&a.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-green-500 shadow-card",children:[a.jsx("img",{src:t.imageUrl,alt:"Photo capture",className:"w-full h-32 object-cover"}),a.jsxs("div",{className:"absolute top-1 right-1 bg-green-500 text-white rounded-full px-2 py-0.5 text-xs font-semibold flex items-center gap-1 shadow-lg",children:[a.jsx(Fn,{className:"w-2.5 h-2.5"}),"Photo enregistre"]})]})]})]});default:return null}};return a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{ref:s,type:"file",accept:"image/*",capture:"environment",onChange:u,className:"hidden"}),h()]})},a6=({questions:e})=>{Cn();const t=Ot(),n=bs(),{currentCheckId:r}=Kn(),{user:o,logout:s}=cr(),[i,l]=f.useState({}),[c,u]=f.useState(!1),[d,h]=f.useState(!1),m=Pt.extractUrlParams(t.search),p=m.parcoursId,b=m.checkId;ys(b),ws(p,"checkout"),f.useEffect(()=>{(async()=>{try{const S=await at.getExitQuestionResponses();console.log(" ExitQuestionsPage: Rponses charges:",S),l(S)}catch(S){console.error(" ExitQuestionsPage: Erreur chargement rponses:",S)}})()},[]);const x=async N=>{console.log(" ExitQuestionsPage: Rponse modifie:",N),l(S=>({...S,[N.questionID]:N}));try{await at.trackExitQuestionResponse(N),console.log(" ExitQuestionsPage: Rponse sauvegarde")}catch(S){console.error(" ExitQuestionsPage: Erreur sauvegarde rponse:",S),ht.error("Erreur lors de la sauvegarde de la rponse")}},w=N=>{const S=N==null?void 0:N.toLowerCase().trim();return S==="yes"||S==="oui"||S==="true"},g=()=>e.every(N=>{const S=i[N.questionID];return N.questionType==="text"?!0:!(!S||N.questionType==="boolean"&&S.checked===void 0||N.questionType==="image"&&!S.hasImage||w(N.imageRequired)&&!S.hasImage)}),v=()=>{const N=e.filter(S=>{const I=i[S.questionID];return!I||S.questionType==="boolean"&&I.checked===void 0?!1:S.questionType==="text"?!0:!(S.questionType==="image"&&!I.hasImage||w(S.imageRequired)&&!I.hasImage)}).length;return Math.round(N/e.length*100)},y=async()=>{if(!g()){ht.error("Veuillez rpondre  toutes les questions avant de continuer");return}u(!0);try{await at.markExitQuestionsCompleted(),console.log(" ExitQuestionsPage: Questions de sortie compltes"),console.log(" ExitQuestionsPage: Envoi du webhook unifi...");const N=ht.loading(" Envoi du rapport en cours...");try{const{debugService:S}=await Wt(async()=>{const{debugService:P}=await Promise.resolve().then(()=>XF);return{debugService:P}},void 0),I=await S.sendUnifiedWebhook();if(I.success){if(console.log(" ExitQuestionsPage: Webhook envoy avec succs"),r){const{checkSessionManager:P}=await Wt(async()=>{const{checkSessionManager:E}=await Promise.resolve().then(()=>Pr);return{checkSessionManager:E}},void 0);await P.terminateCheckSession(r,I.rapportID),console.log(" Session termine avec rapportID:",I.rapportID),await new Promise(E=>setTimeout(E,500))}ht.dismiss(N),ht.success(" Rapport envoy avec succs !"),await new Promise(P=>setTimeout(P,1e3))}else console.error(" ExitQuestionsPage: Erreur webhook:",I.error),ht.dismiss(N),ht.warning("Questions enregistres, mais erreur lors de l'envoi du rapport")}catch(S){console.error(" ExitQuestionsPage: Erreur envoi webhook:",S),ht.dismiss(N),ht.warning("Questions enregistres, mais erreur lors de l'envoi du rapport")}n("/checkout-home")}catch(N){console.error(" ExitQuestionsPage: Erreur soumission:",N),ht.error("Erreur lors de la soumission des rponses")}finally{u(!1)}},k=()=>{n("/checkout-home")};v();const C=g();return a.jsxs("div",{className:"min-h-screen bg-gradient-subtle max-w-md mx-auto relative",children:[a.jsx("div",{className:"sticky top-0 z-50 bg-glass-bg/95 backdrop-blur-xl border-b border-white/20 shadow-elegant",children:a.jsxs("div",{className:"flex items-center justify-between py-2 px-4 bg-background",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:k,className:"hover:bg-white/20 transition-all duration-300 hover:scale-105",children:a.jsx(oo,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1 flex items-center justify-center gap-2 px-4",children:a.jsx("h1",{className:"text-base font-semibold text-foreground",children:" Questions de sortie"})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(De,{variant:"outline",className:"text-xs bg-primary/10 border-primary/20 text-primary animate-scale-in",children:[e.filter(N=>i[N.questionID]).length,"/",e.length]}),a.jsx("div",{className:"transition-transform duration-300 hover:scale-105",children:a.jsx(ua,{user:o,size:"sm",onClick:()=>h(!0)})})]})]})}),a.jsxs("div",{className:"p-4 space-y-3 py-2 pb-32",children:[a.jsx($e,{variant:"glass",className:"bg-white/70",children:a.jsx(tt,{className:"p-3",children:a.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Dernires vrifications avant de terminer le checkout"})})}),e.map((N,S)=>a.jsx($e,{variant:"glass",className:"bg-white/80 hover:shadow-floating hover:bg-white/90",children:a.jsx(tt,{className:"p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-primary/20 flex items-center justify-center text-primary font-semibold text-xs",children:S+1}),a.jsx("div",{className:"flex-1",children:a.jsx(s6,{question:N,response:i[N.questionID],onChange:x})})]})})},N.questionID)),!C&&a.jsx($e,{variant:"outline",className:"bg-amber-50 border-amber-200",children:a.jsx(tt,{className:"p-3",children:a.jsx("p",{className:"text-xs text-amber-800 text-center",children:" Veuillez rpondre  toutes les questions pour continuer"})})}),C&&a.jsx($e,{variant:"outline",className:"bg-green-50 border-green-200 animate-slide-up",children:a.jsx(tt,{className:"p-3",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(dn,{className:"h-4 w-4 text-green-600"}),a.jsx("p",{className:"text-xs text-green-800 font-medium",children:"Toutes les questions sont rpondues !"})]})})})]}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-background/95 backdrop-blur-xl border-t border-white/20 shadow-elegant p-4",children:a.jsx(fe,{variant:"cta",onClick:y,disabled:!C||c,className:`${C?"":"opacity-50 cursor-not-allowed"}`,children:c?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Enregistrement..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(dn,{className:"h-5 w-5"}),a.jsx("span",{children:"Terminer le checkout"}),a.jsx(ga,{className:"h-5 w-5"})]})})}),a.jsx(ki,{isOpen:d,onClose:()=>h(!1),onLogout:()=>{}})]})},JI=()=>{const e=Cn(),{currentParcours:t}=xs(),n=V.useMemo(()=>{var o;if(!((o=t==null?void 0:t.rawData)!=null&&o.questionSortie))return console.warn(" ExitQuestionsPageWrapper: Pas de questions de sortie dans le parcours"),[];const r=t.rawData.questionSortie;return console.log(" ExitQuestionsPageWrapper: Questions de sortie trouves:",r),r.map(s=>({questionID:s.questionID,questionContent:s.questionContent,questionType:s.questionType,imageRequired:s.imageRequired}))},[t]);return V.useEffect(()=>{n.length===0&&(console.warn(" ExitQuestionsPageWrapper: Aucune question, redirection vers checkout-home"),e("/checkout-home"))},[n,e]),n.length===0?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-gray-600",children:"Chargement des questions..."})})}):a.jsx(a6,{questions:n})};function ZI(){const e=Cn(),{toast:t}=pi(),{openReportModal:n}=ks(),{getPendingSignalements:r,resolveSignalement:o}=To(),{apiSignalements:s}=Sn(),{currentParcours:i}=xs(),[l,c]=f.useState(""),u=r(),h=[...f.useMemo(()=>{const g=s.filter(y=>y.status==="A_TRAITER"),v=[...u,...g];return Kd(v)},[u,s])].sort((g,v)=>g.priorite!==v.priorite?g.priorite?-1:1:new Date(v.created_at).getTime()-new Date(g.created_at).getTime()),m=g=>new Date(g).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),p=g=>{switch(g.toLowerCase()){case"voyageur":return"bg-blue-100 text-blue-700";case"agent de mnage":return"bg-green-100 text-green-700";case"gestionnaire":return"bg-orange-100 text-orange-700";case"historique":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}},b=g=>g.origine==="HISTORIQUE",x=g=>{l.trim()&&(t({title:"Commentaire ajout",description:"Votre commentaire a t enregistr"}),c(""))},w=g=>{o(g),t({title:"Signalement rsolu",description:"Le signalement a t marqu comme rsolu"})};return a.jsx("div",{className:"min-h-screen bg-background",children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx("div",{className:"bg-background px-4 py-6 border-b border-border/50",children:a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(fe,{variant:"ghost",size:"sm",className:"h-10 w-10 p-0",onClick:()=>e(-1),children:a.jsx(xl,{className:"h-5 w-5"})}),a.jsx("h1",{className:"text-lg font-semibold",children:"Signalement en cours"})]})}),a.jsx("div",{className:"p-4 space-y-4 pb-32",children:h.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(dn,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Aucun signalement  traiter"})]}):h.map(g=>a.jsx($e,{className:"border border-border/50",children:a.jsxs(tt,{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[g.priorite&&a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("h3",{className:"text-sm font-medium text-foreground",children:g.titre})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx("span",{children:g.piece}),a.jsx("span",{children:""}),a.jsx(De,{variant:"outline",className:`text-xs px-2 py-0.5 rounded-full ${p(g.origine)}`,children:g.origine})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(sa,{className:"h-3 w-3"}),a.jsx("span",{children:m(g.created_at)})]})]}),g.imgUrl&&a.jsx("div",{className:"flex gap-1 ml-3",children:a.jsx("div",{className:"w-12 h-12 rounded bg-muted overflow-hidden",children:a.jsx("img",{src:g.imgUrl,alt:"Signalement",className:"w-full h-full object-cover"})})})]}),b(g)?a.jsx("div",{className:"pt-2",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-purple-50 dark:bg-purple-950/20 p-2 rounded",children:[a.jsx($T,{className:"h-3 w-3"}),a.jsx("span",{children:"Signalement historique (lecture seule)"})]})}):a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsxs(Gn,{children:[a.jsx(Js,{asChild:!0,children:a.jsxs(fe,{variant:"outline",size:"sm",className:"flex-1",children:[a.jsx(WT,{className:"h-4 w-4 mr-1"}),"Commenter"]})}),a.jsxs(On,{className:"max-w-sm",children:[a.jsx(sr,{children:a.jsx(ar,{children:"Ajouter un commentaire"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(ic,{placeholder:"Votre commentaire...",value:l,onChange:v=>c(v.target.value),rows:3}),a.jsx(fe,{onClick:()=>x(g.id),className:"w-full h-12 font-medium text-base rounded-xl transition-all duration-300 bg-gradient-primary hover:shadow-glow hover:scale-[1.02] active:scale-[0.98] shadow-card",children:"Ajouter le commentaire"})]})]})]}),a.jsxs(fe,{variant:"default",size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>w(g.id),children:[a.jsx(dn,{className:"h-4 w-4 mr-1"}),"Rsolu"]})]})]})},g.id))}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-background/80 backdrop-blur-md border-t border-border/20 p-4 shadow-lg",children:a.jsx(Ci,{onClick:()=>n(),variant:"outline",size:"md",className:"w-full"})})]})})}function ej(){const e=Cn(),{signalements:t}=To(),{apiSignalements:n}=Sn(),{currentCheckId:r}=Kn(),o=f.useMemo(()=>{const d=[...t,...n];return Kd(d)},[t,n]),i=[...f.useMemo(()=>r?o.filter(d=>d.checkId?d.checkId===r?!1:d.status==="RESOLU":!0):o.filter(d=>d.status==="RESOLU"),[o,r])].sort((d,h)=>new Date(h.updated_at).getTime()-new Date(d.updated_at).getTime()),l=d=>new Date(d).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),c=d=>{switch(d.toLowerCase()){case"voyageur":return"bg-blue-100 text-blue-700";case"agent de mnage":return"bg-green-100 text-green-700";case"gestionnaire":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},u=d=>{console.log("Navigate to signalement detail:",d.id)};return a.jsx("div",{className:"min-h-screen bg-background",children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx("div",{className:"bg-background px-4 py-6 border-b border-border/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(fe,{variant:"ghost",size:"sm",className:"h-10 w-10 p-0",onClick:()=>e(-1),children:a.jsx(xl,{className:"h-5 w-5"})}),a.jsx("h1",{className:"text-lg font-semibold",children:"Historique - Signalements rsolus"})]})}),a.jsx("div",{className:"p-4 space-y-4",children:i.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(dn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Aucun signalement rsolu"})]}):i.map(d=>a.jsx($e,{className:"border border-border/50 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>u(d),children:a.jsx(tt,{className:"p-4 space-y-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dn,{className:"h-4 w-4 text-green-500"}),a.jsx("h3",{className:"text-sm font-medium text-foreground",children:d.titre})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx("span",{children:d.piece}),a.jsx("span",{children:""}),a.jsx(De,{variant:"outline",className:`text-xs px-2 py-0.5 rounded-full ${c(d.origine)}`,children:d.origine})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(sa,{className:"h-3 w-3"}),a.jsxs("span",{children:["Rsolu le ",l(d.updated_at)]})]})]}),d.imgUrl&&a.jsx("div",{className:"flex gap-1 ml-3",children:a.jsx("div",{className:"w-12 h-12 rounded bg-muted overflow-hidden",children:a.jsx("img",{src:d.imgUrl,alt:"Signalement",className:"w-full h-full object-cover"})})})]})})},d.id))})]})})}const tj=()=>{const e=Ot();return f.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},nj=()=>{const[e,t]=f.useState([]),[n,r]=f.useState({message:"Cliquez sur le bouton pour tester la mthode native iOS",type:"info"}),[o,s]=f.useState({message:'Cliquez sur "Dmarrer camra arrire" pour tester getUserMedia',type:"info"}),[i,l]=f.useState(!1),[c,u]=f.useState(!1),[d,h]=f.useState(null),[m,p]=f.useState(null),b=f.useRef(null),x=f.useRef(null),w=f.useRef(null),g=f.useCallback((j,L="info")=>{const D=new Date().toLocaleTimeString(),z={message:j,type:L,timestamp:D};t(A=>[...A,z]),console.log(`[${D}] ${j}`)},[]),v=f.useCallback(()=>{const j=navigator.userAgent,L=/iPad|iPhone|iPod/.test(j)&&!window.MSStream,D=/Android/.test(j),z=/Safari/.test(j)&&!/Chrome/.test(j),A=window!==window.top,R=window.navigator.standalone===!0;return g(" Environnement dtect:"),g(`   iOS: ${L}`),g(`   Android: ${D}`),g(`   Safari: ${z}`),g(`   Dans iFrame: ${A}`),g(`   PWA/Standalone: ${R}`),g(`   URL: ${window.location.href}`),{isIOS:L,isAndroid:D,isSafari:z,isInIframe:A,isStandalone:R}},[g]),y=f.useCallback(()=>{g(`
 === TEST 1: MTHODE NATIVE iOS ===`),r({message:"Test en cours...",type:"info"});try{const j=document.createElement("input");j.type="file",j.accept="image/*",j.setAttribute("capture","environment"),j.style.display="none",document.body.appendChild(j),g(' Cration input[capture="environment"]'),j.onchange=()=>{var D;const L=(D=j.files)==null?void 0:D[0];if(document.body.removeChild(j),L){g(" Photo prise avec succs !","success"),g(` Fichier: ${L.name}, Taille: ${(L.size/1024/1024).toFixed(2)}MB`);const z=URL.createObjectURL(L);p(z),r({message:" SUCCS: La camra arrire fonctionne via mthode native !",type:"success"})}else g(" Aucun fichier slectionn","warning"),r({message:" Aucune photo prise (annul par utilisateur)",type:"warning"})},j.onerror=L=>{g(" Erreur input file: "+L,"error"),r({message:" Erreur lors de l'ouverture de la camra native",type:"error"}),document.body.removeChild(j)},g(" Ouverture interface camra iOS..."),j.click()}catch(j){const L=j;g(` Erreur mthode native: ${L.message}`,"error"),r({message:` Erreur: ${L.message}`,type:"error"})}},[g]),k=f.useCallback(async j=>{var z;const L=j.getVideoTracks()[0],D=((z=L.getSettings)==null?void 0:z.call(L))||{};if(g(` Settings du track: ${JSON.stringify(D)}`),D.facingMode){const A=/environment|back/i.test(D.facingMode);return g(` FacingMode dtect: "${D.facingMode}"  ${A?"ARRIRE":"AVANT"}`),A}return g(" Impossible de dterminer le facingMode","warning"),!1},[g]),C=f.useCallback(async()=>{g(`
 === OUVERTURE CAMRA ARRIRE ROBUSTE ===`),g(' TAPE 1: Essai facingMode ideal "environment"');try{const A=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080}},audio:!1});if(g(" Stream obtenu avec facingMode ideal","success"),await k(A))return g(" SUCCS: Camra arrire confirme !","success"),A;g(" Stream obtenu mais pas la camra arrire","warning"),A.getTracks().forEach(R=>R.stop())}catch(A){g(` tape 1 choue: ${A.message}`,"warning")}g(" TAPE 2: Permission minimale + numration");let j;try{j=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),g(" Permission camra obtenue","success")}catch(A){const R=A;throw new Error("Permission camra refuse ou indisponible: "+R.message)}const D=(await navigator.mediaDevices.enumerateDevices()).filter(A=>A.kind==="videoinput");g(` ${D.length} camra(s) dtecte(s):`),D.forEach((A,R)=>{g(`  ${R+1}. "${A.label}" (${A.deviceId.substring(0,12)}...)`)}),g(" TAPE 3: Test par priorit de labels");const z=[{name:"Back/Rear/Environment",test:A=>/back|rear|environment/i.test(A.label)},{name:"Wide Angle",test:A=>/wide[- ]?angle/i.test(A.label)},{name:"Toutes les autres",test:()=>!0}];for(const{name:A,test:R}of z){const T=D.filter(R);if(T.length!==0){g(` Test catgorie "${A}": ${T.length} candidat(s)`);for(const O of T)try{g(`   Test "${O.label}"`);const H=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:O.deviceId}},audio:!1});if(await k(H))return j.getTracks().forEach(q=>q.stop()),g(" SUCCS: Camra arrire trouve !","success"),H;g(`   "${O.label}" n'est pas la camra arrire`),H.getTracks().forEach(q=>q.stop())}catch(H){const q=H;g(`   Erreur avec "${O.label}": ${q.message}`,"error")}}}return g(" TAPE 4: Vrification du stream initial"),await k(j)?(g(" Le stream initial tait dj la camra arrire !","success"),j):(g(" Aucune camra arrire trouve, retour du stream par dfaut","warning"),j)},[g,k]),N=f.useCallback(async()=>{var j,L;g(`
 === TEST 2: getUserMedia ROBUSTE ===`),s({message:"Dmarrage en cours...",type:"info"});try{const D=await C();if(w.current=D,b.current){b.current.srcObject=D,l(!0);try{await b.current.play(),g(" Vido en lecture","success")}catch(T){g(` Erreur video.play(): ${T.message}`,"warning")}}u(!0);const z=D.getVideoTracks()[0],A=((j=z.getSettings)==null?void 0:j.call(z))||{};g(`
 === INFORMATIONS FINALES DU STREAM ===`),g(` Label: ${z.label}`),g(` FacingMode: ${A.facingMode||"N/A"}`),g(` Rsolution: ${A.width}x${A.height}`),g(` DeviceId: ${(L=A.deviceId)==null?void 0:L.substring(0,15)}...`);const R=A.facingMode&&/environment|back/i.test(A.facingMode);s(R?{message:" SUCCS: Camra arrire active !",type:"success"}:{message:" Stream actif mais camra arrire non confirme",type:"warning"})}catch(D){const z=D;g(` Erreur getUserMedia robuste: ${z.message}`,"error"),s({message:` Erreur: ${z.message}`,type:"error"})}},[g,C]),S=f.useCallback(()=>{g(`
 === PRISE DE PHOTO ===`);const j=b.current,L=x.current;if(!j||!L)return;const D=j.videoWidth||1280,z=j.videoHeight||720;L.width=D,L.height=z;const A=L.getContext("2d");A&&(g(` Capture: ${D}x${z}`),A.drawImage(j,0,0,D,z),L.toBlob(R=>{if(!R){g(" Erreur cration blob","error");return}g(` Photo capture: ${(R.size/1024).toFixed(1)}KB`,"success");const T=URL.createObjectURL(R);h(T)},"image/jpeg",.95))},[g]),I=f.useCallback(()=>{g(`
 === ARRT CAMRA ===`),w.current&&(w.current.getTracks().forEach(j=>{j.stop(),g(` Track arrt: ${j.label}`)}),w.current=null),l(!1),u(!1),s({message:"Camra arrte",type:"info"})},[g]),P=f.useCallback(()=>{const j=e.map(L=>`[${L.timestamp}] ${L.message}`).join(`
`);navigator.clipboard.writeText(j).then(()=>{alert(" Logs copis dans le presse-papiers !")}).catch(()=>{const L=document.createElement("textarea");L.value=j,document.body.appendChild(L),L.select(),document.execCommand("copy"),document.body.removeChild(L),alert(" Logs copis ! (mthode fallback)")})},[e]);V.useEffect(()=>{g(" Page de test charge"),v(),g(`
 INSTRUCTIONS:`),g("1. Testez d'abord la mthode native iOS"),g("2. Si elle fonctionne, testez getUserMedia robuste"),g("3. Copiez tous les logs et envoyez-les moi")},[g,v]);const E=j=>{switch(j){case"success":return"bg-green-100 text-green-800 border-green-200";case"error":return"bg-red-100 text-red-800 border-red-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},_=j=>{switch(j){case"success":return"text-green-400";case"error":return"text-red-400";case"warning":return"text-yellow-400";default:return"text-green-300"}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 p-5",children:a.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl p-8 shadow-2xl",children:[a.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:" Test Camra Arrire iPhone"}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6 border-2 border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:" TEST 1: Mthode Native iOS (input capture)"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:[a.jsx("strong",{children:"But:"})," Tester si iOS peut ouvrir la camra arrire via l'interface native."]}),a.jsx("button",{onClick:y,className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-all duration-300 hover:scale-105 mb-4",children:" Prendre une photo (camra arrire)"}),a.jsx("div",{className:`p-4 rounded-lg border ${E(n.type)} mb-4`,children:n.message}),m&&a.jsx("img",{src:m,alt:"Photo native",className:"max-w-full rounded-lg shadow-lg"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6 border-2 border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:" TEST 2: getUserMedia Robuste (forage arrire)"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:[a.jsx("strong",{children:"But:"})," Forcer l'accs  la camra arrire via getUserMedia avec numration."]}),a.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[a.jsx("button",{onClick:N,className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-all duration-300 hover:scale-105",children:" Dmarrer camra arrire (robuste)"}),c&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:S,className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-all duration-300 hover:scale-105",children:" Prendre une photo"}),a.jsx("button",{onClick:I,className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-all duration-300 hover:scale-105",children:" Arrter"})]})]}),a.jsx("div",{className:`p-4 rounded-lg border ${E(o.type)} mb-4`,children:o.message}),i&&a.jsx("video",{ref:b,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full max-w-2xl rounded-lg shadow-lg bg-black"}),d&&a.jsx("img",{src:d,alt:"Photo capture",className:"max-w-full rounded-lg shadow-lg mt-4"})]}),a.jsx("div",{className:"text-center mb-6",children:a.jsx("button",{onClick:P,className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-all duration-300 hover:scale-105",children:" Copier tous les logs"})}),a.jsx("div",{className:"bg-black rounded-xl p-6 max-h-96 overflow-y-auto",children:a.jsx("div",{className:"font-mono text-sm",children:e.map((j,L)=>a.jsxs("div",{className:"mb-1",children:[a.jsxs("span",{className:"text-gray-400",children:["[",j.timestamp,"]"]})," ",a.jsx("span",{className:_(j.type),children:j.message})]},L))})}),a.jsx("canvas",{ref:x,className:"hidden"})]})})},i6=f.createContext(void 0),eh=[{pieceId:"chambre",taskIndex:0,stepNumber:1,totalSteps:3},{pieceId:"salon",taskIndex:0,stepNumber:2,totalSteps:3},{pieceId:"cuisine",taskIndex:0,stepNumber:3,totalSteps:3}],Gy=[{pieceId:"chambre",taskIndex:0,stepNumber:1,totalSteps:5},{pieceId:"chambre",taskIndex:1,stepNumber:2,totalSteps:5},{pieceId:"chambre",taskIndex:2,stepNumber:3,totalSteps:5},{pieceId:"salon",taskIndex:0,stepNumber:4,totalSteps:5},{pieceId:"cuisine",taskIndex:0,stepNumber:5,totalSteps:5}],l6=({children:e})=>{const[t,n]=f.useState(()=>({flowType:"checkin",currentStep:{...eh[0],flowType:"checkin"},isCompleted:!1,completedSteps:[],completedTasks:{},takenPhotos:{}})),r=()=>t.flowType==="checkin"?eh:Gy,o=x=>{n({flowType:x,currentStep:{...(x==="checkin"?eh:Gy)[0],flowType:x},isCompleted:!1,completedSteps:[],completedTasks:{},takenPhotos:{}})},s=()=>{const x=r(),w=x.findIndex(g=>g.pieceId===t.currentStep.pieceId&&g.taskIndex===t.currentStep.taskIndex);w<x.length-1?n(g=>({...g,currentStep:{...x[w+1],flowType:g.flowType}})):n(g=>({...g,isCompleted:!0,endTime:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}))},i=x=>{n(w=>({...w,completedSteps:[...w.completedSteps,x],completedTasks:{...w.completedTasks,[x]:!0}}))},l=(x,w=0)=>{const g=r(),v=g.findIndex(y=>y.pieceId===x&&y.taskIndex===w);v!==-1&&n(y=>({...y,currentStep:{...g[v],flowType:y.flowType}}))},c=(x,w)=>{const g=w.find(v=>v.id===x);return g!=null&&g.tasks?g.tasks.every(v=>t.completedTasks[v.id]):!1},u=(x,w)=>{const g=w.find(y=>y.id===x);return g!=null&&g.tasks?{completed:g.tasks.filter(y=>t.completedTasks[y.id]).length,total:g.tasks.length}:{completed:0,total:0}},d=x=>{const w=r(),g=t.currentStep.pieceId;c(g,x)&&(w.findIndex(y=>y.pieceId===t.currentStep.pieceId&&y.taskIndex===t.currentStep.taskIndex)<w.length-1?s():w.every(k=>{var S;const C=x.find(I=>I.id===k.pieceId),N=(S=C==null?void 0:C.tasks)==null?void 0:S[k.taskIndex];return N?t.completedTasks[N.id]:!1})&&n(k=>({...k,isCompleted:!0,endTime:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})))},h=()=>{n(x=>({...x,startTime:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}))},m=(x,w)=>{n(g=>({...g,takenPhotos:{...g.takenPhotos,[x]:w}}))},p=x=>t.takenPhotos[x]||[],b=()=>{const x=r();n({flowType:t.flowType,currentStep:{...x[0],flowType:t.flowType},isCompleted:!1,completedSteps:[],completedTasks:{},takenPhotos:{},startTime:void 0,endTime:void 0})};return a.jsx(i6.Provider,{value:{flowState:t,setFlowType:o,nextStep:s,completeStep:i,resetFlow:b,jumpToPiece:l,isPieceCompleted:c,getPieceProgress:u,checkAutoAdvancement:d,startFlow:h,addTakenPhotos:m,getTakenPhotos:p},children:e})},c6=({isOpen:e,onClose:t})=>{const[n,r]=f.useState(""),[o,s]=f.useState(null),[i,l]=f.useState(""),{addSignalement:c}=To(),{user:u}=cr(),{preselectedRoom:d}=ks(),{rooms:h}=Sn(),m=Ot(),p=m.pathname.includes("checkin")?"checkin":"checkout";console.log(" ReportProblemModal: Pices disponibles:",h==null?void 0:h.map(g=>({id:g.id,nom:g.nom}))),console.log(" ReportProblemModal: FlowType dtect:",p,"(pathname:",m.pathname,")"),f.useEffect(()=>{if(e&&d){const g=h==null?void 0:h.find(v=>v.nom===d);g&&(console.log(" ReportProblemModal: Pr-slection de la pice:",{nom:d,id:g.id}),l(g.id))}},[e,d,h]);const b=g=>{var y;const v=(y=g.target.files)==null?void 0:y[0];v&&s(v)},x=async()=>{if(!n.trim()){ht.error("Veuillez dcrire le problme rencontr");return}if(!i){ht.error("Veuillez slectionner une pice");return}if(!u){ht.error("Utilisateur non connect");return}const g=h==null?void 0:h.find(k=>k.id===i);if(!g){ht.error("Pice introuvable");return}console.log(" ReportProblemModal: Cration du signalement:",{piece:g.nom,roomId:i,commentaire:n,flowType:p,hasImage:!!o});let v,y;if(o)try{const k=await new Promise((C,N)=>{const S=new FileReader;S.onloadend=()=>{const I=S.result,P=I.includes(",")?I.split(",")[1]:I;C(P)},S.onerror=N,S.readAsDataURL(o)});v=k,y=URL.createObjectURL(o),console.log(" Image convertie en base64:",{size:k.length,preview:k.substring(0,50)+"..."})}catch(k){console.error(" Erreur conversion base64:",k),ht.error("Erreur lors du traitement de l'image");return}c({roomId:i,piece:g.nom,etapeId:void 0,titre:n.length>50?n.substring(0,50)+"...":n,commentaire:n,imgUrl:y,imgBase64:v,flowType:p,origine:u.type,status:"A_TRAITER",priorite:!1,typeSignalement:"Technique"}),ht.success("Signalement envoy avec succs"),r(""),s(null),l(""),t()},w=()=>{r(""),s(null),l(""),t()};return a.jsx(Gn,{open:e,onOpenChange:w,children:a.jsxs(On,{className:"max-w-sm mx-auto bg-white rounded-2xl shadow-xl border-0",children:[a.jsxs(sr,{children:[a.jsx(ar,{className:"text-lg font-semibold text-gray-900 text-left",children:"Signaler un problme"}),a.jsx("p",{className:"text-sm text-gray-600 text-left mt-2",children:"Vous rencontrez un problme sur votre parcours ?"})]}),a.jsxs("div",{className:"space-y-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-900 block mb-2",children:"Dans quelle pice ?"}),a.jsxs(cI,{value:i,onValueChange:l,children:[a.jsx(Gg,{className:"border-2 border-pink-200 focus:border-pink-400 rounded-lg",children:a.jsx(uI,{placeholder:"Slectionner une pice"})}),a.jsx(Kg,{children:(h==null?void 0:h.map(g=>a.jsx(Wu,{value:g.id,children:g.nom},g.id)))||a.jsx(Wu,{value:"chambre",children:"Chambre"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-900 block mb-2",children:"Racontez-nous"}),a.jsx(ic,{placeholder:"Dcrivez le problme rencontr...",value:n,onChange:g=>r(g.target.value),className:"min-h-[100px] border-2 border-pink-200 focus:border-pink-400 rounded-lg resize-none",rows:4})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",id:"image-upload"}),a.jsxs("label",{htmlFor:"image-upload",className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer hover:text-gray-800 transition-colors",children:[a.jsx(kt,{className:"h-4 w-4"}),"Ajouter une image",o&&a.jsxs("span",{className:"text-purple-600 font-medium",children:["(",o.name,")"]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx(fe,{variant:"outline",onClick:w,className:"flex-1 h-12 rounded-xl border-gray-200 text-gray-600 hover:bg-gray-50",children:"Retour"}),a.jsx(fe,{onClick:x,className:"flex-1 h-12 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-medium",children:"Signaler"})]})]})]})})},ln=({children:e})=>{const{isAuthenticated:t}=cr(),n=Ot();if(!t){const r=new URLSearchParams(n.search),o=r.has("checkid"),s=r.has("parcours");return o&&s?(console.log(" ProtectedRoute: Redirection vers /welcome avec prservation des paramtres"),a.jsx(ty,{to:`/welcome${n.search}`,replace:!0})):a.jsx(ty,{to:"/welcome",replace:!0})}return a.jsx(a.Fragment,{children:e})},th="checkeasy_url_params",Ky="checkeasy_last_path";class u6{saveCurrentUrlParams(){try{const t=new URLSearchParams(window.location.search),n=t.get("parcours");let r=t.get("checkid");const o=window.location.pathname;if(!r){const s=localStorage.getItem("activeCheckId");s&&(r=s,console.log(" Using activeCheckId from localStorage:",s))}if(n||r){const s={parcours:n||void 0,checkid:r||void 0,path:o,timestamp:Date.now()};localStorage.setItem(th,JSON.stringify(s)),localStorage.setItem(Ky,o),console.log(" URL params saved to localStorage:",s)}}catch(t){console.error(" Error saving URL params:",t)}}getSavedUrlParams(){try{const t=localStorage.getItem(th);if(!t)return null;const n=JSON.parse(t),r=24*60*60*1e3;return n.timestamp&&Date.now()-n.timestamp>r?(console.log(" Saved URL params are too old, ignoring"),this.clearSavedParams(),null):n}catch(t){return console.error(" Error reading saved URL params:",t),null}}restoreUrlParamsIfMissing(){try{const t=new URLSearchParams(window.location.search),n=t.get("parcours"),r=t.get("checkid");if(n&&!r)return console.log(" NEW SESSION DETECTED: URL has parcours but no checkid"),console.log("    User wants to start a fresh session, NOT restoring checkid"),this.saveCurrentUrlParams(),!1;if(n&&r)return console.log(" URL params already present, no restoration needed"),this.saveCurrentUrlParams(),!1;const o=this.getSavedUrlParams(),s=localStorage.getItem("activeCheckId");if(!o&&!s)return console.log(" No saved URL params to restore"),!1;const i=new URLSearchParams(window.location.search);let l=!1;if(!n&&(o!=null&&o.parcours)&&(i.set("parcours",o.parcours),l=!0,console.log(" Restored parcours param:",o.parcours)),!n&&!r&&l){const c=(o==null?void 0:o.checkid)||s;c&&(i.set("checkid",c),console.log(" Restored checkid param:",c,o!=null&&o.checkid?"(from saved params)":"(from activeCheckId)"))}if(l){const c=`${window.location.pathname}?${i.toString()}`;return window.history.replaceState({},"",c),console.log(" URL params restored:",c),!0}return!1}catch(t){return console.error(" Error restoring URL params:",t),!1}}clearSavedParams(){try{localStorage.removeItem(th),localStorage.removeItem(Ky),console.log(" Saved URL params cleared")}catch(t){console.error(" Error clearing saved URL params:",t)}}getParam(t){const r=new URLSearchParams(window.location.search).get(t);if(r)return r;const o=this.getSavedUrlParams();return(o==null?void 0:o[t])||null}getCurrentState(){const t=new URLSearchParams(window.location.search),n=this.getSavedUrlParams(),r=localStorage.getItem("activeCheckId");return{hasParcoursInUrl:!!t.get("parcours"),hasCheckidInUrl:!!t.get("checkid"),hasParcoursInStorage:!!(n!=null&&n.parcours),hasCheckidInStorage:!!(n!=null&&n.checkid||r),canRestore:!!(n!=null&&n.parcours||n!=null&&n.checkid||r)}}initialize(){console.log(" Initializing URL persistence service"),this.restoreUrlParamsIfMissing()||this.saveCurrentUrlParams(),this.setupUrlChangeListener()}setupUrlChangeListener(){let t=window.location.href;setInterval(()=>{const r=window.location.href;r!==t&&(t=r,this.saveCurrentUrlParams())},500),window.addEventListener("popstate",()=>{this.saveCurrentUrlParams()})}}const nh=new u6,d6=()=>{const e=Ot(),t=Cn(),[n,r]=f.useState(0),[o,s]=f.useState(!1),i=3;return f.useEffect(()=>{if(o||n>=i)return;console.log(" UrlParamRestoration: Component mounted",{attempt:n+1,maxAttempts:i,currentPath:e.pathname,currentSearch:e.search}),s(!0);try{nh.initialize()}catch(m){console.error(" UrlParamRestoration: Erreur initialisation service:",m),s(!1);return}const l=nh.getCurrentState();console.log(" URL Param State:",{...l,attempt:n+1});const c=new URLSearchParams(window.location.search),u=!!c.get("parcours"),d=!!c.get("checkid");if(u&&!d){console.log(" NEW SESSION: URL has parcours but no checkid"),console.log("    Not restoring checkid, user wants to start fresh");return}(async()=>{try{if(!l.hasParcoursInUrl||!l.hasCheckidInUrl)if(l.canRestore){if(console.log(" Attempting to restore missing URL params...",{hasParcoursInUrl:l.hasParcoursInUrl,hasCheckidInUrl:l.hasCheckidInUrl,canRestore:l.canRestore}),nh.restoreUrlParamsIfMissing()){console.log(" URL params restored successfully"),await new Promise(b=>setTimeout(b,100));const p=window.location.search;p!==e.search&&(console.log(" Navigating to updated URL:",e.pathname+p),t(e.pathname+p,{replace:!0}))}else if(console.log(" URL params restoration failed"),n<i-1){console.log(" Retrying URL restoration in 1s..."),setTimeout(()=>{r(p=>p+1),s(!1)},1e3);return}}else console.log(" No saved params available to restore");else console.log(" All URL params present")}catch(m){if(console.error(" UrlParamRestoration: Erreur during restoration:",m),n<i-1){console.log(" Retrying after error in 1s..."),setTimeout(()=>{r(p=>p+1),s(!1)},1e3);return}}finally{s(!1)}})()},[e.pathname,e.search,n,o]),null},f6=()=>{const e=Ot(),t=Cn(),{isAuthenticated:n}=cr(),[r,o]=f.useState(!1),[s,i]=f.useState(0),l=3;return f.useEffect(()=>{if(console.log(" RouteRestoration: useEffect triggered",{currentPath:e.pathname,currentSearch:e.search,isAuthenticated:n,hasAttemptedRestore:r,restorationAttempts:s,maxRestorationAttempts:l}),!n){console.log(" RouteRestoration: Waiting for authentication...");return}if(r){console.log(" RouteRestoration: Already attempted restore, skipping");return}if(s>=l){console.log(" RouteRestoration: Max attempts reached, stopping");return}console.log(" RouteRestoration: Starting restoration process",{currentPath:e.pathname,currentSearch:e.search,isAuthenticated:n,attempt:s+1,maxAttempts:l});const c=Pt.extractUrlParams(e.search),u=!!c.parcoursId,d=!!c.checkId;if(u&&!d){console.log(" NEW SESSION: URL has parcours but no checkid"),console.log("    User wants to start fresh, NOT restoring previous route"),o(!0);return}const h=localStorage.getItem("checkeasy_last_path"),m=localStorage.getItem("checkeasy_url_params"),p=localStorage.getItem("activeCheckId");let b=null;try{if(m){b=JSON.parse(m);const g=Date.now(),v=b.timestamp||0;if((g-v)/(1e3*60*60)>24){console.log(" RouteRestoration: Donnes sauvegardes expires (>24h)"),localStorage.removeItem("checkeasy_url_params"),localStorage.removeItem("checkeasy_last_path"),o(!0);return}}}catch(g){console.error(" RouteRestoration: Erreur parsing savedParams:",g),localStorage.removeItem("checkeasy_url_params")}if(!h&&!p){console.log(" RouteRestoration: No saved path or active checkId to restore"),o(!0);return}const x=e.pathname,w=e.search;if(console.log(" RouteRestoration: tat de restauration:",{savedPath:h,currentPath:x,activeCheckId:p,hasSavedParams:!!b,currentSearch:w,attempt:s+1}),console.log(" RouteRestoration: Checking redirection conditions:",{currentPath:x,hasCheckid:d,savedPath:h,activeCheckId:p,shouldRedirect:x==="/welcome"&&d}),x==="/welcome"&&d?(console.log(" RouteRestoration: Conditions met! Attempting restoration:",{savedPath:h,hasCheckid:d,activeCheckId:p}),(async()=>{var _;i(j=>j+1);let v=h,y=!1,k=null;if(p)try{const j=await Oe.getCheckSession(p);if(!j){console.warn(" RouteRestoration: Session non trouve, nettoyage localStorage"),localStorage.removeItem("activeCheckId"),localStorage.removeItem("checkeasy_last_path"),localStorage.removeItem("checkeasy_url_params"),o(!0);return}y=!0,k=j,console.log(" RouteRestoration: Session valide:",{checkId:j.checkId,flowType:j.flowType,status:j.status,hasProgress:!!((_=j.progress)!=null&&_.currentPieceId),rapportID:j.rapportID}),h&&Pt.isRouteAllowed(h,j)?(v=h,console.log(" RouteRestoration: savedPath est autoris, conservation:",{savedPath:h,sessionStatus:j.status,flowType:j.flowType})):(v=Pt.getCorrectRouteForSession(j),console.log(" RouteRestoration: savedPath non autoris, route dtermine par NavigationStateManager:",{savedPath:h,finalPath:v,sessionStatus:j.status,flowType:j.flowType}))}catch(j){if(console.error(" RouteRestoration: Erreur validation session:",j),s<l-1){console.log(" RouteRestoration: Retry validation in 1s..."),setTimeout(()=>{},1e3);return}}(!v||v==="/welcome")&&(y&&k?(v=Pt.getCorrectRouteForSession(k),console.log(" RouteRestoration: savedPath tait /welcome, redirection intelligente base sur session:",{flowType:k.flowType,status:k.status,finalPath:v})):(v="/checkin-home",console.log(" RouteRestoration: Pas de session, redirection par dfaut vers:",v)));const C=Pt.extractUrlParams(e.search),N=C.parcoursId,S=C.checkId,I=N||(b==null?void 0:b.parcours)||"",P=S||p||"",E=Pt.buildUrl(v,I,P);console.log(" RouteRestoration: Navigation finale:",{targetUrl:E,sessionValidated:y,attempt:s,finalPath:v,originalSavedPath:h}),o(!0),t(E,{replace:!0})})()):(console.log(" RouteRestoration: Redirection conditions NOT met:",{currentPath:x,isWelcome:x==="/welcome",hasCheckid:d,reason:d?"Unknown reason":"No checkid in URL"}),o(!0)),x!=="/welcome"){if(console.log(" RouteRestoration: Already on correct route:",x),!w&&m&&d)try{const g=JSON.parse(m),v=localStorage.getItem("activeCheckId"),y=g.parcours||"",k=v||"";if(y||k){const C=Pt.buildUrl(x,y,k);console.log(" RouteRestoration: Adding missing params:",C),t(C,{replace:!0})}}catch(g){console.error(" RouteRestoration: Error restoring params:",g)}o(!0)}else console.log(" RouteRestoration: Staying on /welcome page"),o(!0)},[n,r,e.pathname,e.search,t]),null},h6=new SO;if(typeof window<"u"){console.log(" Initialisation des polyfills camra...");const e=mI();e.success||console.error(" Erreurs lors de l'initialisation des polyfills:",e.errors)}const m6=()=>{const t=Ot().pathname.split("/").filter(Boolean),n=["en","fr","es","de","pt","ar"],r=t[0],s=n.includes(r)?"/"+t.slice(1).join("/"):"/"+t.join("/");return console.log(` Route avec langue: ${r}, path: ${s}`),s==="/"||s===""?a.jsx(ln,{children:a.jsx(IN,{})}):s==="/welcome"?a.jsx($1,{}):s==="/checkout"?a.jsx(ln,{children:a.jsx(HI,{})}):s==="/checkout-home"?a.jsx(ln,{children:a.jsx(YI,{})}):s==="/exit-questions"?a.jsx(ln,{children:a.jsx(JI,{})}):s==="/etat-initial"?a.jsx(ln,{children:a.jsx(XI,{})}):s==="/checkin"?a.jsx(ln,{children:a.jsx(qI,{})}):s==="/checkin-home"?a.jsx(ln,{children:a.jsx(QI,{})}):s==="/signalements-a-traiter"?a.jsx(ln,{children:a.jsx(ZI,{})}):s==="/signalements-historique"?a.jsx(ln,{children:a.jsx(ej,{})}):s==="/camera-test"?a.jsx(nj,{}):a.jsx(tj,{})},p6=({children:e,lang:t})=>{const r=Ot().pathname.split("/").filter(Boolean),o=["en","fr","es","de","pt","ar"],s=r[0],i=o.includes(s);return f.useEffect(()=>{i&&(localStorage.setItem("weglot_language",s),sessionStorage.setItem("weglot_language",s),console.log(` Langue dtecte: ${s}`))},[s,i]),a.jsx(a.Fragment,{children:e})},g6=()=>{const{isOpen:e,closeReportModal:t}=ks();return bD(),wD(),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-50",children:a.jsx(BM,{})}),a.jsx(d6,{}),a.jsx(f6,{}),a.jsx(WM,{children:a.jsxs(gD,{children:[a.jsx(Ln,{path:"/",element:a.jsx(ln,{children:a.jsx(IN,{})})}),a.jsx(Ln,{path:"/welcome",element:a.jsx($1,{})}),a.jsx(Ln,{path:"/checkout",element:a.jsx(ln,{children:a.jsx(HI,{})})}),a.jsx(Ln,{path:"/checkout-home",element:a.jsx(ln,{children:a.jsx(YI,{})})}),a.jsx(Ln,{path:"/exit-questions",element:a.jsx(ln,{children:a.jsx(JI,{})})}),a.jsx(Ln,{path:"/etat-initial",element:a.jsx(ln,{children:a.jsx(XI,{})})}),a.jsx(Ln,{path:"/checkin",element:a.jsx(ln,{children:a.jsx(qI,{})})}),a.jsx(Ln,{path:"/checkin-home",element:a.jsx(ln,{children:a.jsx(QI,{})})}),a.jsx(Ln,{path:"/signalements-a-traiter",element:a.jsx(ln,{children:a.jsx(ZI,{})})}),a.jsx(Ln,{path:"/signalements-historique",element:a.jsx(ln,{children:a.jsx(ej,{})})}),a.jsx(Ln,{path:"/camera-test",element:a.jsx(nj,{})}),a.jsx(Ln,{path:"/:lang/*",element:a.jsx(p6,{lang:"",children:a.jsx(m6,{})})}),a.jsx(Ln,{path:"*",element:a.jsx(tj,{})})]})}),a.jsx(c6,{isOpen:e,onClose:t})]})},v6=()=>a.jsx(IO,{client:h6,children:a.jsx(B5,{children:a.jsx(W5,{children:a.jsx(yD,{children:a.jsx(q5,{children:a.jsx(B$,{children:a.jsx(l6,{children:a.jsx(IF,{children:a.jsx(jF,{children:a.jsx(V$,{children:a.jsx(z$,{children:a.jsxs(X_,{children:[a.jsx(A2,{}),a.jsx(hR,{}),a.jsx(g6,{})]})})})})})})})})})})})}),rj="checkSessionData",oj="checkSessions_migrated_to_indexeddb",x6=()=>{try{return localStorage.getItem(oj)==="true"}catch{return!1}},Yy=()=>{try{localStorage.setItem(oj,"true")}catch(e){console.error(" Erreur marquage migration:",e)}},y6=()=>{try{const e=localStorage.getItem(rj);if(!e)return{};const t=JSON.parse(e);return console.log(" Sessions legacy trouves:",Object.keys(t).length),t}catch(e){return console.error(" Erreur lecture sessions legacy:",e),{}}},w6=e=>{var t;return{checkId:e.checkId,userId:e.userId,parcoursId:e.parcoursId,flowType:e.flowType,status:e.status,isFlowCompleted:e.isFlowCompleted,createdAt:e.createdAt,lastActiveAt:e.lastActiveAt,completedAt:e.completedAt,progress:{currentPieceId:"",currentTaskIndex:0,interactions:((t=e.progress)==null?void 0:t.interactions)||{}}}},b6=async()=>{if(console.log(" Dbut migration CheckSessions vers IndexedDB..."),x6())return console.log(" Migration dj effectue, skip"),{success:!0,migrated:0,errors:0};let e=0,t=0;try{const n=y6(),r=Object.keys(n);if(r.length===0)return console.log(" Aucune session legacy  migrer"),Yy(),{success:!0,migrated:0,errors:0};console.log(` ${r.length} sessions  migrer...`);for(const o of r)try{const s=n[o],i=w6(s);await Oe.saveCheckSession(i),e++,console.log(` Session migre: ${o}`)}catch(s){t++,console.error(` Erreur migration session ${o}:`,s)}if(Yy(),console.log(` Migration termine: ${e} russies, ${t} erreurs`),e>0&&t===0)try{localStorage.setItem("checkSessionData_backup",localStorage.getItem(rj)||"{}"),console.log(" Backup cr dans localStorage")}catch(o){console.error(" Impossible de crer le backup:",o)}return{success:t===0,migrated:e,errors:t}}catch(n){return console.error(" Erreur fatale migration:",n),{success:!1,migrated:e,errors:t+1}}};b6().then(e=>{e.success?console.log(" Migration CheckSessions termine:",e):console.warn(" Migration CheckSessions avec erreurs:",e)}).catch(e=>{console.error(" Erreur migration CheckSessions:",e)});yb(document.getElementById("root")).render(a.jsx(v6,{}));
